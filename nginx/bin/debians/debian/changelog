nginx (1.18.0-1.yandex.71) trusty; urgency=medium

  * STRM: packager: ya style
  * STRM-5729: packager: add ShmStoreTTL logic in TLiveManager
  * Don't run sandbox release on rollback

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 21 Jul 2022 11:39:46 +0300

nginx (1.18.0-1.yandex.70) trusty; urgency=medium

  * [STRM-5662] packager support intervals for vod content

 -- Sergey Shepelev <shepelevsa@yandex-team.ru>  Tue, 19 Jul 2022 15:00:08 +0300

nginx (1.18.0-1.yandex.69) trusty; urgency=medium

  * CDN-62: Fix double compression for gzip

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Mon, 11 Jul 2022 14:03:30 +0300

nginx (1.18.0-1.yandex.68) trusty; urgency=medium

  * MDS-19522 patch HTTP2 relaxed PRIORITY frames limit

 -- Vitaly Ostashov <hotosho@yandex-team.ru>  Fri, 08 Jul 2022 13:18:38 +0300

nginx (1.18.0-1.yandex.67) trusty; urgency=medium

  * switch to luajit2

 -- Vitaly Ostashov <hotosho@yandex-team.ru>  Fri, 01 Jul 2022 13:29:38 +0300

nginx (1.18.0-1.yandex.66) trusty; urgency=medium

  * add nginx-aws-auth-module

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Mon, 20 Jun 2022 20:50:38 +0300

nginx (1.18.0-1.yandex.65) trusty; urgency=medium

  * STRM: packager: TLiveManager ignore quality_bandwidths
  * VERTISADMIN-28166 достаём коннекшн из стрима
  * [STRM-5548] Remove temporary solutions related to audio tracks separation

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 10 Jun 2022 16:57:31 +0300

nginx (1.18.0-1.yandex.64) trusty; urgency=medium

  * STRM-5493: nginx/modules/strm_packager: remove regexp usage from vod_uri
  * STRM-5498: contrib/nginx/core/src/http: proxy_cache_lock_following_timeout added

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 20 May 2022 17:09:45 +0300

nginx (1.18.0-1.yandex.63) trusty; urgency=medium

  * STRM-5273: nginx/modules/strm_packager: ttml subtitles

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 11 May 2022 18:06:20 +0300

nginx (1.18.0-1.yandex.62) trusty; urgency=medium

  * STRM: contrib/nginx/core/src/http/ngx_http_request.c: attempt to hotfix crashes because of request double free

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 25 Apr 2022 17:01:19 +0300

nginx (1.18.0-1.yandex.61) trusty; urgency=medium

  * STRM-3746: nginx/modules/strm_packager/src/common/muxer_mpegts.cpp: fix drm elementary stream descriptors

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 22 Apr 2022 13:08:14 +0300

nginx (1.18.0-1.yandex.60) trusty; urgency=medium

  * [STRM-5295] Support audio track names in packager
  * STRM: Preserve repfuture capacity after functor application

 -- Aleksandr Alekseev <alekseev-dev@yandex-team.ru>  Fri, 15 Apr 2022 16:45:35 +0300

nginx (1.18.0-1.yandex.59) trusty; urgency=medium

  * STRM-5273: nginx/modules/strm_packager/src/common/muxer_webvtt.cpp: add utf-8 charset

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 11 Apr 2022 19:01:47 +0300

nginx (1.18.0-1.yandex.58) trusty; urgency=medium

  * STRM-5273: nginx/modules/strm_packager/src/common/muxer_webvtt.cpp: fix empty subtitle output
  * [STRM-5281]. Chunk consistency regarding all tracks
  * fix peerdir to threading/future IGNIETFERRO-1989
  * STRM-5373: added anycast-testing to CI
  * STRM-5352: added anycast-prestable to CI
  * Update grpc to 1.43.2 DTCC-864

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 07 Apr 2022 19:21:00 +0300

nginx (1.18.0-1.yandex.57) trusty; urgency=medium

  * STRM-5175: strm/media/transcoder: dvb_subtitles STRM-5273: nginx/modules/strm_packager: webvtt subtitles
  * antirobot nginx module / update docs
  * STRM-3746: nginx/modules/strm_packager: emsg box in mp4 / meta track in mpegts with id3 timed metadata
  * antirobot nginx module / update documentation

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 23 Mar 2022 16:08:08 +0300

nginx (1.18.0-1.yandex.56) trusty; urgency=medium

  * STRM-5322: nginx/modules/strm_packager/src/workers: vod_worker: early_headers arg, live_worekr: send early headers only for lowlatency
  * STRM-5322: nginx/modules/strm_packager/src/base/context.cpp: dont finalize like request is completed in case of exceptions
  * Update grpc to 1.37.1 DTCC-653

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 17 Mar 2022 15:35:16 +0300

nginx (1.18.0-1.yandex.55) trusty; urgency=medium

  * STRM-5314: nginx/modules/strm_packager/src/common/fragment_cutter.cpp: skip intervals without packets, but send single empty interval if there was not packets at all

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 15 Mar 2022 19:39:20 +0300

nginx (1.18.0-1.yandex.54) trusty; urgency=medium

  * STRM-5314: nginx/modules/strm_packager/src/common/fragment_cutter.cpp: skip intervals without packets

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 15 Mar 2022 16:07:12 +0300

nginx (1.18.0-1.yandex.53) trusty; urgency=medium

  * [STRM-5306] Register vid/aud track names parameters
  * nginx/modules/strm_packager/src/common/source.cpp: fix ISource::GetMedia(const TIntervalP interval, const Ti64TimeP addTsOffset)

 -- Aleksandr Alekseev <alekseev-dev@yandex-team.ru>  Mon, 14 Mar 2022 15:16:42 +0300

nginx (1.18.0-1.yandex.52) trusty; urgency=medium

  * NGINX-177: nginx/modules/antirobot/src/ngx_http_yandex_antirobot_module.c: accept complex value in antirobot_request
  * STRM-5166: nginx/modules/strm_packager: vod prerols
  * STRM-5040: added anycast_media service
  * Zero-diff to reset a.yaml cache
  * STRM-5040: add anycast services to nginx service

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 02 Mar 2022 15:20:39 +0300

nginx (1.18.0-1.yandex.51) trusty; urgency=medium

  * NGINX-181: nginx/bin-noperl/ya.make: add geobase and p0f modules

 -- Roman Opyakin <opyakin-roman@yandex-team.ru>  Wed, 16 Feb 2022 13:09:50 +0300

nginx (1.18.0-1.yandex.50) trusty; urgency=medium

  * STRM: contrib/nginx/modules/kaltura/ngx_http_vod_dash.c: allow mp3 in dash
  * STRM-5228: nginx/modules/strm_packager: packager_allow_drm_content_unencrypted

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 16 Feb 2022 12:38:33 +0300

nginx (1.18.0-1.yandex.49) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: fix unexpected grpc cleanup after TWorkState shutdown

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 14 Feb 2022 11:42:18 +0300

nginx (1.18.0-1.yandex.48) trusty; urgency=medium

  * STRM-5156: nginx/modules/strm_packager/src/workers/vod_worker.cpp: allow aes128 for any (drm or not-drm) vod

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 07 Feb 2022 16:08:49 +0300

nginx (1.18.0-1.yandex.47) trusty; urgency=medium

  * STRM-5199: nginx/modules/strm_packager: fix cmaf size (for 4004ms chunks)
  * STRM-5156: nginx/modules/strm_packager: whole segment aes-128
  * IGNIETFERRO-1979 Fix -Wreorder-init-list in nginx

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 04 Feb 2022 15:32:48 +0300

nginx (1.18.0-1.yandex.46) trusty; urgency=medium

  * STRM-4851: nginx/modules/strm_packager: allow YPSD updates with equal version-timestamp (from config)
  * STRM: contrib/nginx/core/src/http/ngx_http_request.c: early abort on request second free [2]
  * IGNIETFERRO-1979 Fix -Wreorder-init-list in nginx

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 02 Feb 2022 13:29:10 +0300

nginx (1.18.0-1.yandex.45) trusty; urgency=medium

  * STRM: contrib/nginx/core/src/http/ngx_http_request.c: early abort on request second free
  * STRM: nginx/modules/strm_packager: require MetaLocation and ContentLocation in TVodWorker and TMusicWorker

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 28 Jan 2022 17:05:41 +0300

nginx (1.18.0-1.yandex.44) trusty; urgency=medium

  * STRM-4851: nginx/modules/strm_packager: added comand packager_live_manager_grpc_target_resolve
  * STRM-5035: contrib/nginx/core/src/http: fix hashrings choice

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 20 Jan 2022 15:40:10 +0300

nginx (1.18.0-1.yandex.43) trusty; urgency=medium

  * VERTISADMIN-27137 p0f fingerprinting module

 -- Andrey Korzinev <goodfella@yandex-team.ru>  Mon, 17 Jan 2022 14:06:32 +0300

nginx (1.18.0-1.yandex.42) trusty; urgency=medium

  * STRM-5108: nginx/modules/strm_packager: use hls part duration

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 12 Jan 2022 20:38:25 +0300

nginx (1.18.0-1.yandex.41) trusty; urgency=medium

  * STRM-5064: nginx/modules/strm_packager: mpeg-ts: add PCR; always set payload_field_flag for correct empty ts packets, that manage continuity counters
  * Build nginx debs inside corresponding environment

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 10 Jan 2022 17:24:01 +0300

nginx (1.18.0-1.yandex.40) trusty; urgency=medium

  * STRM-5065: contrib/nginx/modules/kaltura: fix FragmentInfo for cenc video

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 24 Dec 2021 11:34:38 +0300

nginx (1.18.0-1.yandex.39) trusty; urgency=medium

  * STRM-5080: contrib/nginx/modules/kaltura: Add EC-3 to MSS supported codecs list

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Wed, 22 Dec 2021 12:31:40 +0300

nginx (1.18.0-1.yandex.38) trusty; urgency=medium

  * STRM-4851: nginx/modules/strm_packager/src/base/grpc_resolver.cpp: fix init second time
  * Remove pinger from deploy
  * up grpc to 1.33.2 DTCC-636

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 21 Dec 2021 16:43:19 +0300

nginx (1.18.0-1.yandex.37) trusty; urgency=medium

  * STRM-5023: nginx/modules/strm_packager/src/common/muxer_mp4.cpp: fix check DrmInfo and ProtectionScheme

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 20 Dec 2021 13:39:46 +0300

nginx (1.18.0-1.yandex.36) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/context.cpp: NGX_LOG_ERR -> NGX_LOG_WARN for "TRequestContext destroyed without finish!" log
  * STRM-4851: nginx/modules/strm_packager: resolve youber hosts with YP service discovery
  * STRM-5023: packager ugc-live drm
  * Provide and replace nginx package in nginx-noperl
  * Update nginx-noperl package name
  * a.yaml zero-diff
  * CROWDFUNDING-16 bulk fix -Wunused-lambda-capture | part 6
  * CROWDFUNDING-16 bulk fix -Wunused-lambda-capture | part 5
  * CROWDFUNDING-16 bulk fix -Wunused-lambda-capture | part 4
  * CROWDFUNDING-16 bulk fix -Wunused-lambda-capture | part 2
  * CROWDFUNDING-16 bulk fix -Wunused-lambda-capture
  * Add build of package-noperl
  * Sign packages by robot-strm-sandbox
  * Build nginx with STRM robot
  * STRM-4924: transcoder: send DtmfDetected grpc messages

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 20 Dec 2021 11:46:44 +0300

nginx (1.18.0-1.yandex.35) trusty; urgency=medium

  * STRM-4899: nginx/modules/strm_packager/src/common/source_live.cpp: set LiveCreateLiveSourceDelay again

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 25 Nov 2021 17:48:40 +0300

nginx (1.18.0-1.yandex.34) trusty; urgency=medium

  * STRM-4899: contrib/nginx/core/src/http: add proxy_cache_lock_wait_time_period command
  * yamakerize libexslt DEVTOOLSSUPPORT-12622
  * STRM-4899: nginx/modules/strm_packager: hls lowlatency parts rework
  * Fix nginx noperl package
  * Auto-add end of stage job when stage ends with more than 1 job
  * Refactor trancoder chunks cutting
  * Create separate a.yaml for xaccelredirect
  * STRM-4876: strm/media/transcoder: audio only support, opus support

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 22 Nov 2021 16:13:44 +0300

nginx (1.18.0-1.yandex.33) trusty; urgency=medium

  * STRM-4757: contrib/nginx/core/src/http: multiple hashrings for constistent hashing (hashring command/param); 'explicit_name=' param for server in upstream
  * deploy to cold-v2

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 11 Nov 2021 12:26:14 +0300

nginx (1.18.0-1.yandex.32) trusty; urgency=medium

  * STRM-4867: copy all unknown boxess in VisualSampleEntry
  * STRM: nginx/modules/strm_packager/src/common: ya style

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 02 Nov 2021 11:44:41 +0300

nginx (1.18.0-1.yandex.31) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/ut/source_moov_cache_data_ut.cpp: test LoadTFileMediaDataFromMoovData
  * IGNIETFERRO-1936 Remove usages of TVariantIndexV
  * Fix nginx auth module single ts field

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Fri, 29 Oct 2021 16:54:57 +0300

nginx (1.18.0-1.yandex.30) trusty; urgency=medium

  * STRM-4853: fix timestamps processing  in 'transcoder-ng -> (ffmpeg) -> packager ->' pipeline
  * Add xaccelredirect to nginx deploy
  * STRM-4248: Add nginx deploy to strm_adblock_production
  * TAXICOMMON-4461 NGINX-178 add webviewtoken_mlutp masking to ngx_http_cookie_obf_module
  * STRM-4218: Build nginx-strm resource with luajit 2.1
  * STRM-4206: Move adblock, healthcheck and uaas to arcadia
  * STRM-4824 add part events
  * Pregenerate ORIGINAL_SOURCE when it does not contradict VERSION. DTCC-544
  * STRM-4218: Add flag to build nginx with luajit 2.1

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 28 Oct 2021 12:49:59 +0300

nginx (1.18.0-1.yandex.29) trusty; urgency=medium

  * STRM-4218: build nginx-strm with luajit 2.1
  * CI-2624 set explicit release-title-source (nginx)
  * STRM-4546: Add icookie decryptor module to nginx

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Tue, 19 Oct 2021 19:17:05 +0300

nginx (1.18.0-1.yandex.28) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/context.cpp: add packager_declare_shm_cache_zone to replace packager_test_shm_zone
  * STRM-4758: nginx/modules/strm_packager/src/base/context.cpp: fix packager ignore send_timeout

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 12 Oct 2021 18:23:10 +0300

nginx (1.18.0-1.yandex.27) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/workers/live_worker: add '-pN' as hls part number
  * STRM: nginx/modules/strm_packager/src/base/context.cpp: also check RunningSubrequests == 0 in TRequestContext::StartFinalize
  * STRM-4407: Migrate nginx
  * DEVTOOLSSUPPORT-12622 Reimport libxslt

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 11 Oct 2021 13:54:18 +0300

nginx (1.18.0-1.yandex.26) trusty; urgency=medium

  * STRM-4749: fix cache follow file leaks and worker freeze
  * STRM-4722: Add in-progress elements cleanup when request is over
  * IGNIETFERRO-1911 deps for ParseFromArray
  * CSADMIN-39309: NGX_HAVE_TCP_FASTOPEN=1 for focal
  * IGNIETFERRO-976 Remove Get<..> usages

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 07 Oct 2021 11:50:21 +0300

nginx (1.18.0-1.yandex.25) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: fix crash in FinalizeTimer in case background subrequests are yet not finished

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 28 Sep 2021 12:01:29 +0300

nginx (1.18.0-1.yandex.24) trusty; urgency=medium

  * STRM-4674: nginx/modules/strm_packager: ac-3, ec-3 support
  * STRM-4673: nginx/modules/strm_packager: strm/media/transcoder/mp4muxer: support dolby vision - just copy dvcC box

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 24 Sep 2021 15:24:48 +0300

nginx (1.18.0-1.yandex.23) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: TLiveManager: log latency
  * Delete metric part in packager variable names
  * STRM: nginx/modules/strm_packager: grpc timeouts params added

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 22 Sep 2021 20:09:18 +0300

nginx (1.18.0-1.yandex.22) trusty; urgency=medium

  * CSADMIN-39309: NGX_HAVE_TCP_FASTOPEN=1 for focal

 -- Pushkin Dmitry <dspushkin@yandex-team.ru>  Tue, 21 Sep 2021 01:20:33 +0300

nginx (1.18.0-1.yandex.21) trusty; urgency=medium

  * STRM-4151: nginx/modules/strm_packager: TVodWorker: check DrmEnable == description has drm

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 16 Sep 2021 18:06:22 +0300

nginx (1.18.0-1.yandex.20) trusty; urgency=medium

  * STRM-4151: nginx/modules/strm_packager: drm

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 14 Sep 2021 11:54:23 +0300

nginx (1.18.0-1.yandex.19) trusty; urgency=medium

  * STRM-4594: nginx/modules/strm_packager: LiveManager optimized
  * STRM-4681: nginx/modules/strm_packager: fix request finalize with background subrequests

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 13 Sep 2021 14:06:20 +0300

nginx (1.18.0-1.yandex.18) trusty; urgency=medium

  * Edit packager low latency url

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 09 Sep 2021 12:07:52 +0300

nginx (1.18.0-1.yandex.17) trusty; urgency=medium

  * STRM-4681: nginx/modules/strm_packager: hotfix request finalize with background subrequests
  * Nginx: fix auth sign module not found variable
  * STRM-4657: nginx/modules/strm_packager/src/workers/live_worker.cpp: removed serverTimeUuidBox arg, add uuid box if lowlatency and chunk not ready

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 9 Sep 2021 11:22:29 +0300

nginx (1.18.0-1.yandex.16) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: ya style
  * STRM-4643: nginx/modules/strm_packager/src/proto/live_data.proto: fix - LastChangeTime made uint64
  * STRM: nginx/modules/strm_packager/src/base/live_manager.cpp: TLiveManager log prefix full stats name

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 31 Aug 2021 14:55:27 +0300

nginx (1.18.0-1.yandex.15) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/live_manager.h: log prefix with some stats
  * STRM-4533: nginx/modules/strm_packager: fix errors at request finalize after exception

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 30 Aug 2021 14:50:55 +0300

nginx (1.18.0-1.yandex.14) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: support multiple sps/pps
  * STRM: /trunk/arcadia/nginx/modules/strm_packager/src/base/workers.cpp: add AddCustomHeader

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 26 Aug 2021 15:16:28 +0300

nginx (1.18.0-1.yandex.13) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/workers/live_worker.cpp: get all tracks from ll chunk from transcoder
  * STRM: nginx/modules/strm_packager: LiveWorker: lowlatency option; single source for completed chunk

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 20 Aug 2021 19:42:22 +0300

nginx (1.18.0-1.yandex.12) trusty; urgency=medium

  * STRM-4583: nginx/modules/strm_packager/src/base/shm_cache: always remove oldest element
  * STRM: nginx/modules/strm_packager/src/base/workers.h: allow mutable callbacks in MakeIndependentCallback

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 17 Aug 2021 10:10:18 +0300

nginx (1.18.0-1.yandex.11) trusty; urgency=medium

  * STRM-4586: contrib/nginx/core: add no_reuse_addr_on_test_config option to listen

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 13 Aug 2021 18:51:48 +0300

nginx (1.18.0-1.yandex.10) trusty; urgency=medium

  * STRM-4583: nginx/modules/strm_packager/src/base/shm_cache.cpp: TShmCache::AddElement hotfix speedup

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 13 Aug 2021 12:31:48 +0300

nginx (1.18.0-1.yandex.9) trusty; urgency=medium

  * STRM-4545: nginx/modules/strm_packager: live worker: send uuid boxes with server time if param serverTimeUuidBox==1
  * STRM-4533: nginx/modules/strm_packager: fix errors at request finalize after exception

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 12 Aug 2021 17:04:15 +0300

nginx (1.18.0-1.yandex.8) trusty; urgency=medium

  * STRM-3911: packager: add live worker
  * CI-2438: change `discovery: graph` to `discovery: any`
  * DTCC-383 Add VERSION

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 10 Aug 2021 18:45:36 +0300

nginx (1.18.0-1.yandex.7) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/workers.cpp: fix: allow NGX_AGAIN from ngx_http_send_header
  * STRM-3834: nginx/modules/strm_packager: live manager, grpc client

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 04 Aug 2021 19:40:17 +0300

nginx (1.18.0-1.yandex.6) trusty; urgency=medium

  * STRM-4439: nginx/modules/strm_packager: set content type
  * STRM-4080: nginx/modules/strm_packager: removed temp arg mp4tb90k
  * Switch to new protobuf::Status API
  * Increase limits on namings for MSS tracks
  * STRM-3645: Support variables in packager for unistat metrics
  * STRM: nginx/modules/strm_packager: ya style, reupload test resources

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 23 Jul 2021 13:17:12 +0300

nginx (1.18.0-1.yandex.5) trusty; urgency=medium

  * STRM-4437: nginx/modules/strm_packager/src/common/muxer_mpegts.cpp: fix: skip access unit delimeter NALU from original bitstream

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 15 Jul 2021 14:15:07 +0300

nginx (1.18.0-1.yandex.4) trusty; urgency=medium

  * STRM-4298: Add bbr variables in nginx yandex module
  * feat cookie: mask oauth_token

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 12 Jul 2021 09:28:40 +0300

nginx (1.18.0-1.yandex.3) trusty; urgency=medium

  * STRM-4361: strm/media/transcoder/mp4muxer: nginx/modules/strm_packager: get audio channels count and sample rate from esds

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 30 Jun 2021 19:35:27 +0300

nginx (1.18.0-1.yandex.2) trusty; urgency=medium

  * STRM-4095 nginx: fix slice

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Mon, 21 Jun 2021 14:10:32 +0300

nginx (1.18.0-1.yandex.1) trusty; urgency=medium

  * NGINX-163: add missed patches, fix others
  * STRM-4304: Add $geobase_{parents,children}_ids to nginx
  * STRM: nginx/modules/strm_packager: fix exceptions rethrow in vod worker
  * NGINX-172: nginx/modules/small/ngx_http_cookie_obf_module.c: mask yandextoken
  * MUSICBACKEND-7264 Allow to choose MP4/CAF in the strm code
  * STRM: nginx/modules/strm_packager/src/base/shm_zone.h: log_nomem=0 to remove crit log 'ngx_slab_alloc() failed: no memory'
  * STRM-4101: Get version from deb changelog and add build revision info
  * STRM-4203: Add lua build test
  * [DEVTOOLS-8381] Implement COMPILE_LUA

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 17 Jun 2021 20:21:44 +0300

nginx (1.18.0-1.yandex.0) trusty; urgency=medium

  * NGINX-163 move to Nginx 1.18 from Nix, update modules and tests.

 -- Alexander Krizhanovsky <lunc@yandex-team.ru>  Wed, 24 May 2021 22:00:00 +0300

nginx (1.14.2-1.yandex.93) trusty; urgency=medium

  * STRM-4059: applied patch https://github.com/kaltura/nginx-vod-module/pull/1043 (cbsinteractive:add-dolby-vision-support 204dd4eb6e0c65fcc0a157d917c492adade933c4)

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 24 May 2021 18:33:58 +0300

nginx (1.14.2-1.yandex.92) trusty; urgency=medium

  * STRM-4086: add strm_lua_bundle nginx module
  * STRM-4142: Remove perl dependency from nginx-strm

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Mon, 17 May 2021 17:41:48 +0300

nginx (1.14.2-1.yandex.91) trusty; urgency=medium

  * STRM-4080: nginx/modules/strm_packager/src/common/muxer_mp4.cpp: fix overlapping dts after convert to 1000 timebase

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 12 May 2021 19:31:00 +0300

nginx (1.14.2-1.yandex.90) trusty; urgency=medium

  * STRM-4080: nginx/modules/strm_packager: fix timestamp convertation with large timescales (e.g. from 982057 to 90000)

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 12 May 2021 16:58:23 +0300

nginx (1.14.2-1.yandex.89) trusty; urgency=medium

  * STRM-4080: nginx/modules/strm_packager/src: store timestamps in Ti64TimeMs, Ti64TimeP, and Ti32TimeP types instead of basics like i64
  * STRM-4087: Add NGINX_MODULES macro

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Tue, 11 May 2021 16:40:25 +0300

nginx (1.14.2-1.yandex.88) trusty; urgency=medium

  * STRM-4074: nginx http: set SO_TIMESTAMP to connections, store timestamp from first packet of request, available by request_first_recv_timestamp_usec variable
  * STRM: nginx/modules/strm_packager/src/common/muxer_mp4.h: fix debug build

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 27 Apr 2021 16:23:13 +0300

nginx (1.14.2-1.yandex.87) trusty; urgency=medium

  * STRM-4040: nginx/modules/strm_packager: accept hevc and vp9; for hevc check NalUnitLengthSize == 4
  * STRM-4063: Add initial a.yaml for nginx-strm
  * STRM: nginx/modules/strm_packager/src/common/source_tracks_select.cpp: select by index of audio/video tracks

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 21 Apr 2021 11:23:42 +0300

nginx (1.14.2-1.yandex.86) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: proxy 404 from upstream as is, others as 502
  * STRM-3941: nginx/modules/strm_packager: added checks that subrequest completed (got last_in_chain); add log level in THttpError
  * STRM-4039: nginx/modules/strm_packager/src/base/context.cpp: fixed special response sending
  * STRM-3941: nginx/modules/strm_packager/src/base/context.cpp: no attempts to send headers twice
  * STRM-2674: nginx cache follow fix
  * STRM-2674: nginx: disable background subrequest data postpone if cache follow enabled

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 15 Apr 2021 11:39:32 +0300

nginx (1.14.2-1.yandex.85) trusty; urgency=medium

  * STRM-3941: packager: fix errors if subrequest finished with NGX_HTTP_CLIENT_CLOSED_REQUEST == 499
  * STRM-3736: Increase NGX_MAX_ERROR_STR

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 2 Apr 2021 11:50:08 +0300

nginx (1.14.2-1.yandex.84) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/workers.cpp: preserve error code from ngx_http_send_header or ngx_http_output_filter

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 29 Mar 2021 18:49:20 +0300

nginx (1.14.2-1.yandex.83) trusty; urgency=medium

  * Fix packager invalid 500 status codes

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 24 Mar 2021 19:16:45 +0300

nginx (1.14.2-1.yandex.82) trusty; urgency=medium

  * STRM-3898: add support for multiple tskv_log and if argument

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Tue, 23 Mar 2021 15:16:27 +0300

nginx (1.14.2-1.yandex.81) trusty; urgency=medium

  * STRM-3814: Add default_vars option to tskv_format

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Tue, 16 Mar 2021 14:27:55 +0300

nginx (1.14.2-1.yandex.80) trusty; urgency=medium

  * Added encryption support for the caf packager
  * STRM: nginx/modules/strm_packager/src/common/muxer_caf.cpp: fix - RequireData before subscribe

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 15 Mar 2021 17:20:36 +0300

nginx (1.14.2-1.yandex.79-2) focal; urgency=medium

  * remove --no-auto for dh_installinit

 -- Pushkin Dmitry <dspushkin@yandex-team.ru>  Thu, 23 Sep 2021 17:24:44 +0300

nginx (1.14.2-1.yandex.79-1) focal; urgency=medium

  * fix fastopen build for nginx

 -- Pushkin Dmitry <dspushkin@yandex-team.ru>  Wed, 22 Sep 2021 23:06:07 +0300

nginx (1.14.2-1.yandex.79) trusty; urgency=medium

  * Setup perl package to a proper path

 -- Anton Kortunov <toshik@mercury-bionic.mdst.yandex.net>  Fri, 12 Mar 2021 16:48:03 +0300

nginx (1.14.2-1.yandex.78) trusty; urgency=medium

  * nginx/modules/strm_packager/src/base/shm_cache.h: limit total wait time by InProgressTimeout

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 11 Mar 2021 16:53:49 +0300

nginx (1.14.2-1.yandex.77) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/base/pool_util.h: align to alignof(T)
  * Use new CI
  * STRM: nginx/modules/strm_packager/src/base/shm_cache.h: fix shm deadlock

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 11 Mar 2021 14:59:25 +0300

nginx (1.14.2-1.yandex.76) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: no delay moof

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 10 Mar 2021 09:31:06 +0300

nginx (1.14.2-1.yandex.75) trusty; urgency=medium

  * STRM-2374: Add traits variables to nginx geobase module
  * STRM: pacakger: revert temp code for no_delay_moof
  * STRM: nginx/modules/strm_packager/src/base/shm_zone.h: fix bug - shm mutex made before shm initialized

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Tue, 02 Mar 2021 13:33:00 +0300

nginx (1.14.2-1.yandex.74) trusty; urgency=medium

  * Cache description
  * MAILSRE-39: build nginx for Ubuntu Focal

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Fri, 26 Feb 2021 17:39:05 +0300

nginx (1.14.2-1.yandex.73) trusty; urgency=medium

  * CRYPTA-13365: add tcp_save_syn flag to nginx core
  * CRYPTA-13365: add tcp_syn_options variable and support module

 -- Alexander Zheglov <zheglov@yandex-team.ru>  Thu, 25 Feb 2021 12:21:19 +0300

nginx (1.14.2-1.yandex.72) trusty; urgency=medium

  * Fix bug: don't check chunkNumber for mp4 chunks

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Fri, 19 Feb 2021 01:05:01 +0300

nginx (1.14.2-1.yandex.71) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager/src/common/muxer_mpegts.cpp: fix after no_delay_moof changes

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 18 Feb 2021 23:26:25 +0300

nginx (1.14.2-1.yandex.70) trusty; urgency=medium

  * STRM: nginx/modules/strm_packager: no_delay_moof test implementation

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 18 Feb 2021 11:04:57 +0300

nginx (1.14.2-1.yandex.69) trusty; urgency=medium

  * Fix MPEG-TS muxer for safari browser

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 17 Feb 2021 20:55:57 +0300

nginx (1.14.2-1.yandex.68) trusty; urgency=medium

  * STRM-3688: add variables timestamp_seconds and timestamp_milliseconds

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Wed, 10 Feb 2021 15:01:07 +0300

nginx (1.14.2-1.yandex.67) trusty; urgency=medium

  * STRM: packager: remove NGX_HTTP_SUBREQUEST_BACKGROUND flag
  * Support right_after and just_before options in nginx modules order
  * STRM-3548: nginx/modules/strm_packager: mpegts muxer optimisations

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 10 Feb 2021 13:41:09 +0300

nginx (1.14.2-1.yandex.66) trusty; urgency=medium

  * Lowered the logging level for getting the slash_mode variable
  * STRM: packager: nginx/modules/strm_packager: add packager_subrequest_clear_variables param

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Fri, 05 Feb 2021 14:30:25 +0300

nginx (1.14.2-1.yandex.65) trusty; urgency=medium

  * STRM-3599: contrib/nginx/modules/kaltura: added vod_subrequest_variables_mode param with values share, clear, or copy

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 04 Feb 2021 15:19:47 +0300

nginx (1.14.2-1.yandex.64) trusty; urgency=medium

  * STRM: pacakger: generate empty m4s fragment

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 01 Feb 2021 15:48:18 +0300

nginx (1.14.2-1.yandex.63) trusty; urgency=medium

  * Disable chunk transfer encoding for not cmaf chunks
  * Support multi segment vod sources
  * Use google proto json library to fix timestamp

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 01 Feb 2021 12:20:30 +0300

nginx (1.14.2-1.yandex.62) trusty; urgency=medium

  * STRM-3590: nginx/modules/strm_packager: copy headers from main request to subrequest
  * STRM-3460: nginx/modules/strm_packager/src/common/source_moov_data.cpp: fix division of negative numbers
  * STRM-3460: nginx/modules/strm_packager/src/common/source_moov_data.cpp: fix work with last dts block with zero duration
  * STRM-3387: nginx/modules/strm_packager: fix request finish on exception

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Wed, 27 Jan 2021 16:31:44 +0300

nginx (1.14.2-1.yandex.61) trusty; urgency=medium

  * STRM-3599: contrib/nginx/modules/kaltura/ngx_child_http_request.c: disable again subrequest variables share
  * STRM-3599: contrib/nginx/core/src/http/modules/ngx_http_rewrite_module.c: add optional to_parent argument to command 'set'

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 26 Jan 2021 11:29:36 +0300

nginx (1.14.2-1.yandex.60) trusty; urgency=medium

  * STRM-3563: packager subrequest ranges made equal to kaltura ranges
  * STRM-3423: nginx/modules/strm_packager: exception handle improve

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 25 Jan 2021 12:52:30 +0300

nginx (1.14.2-1.yandex.59) trusty; urgency=medium

  * NGINX-170: fix proxy_bind with upstream keepalive

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 21 Jan 2021 15:10:41 +0300

nginx (1.14.2-1.yandex.58) trusty; urgency=medium

  * Activate packager module in nginx-strm build
  * STRM-3460: optimisations of work with source mp4 files moov boxes
  * [nginx] Switch from ticket_parser2 to tvmauth (PASSP-30711)
  * STRM-3405: nginx/modules/strm_packager: TSourceConcat added

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 14 Jan 2021 20:49:24 +0300

nginx (1.14.2-1.yandex.57) trusty; urgency=medium

  * NGINX-169: add ngx_http_proxy_connect_module module

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 22 Dec 2020 20:15:54 +0300

nginx (1.14.2-1.yandex.56) trusty; urgency=medium

  * STRM-3441: fix nginx tskv_log escape

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Mon, 14 Dec 2020 16:10:48 +0300

nginx (1.14.2-1.yandex.55) trusty; urgency=medium

  * STRM-3387: fix subrequests work with error_page

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 03 Dec 2020 16:32:46 +0300

nginx (1.14.2-1.yandex.54) trusty; urgency=medium

  * NOCDEV-2315: add lua-upstream-nginx-module to the main build

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 25 Nov 2020 20:36:13 +0300

nginx (1.14.2-1.yandex.53) trusty; urgency=medium

  * STRM-3292: contrib/nginx/modules/kaltura/ngx_child_http_request.c: do not clear subrequest variables, $http_range in proxy pass will be fixed in config by lua block

 -- Andrei Bich <dronimal@yandex-team.ru>  Sat, 14 Nov 2020 10:41:56 +0300

nginx (1.14.2-1.yandex.52) trusty; urgency=medium

  * STRM-3159: contrib/nginx/core/src/http/ngx_http_request.c: fix subrequests work with aio threads

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 06 Nov 2020 14:54:15 +0300

nginx (1.14.2-1.yandex.51) trusty; urgency=medium

  * STRM-3159: fix byte-range subrequest to internal proxy_pass with cache key containing $http_range.moove ngx_http_range_header_filter_module back, and instead set ngx_http_vod_module position relative to range header filter

 -- Andrei Bich <dronimal@yandex-team.ru>  Mon, 02 Nov 2020 18:18:21 +0300

nginx (1.14.2-1.yandex.50) trusty; urgency=medium

  * STRM-3159: fix byte-range subrequest to internal proxy_pass with cache

 -- Andrei Bich <dronimal@yandex-team.ru>  Thu, 29 Oct 2020 17:50:49 +0300

nginx (1.14.2-1.yandex.49) trusty; urgency=medium

  * TAXIMETERBACK-10868: mask taxi-driver-authproxy cookies
  * STRM-3039: add vp9 and opus support for mp4 in kaltura

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 30 Sep 2020 13:13:45 +0300

nginx (1.14.2-1.yandex.48) trusty; urgency=medium

  * Add geobase module to default build

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 30 Sep 2020 13:13:45 +0300

nginx (1.14.2-1.yandex.47) trusty; urgency=medium

  * NGINX-153: add nginx-ssl-ja3

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 23 Sep 2020 17:55:59 +0300

nginx (1.14.2-1.yandex.46) trusty; urgency=medium

  * STRM-2914: contrib/nginx/modules/nginx-rtmp-module/norm/ngx_rtmp_norm_pipeline.c: fix MPEG samples per frame values

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 18 Sep 2020 17:56:17 +0300

nginx (1.14.2-1.yandex.45) trusty; urgency=medium

  * Fix auth_sign slash mode uri splitting

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Sat, 05 Sep 2020 10:09:18 +0300

nginx (1.14.2-1.yandex.44) trusty; urgency=medium

  * STRM-2296: nginx, msr normalizer: disable pts checks for audio streams

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 31 Jul 2020 14:11:20 +0300

nginx (1.14.2-1.yandex.43) trusty; urgency=medium

  * STRM-2296: improve fix of non-monotonic pts in msr and nginx-rtmp: added epsilon in pts condition - fix excessive framedrops

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 22 Jul 2020 18:09:42 +0300

nginx (1.14.2-1.yandex.42) trusty; urgency=medium

  * STRM-2296: improve fix of non-monotonic pts in msr and nginx-rtmp - fix PTS instead of drop frames

 -- Andrei Bich <dronimal@yandex-team.ru>  Tue, 14 Jul 2020 16:31:38 +0300

nginx (1.14.2-1.yandex.41) trusty; urgency=medium

  * STRM-2296: improve fix of non-monotonic pts in msr and nginx-rtmp

 -- Andrei Bich <dronimal@yandex-team.ru>  Fri, 10 Jul 2020 12:52:17 +0300

nginx (1.14.2-1.yandex.40) trusty; urgency=medium

  * SECALERTS-311068 Masked "token" cookie

 -- Pavel Pushkarev <paulus@yandex-team.ru>  Thu, 09 Jul 2020 14:29:45 +0300

nginx (1.14.2-1.yandex.39) trusty; urgency=medium

  * STRM-2296 PR from branch users/dronimal/fix-non-monotonic-pts

 -- Andrei Bich <dronimal@yandex-team.ru>  Wed, 08 Jul 2020 11:51:45 +0300

nginx (1.14.2-1.yandex.38) trusty; urgency=medium

  * STRM-2183 Use "," as params delimiter in auth module

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Tue, 07 Jul 2020 11:42:10 +0300

nginx (1.14.2-1.yandex.37) trusty; urgency=medium

  * STRM-2183 Refactor signature slash_mode

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Tue, 30 Jun 2020 16:16:10 +0300

nginx (1.14.2-1.yandex.36) trusty; urgency=medium

  * STRM-2182: new 'follow' value for proxy_cache_lock option

 -- Alexey Andriyanov <alan@yandex-team.ru>  Fri, 19 Jun 2020 17:19:01 +0300

nginx (1.14.2-1.yandex.35) trusty; urgency=medium

  * STRM-2372: Fix CRC32 for mpegts segments with single mp3 stream

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Thu, 18 Jun 2020 15:21:26 +0300

nginx (1.14.2-1.yandex.34) trusty; urgency=medium

  * STRM-1715: Support overlay ad_type

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Tue, 16 Jun 2020 18:21:26 +0300

nginx (1.14.2-1.yandex.33) trusty; urgency=medium

  * STRM-1715: skip json rendering when ad block offset >= chunk range end

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Thu, 21 May 2020 19:22:58 +0300

nginx (1.14.2-1.yandex.32) trusty; urgency=medium

  * STRM-1715: fix offset for ranged chunks

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Wed, 20 May 2020 21:11:42 +0300

nginx (1.14.2-1.yandex.31) trusty; urgency=medium

  * STRM-1715: Support various ad_type blocks

 -- Andrey Vasilenkov <indigo@yandex-team.ru>  Wed, 20 May 2020 12:31:57 +0300

nginx (1.14.2-1.yandex.30) trusty; urgency=medium

  * STRM-1985: Support FragmentInfo requests in kaltura module for MSS Live

 -- Yuri Fedoseev <yfedoseev@yandex-team.ru>  Wed, 29 Apr 2020 14:11:03 +0300

nginx (1.14.2-1.yandex.29) trusty; urgency=medium

  * STRM-2044: First byte was missed for mp3 inside mp4 container

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 24 Apr 2020 13:08:03 +0300

nginx (1.14.2-1.yandex.28) unstable; urgency=medium

  * STRM-1966: Fix typo in codec string"

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 16 Apr 2020 15:22:37 +0300

nginx (1.14.2-1.yandex.27) unstable; urgency=medium

  * STRM-1966: Use proper register for format string

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 16 Apr 2020 12:08:59 +0300

nginx (1.14.2-1.yandex.26) unstable; urgency=medium

  * STRM-1818: Put slice filter after copy
  * STRM-1966: Add trailing \0 to strings

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 15 Apr 2020 15:33:59 +0300

nginx (1.14.2-1.yandex.25) unstable; urgency=medium

  * STRM-1718: Add mp3 support in nginx_rtmp

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 03 Apr 2020 17:35:09 +0300

nginx (1.14.2-1.yandex.24) unstable; urgency=medium

  * Support different timestamps for sign blocks in auth module
  * CSADMIN-31463 fixed a typo, otherwise it sometimes goes out of bounds in the array after reload command

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Tue, 17 Mar 2020 16:50:44 +0300

nginx (1.14.2-1.yandex.23) unstable; urgency=medium

  * STRM-1497: add $geobase_region_id variable

 -- Ivan Kalinin <nyoroon@yandex-team.ru>  Mon, 17 Feb 2020 21:34:00 +0300

nginx (1.14.2-1.yandex.22) unstable; urgency=medium

  * TVM2: retry on public keys load error

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 07 Feb 2020 14:03:09 +0300

nginx (1.14.2-1.yandex.21) unstable; urgency=medium

  * VH-6902: Kaltura: Change log message concat_clip_parse ERR to NOTICE
  * STRM-1427: Normalizer: Make zoo-tags in nginx-rtmp compatible with msr

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Wed, 22 Jan 2020 18:56:26 +0300

nginx (1.14.2-1.yandex.20) unstable; urgency=medium

  * STRM-1320: add video codec information to json

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 09 Jan 2020 15:43:10 +0300

nginx (1.14.2-1.yandex.19) unstable; urgency=medium

  * NGINX-155: reduce severity of tcpinfo counters overflows

 -- Alexey Shchurov <aschurov@yandex-team.ru>  Tue, 17 Dec 2019 20:08:43 +0300

nginx (1.14.2-1.yandex.18) unstable; urgency=medium

  * NGINX-147: write to syslog in default logger style

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 04 Dec 2019 18:39:10 +0300

nginx (1.14.2-1.yandex.17) unstable; urgency=medium

  * STRM-631: Rename auth prefix and suffix param keys

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Mon, 25 Nov 2019 18:37:15 +0300

nginx (1.14.2-1.yandex.16) unstable; urgency=medium

  * TRAFFIC-9992: add tcp_congestion parameter to listen
  * STRM-631: Add slash_mode to auth nginx module, save slash mode variables.

 -- Dmitry Kravtsov <diman@yandex-team.ru>  Thu, 14 Nov 2019 20:10:10 +0300

nginx (1.14.2-1.yandex.15) unstable; urgency=medium

  * NGINX-146: Cancel TVM2 timer on worker exit

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 29 Oct 2019 17:51:43 +0300

nginx (1.14.2-1.yandex.14) unstable; urgency=medium

  * NGINX-150: Import ngx_http_tcp_congestion_module

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Mon, 28 Oct 2019 19:45:56 +0300

nginx (1.14.2-1.yandex.13) unstable; urgency=medium

  * NGINX-145: Log error in case of tcpinfo diff overflow

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 15 Oct 2019 15:51:09 +0300

nginx (1.14.2-1.yandex.12) unstable; urgency=medium

  * NGINX-124 Увеличить ulimit для master-process nginx

 -- Pavel Yelkin <pashayelkin@yandex-team.ru>  Wed, 25 Sep 2019 14:45:33 +0500

nginx (1.14.2-1.yandex.11) unstable; urgency=medium

  * NGINX-133 Syntax error in nginx systemd service

 -- Pavel Yelkin <pashayelkin@yandex-team.ru>  Tue, 10 Sep 2019 16:21:36 +0500

nginx (1.14.2-1.yandex.10) unstable; urgency=medium

  * NGINX-133 nginx - включить fastopen

 -- Pavel Yelkin <pashayelkin@yandex-team.ru>  Mon, 02 Sep 2019 15:16:19 +0500

nginx (1.14.2-1.yandex.9) unstable; urgency=medium

  * NGINX-143: Fix accept-encoding processing
  * NGINX-140: Integrate patches up to nginx=1.8.1-1.yandex.72

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Fri, 06 Sep 2019 21:56:07 +0300

nginx (1.14.2-1.yandex.8) unstable; urgency=medium

  * SECTASK-11257: Add cookies masking for Passport "sessguard" cookie

 -- Eldar Zaitov <ezaitov@yandex-team.ru>  Thu, 08 Aug 2019 22:30:21 +0300

nginx (1.14.2-1.yandex.7) unstable; urgency=medium

  * NGINX-140: import nginx-rtmp module

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Mon, 05 Aug 2019 13:55:21 +0300

nginx (1.14.2-1.yandex.6) unstable; urgency=medium

  * STRM-287: send id and cue_id in data track

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 18 Jun 2019 19:35:00 +0300

nginx (1.14.2-1.yandex.5) unstable; urgency=medium

  * Add mask for cookies_to_mask
  * Kaltura: send VAST to client on every fragment
  * STRM-102: Disable encryption if drm_enabled is 0 - like in DASH

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 11 Jun 2019 20:48:42 +0300

nginx (1.14.2-1.yandex.4) unstable; urgency=medium

  * STRM-202: fix cutoff calculation

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 05 Jun 2019 12:48:26 +0300

nginx (1.14.2-1.yandex.3) unstable; urgency=medium

  * Update kaltura module to 1.24-27-g746b54d

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 31 May 2019 19:59:25 +0300

nginx (1.14.2-1.yandex.2) unstable; urgency=medium

  * NGINX-139: enable ipv6only on for stream_proxy_module

 -- Vladimir Kononov <pono@yandex-team.ru>  Thu, 30 May 2019 19:11:04 +0300

nginx (1.14.2-1.yandex.1) unstable; urgency=medium

  * NGINX-134: fix default prefix of nginx pathes
  * STRM-202: pass cutoff field to data track

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Thu, 30 May 2019 02:20:03 +0300

nginx (1.14.2-1.yandex.0) unstable; urgency=medium

  * NGINX-134: migrate to nginx-1.14.2

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Mon, 27 May 2019 17:53:43 +0300

nginx (1.12.2-1.yandex.26) trusty; urgency=medium

  * nginx kaltura: send "cue_id" instead of "id"

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Thu, 25 Apr 2019 16:37:18 +0300

nginx (1.12.2-1.yandex.25) trusty; urgency=medium

  * add lua-upstream-nginx-module to nginx-strm

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Mon, 08 Apr 2019 15:19:05 +0000

nginx (1.12.2-1.yandex.24) trusty; urgency=medium

  * NGINX-129: add nginx-fwmark module, request necessary capabilities

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Wed, 20 Mar 2019 16:08:33 +0300

nginx (1.12.2-1.yandex.23) trusty; urgency=medium

  * worker_cpu_affinity retrieve data from cgroup TRAFFIC-9100
  * support OpenSSL 1.1 in modules lua-nginx-module, nginx-upstream-fair and kaltura DEVTOOLS-4446

 -- Konstantin Lebedev <whitefox@yandex-team.ru>  Wed, 27 Feb 2019 08:37:39 +0300

nginx (1.12.2-1.yandex.22) trusty; urgency=medium

  * PASSPADMIN-421: added "ya_sess_id" to cookie obfuscation

 -- Eldar Zaitov <ezaitov@yandex-team.ru>  Tue, 12 Feb 2019 13:23:00 +0300

nginx (1.12.2-1.yandex.21) trusty; urgency=medium

  * VH-6494: support gzip flag in VAST meta (nginx-strm only)

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 07 Feb 2019 16:36:34 +0300

nginx (1.12.2-1.yandex.20) trusty; urgency=medium

  * NGINX-127: add nginx-ip-tos-filter, see also VH-7866

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Wed, 30 Jan 2019 10:17:44 +0300

nginx (1.12.2-1.yandex.19) trusty; urgency=medium

  * ANTIADB-1335 unzip gzipped responses for subsequent search/replace ANTIADB-1334 substitute string for file
  * Always apply ad_offset from vast_converter
  * NGINX-86: moved lua module registration to preconfiguration phase
  * NGINX-103: fix ngx_http_brotli_filter_module, see also VH-7489

 -- Alexander A. Strelets <xoiss@yandex-team.ru>  Thu, 17 Jan 2019 17:06:17 +0300

nginx (1.12.2-1.yandex.18) trusty; urgency=medium

  * NGINX-123: backported fixes for CVE-2018-16843, CVE-2018-16844
  * Added nginx-dav-ext-module

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 07 Nov 2018 15:58:50 +0300

nginx (1.12.2-1.yandex.17) trusty; urgency=medium

  * VH-4587: Added auth_sign_pass_if_empty option
  * Don't put \0 bytes in ad block id
  * add upgrade to init script usage

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 01 Nov 2018 20:23:41 +0300

nginx (1.12.2-1.yandex.16) trusty; urgency=medium

  * BSSERVER-6391: kaltura: support ad_offset param in vast_converter response
  * VH-4751: kaltura bugfix: initialize tracks array with NULLs
  * init.d/nginx upgrade
  * who knows...

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Tue, 23 Oct 2018 19:19:06 +0000

nginx (1.12.2-1.yandex.15) unstable; urgency=medium

  * fix strm-nginx init script name

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Mon, 17 Sep 2018 18:51:31 +0000

nginx (1.12.2-1.yandex.14) unstable; urgency=medium

  * fix nginx-strm build

 -- Ilya Anisimov <uhriab@yandex-team.ru>  Mon, 17 Sep 2018 16:59:34 +0000

nginx (1.12.2-1.yandex.13) unstable; urgency=medium

  * NGINX-103: fix default window size to be less than default sum of bufferssize

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 14 Sep 2018 13:05:40 +0300

nginx (1.12.2-1.yandex.12) unstable; urgency=medium

  * NGINX-114: added geobase module

 -- Anton Kortunov <toshik@yandex-team.ru>  Mon, 27 Aug 2018 16:57:10 +0300

nginx (1.12.2-1.yandex.11) unstable; urgency=medium

  * NGINX-103: choose brotli over gzip if possible

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 21 Aug 2018 18:45:26 +0300

nginx (1.12.2-1.yandex.10) unstable; urgency=medium

  * NGINX-109: fix nginx autostart

 -- Anton Kortunov <toshik@yandex-team.ru>  Mon, 13 Aug 2018 17:55:00 +0300

nginx (1.12.2-1.yandex.9) unstable; urgency=medium

  * fix brotli

 -- Dmitry Khlynin <dkhlynin@yandex-team.ru>  Fri, 27 Jul 2018 15:46:40 +0300

nginx (1.12.2-1.yandex.8) unstable; urgency=medium

  * fix brotli module NGINX-103
  * NGINX-79 add $request_time_ms variable

 -- Kirill Smorodinnikov <shaitkir@gmail.com>  Wed, 04 Jul 2018 17:41:57 +0300

nginx (1.12.2-1.yandex.7) unstable; urgency=medium

  * fix brotli module

 -- Alexey Grushin <agrushin@yandex-team.ru>  Fri, 22 Jun 2018 14:06:03 +0300

nginx (1.12.2-1.yandex.6) unstable; urgency=medium

  * fix log obfuscation
  * add $tcpinfo_retransmits, $tcpinfo_total_retrans. fix $tcpinfo_retrans
  * add $request_time_ms, $upstream_response_time_ms ..., from в 1.8
  * fix "tskvlog off"
  * fix flush tskvlog on timeout
  * add project_id directive
  * add milliseconds to error_log
  * add obfuscation headers

 -- Alexey Grushin <agrushin@yandex-team.ru>  Thu, 14 Jun 2018 15:03:03 +0300

nginx (1.12.2-1.yandex.5) unstable; urgency=medium

  * Fixed installation scripts
  * Added brotli

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 02 Feb 2018 17:12:09 +0300

nginx (1.12.2-1.yandex.4) unstable; urgency=medium

  * Fixed tskv_log directive (NGINX-84)

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 25 Jan 2018 23:28:50 +0300

nginx (1.12.2-1.yandex.3) unstable; urgency=medium

  * Added yandex variables module
  * Fixed prerm scripts

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 20 Dec 2017 18:52:05 +0300

nginx (1.12.2-1.yandex.2) unstable; urgency=medium

  * Updated build, fixed libperl version dependency

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 19 Dec 2017 17:19:52 +0300

nginx (1.12.2-1.yandex.1) unstable; urgency=medium

  * Fixed perl module version
  * Added mirror module

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 14 Dec 2017 18:23:08 +0300

nginx (1.12.2-1.yandex.0) unstable; urgency=medium

  * Initial 1.12 version

 -- Vadim Fedorenko <junk@yandex-team.ru>  Thu, 23 Nov 2017 13:03:14 +0300

nginx (1.12.1-1.yandex.4) unstable; urgency=medium

  * Really fixed xenial perl packages path

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 17 Oct 2017 15:01:18 +0300

nginx (1.12.1-1.yandex.3) unstable; urgency=medium

  * Fixed xenial perl packages path

 -- Anton Kortunov <toshik@yandex-team.ru>  Tue, 17 Oct 2017 14:35:42 +0300

nginx (1.12.1-1.yandex.2) unstable; urgency=medium

  * Fixed installation scripts

 -- Anton Kortunov <toshik@yandex-team.ru>  Thu, 28 Sep 2017 17:13:28 +0300

nginx (1.12.1-1.yandex.1) unstable; urgency=medium

  * Added TVM2 tickets support

 -- Anton Kortunov <toshik@yandex-team.ru>  Mon, 25 Sep 2017 17:06:04 +0300

nginx (1.12.1-1.yandex.0) unstable; urgency=medium

  * Upstream version 1.12.1
  * Added Provides-Replaces-Conflicts to debian package

 -- Anton Kortunov <toshik@yandex-team.ru>  Wed, 19 Jul 2017 19:20:00 +0300

nginx (1.12.0-1.yandex.1) unstable; urgency=medium

  * Enabled stream module

 -- Anton Kortunov <toshik@yandex-team.ru>  Mon, 17 Jul 2017 11:51:57 +0300

nginx (1.12.0-1.yandex.0) unstable; urgency=medium

  * Initial 1.12 version

 -- Anton Kortunov <toshik@yandex-team.ru>  Fri, 14 Jul 2017 16:43:20 +0300
