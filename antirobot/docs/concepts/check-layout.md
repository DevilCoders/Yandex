# Проверка верстки

Проверка верстки выполняется в продакшене после запуска работы сервиса с универсальной формулой Антиробота и без порога забанивания (параметр **threshold** в [конфигурации Антиробота](config.md#format)).

Проверяйте срабатывание капчи и корректность ее отображения во всех интерфейсах сервиса, где она может возвращаться. Используйте для этого принудительный вызов капчи:

{% note warning %}

Если капча была вызвана принудительно, то ввести ее правильно невозможно. При любом ответе будет снова выполнен редирект на капчу.

{% endnote %}


#### Капча обычная {#basicS}

Показывается по запросам, которые Антиробот оценил как заданные роботом. {#common}

Используйте любой из способов, чтобы проверить капчу:
- Допишите к запросу CGI-параметр: `&text=Капчу!`
    
    Например: [https//yandex.ru/search/?text=Капчу!](https://yandex.ru/search/?text=Капчу!).
    
- Добавьте к запросу куку `YX_SHOW_CAPTCHA=1`

#### Капча случайная {#random}

Показывается каждый десятитысячный запрос. Имеет верстку отличную от [капчи обычной](#common).

Чтобы проверить капчу, допишите к запросу CGI-параметр: `&text=Капчу случайную!`

Например: [https://yandex.ru/search/?text=Капчу случайную!](https://yandex.ru/search/?text=%D0%9A%D0%B0%D0%BF%D1%87%D1%83%20%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D1%83%D1%8E!).

#### Капча в формате json

Возвращается для AJAX-запросов.

Чтобы вызвать капчу, допишите к запросу проверки [обычной](#basic) или [случайной](#random) капчи:
- CGI-параметр: `&format=json`
    
    Например: [https://yandex.ru/search?text=Капчу!&format=json](https://yandex.ru/search?text=%D0%9A%D0%B0%D0%BF%D1%87%D1%83!&format=json).
    
- CGI-параметр: `&ajax=1`
    
    Например: [https://yandex.ru/search?text=Капчу!&ajax=1](https://yandex.ru/search?text=%D0%9A%D0%B0%D0%BF%D1%87%D1%83!&ajax=1).
    
- Добавьте к запросу заголовок `X-Requested-With: XMLHttpRequest`

