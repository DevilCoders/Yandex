{
    "template": "staging-antiadb-nginx-filebeat-*",
    "settings": {
        "index": {
            "refresh_interval": "180s",
            "number_of_shards": 1,
            "number_of_replicas": 1,
            "translog": {
                "durability": "async"
            },
            "unassigned": {
                "node_left": {
                    "delayed_timeout": "30m"
                }
            }
        }
    },
    "aliases" : {
        "test-antiadb-nginx-filebeat" : {}
    },
    "mappings": {
        "dynamic_templates": [{
            "strings": {
                "match_mapping_type": "string",
                "mapping": {
                    "type": "keyword"
                }
            }
        }],
        "properties": {
            "@timestamp": { "type": "date" },
            "clientip": { "type": "ip" },
            "userip": { "type": "ip" },
            "host": { "type": "keyword" },
            "http_host": { "type": "keyword" },
            "ar_host": { "type": "keyword" },
            "http_referer": { "type": "text", "norms": false },
            "method": { "type": "keyword" },
            "request_id": { "type": "keyword" },
            "request_time": { "type": "float" },
            "response_code":  { "type": "short" },
            "service_id": { "type": "keyword" },
            "tags": { "type": "keyword" },
            "uri_path": { "type": "text", "norms": false },
            "user_browser_name": { "type": "keyword" },
            "device": { "type": "keyword" },
            "no_token": { "type": "boolean" },
            "bamboozled": {
                "properties": {
                    "ab": { "type": "keyword" },
                    "event": { "type": "keyword" },
                    "host": { "type": "keyword" },
                    "v": { "type": "integer" },
                    "data": {
                        "properties": {
                            "action": { "type": "keyword" },
                            "blockId": { "type": "keyword" },
                            "blockName": { "type": "keyword" },
                            "pageId":  { "type": "keyword" },
                            "renderTo":  { "type": "keyword" },
                            "type": { "type": "keyword" },
                            "statId": { "type": "keyword" }
                        }
                    }
                }
            }
        }
    }
}
