service: antiadblock
title: Juggler Emulator program
ci:
  secret: sec-01evxgabdwyeb183v8p4exxsry
  runtime:
    sandbox:
      owner: ANTIADBLOCK
      priority:
        class: SERVICE
        subclass: LOW
      notifications:
        - statuses: [TIMEOUT, FAILURE, EXCEPTION]
          transport: email
          recipients:
            - antiadb@yandex-team.ru

  flows:
    build_juggler_emulator:
      title: Build Juggler Emulator
      jobs:
        build:
          title: Build Juggler Emulator with ya make
          task: common/arcadia/ya_make
          input:
            result_rt: AAB_ZFP_JUGGLER_EMULATOR
            result_rd: aab zfp juggler_emulator
            result_ttl: inf
            result_single_file: true
            targets: antiadblock/zfp/juggler_emulator/bin
            arts: antiadblock/zfp/juggler_emulator/bin/juggler_emulator

  triggers:
    - on: commit
      flow: build_juggler_emulator
      filters:
        - discovery: dir
          abs-paths: [
            'antiadblock/zfp/juggler_emulator/bin/**',
            'antiadblock/zfp/juggler_emulator/lib/**',
            'antiadblock/tasks/tools/**',
          ]
