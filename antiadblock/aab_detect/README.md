üì¶ AAB-release (—Ä–µ–ª–∏–∑—ã –∞–Ω—Ç–∏ –ê–¥–±–ª–æ–∫–∞)
========================

–í —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–ø–∞–ø–∫–∞ dist) –ª–µ–∂–∞—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –∞–Ω—Ç–∏–∞–¥–±–ª–æ—á–Ω–µ —Ñ–∞–π–ª—ã. –ò—Ö –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, –∞ —Ç–∞–∫ –∂–µ —á–∞—Å—Ç–∏—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ª–µ–∂–∞—Ç –≤–æ—Ç –∑–¥–µ—Å—å: https://github.yandex-team.ru/any/common/tree/master/ts/adblock.

### –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

- `detect.common.min.js` ‚Äî –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–¥–±–ª–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ commonjs. —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é detect, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º callback. –ö–æ–ª–ª–±–µ–∫ –≤—ã–∑–æ–≤–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞ –∏–ª–∏ —Ç–æ, —á—Ç–æ –Ω–∏–∫–∞–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –í –∫–æ–ª–ª–±–µ–∫ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –æ–±—ä–µ–∫—Ç —Å –¥–≤—É–º—è –ø–æ–ª—è–º–∏: `blocked` - –±—É–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ true, –µ—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫, –∏ blocker - —Å—Ç—Ä–æ–∫–∞-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞.

- `detect.global.min.js` ‚Äî –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–¥–±–ª–æ–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `detect`, –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏.

- `detect.global.no.bots.min.js` ‚Äî –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–¥–±–ª–æ–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `detect` –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏, –Ω–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤.   

- `lib.server.min.js` ‚Äî –û–±—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –º–µ—Ç–æ–¥–æ–≤, –≤ —Ñ–æ—Ä–º–∞—Ç–µ commonjs. –¢—Ä–µ–±—É–µ—Ç –∑–∞–º–µ–Ω—ã —á–∞—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø—Ä–æ–∫—Å–∏. –°–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –º–µ—Ç–æ–¥—ã:
  
  - `encode` ‚Äî –§—É–Ω–∫—Ü–∏—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —É—Ä–ª–æ–≤. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Å—Ç—Ä–æ–∫—É - —É—Ä–ª, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—Ä–ª.
  - `decode` ‚Äî –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —É—Ä–ª–æ–≤. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Å—Ç—Ä–æ–∫—É - —É—Ä–ª, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–¥–æ —Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—Ä–ª.
  - `isEncoded` ‚Äî –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø—Ä–æ–∫—Å–∏ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `encode`. –ù–∞ –≤—Ö–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –∏–ª–∏ `false`.
  - `encodeCSS` ‚Äî –§—É–Ω–∫—Ü–∏—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è css-–∫–ª–∞—Å—Å–æ–≤. –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–º. 

- `loader.min.js` ‚Äî –ó–∞–≥—Ä—É–∑—á–∏–∫ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø–∏—Å–∞–Ω—ã –≤ —Ñ–∞–π–ª–µ `src/src.md`. –ü–æ–¥–≥—Ä—É–∂–∞–µ—Ç `lib.browser.min.js`, –µ—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –∏ –≤—Ä–µ–º—è –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–Ω—å—à–µ —Å–µ–∫—É–Ω–¥—ã, —Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–ª–ª–±–µ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥ –∞–¥–±–ª–æ–∫–æ–º. –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ `init`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–µ—Ç–µ–∫—Ç –∞–¥–±–ª–æ–∫–∞.

- `lib.browser.min.js` ‚Äî  –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ—Ç–æ–¥ `init`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–º. 

### CommonJS –∏ –æ–±—ã—á–Ω—ã–π js.
 - CommonJS ‚Äì —Å–∏—Å—Ç–µ–º–∞ –º–æ–¥—É–ª–µ–π, –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ —Å–µ—Ä–≤–µ—Ä Node.JS. –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ª–∏—á–∏–µ —Å–±–æ—Ä—â–∏–∫–∞ (grunt, gulp, webpack) —É –ø–∞—Ä—Ç–Ω—ë—Ä–∞. 
 –ú–æ–¥—É–ª—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∞—Ä—É–∂—É —Ñ—É–Ω–∫—Ü–∏—é detect. –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
 ```javascript
var detect = require('path_to_detect/detect');
detect(function(result) {console.log(result)});
```
 
 - –í–µ—Ä—Å–∏—è —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö —Å–±–æ—Ä—â–∏–∫–æ–≤. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Ç–æ–≥–¥–∞ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–æ—è–≤–∏—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è detect.
 
### –†–µ–ª–∏–∑—ã 
–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–¥–µ—Ç—Å—è –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ SemVer. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ [–≤–∏–∫–∏](https://wiki.yandex-team.ru/antiadb/Reliz-skripta-detekta/).

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞.
* `src` - ***–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä***. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ url, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å.
* `cookie` - –∏–º—è –∫—É–∫–∏, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∑—á–∏–∫ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –Ω–∞–ª–∏—á–∏–µ –∞–¥–±–ª–æ–∫–∞. –ò–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`bltsr`).
* `time` - –≤—Ä–µ–º—è –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫—É–∫–∞, –≤ —á–∞—Å–∞—Ö. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - 2 –Ω–µ–¥–µ–ª–∏.
* `context` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫—É–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π –∫–æ–¥. –°–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–∞–ø—Ä—è–º—É—é. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ç–∞–∫–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–µ—Ç.
* `callback` - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –±–∏–±–∏–ª–∏–æ—Ç–µ–∫–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –Ω–∞–ª–∏—á–∏–µ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞. –í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º (–Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–º –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã –±—Ä–∞—É–∑–µ—Ä–∞), –ø–æ—Å–∫–æ–ª—å–∫—É —á–∞—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ —Å—Ä–∞–∑—É –∏–ª–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.

##### –ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞.
–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–æ—Å—è—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, –≤–æ—Ç —Ç—É—Ç:
```javascript
(window,document,{src:""});
```

–ü–æ–¥–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```javascript
var test = {};

...
(window,document,{
    src: "https://static-mon.yandex.net/static/main.js?pid=<PARTNER-ID>",
    cookie: "",
    time: 24,
    context: test,
    callback: function (result) { ... }
});
```

