{
    "meta": {
        "name": "tvmauth-java",
        "maintainer" : "passport-dev@yandex-team.ru",
        "version": "{svn_revision}",
        "homepage": "https://wiki.yandex-team.ru/passport/tvm2/library/"
    },
    "build": {
        "build_java": {
            "targets": [
                "library/java/tvmauth"
            ],
            "flags" : [
                {
                    "name" : "JDK_VERSION",
                    "value" : "8"
                },
                {
                    "name" : "YMAKE_JAVA_MODULES",
                    "value" : "no"
                }
            ],
            "build_type": "relwithdebinfo",
            "sources": true,
            "maven-export": true
        },
        "build_so": {
            "targets": [
                "library/java/tvmauth/src/c"
            ],
            "flags" : [
                {
                    "name" : "JDK_VERSION",
                    "value" : "8"
                }
            ],
            "build_type": "relwithdebinfo",
            "target-platforms": [
                "DEFAULT-LINUX-X86_64"
            ]
        },
        "build_dylib": {
            "targets": [
                "library/java/tvmauth/src/c"
            ],
            "flags" : [
                {
                    "name" : "JDK_VERSION",
                    "value" : "8"
                }
            ],
            "build_type": "relwithdebinfo",
            "target-platforms": [
                "DEFAULT-DARWIN-X86_64"
            ]
        },
        "build_arm64_dylib": {
            "targets": [
                "library/java/tvmauth/src/c"
            ],
            "flags" : [
                {
                    "name" : "JDK_VERSION",
                    "value" : "8"
                }
            ],
            "build_type": "relwithdebinfo",
            "target-platforms": [
                "DEFAULT-DARWIN-ARM64"
            ]
        },
        "build_dll": {
            "targets": [
                "library/java/tvmauth/src/c"
            ],
            "flags" : [
                {
                    "name" : "JDK_VERSION",
                    "value" : "8"
                }
            ],
            "build_type": "relwithdebinfo",
            "target-platforms": [
                "DEFAULT-WIN-X86_64"
            ]
        },
        "build_postprocesssor": {
            "targets": [
                "library/java/tvmauth/build_jar_with_so/packager"
            ],
            "build_type": "relwithdebinfo"
        }
    },
    "data": [
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_java",
                "path": "library/java/tvmauth/tvmauth-java.jar"
            },
            "destination": {
                "path": "/tvmauth-java-{svn_revision}.jar"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_java",
                "path": "library/java/tvmauth/tvmauth-java-sources.jar"
            },
            "destination": {
                "path": "/tvmauth-java-{svn_revision}-sources.jar"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_java",
                "path": "library/java/tvmauth/pom.xml"
            },
            "destination": {
                "path": "/tvmauth-java-{svn_revision}.pom"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_so",
                "path": "library/java/tvmauth/src/c/libtvmauth_java.so"
            },
            "destination": {
                "path": "/dlls/"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_dylib",
                "path": "library/java/tvmauth/src/c/libtvmauth_java.dylib"
            },
            "destination": {
                "path": "/dlls/"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_arm64_dylib",
                "path": "library/java/tvmauth/src/c/libtvmauth_java.dylib"
            },
            "destination": {
                "path": "/dlls/libtvmauth_java_arm64.dylib"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_dll",
                "path": "library/java/tvmauth/src/c/tvmauth_java.dll"
            },
            "destination": {
                "path": "/dlls/"
            }
        }
    ],
    "postprocess": [
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "build_postprocesssor",
                "path": "library/java/tvmauth/build_jar_with_so/packager/packager"
            },
            "arguments": [
                "tvmauth-java-{svn_revision}.jar", "dlls"
            ]
        }
    ]
}
