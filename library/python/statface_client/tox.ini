[tox]


[pycodestyle]

max-line-length = 100

[testenv]

# use global installations (debian packages)
sitepackages = True


deps =
  pytest
  pytest-pep8
  pycodestyle
  pylint==1.8.4; python_version < '3'
  pylint; python_version >= '3'

whitelist_externals =
  bash

ignore_errors = False

passenv = HOME


[testenv:linting]

# # Might be necessary:
# install_command = pip install -i https://pypi.yandex-team.ru/simple {opts} {packages}

deps =
  pycodestyle
  pylint==1.8.4; python_version < '3'
  pylint; python_version >= '3'
  # implicit, for bin/rd.py:
  statutils

commands =
  pycodestyle
  pylint statface_client
  bash -c "find ./bin/ ./examples/ -name '*.py' -print0 | xargs -0 pylint"


[testenv:dev]

usedevelop = True

commands = py.test
  bash -c "./run_examples.sh"


[testenv:jenkins]

recreate = True
commands = py.test -vv --junitxml tests.xml
  bash -c "./run_examples.sh"
  pylint statface_client
  pylint bin/mrproc_statface_publisher
  py.test --pep8 -m pep8 -v


[testenv:sandbox]

recreate = True
commands = py.test -vv --junitxml tests.xml
  bash -c "./run_examples.sh"
  pylint statface_client
  pylint bin/mrproc_statface_publisher
  py.test --pep8 -m pep8 -v


[pytest]

python_files = test_*.py
pep8maxlinelength = 100
