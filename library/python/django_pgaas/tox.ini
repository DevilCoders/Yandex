[tox]
envlist =
    {py27}-{django18,django111}
    {py36}-{django18,django111,django20,django21,django22,django30}
skipsdist = True

[testenv]
passenv=http_proxy, https_proxy, no_proxy, HTTP_PROXY, HTTPS_PROXY
install_command = pip install -i https://pypi.yandex-team.ru/simple/ {opts} {packages}
sitepackages = False
deps=
    pip
    mock
    pytest
    coverage
    pytest-cov
    pytest-html
    pytest-django
    django18: Django>=1.8,<1.9
    django111: Django>=1.11,<1.12
    django20: Django>=2.0,<2.1
    django21: Django>=2.1,<2.2
    django22: Django>=2.2,<2.3
    django30: Django>=3.0,<3.1
commands =
    pip install -i https://pypi.yandex-team.ru/simple/ -e /
    {env:TOXBUILD:py.test} --html=reports/report-{envname}.html --self-contained-html --cov=django_pgaas /tests {posargs}
