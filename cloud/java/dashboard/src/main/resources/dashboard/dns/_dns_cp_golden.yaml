# @1 = title suffix
# @2 = method comparison and value

- type: graph
  title: 'DNS Service RPS@1'
  templates: { name: rps }
  queries:
    - params: { labels: 'name=grpc_requests, app=dns-service_server, method@2, meter_type=count' }

- type: graph
  title: 'DNS Service Errors@1'
  templates: [ { name: errors, sumLines: [ status ] }, { name: alias } ]
  queryDefaults: { defaultTimeWindow: '15s' }
  queries:
    - params: { labels: 'name=grpc_statuses, app=dns-service_server, method@2, status!=OK' }
  draw: [ { alias: '{{status}}' } ]
  display: { decimals: 0, empty: false }

- type: graph
  title: 'DNS Service Durations@1'
  templates: { name: percentile, groupLines: true, format: solomon }
  queries:
    - params: { labels: 'name=grpc_durations, app=dns-service_server, method@2' }
