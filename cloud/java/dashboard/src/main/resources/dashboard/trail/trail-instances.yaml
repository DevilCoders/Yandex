uid: trail-instances
time: 15m
refresh: 5s
title: Audit Trails Instances

tags:
  - yc-trails
  - yc-audit-trails
links:
  - { title: 'Dashboards', tags: [ yc-trails ] }

variables:
  ui:
    !include include/_datasources.yaml
    !include include/_projects.yaml
    !include include/_clusters.yaml
  replacement:
    !include ../include/errors.yaml
  repeat:
    host:
      values:
        - prp
        - exp
        - cpl
        - tool
      titles:
        - Preparer
        - Exporter
        - Control Plane
        - Tool


graphDefaults:
  datasource: ${datasource}
  width: 8
  height: 6

queryDefaults:
  dropNan: false
  labels: 'project=${project}, cluster=trail, service=core'
  defaultTimeWindow: $__interval

rows:
  - title: Instances
    panels:
      - type: graph
        repeat: host
        title: '@{host:title} Instances'
        queries:
          - params: { labels: 'name=jvm_info, host=cluster-@{host}|@{host}-*' }
            select: { replace_nan: [0], alias: '{{host}}' }
        display: { empty: false, stack: false }
        yAxes: [ { min: 0 } ]
