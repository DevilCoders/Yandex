id: 343963
uid: yB5Las71k
refresh: 1m
title: Mdb adapter

tags: [ 'ycp', 'ycp-mdb-adapter', 'ycp-duty', 'ycp-drilldown' ]

variables:
  ui:
    cluster:
      values: ['prod', 'preprod']
  replacement:
    !include ../include/errors.yaml

graphDefaults:
  datasource: 'Solomon Cloud'
  width: 6
  height: 6
queryDefaults: { labels: 'project=instance-group, cluster=${cluster}, host!=cluster' }

rows:
  - title: 'L7 balancer (cpl)'
    queryDefaults: { labels: 'cluster=cloud_${cluster}_cpl, service=api_envoy_ma, project=platform, host!=cluster' }
    graphDefaults: { width: 8 }
    panels:
      - type: graph
        title: 'RPS'
        templates: { name: rps, sumLines: true }
        queries:
          - params: { labels: 'name=envoy_cluster_*_mdb_api_adapter_*_upstream_rq_total' }

      - type: graph
        title: 'Response Duration'
        yAxes: [{ format: 'ms' }]
        queries:
          - params: { labels: 'name=envoy_cluster_*_mdb_api_adapter_*_upstream_rq_time' }
            select: { group_by_labels: ['avg', 'quantile'] }
