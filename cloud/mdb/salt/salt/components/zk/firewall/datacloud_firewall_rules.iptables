domain ip6 {
    table filter {
        chain INPUT {
        # cluster nodes
{% for sub_cluster_id, sub_cluster in salt['pillar.get']('data:dbaas:cluster:subclusters', {}).items() %}
{%   for fqdn in sub_cluster.get('hosts', {}) %}
{%     if 'zk' in sub_cluster['roles'] %}
        proto tcp saddr '{{ fqdn }}' dport (2181 2888 3888) ACCEPT;
{%     else %}
        proto tcp saddr '{{ fqdn }}' dport (2181) ACCEPT;
{%     endif %}
{%   endfor %}
{% endfor %}
        }
    }
}
