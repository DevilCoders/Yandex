{# ACHTUNG! That conf used in `dbaas-operations.update-salt` too. Keep it in mind. #}
{% set py_version = salt.pillar.get('data:salt_py_version', 2) %}
[salt_minion_status]
execution_interval=3600
execution_timeout=3590
start_random_sleep=3570
command=/usr/local/yandex/monitoring/salt_minion_status.sh
type=salt
{% if salt['pillar.get']('data:dbaas:vtype') == 'compute' and salt['pillar.get']('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[salt_minion_version]
execution_interval=3600
execution_timeout=60
command=/usr/bin/python{{ py_version }} /usr/local/yandex/monitoring/salt_minion_version.py -v {{ salt['pillar.get']('data:salt_version', '3000.9+ds-1+yandex0').split('+')[0] }}
type=salt
{% if salt['pillar.get']('data:dbaas:vtype') == 'compute' and salt['pillar.get']('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}
