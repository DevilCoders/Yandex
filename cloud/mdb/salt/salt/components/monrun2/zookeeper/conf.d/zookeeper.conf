[zk_alive]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py alive
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_avg_latency]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py avg_latency
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_min_latency]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py min_latency
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_max_latency]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py max_latency
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_queue]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py queue
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_descriptors]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zookeeper.py descriptors
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}

[zk_election]
execution_interval=60
execution_timeout=30
command=/usr/local/yandex/monitoring/zk_election.sh
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}
