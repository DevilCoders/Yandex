[tls]
execution_interval=3600
execution_timeout=290
start_random_sleep=270
{% if salt.pillar.get('data:unmanaged:enable_zk_tls', False) %}
command=/usr/local/yandex/monitoring/tls.py {{ salt.grains.get('id') }} --pairs {{ salt.pillar.get('data:monrun:tls:pairs', '2281:/etc/zookeeper/conf.yandex/ssl/server.crt') }}
{% else %}
command=/bin/echo '0;ZK TLS disabled'
{% endif %}
type=zookeeper
{% if salt.pillar.get('data:dbaas:vtype') == 'compute' and salt.pillar.get('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}
