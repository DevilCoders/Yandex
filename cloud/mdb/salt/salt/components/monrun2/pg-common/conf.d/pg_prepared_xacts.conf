[pg_prepared_xacts]
execution_interval=60
execution_timeout=55
start_random_sleep=45
{% set warn = salt['pillar.get']('data:monrun:pg_prepared_xacts:warn') %}
{% set crit = salt['pillar.get']('data:monrun:pg_prepared_xacts:crit') %}
{% set all = salt['pillar.get']('data:monrun:pg_prepared_xacts:all') %}
command=/usr/local/yandex/monitoring/pg_prepared_xacts.py{{' -w '+warn|string if warn else ''}}{{' -c '+crit|string if crit else ''}}{{' -a '+true|string if all else ''}} 
type=postgres
{% if salt['pillar.get']('data:dbaas:vtype') == 'compute' and salt['pillar.get']('data:dbaas:cluster_id') %}
send_for_host={{ salt.dbaas.managed_hostname() }}
{% endif %}
