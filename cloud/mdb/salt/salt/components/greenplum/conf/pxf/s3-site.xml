{% from "components/greenplum/map.jinja" import gpdbvars,sysvars with context %}
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <property>
        <name>fs.s3a.access.key</name>
        <value>{{ salt['pillar.get']('data:pxf:datasources:s3:'+datasource+':access_key', 'access_key_not_set') }}</value>
    </property>
    <property>
        <name>fs.s3a.secret.key</name>
        <value>{{ salt['pillar.get']('data:pxf:datasources:s3:'+datasource+':secret_key', 'secret_key_not_set') }}</value>
    </property>
    <property>
        <name>fs.s3a.endpoint</name>
        <value>{{ salt['pillar.get']('data:pxf:datasources:s3:'+datasource+':endpoint', 'storage.yandexcloud.net') }}</value>
    </property>
    <property>
        <name>fs.s3a.fast.upload</name>
        <value>{{ salt['pillar.get']('data:pxf:datasources:s3:'+datasource+':fast_upload', 'true') }}</value>
    </property>
    <property>
        <name>fs.s3a.buffer.dir</name>
        <value>{{ gpdbvars.masterdir }}/s3a</value>
    </property>
</configuration>
