{% set cluster_id = salt.pillar.get('data:dbaas:cluster_id') %}
- topic: {{ salt.pillar.get('data:logship:topics:mysql_error_logs', 'invalid_topic') }}
  name: /var/log/mysql/error.log
  pipe: /etc/pushclient/mysql_error_log_parser.py -s /etc/pushclient/secrets_regex -c {{ cluster_id }} 2>> /var/log/statbox/mysql_error_parser.log
  send_sigusr1: true

- topic: {{ salt.pillar.get('data:logship:topics:mysql_general_logs', 'invalid_topic') }}
  name: /var/log/mysql/query.log
  pipe: /etc/pushclient/mysql_general_log_parser.py -s /etc/pushclient/secrets_regex -c {{ cluster_id }} 2>> /var/log/statbox/mysql_general_parser.log
  sid: {lines: 5}
  send_sigusr1: true

- topic: {{ salt.pillar.get('data:logship:topics:mysql_slow_logs', 'invalid_topic') }}
  name: /var/log/mysql/slow-query.log
  pipe: /etc/pushclient/mysql_slow_query_log_parser.py -s /etc/pushclient/secrets_regex -c {{ cluster_id }} 2>> /var/log/statbox/mysql_slow_query_parser.log
  sid: {lines: 5}
  send_sigusr1: true

- topic: {{ salt.pillar.get('data:logship:topics:mysql_audit_logs', 'invalid_topic') }}
  name: /var/log/mysql/audit.log
  pipe: /etc/pushclient/mysql_audit_log_parser.py -s /etc/pushclient/secrets_regex -c {{ cluster_id }} 2>> /var/log/statbox/mysql_audit_parser.log
  sid: {lines: 2}
  send_sigusr1: true
