{% extends 'components/mdb-telegraf-windows/conf/telegraf.conf' %}
###############################################################################
#                            OUTPUT PLUGINS                                   #
###############################################################################
###############################################################################
#                            PROCESSOR PLUGINS                                #
###############################################################################
###############################################################################
#                            AGGREGATOR PLUGINS                               #
###############################################################################
###############################################################################
#                            CONNECTION POOL                                  #
###############################################################################
###############################################################################
#                            INPUT PLUGINS                                    #
###############################################################################
{% block input_plugins %}
{{ super() }}
    [[inputs.exec]]
        commands = [
            "powershell 'C:/PROGRA~1/MDB/juggler/cluster_member.ps1 -format influx'"
        ]
        timeout = "5s"
        name_suffix = ""
        data_format = "influx"
{% endblock %}
###############################################################################
#                            CHECKS                                           #
###############################################################################
{% block checks %}
{{ super() }}
    [[inputs.juggler_runner.Checks]]
        service = "cluster_membership_status"
        execution_interval = 60
        execution_timeout = 10
        command = '&"C:\Program Files\MDB\juggler\cluster_member.ps1"'
{% endblock %}    
