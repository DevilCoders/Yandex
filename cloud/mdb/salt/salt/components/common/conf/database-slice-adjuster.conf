{%
set config = {
        'path': '/etc/systemd/system/database.slice',
        'cpu': {
            'enabled': salt.pillar.get('data:database_slice:limit_cpu', True),
            'limit': salt.pillar.get('data:dbaas:flavor:cpu_limit'),
            'max_reserved': salt.pillar.get('data:database_slice:max_reserved_cpu', 1),
        },
        'memory': {
            'enabled': salt.pillar.get('data:database_slice:limit_memory', True),
            'limit': salt.pillar.get('data:dbaas:flavor:memory_limit'),
            'multiplier_advised': salt.pillar.get('data:database_slice:multiplier_advised_memory', 0.25),
            'multiplier_reserved': salt.pillar.get('data:database_slice:multiplier_reserved_memory', 0.2),
            'max_advised': salt.pillar.get('data:database_slice:max_advised_memory', 1536 * 1024 * 1024),
            'max_reserved': salt.pillar.get('data:database_slice:max_reserved_memory', 1024 * 1024 * 1024),
        },
    }
%}
{{ config|json(indent=4) }}
