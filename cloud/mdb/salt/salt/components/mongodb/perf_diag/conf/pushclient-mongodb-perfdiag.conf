logger:
  remote: 0
  level: 6
  mode: file
  file: '/var/log/statbox/pushclient-mongodb-perfdiag.log'
  timeformat: '%d.%m.%Y-%H.%M.%S'

network:
  proto: pq
  master-addr: {{ salt.pillar.get('data:perf_diag:logbroker_host', 'logbroker.yandex.net.') }}
  master-port: {{ salt.pillar.get('data:perf_diag:logbroker_port', 2135) }}
{% if salt.pillar.get('data:perf_diag:use_cloud_logbroker') %}
  database: {{ salt.pillar.get('data:perf_diag:database') }}
  iam: 1
  iam-key-file: /etc/pushclient/mongodb-perfdiag.secret
  iam-endpoint: {{ salt.pillar.get('data:perf_diag:iam_endpoint') }}
  ssl:
    enabled: 1
{% elif salt.pillar.get('data:perf_diag:tvm_client_id') %}
  tvm-client-id: {{ salt.pillar.get('data:perf_diag:tvm_client_id', '123456') }}
  tvm-server-id: {{ salt.pillar.get('data:perf_diag:tvm_server_id', '654321') }}
  tvm-secret-file: /etc/pushclient/mongodb-perfdiag.secret
{% endif %}


watcher:
  state: /var/lib/push-client-perfdiag

files:
#include "/etc/pushclient/conf.d/topics-mongodb-perfdiag-grpc.conf"
