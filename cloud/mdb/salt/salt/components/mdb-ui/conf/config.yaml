main:
  base_host: {{ salt['pillar.get']('data:mdbui:base_host') }}
  debug: {{ salt['pillar.get']('data:mdbui:debug', 'false') }}
  secret_key: {{ salt['pillar.get']('data:mdbui:secret_key') }}
  installation: {{ salt['pillar.get']('data:mdbui:installation') }}
  sentry_dsn: {{ salt['pillar.get']('data:mdbui:sentry_dsn') }}
{% if salt['pillar.get']('data:network:l3_slb:virtual_ipv6') %}
  balancer_ip: {{ salt['pillar.get']('data:network:l3_slb:virtual_ipv6:0') }}
{% endif %}
  restart_tasks_white_list:
    - clickhouse_add_zookeeper
    - clickhouse_cluster_create
    - clickhouse_cluster_delete
    - clickhouse_cluster_delete_metadata
    - clickhouse_cluster_maintenance
    - clickhouse_metadata_update
    - clickhouse_cluster_modify
    - clickhouse_cluster_purge
    - clickhouse_cluster_restore
    - clickhouse_cluster_update_tls_certs
    - clickhouse_cluster_upgrade
    - clickhouse_database_create
    - clickhouse_database_delete
    - clickhouse_dictionary_create
    - clickhouse_dictionary_delete
    - clickhouse_format_schema_create
    - clickhouse_format_schema_delete
    - clickhouse_format_schema_modify
    - clickhouse_host_create
    - clickhouse_host_delete
    - clickhouse_host_modify
    - clickhouse_model_create
    - clickhouse_model_delete
    - clickhouse_model_modify
    - clickhouse_shard_create
    - clickhouse_shard_delete
    - clickhouse_shard_modify
    - clickhouse_user_create
    - clickhouse_user_delete
    - clickhouse_user_modify
    - clickhouse_zookeeper_host_create
    - clickhouse_zookeeper_host_delete
    - elasticsearch_cluster_create
    - elasticsearch_cluster_delete
    - elasticsearch_cluster_delete_metadata
    - elasticsearch_metadata_update
    - elasticsearch_cluster_purge
    - elasticsearch_cluster_restore
    - elasticsearch_host_create
    - elasticsearch_host_delete
    - elasticsearch_user_create
    - elasticsearch_user_modify
    - elasticsearch_cluster_maintenance
    - elasticsearch_cluster_modify
    - greenplum_cluster_create
    - greenplum_cluster_delete
    - greenplum_cluster_delete_metadata
    - greenplum_cluster_purge
    - greenplum_host_create
    - greenplum_metadata_update
    - kafka_cluster_create
    - kafka_cluster_delete
    - kafka_cluster_delete_metadata
    - kafka_cluster_maintenance
    - kafka_metadata_update
    - kafka_cluster_stop
    - kafka_cluster_update_tls_certs
    - kafka_topic_create
    - kafka_topic_modify
    - kafka_user_create
    - kafka_user_modify
    - mongodb_cluster_create
    - mongodb_cluster_delete
    - mongodb_cluster_delete_metadata
    - mongodb_cluster_enable_sharding
    - mongodb_cluster_maintenance
    - mongodb_metadata_update
    - mongodb_cluster_purge
    - mongodb_cluster_restore
    - mongodb_cluster_upgrade
    - mongodb_host_create
    - mongodb_host_delete
    - mongodb_shard_create
    - mysql_cluster_create
    - mysql_cluster_delete
    - mysql_cluster_delete_metadata
    - mysql_cluster_maintenance
    - mysql_metadata_update
    - mysql_cluster_purge
    - mysql_cluster_restore
    - mysql_cluster_update_tls_certs
    - mysql_cluster_upgrade_80
    - mysql_database_create
    - mysql_database_delete
    - mysql_host_create
    - mysql_host_delete
    - mysql_host_modify
    - mysql_user_create
    - mysql_user_delete
    - mysql_user_modify
    - postgresql_cluster_create
    - postgresql_cluster_delete
    - postgresql_cluster_delete_metadata
    - postgresql_cluster_maintenance
    - postgresql_metadata_update
    - postgresql_cluster_move
    - postgresql_cluster_online_resetup
    - postgresql_cluster_purge
    - postgresql_cluster_restore
    - postgresql_cluster_update_tls_certs
    - postgresql_cluster_wait_backup_service
    - postgresql_cluster_maintenance
    - postgresql_database_create
    - postgresql_database_delete
    - postgresql_database_modify
    - postgresql_host_create
    - postgresql_host_delete
    - postgresql_host_modify
    - postgresql_user_create
    - postgresql_user_delete
    - postgresql_user_modify
    - redis_cluster_create
    - redis_cluster_create_backup
    - redis_cluster_delete
    - redis_cluster_delete_metadata
    - redis_cluster_maintenance
    - redis_cluster_move
    - redis_cluster_purge
    - redis_cluster_rebalance
    - redis_cluster_restore
    - redis_cluster_start
    - redis_cluster_start_failover
    - redis_cluster_stop
    - redis_cluster_upgrade
    - redis_host_create
    - redis_host_delete
    - redis_host_modify
    - redis_metadata_update
    - redis_shard_create
    - redis_shard_delete
    - redis_shard_host_create
    - redis_shard_host_delete
    - sqlserver_cluster_create
    - sqlserver_cluster_delete
    - sqlserver_cluster_start
    - sqlserver_cluster_stop
    - sqlserver_metadata_update
    - sqlserver_user_create
    - sqlserver_user_modify
    - sqlserver_user_delete
    - sqlserver_permission_grant
    - sqlserver_permission_revoke
    - sqlserver_database_add
    - sqlserver_database_delete
{% for task in salt['pillar.get']('data:mdbui:white_list', []) %}
    - {{ task }}
{% endfor %}

auth:
  blackbox_url: https://blackbox.yandex-team.ru/blackbox
  mdb_developers:
{% for login in salt['pillar.get']('data:mdb-developers') %}
    - {{ login }}
{% endfor %}
  mdb_supports:
{% for login in salt['pillar.get']('data:mdb-supports') %}
    - {{ login }}
{% endfor %}
  use_tvm: {{ salt['pillar.get']('data:mdbui:use_tvm', True) }}
  tvm_blackbox_env: ProdYateam
  tvm_client_id: {{ salt['pillar.get']('data:mdbui:tvm_client_id') }}
  tvm_secret: {{ salt['pillar.get']('data:mdbui:tvm_secret') }}

deploydb:
  host: {{ salt['pillar.get']('data:mdbui:deploydb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:deploydb:password') }}

metadb:
  host: {{ salt['pillar.get']('data:mdbui:metadb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:metadb:password') }}

katandb:
  host: {{ salt['pillar.get']('data:mdbui:katandb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:katandb:password') }}

mlockdb:
  host: {{ salt['pillar.get']('data:mdbui:mlockdb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:mlockdb:password') }}

{% if salt['pillar.get']('data:mdbui:dbmdb') %}
dbmdb:
  host: {{ salt['pillar.get']('data:mdbui:dbmdb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:dbmdb:password') }}
{% endif %}

cmsdb:
  host: {{ salt['pillar.get']('data:mdbui:cmsdb:host') }}
  password: {{ salt['pillar.get']('data:mdbui:cmsdb:password') }}
