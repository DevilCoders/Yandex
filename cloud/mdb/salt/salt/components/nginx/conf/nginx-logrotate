/var/log/nginx/*.log {
    start 0
    nodateext
    missingok
    rotate {{ salt.pillar.get('data:nginx:logs:files_num', 14) }}
    daily
    compress
    maxsize {{ salt.pillar.get('data:nginx:logs:max_file_size_mb', 500) }}M
    notifempty
    sharedscripts
    postrotate
        [ -f /var/run/nginx.pid ] && kill -USR1 `cat /var/run/nginx.pid`
    endscript
}
