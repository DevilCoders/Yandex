{% set mongodb = salt.slsutil.renderer('salt://components/mongodb/defaults.py?saltenv=' ~ saltenv) %}
{% for srv in mongodb.services_deployed %}
[mongodb_{{srv}}_sli]
plugin = common
{% if srv == 'mongos': %}
module = mongos_sli
{% else %}
module = mongodb_sli
{% endif %}
interval = 15

wtimeout=5000
database=mdb_internal
collection=check_{{ salt['pillar.get']('data:dbaas:shard_name') }}
collection_prefix=check_
service={{srv}}

conn_pool_name = {{srv}}

yasm_suffix = tmmx
yasm_tags_db = {{srv}}
yasm_ttl = 30
{% endfor %}
