{% set mongodb = salt.slsutil.renderer('salt://components/mongodb/defaults.py?saltenv=' ~ saltenv) %}
{% set srv = 'mongod' %}
{% if srv in mongodb.services_deployed %}
[mongodb_top]
plugin = common
module = mongodb_top
interval = {{ 15 if not is_burst else (15, min_burst_interval) | max }}
prefix = top

conn_pool_name = {{srv}}

skip_dbs = admin local config mdb_internal
limit_checked_ns = 1024
limit_collected_ns = 5
collect_fields = total readLock writeLock
use_labels = True

yasm_suffix = vmmv
yasm_tags_db = {{srv}}
yasm_ttl = 300

{% endif %}
