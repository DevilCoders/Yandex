[pg_s3db_chunks_size]
plugin = postgres
module = pg_query
interval = 3600
query = WITH counts AS (SELECT sum(simple_objects_count + multipart_objects_count) AS c FROM s3.chunks_counters GROUP by bid, cid ) SELECT  count(*) FILTER (WHERE c = 0) AS chunks_size_0_0, count(*) FILTER (WHERE c > 0 AND c < 10) AS chunks_size_0_10, count(*) FILTER (WHERE c >= 10 AND c < 100) AS chunks_size_10_100, count(*) FILTER (WHERE c >= 100 AND c < 1000) AS chunks_size_100_1000, count(*) FILTER (WHERE c >= 1000 AND c < 10000) AS chunks_size_1000_10000, count(*) FILTER (WHERE c >= 10000 AND c < 100000) AS chunks_size_10000_100000, count(*) FILTER (WHERE c >= 100000) AS chunks_size_100000_inf FROM counts;
databases = s3db
yasm_ttl = 3600
yasm_suffix = tmmx
