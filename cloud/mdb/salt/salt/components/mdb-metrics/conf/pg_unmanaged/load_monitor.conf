{% from "components/postgres/pg.jinja" import pg with context %}
[load_monitor]
plugin = common
module = load_monitor
interval = 15
checks = cpu

{% if salt.pillar.get('data:dbaas:vtype') == 'compute' %}
cpu_check_iowait = true
{% else %}
cpu_check_iowait = false
{% endif %}
cpu_check_children = true

pid_file = /var/run/postgresql/{{ pg.version.major }}-data.pid, /var/run/odyssey/odyssey.pid

# cpu_limit = 0 -> get it from /etc/dbaas.conf
cpu_max_use_1 = 99.0
cpu_max_use_15 = 95.0
cpu_max_use_60 = 95.0

yasm_ttl = 300
yasm_suffix = tmmx
