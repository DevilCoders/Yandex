{% from "components/mongodb-baremetal/map.jinja" import mongodb with context %}
{% for srv in mongodb.services_deployed if srv == 'mongodb' %}
{%   set config = mongodb.config.get(srv) %}
[mongodb_{{srv}}_replication]
plugin = common
module = mongodb_replication
interval = 15
metrics = replicationLag,lastHeartbeat,lastHeartbeatRecv,uptime,configVersion,electionTime,pingMs
oplog_stats = True

conn_pool_name = {{srv}}
port = {{config.net.port}}

yasm_suffix = vmmv,tmmx
yasm_tags_cmd = /usr/local/yasmagent/mdb_mongodb_getter.py
yasm_ttl = 300

{% endfor %}
