[pg_wal_rate]
plugin = postgres
module = pg_query
interval = 5
report_inc = True

query = SELECT CASE WHEN pg_is_in_recovery() = false THEN pg_wal_lsn_diff(pg_current_wal_lsn(), '0/0')::int8 ELSE pg_wal_lsn_diff(pg_last_wal_replay_lsn(), '0/0')::int8 END AS wal_rate_bytes;
databases = postgres

yasm_suffix = vmmv,tmmx
