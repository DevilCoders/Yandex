[pg_stat_activity_wait_event_type]
plugin = postgres
module = pg_query
interval = 5

rowsignal = 1
query = SELECT format('%s_%s', wait_event_type, wait_event_subtype) wait_event, sessions FROM (SELECT coalesce(wait_event_type,'CPU') wait_event_type, coalesce(wait_event,'CPU') wait_event_subtype, count(*) sessions FROM pg_stat_activity WHERE state!='idle' AND usename NOT IN ('monitor', 'postgres', 'repl') GROUP BY wait_event, wait_event_type) t;
databases = postgres

yasm_ttl = 5

yasm_suffix = tmmx
