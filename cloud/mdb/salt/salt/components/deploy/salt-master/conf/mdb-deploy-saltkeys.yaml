loglevel: Debug
capath: /opt/yandex/allCAs.pem
{% set deployapiurl = salt['pillar.get']('data:mdb-deploy-saltkeys:config:deploy_api_url') %}
{% if deployapiurl %}
deployapiurl: {{ deployapiurl }}
{% endif %}
config:
  security:
    tls:
      ca_file: /opt/yandex/allCAs.pem
deployapitoken: {{ salt['pillar.get']('data:mdb-deploy-saltkeys:config:deploy_api_token', '__NOTOKEN__') }}
addr: {{ salt['pillar.get']('data:iam_ts', '__NO_IAM_TS__') }}
iam_id: {{ salt['pillar.get']('data:mdb_secrets:sa_id', '') }}
iam_key_id: {{ salt['pillar.get']('data:mdb_secrets:sa_key_id', '__NO_IAM_KEY_ID__') }}
iam_private_key: |
    {{ salt['pillar.get']('data:mdb_secrets:sa_private_key', '__NO_IAM_PRIVATE_KEY__') | indent(4) }}
saltapi:
  cherrypy:
    http:
      logging:
        enabled: false
        log_request_body: false
        log_response_body: false
    auth:
      user: {{ salt['pillar.get']('data:mdb-deploy-saltkeys:config:saltapi:user', '__NOUSER__') }}
      password: {{ salt['pillar.get']('data:mdb-deploy-saltkeys:config:saltapi:password', '__NOPASSWORD__') }}
      eauth: {{ salt['pillar.get']('data:mdb-deploy-saltkeys:config:saltapi:eauth', '__NOEAUTH__') }}
minion_pinger:
  max_parallel_pings: {{ salt['pillar.get']('data:mdb-deploy-saltkeys:config:minion_pinger:max_parallel_pings', 5) }}
