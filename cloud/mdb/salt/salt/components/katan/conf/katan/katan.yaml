app:
    level: Debug
    instrumentation:
        addr: "[::1]:{{ salt.pillar.get('data:katan:instrumentation:port') }}"
    sentry:
        environment: {{ salt.pillar.get('data:sentry:environment') }}
        dsn: {{ salt.pillar.get('data:katan:sentry:dsn:katan') }}
    service_account:
        id: {{ salt.pillar.get('data:katan:service_account:id') }}
        key_id: {{ salt.pillar.get('data:katan:service_account:key_id') }}
        private_key: {{ salt.pillar.get('data:katan:service_account:private_key') | yaml_encode }}
    environment:
        services:
            iam:
                v1:
                    token_service:
                        endpoint: {{ salt.pillar.get('data:token_service:address') }}
katandb:
    addrs: {{ salt.pillar.get('data:katandb:hosts') }}
    db: katandb
    user: katan
    password: {{ salt.pillar.get('data:config:pgusers:katan:password') | yaml_encode }}
katan:
    # how many parallel rollouts katan can run
    parallel: 30
    roller:
        rollout:
            allowed_deploy_groups: {{ salt.pillar.get('data:katan:allowed_deploy_groups', []) }}
            health_check_max_wait_sec: 5m
deploy:
    uri: https://{{ salt.pillar.get('data:deploy:api_host') }}
    transport:
        logging:
            enabled: false
        tls:
            ca_file: "/opt/yandex/allCAs.pem"
juggler:
    transport:
        logging:
            enabled: false
        tls:
            ca_file: "/opt/yandex/allCAs.pem"
health:
    host: {{ salt.pillar.get('data:mdb-health:host') }}
    tls:
        ca_file: "/opt/yandex/allCAs.pem"
mlock:
    host: {{ salt.pillar.get('data:mlock:address') }}
    transport:
        security:
            tls:
                ca_file: "/opt/yandex/allCAs.pem"
token_service:
    security:
        tls:
            ca_file: "/opt/yandex/allCAs.pem"
