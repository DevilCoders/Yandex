data:
  dbaas_metadb:
    default_pillar:
      - id: 1
        value:
          cert.ca: |
            -----BEGIN CERTIFICATE-----
            MIIE3TCCAsWgAwIBAgIKPxb5sAAAAAAAFzANBgkqhkiG9w0BAQ0FADAfMR0wGwYD
            VQQDExRZYW5kZXhJbnRlcm5hbFJvb3RDQTAeFw0xNzA2MjAxNjQ0MzdaFw0yNzA2
            MjAxNjU0MzdaMFUxEjAQBgoJkiaJk/IsZAEZFgJydTEWMBQGCgmSJomT8ixkARkW
            BnlhbmRleDESMBAGCgmSJomT8ixkARkWAmxkMRMwEQYDVQQDEwpZYW5kZXhDTENB
            MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqgNnjk0JKPcbsk1+KG2t
            eM1AfMnEe5RkAJuBBuwVV49snhcvO1jhKBx/pCnjr6biICc1/oAFDVgU8yVYYPwp
            WZ2vH3ZtscjJ/RAT/NS9OKKG7kKknhFhVYxua5xhoIQmm6usBNYYiTcWoFm1eHC8
            I9oddOLSscZYbh3unVRvt+3V+drVmUx9oSUKpqMgfysiv1MN6zB3vq9TFkbhz53E
            k0tEcV+W2NnDaeFhLKy284FDKLvOdTDj1EDsSAihxl7sNEKpupNuhgyy2siOqUb+
            d5mO/CRfaAKGg3E6hDM3pEi48E506dJdjPXWfHKSvuguMLRlb2RWdVocRZuyWxOh
            0QIDAQABo4HkMIHhMBAGCSsGAQQBgjcVAQQDAgEAMB0GA1UdDgQWBBRMU5uItjx+
            TOicX1+ovC1Xq2PSnzAZBgkrBgEEAYI3FAIEDB4KAFMAdQBiAEMAQTALBgNVHQ8E
            BAMCAYYwDwYDVR0TAQH/BAUwAwEB/zAfBgNVHSMEGDAWgBSrucX/oe/mUx0zOSKE
            0XbUN04tajBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8vY3Jscy55YW5kZXgucnUv
            WWFuZGV4SW50ZXJuYWxSb290Q0EvWWFuZGV4SW50ZXJuYWxSb290Q0EuY3JsMA0G
            CSqGSIb3DQEBDQUAA4ICAQAsR5Lb4Pv2FD0Kk+4oc1GEOnehxKLsQtdV81nrU+IV
            l9pr2oNMdi8lwIolvHZRllLM4Ba5AcRH6YJ5fe7AjKm+5EdSkhqVWo2UOllRCbtS
            wmL50+erOAkxstSlRkO6b8x1L0MOBKv54E5YcQ/Wwt27ldSb6RkEmJBGvmxObAaf
            5zc51pqSqao9tnldYaCblEQ/Zmy43FliIpa2eUJoh8DqK8bVo2gcI3wbQ32tWs9u
            wvKk8fo4lAdhCwhv+QHuqau1VAY9hPU106bsFIDUmijTMxjAobKBi6CkIX6EbNHU
            Jv4DzYVLlDd2y0CADdn2F6I70xpCBn5cquSGuvFbqZjQDmIHwb7WQSxadkiGRWfc
            zVTnmiHjJONJJIpE2t+FOV3hc+8o98OzOtNaH2QQ9j6dnKvtIGKGFeNSDp0vXPOi
            QhHiIyuB7eWx+g2whktQ74UCpGDSXYnEW3s8w5wezVWIEmouq7q4rCEkTNvJ7Ico
            43AgUdPzAFS2zYktw1C+cbUALM8smvXbXrXOBzMmscjIhtXvLMrpPeh23VfdJfQB
            0rN2BmRCLUE8JOV+o0k98XMm83oN+lGkL1l+hyoj3ok1uI3JrsWOcDyjOds3ptcN
            KimJLm27ndjcxDNo/iA6gefMJuCxFRaqI+eF4P0jSkMgnnQqZkvLGFuHCw8eRDhm
            bw==
            -----END CERTIFICATE-----
            -----BEGIN CERTIFICATE-----
            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
            LpuQKbSbIERsmR+QqQ==
            -----END CERTIFICATE-----
          data:
            access:
              user_hosts:
              - fqdn: s3-private.mds.yandex.net
                port: 443
              management_hosts:
              - fqdn: s3-private.mds.yandex.net
                port: 443
              data_lens_nets:
                - '2a02:6b8:c03:500:0:f83d:a987:0/112'
                - '2a02:6b8:c02:900:0:f83d:a987:0/112'
                - '2a02:6b8:c0e:500:0:f83d:a987:0/112'
              web_sql_nets: []
              data_transfer_nets:
                - '2a02:6b8:c03:500:0:f826:2:0/112'
                - '2a02:6b8:c03:500:0:f826:1:0/112'
                - '2a02:6b8:c03:500:0:f826::/112'
                - '2a02:6b8:c03:500:0:f826:bb45:0/112'
                - '2a02:6b8:c02:900:0:f826:1:0/112'
                - '2a02:6b8:c02:900:0:f826:bb45:0/112'
                - '2a02:6b8:c02:900:0:f826::/112'
                - '2a02:6b8:c02:900:0:f826:2:0/112'
                - '2a02:6b8:c0e:500:0:f826:2:0/112'
                - '2a02:6b8:c0e:500:0:f826:bb45:0/112'
                - '2a02:6b8:c0e:500:0:f826::/112'
                - '2a02:6b8:c0e:500:0:f826:1:0/112'
            dist:
              bionic:
                secure: True
              pgdg:
                absent: True
            allow_salt_version_update: False
            linux_kernel:
              version: '4.19.143-37'
            token_service:
              address: ts.private-api.cloud.yandex.net:4282
            solomon:
              agent: https://solomon.cloud.yandex-team.ru/push/json
              push_url: https://solomon.cloud.yandex-team.ru/api/v2/push
              project: yandexcloud
              cluster: 'mdb_{ctype}'
              service: yandexcloud_dbaas
              ca_path: /opt/yandex/allCAs.pem
              sa_id: {{ salt.yav.get('ver-01enr16x8yxqg734z8x3094fxe[service_account_id]') }}
              sa_private_key: {{ salt.yav.get('ver-01enr16x8yxqg734z8x3094fxe[private_key]') | yaml_dquote }}
              sa_key_id: {{ salt.yav.get('ver-01enr16x8yxqg734z8x3094fxe[key_id]') }}
            solomon_cloud:
              push_url: https://solomon.cloud.yandex-team.ru/api/v2/push
              ca_path: /opt/yandex/allCAs.pem
              sa_id: {{ salt.yav.get('ver-01enr1g9d5t523vkr0c35xq87e[service_account_id]') }}
              sa_private_key: {{ salt.yav.get('ver-01enr1g9d5t523vkr0c35xq87e[private_key]') | yaml_dquote }}
              sa_key_id: {{ salt.yav.get('ver-01enr1g9d5t523vkr0c35xq87e[key_id]') }}
            mdb_health:
              host: mdb-health.private-api.cloud.yandex.net
              ca_path: /opt/yandex/allCAs.pem
            mdb_int_api:
              address: mdb-internal-api.private-api.cloud.yandex.net
            certs:
              readonly: True
            use_mdbsecrets: True
            monrun2: true
            system:
              journald:
                system_max_use: '50M'
            use_yasmagent: false
            ship_logs: true
            config:
              log_rotate_by_size: true
            s3:
              access_key_id:
                data: {{ salt.yav.get('ver-01e99a7323jcjwqmz97m3gr33m[id]') }}
                encryption_version: 1
              access_secret_key:
                data: {{ salt.yav.get('ver-01e99a7323jcjwqmz97m3gr33m[secret]') }}
                encryption_version: 1
              endpoint: https://s3-private.mds.yandex.net
              path_addressing_style: false
              virtual_addressing_style: true
            object_storage:
              endpoint: https://storage.yandexcloud.net
            mdb_dns:
              host: mdb-dns.private-api.cloud.yandex.net
            billing:
              tvm_secret:
                data: {{ salt.yav.get('ver-01e99abjx06kj65s8hbm2bnwhj[secret]') }}
                encryption_version: 1
              topic: billing-mdb-instance
              ident: yc-mdb
              tvm_client_id: 2002008
              tvm_server_id: 2001059
            billing2:
              logbroker:
                endpoint: 'lb.etn03iai600jur7pipla.ydb.mdb.yandexcloud.net'
                database: '/global/b1gvcqr959dbmi1jltep/etn03iai600jur7pipla'
                topic: '/yc.billing.service-cloud/billing-mdb-mssql'
                iam:
                  token_service:
                    endpoint: 'ts.private-api.cloud.yandex.net:4282'
                  service_account:
                    id: yc.mdb.billing
                    key_id: {{ salt.yav.get('ver-01erycww47xz7sz7vd9fdd6j1p[key_id]') }}
                    private_key: |
                      {{ salt.yav.get('ver-01erycww47xz7sz7vd9fdd6j1p[private_key]')|indent(22) }}
            logship:
              use_rt: false
              use_cloud_logbroker: true
              topics:
                security_log: b1ggh9onj7ljr7m9cici/dataplane/security-logs
              logbroker_port: 2135
              logbroker_host: lb.etn03iai600jur7pipla.ydb.mdb.yandexcloud.net
              database: /global/b1gvcqr959dbmi1jltep/etn03iai600jur7pipla
              iam_endpoint: iam.api.cloud.yandex.net
              lb_producer_key: {{ salt.yav.get('ver-01ewg0vy8nmcd1cfj317xnzks2[lb_producer_key]') | tojson }}
            sysctl:
              vm.nr_hugepages: 0
          mine_functions:
            grains.item: [id, role, virtual]
