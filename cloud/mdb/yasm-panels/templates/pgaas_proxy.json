<% set dom0_tags = 'prj=none' %>
<% if env == 'test' %>
<% set dom0_tags = dom0_tags ~ ';ctype=2ab9e4ed-7ed8-4aad-833d-556449f9374f' %>
<% set domu_tags = 'ctype=2ab9e4ed-7ed8-4aad-833d-556449f9374f' %>
<% else %>
<% set dom0_tags = dom0_tags ~ ';ctype=7837771b-98ea-484d-8825-c86937b4e388' %>
<% set domu_tags = 'ctype=7837771b-98ea-484d-8825-c86937b4e388' %>
<% endif %>
<% if geo %>
<% set dom0_tags = dom0_tags ~ ';geo=' ~ geo %>
<% set domu_tags = domu_tags ~ ';geo=' ~ geo %>
<% endif %>
{
    "title": "Pgaas-proxy << env >>",
    "type": "panel",
    "charts": [
        {
            "id": "cpu",
            "type": "graphic",
            "row": 1,
            "col": 1,
            "yAxis": [
                {
                    "minValue": 0,
                    "maxValue": 120
                },
                {
                    "minValue": 0,
                    "maxValue": 120
                }
            ],
            "signals": [
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-cpu_usage_cores_tmmv",
                    "title": "Used",
                    "yAxis": 0
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-cpu_guarantee_cores_tmmv",
                    "title": "Guaranteed",
                    "stacked": false,
                    "yAxis": 1
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-cpu_limit_cores_tmmv",
                    "title": "Limit",
                    "stacked": false,
                    "yAxis": 1
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-cpu_wait_cores_tmmv",
                    "title": "Wait",
                    "yAxis": 0
                }
            ],
            "consts": [],
            "title": "CPU (Cores)",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "mem",
            "type": "graphic",
            "row": 1,
            "col": 3,
            "yAxis": [
                {}
            ],
            "signals": [
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-memory_usage_gb_tmmv",
                    "title": "Used"
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-memory_guarantee_gb_tmmv",
                    "title": "Guaranteed"
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-memory_limit_gb_tmmv",
                    "title": "Limit"
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-anon_usage_gb_tmmv",
                    "title": "Anon used"
                }
            ],
            "consts": [],
            "title": "Memory (GB)",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "io",
            "type": "graphic",
            "row": 1,
            "col": 5,
            "yAxis": [
                {},
                {}
            ],
            "signals": [
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-io_read_fs_bytes_tmmv",
                    "title": "read",
                    "normalizable": true,
                    "yAxis": 0
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-io_write_fs_bytes_tmmv",
                    "title": "write",
                    "normalizable": true,
                    "yAxis": 0
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-io_limit_bytes_tmmv",
                    "title": "limit",
                    "stacked": false,
                    "normalizable": true,
                    "yAxis": 1
                }
            ],
            "consts": [],
            "title": "I/O (B/s)",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "net",
            "type": "graphic",
            "row": 3,
            "col": 1,
            "yAxis": [
                {}
            ],
            "signals": [
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "sum(portoinst-net_rx_mb_summ, portoinst-net_tx_mb_summ)",
                    "title": "Used"
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-net_guarantee_mb_summ",
                    "title": "Guaranteed"
                },
                {
                    "tag": "itype=mdbdom0;<< dom0_tags >>",
                    "host": "CON",
                    "name": "portoinst-net_limit_mb_summ",
                    "title": "Limit"
                }
            ],
            "consts": [],
            "title": "Network (MB/s)",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "conn",
            "type": "graphic",
            "row": 3,
            "col": 3,
            "yAxis": [
                {},
                {}
            ],
            "signals": [
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-dbaas_bouncer_total_tcp_connections_avvv)",
                    "yAxis": 0,
                    "title": "tcp"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-dbaas_bouncer_login_clients_avvv)",
                    "yAxis": 1,
                    "title": "login"
                }
            ],
            "consts": [],
            "title": "Connections",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "hosts",
            "type": "graphic",
            "row": 5,
            "col": 1,
            "yAxis": [
                {},
                {}
            ],
            "signals": [
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_total_hosts_avvv)",
                    "yAxis": 1,
                    "title": "total"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_dead_hosts_avvv)",
                    "yAxis": 0,
                    "title": "dead"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_overloaded_hosts_avvv)",
                    "yAxis": 0,
                    "title": "overloaded"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_stale_hosts_avvv)",
                    "yAxis": 0,
                    "title": "stale"
                }
            ],
            "consts": [],
            "title": "Hosts",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "rps",
            "type": "graphic",
            "row": 3,
            "col": 5,
            "yAxis": [
                {}
            ],
            "signals": [
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-dbaas_bouncer_total_requests_dvvv)",
                    "yAxis": 0,
                    "title": "rps"
                }
            ],
            "consts": [],
            "title": "RPS",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "clusters",
            "type": "graphic",
            "row": 5,
            "col": 3,
            "minValue": 0,
            "yAxis": [
                {},
                {}
            ],
            "signals": [
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_total_clusters_avvv)",
                    "yAxis": 0,
                    "title": "total"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_ro_clusters_avvv)",
                    "yAxis": 1,
                    "title": "read-only"
                },
                {
                    "tag": "itype=pgaasproxy;<< domu_tags >>",
                    "host": "CON",
                    "name": "aver(unistat-pgaas_proxy_dead_clusters_avvv)",
                    "yAxis": 1,
                    "title": "dead"
                },
            ],
            "consts": [],
            "title": "Clusters",
            "stacked": false,
            "normalize": true
        }
    ]
}
