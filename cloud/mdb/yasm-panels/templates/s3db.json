{
    "title": "S3DB counters",
    "type": "panel",
    "editors": [
        "dsarafan",
        "d0uble",
        "annkpx"
    ],
    "charts": [
        {
            "id": "buckets_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 1,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_buckets_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Buckets by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "chunks_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 1,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_chunks_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Chunks by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 2,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Objects count by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_size_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 2,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_size_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Objects size by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_count_by_type",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 3,
            "col": 1,
            "signals": [
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_simple_objects_count_tmmx",
                    "title": "simple objects",
                },
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_multipart_objects_count_tmmx",
                    "title": "multipart objects",
                },
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_parts_count_tmmx",
                    "title": "object parts",
                }
            ],
            "title": "Objects count by type",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_size_by_type",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 3,
            "col": 3,
            "signals": [
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_simple_objects_size_tmmx",
                    "title": "simple objects",
                },
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_multipart_objects_size_tmmx",
                    "title": "multipart objects",
                },
                {
                    "tag": "itype=mailpostgresql;ctype=mail-s3db;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_parts_size_tmmx",
                    "title": "objects parts",
                }
            ],
            "title": "Objects size by type",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "simple_objects_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 4,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_simple_objects_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "SImple objects count by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "simple_objects_size_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 4,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_simple_objects_size_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Simple objects size by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "multipart_objects_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 5,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_multipart_objects_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Multipart objects count by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "multipart_objects_size_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 5,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_multipart_objects_size_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Multipart objects size by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_parts_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 6,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_parts_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Objects parts count by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "objects_parts_count_by_size",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 6,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_objects_parts_size_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Objects parts size by shard",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "schema_version_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 8,
            "col": 3,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_schema_version_xxxv",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Schema version",
            "stacked": false,
            "normalize": true
        },
        {
            "id": "empty_chunks_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 8,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_chunks_size_0_0_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Empty chunks count",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "deleted_objects_count_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 7,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_deleted_objects_count_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Storage delete queue size",
            "stacked": true,
            "normalize": true
        },
        {
            "id": "storage_delete_queue_data_size_by_shard",
            "type": "graphic",
            "width": 2,
            "height": 1,
            "row": 7,
            "col": 1,
            "signals": [
                <% for shard in shards|default(["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32"]) %>
                {
                    "tag": "itype=mailpostgresql;prj=s3db<< shard >>;tier=primary",
                    "host": "CON",
                    "name": "push-s3db_deleted_objects_size_tmmx",
                    "title": "s3db<< shard >>",
                },
                <% endfor %>
            ],
            "title": "Storage delete queue data size",
            "stacked": true,
            "normalize": true
        }
    ],
}
