{
    "definitions": {
        "EventMetadata": {
            "properties": {
                "cloud_id": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "event_id": {
                    "type": "string"
                },
                "event_type": {
                    "type": "string"
                },
                "folder_id": {
                    "type": "string"
                },
                "tracing_context": {
                    "properties": {
                        "parent_span_id": {
                            "type": "string"
                        },
                        "span_id": {
                            "type": "string"
                        },
                        "trace_id": {
                            "type": "string"
                        }
                    },
                    "additionalProperties": false,
                    "type": "object"
                }
            },
            "additionalProperties": false,
            "required": ["cloud_id", "created_at", "event_id", "event_type"],
            "type": "object"
        },
        "TracingContext": {
            "properties": {
                "parent_span_id": {
                    "type": "string"
                },
                "span_id": {
                    "type": "string"
                },
                "trace_id": {
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "type": "object"
        },
        "Authentication": {
            "properties": {
                "authenticated": {
                    "type": "boolean"
                },
                "subject_id": {
                    "type": "string"
                },
                "subject_type": {
                    "enum": [
                        "SUBJECT_TYPE_UNSPECIFIED",
                        "YANDEX_PASSPORT_USER_ACCOUNT",
                        "SERVICE_ACCOUNT"
                    ],
                    "type" : "string"
                }
            },
            "additionalProperties": false,
            "required": ["authenticated", "subject_id", "subject_type"],
            "type": "object"
        },
        "Authorization": {
            "properties": {
                "authorized": {
                    "type": "boolean"
                },
                "permissions": {
                    "items": {
                         "$ref": "#/definitions/RequestedPermissions"
                     },
                    "type": "array",
                    "minLength": 1
                }
            },
            "additionalProperties": false,
            "required": ["authorized", "permissions"],
            "type": "object"
        },
        "RequestedPermissions": {
            "properties": {
                "authorized": {
                    "type": "boolean"
                },
                "permission": {
                    "type": "string"
                },
                "resource_id": {
                    "type": "string"
                },
                "resource_type": {
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "required": ["authorized", "permission", "resource_id", "resource_type"],
            "type": "object"
        },
        "RequestMetadata": {
            "properties": {
                "idempotency_id": {
                    "type": "string"
                },
                "remote_address": {
                    "type": "string"
                },
                "request_id": {
                    "type": "string"
                },
                "user_agent": {
                    "type": "string"
                }
            },
            "additionalProperties": false,
            "required": ["remote_address", "request_id", "user_agent"],
            "type": "object"
        },
        "RequestParameters": {
            "type": "object",
            "required": [],
            "additionalProperties": true
        },
        "Error": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "string"
                },
                "message": {
                    "type": "string"
                },
                "details": {
                    "items": {
                        "type": "string"
                    },
                    "type": "array",
                    "minLength": 0
                }
            },
            "additionalProperties": true
        },
        "Response": {
            "type": "object",
            "additionalProperties": true
        }
    },
    "properties": {
        "authentication": {"$ref": "#/definitions/Authentication"},
        "authorization": {"$ref": "#/definitions/Authorization"},
        "details": {
            "type": "object"
        },
        "event_metadata": {"$ref": "#/definitions/EventMetadata"},
        "event_status": {
            "enum": [
                "EVENT_STATUS_UNSPECIFIED",
                "STARTED",
                "DONE"
            ],
            "type": "string"
        },
        "request_metadata": {"$ref": "#/definitions/RequestMetadata"},
        "error": {
            "oneOf": [
                {
                    "type": "null"
                },
                {
                    "$ref": "#/definitions/Error"
                }
            ]
        },
        "request_parameters": {
            "oneOf": [
                {
                    "type": "null"
                },
                {
                    "$ref": "#/definitions/RequestParameters"
                }
            ]
        },
        "response": {
            "oneOf": [
                {
                    "type": "null"
                },
                {
                    "$ref": "#/definitions/Response"
                }
            ]
        }
    },

    "additionalProperties": false,
    "required": ["authentication", "authorization", "details", "event_metadata", "event_status", "request_metadata"],
    "type": "object"
}
