[global]
zk_lockpath_prefix = /gpsync/greenplum/
daemon_user = gpadmin
log_level = debug
log_file = /var/log/gpsync/gpsync.log
pid_file = /var/run/gpsync/gpsync.pid
working_dir = /tmp
local_conn_string = dbname=postgres user=gpadmin connect_timeout=1 options='-c log_statement=none -c gp_session_role=utility'
append_master_conn_string = dbname=postgres user=gpadmin connect_timeout=1 options='-c log_statement=none -c gp_session_role=utility'
iteration_timeout = 1
zk_hosts = gpsync-zookeeper1.gpsync.gpsync.net:2181,gpsync-zookeeper2.gpsync.gpsync.net:2181,gpsync-zookeeper3.gpsync.gpsync.net:2181
use_replication_slots = no
standalone_pgbouncer = yes
quorum_commit = no
use_lwaldump = no
recovery_conf_rel_path = recovery.conf

[master]
change_replication_type = no
change_replication_metric = count,time
weekday_change_hours = 0-0
weekend_change_hours = 0-0
remaster_checks = 3

[replica]
failover_checks = 3
master_unavailability_timeout = 6
start_pgbouncer = no
remaster_checks = 5
min_failover_timeout = 300
allow_potential_data_loss = yes
recovery_timeout = 60

[commands]
promote = /opt/greenplum-db-6/bin/pg_ctl promote -D %p
rewind = touch /tmp/rewind_called && /opt/greenplum-db-6/bin/pg_rewind --target-pgdata=%p --source-server='host=%m dbname=postgres user=gpadmin connect_timeout=1'
pg_start = timeout -s SIGTERM 3600 sudo supervisorctl start greenplum
pg_stop = /opt/greenplum-db-6/bin/pg_ctl stop -s -m fast -w -t %t -D %p
pg_status = /opt/greenplum-db-6/bin/pg_ctl status -s -D %p
pg_reload = /opt/greenplum-db-6/bin/pg_ctl reload -s -D %p
bouncer_start = sudo supervisorctl start odyssey
bouncer_stop = sudo supervisorctl stop odyssey
bouncer_status = sudo supervisorctl status odyssey >/dev/null 2>&1
generate_recovery_conf = /usr/local/bin/gen_rec_conf.sh %m %p
get_control_parameter = /opt/greenplum-db-6/bin/pg_controldata %p | grep '%a:'
list_clusters = /opt/greenplum-db-6/bin/gp_lsclusters
