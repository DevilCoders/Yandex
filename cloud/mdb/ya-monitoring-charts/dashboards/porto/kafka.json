{
    "description": "Sync from service dashboard https://solomon.cloud.yandex-team.ru/admin/serviceProviders/managed-kafka/serviceDashboards/fbeg83jhsfi11d0gc44c", 
    "projectId": "internal-mdb", 
    "updatedBy": "samarius", 
    "parametrization": {
        "parameters": [
            {
                "labelValues": {
                    "projectId": "internal-mdb", 
                    "labelKey": "cid", 
                    "selectors": "{}"
                }, 
                "name": "resource_id", 
                "title": "Cluster ID"
            }
        ], 
        "selectors": "{service=\"mdb\"}"
    }, 
    "version": "30", 
    "createdBy": "shatl1", 
    "updatedAt": "2021-08-30T12:22:01.698Z", 
    "widgets": [
        {
            "position": {
                "x": "12", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Offline partitions", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNT"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "series_sum(\"partitions\", \"kafka_cluster_Partition_UnderMinIsr\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"})"
                        }, 
                        {
                            "query": "series_sum(\"topic\", \"kafka_server_ReplicaManager_UnderReplicatedPartitions\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"})"
                        }, 
                        {
                            "query": "\"kafka_server_ReplicaManager_OfflineReplicaCount\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"}"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "line", 
                        "settings": {
                            "name": "Under min ISR partitions"
                        }
                    }, 
                    {
                        "name": "kafka_server_ReplicaManager_UnderReplicatedPartitions", 
                        "settings": {
                            "name": "Underreplicated partitions"
                        }
                    }, 
                    {
                        "name": "kafka_server_ReplicaManager_UnderReplicatedPartitions|", 
                        "settings": {
                            "name": "Under min ISR partitions"
                        }
                    }, 
                    {
                        "name": "|topic", 
                        "settings": {
                            "name": "Underreplicated partitions"
                        }
                    }, 
                    {
                        "name": "kafka_server_ReplicaManager_OfflineReplicaCount|", 
                        "settings": {
                            "name": "Offline replicas"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }, 
                    {
                        "targetIndex": "1", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }, 
                    {
                        "targetIndex": "2", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "hkcjhohmu"
            }
        }, 
        {
            "position": {
                "x": "24", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Errors", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNT"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "derivative(\"kafka_network_RequestMetrics_Errors\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", error!=\"NONE\", host=\"*\", node=\"by_host\", dc=\"by_host\"})"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "ybtv16t3l"
            }
        }, 
        {
            "position": {
                "h": "8", 
                "w": "12"
            }, 
            "chart": {
                "title": "Alive brokers", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "zeroPrecision": true, 
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNT", 
                            "min": "0"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "\"kafka_is_alive\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"}"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "kafka_is_alive", 
                        "settings": {
                            "name": "Alive"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "rc4xxefr3"
            }
        }, 
        {
            "position": {
                "y": "8", 
                "h": "8", 
                "w": "12"
            }, 
            "chart": {
                "title": "Free space", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_BYTES_SI"
                        }
                    }, 
                    "type": "VISUALIZATION_TYPE_AREA", 
                    "stack": true, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "textMode": true, 
                            "query": "{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", name=\"disk-free_bytes_/var/lib/kafka\", host=\"*\", node=\"by_host\", dc=\"by_host\"}"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "disk.free_bytes", 
                        "settings": {
                            "name": "Disk free bytes"
                        }
                    }, 
                    {
                        "name": "disk.used_bytes", 
                        "settings": {
                            "name": "Disk used bytes"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "3x5e3obrt"
            }
        }, 
        {
            "position": {
                "y": "8", 
                "x": "12", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Messages in", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNTS_PER_SECOND"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "non_negative_derivative(\"kafka_server_BrokerTopicMetrics_MessagesIn\"{project=\"internal-mdb\", service=\"mdb\", topic=\"-\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"})"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "kafka_server_BrokerTopicMetrics_MessagesIn", 
                        "settings": {
                            "name": "Messages In / sec"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "eonre62wa"
            }
        }, 
        {
            "position": {
                "y": "8", 
                "x": "24", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Bytes In/Out", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_BYTES_SI_PER_SECOND"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "non_negative_derivative(\"kafka_server_BrokerTopicMetrics_BytesIn\"{project=\"internal-mdb\", service=\"mdb\", topic=\"-\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"})"
                        }, 
                        {
                            "textMode": true, 
                            "query": "derivative(\"kafka_server_BrokerTopicMetrics_BytesOut\"{project=\"internal-mdb\", service=\"mdb\", topic=\"-\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"})"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "kafka_server_BrokerTopicMetrics_BytesIn", 
                        "settings": {
                            "name": "Bytes in / sec"
                        }
                    }, 
                    {
                        "name": "kafka_server_BrokerTopicMetrics_BytesOut", 
                        "settings": {
                            "name": "Bytes out / sec"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }, 
                    {
                        "targetIndex": "1", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "2z347q51d"
            }
        }, 
        {
            "position": {
                "y": "16", 
                "h": "8", 
                "w": "12"
            }, 
            "chart": {
                "title": "Replication lag [messages]", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNT"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "\"kafka_server_ReplicaFetcherManager_MaxLag\"{service=\"mdb\", clientId=\"Replica\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"}"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "kafka_server_ReplicaFetcherManager_MaxLag", 
                        "settings": {
                            "name": "Replication lag"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "lylgml8bu"
            }
        }, 
        {
            "position": {
                "y": "16", 
                "x": "12", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Replicated bytes", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_BYTES_SI_PER_SECOND"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "non_negative_derivative(\"kafka_server_BrokerTopicMetrics_ReplicationBytesIn\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"})"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "kafka_server_BrokerTopicMetrics_ReplicationBytesIn", 
                        "settings": {
                            "name": "Replication bytes / sec"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "418w9i7wy"
            }
        }, 
        {
            "position": {
                "y": "16", 
                "x": "24", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Replicas", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_COUNT"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "series_sum(\"kafka_cluster_Partition_ReplicasCount\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", dc=\"by_host\", node=\"by_host\"})"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "name": "line", 
                        "settings": {
                            "name": "Replicas count"
                        }
                    }, 
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "8qbzf3k63"
            }
        }, 
        {
            "position": {
                "y": "24", 
                "h": "8", 
                "w": "12"
            }, 
            "chart": {
                "title": "Requests", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_REQUESTS_PER_SECOND"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "non_negative_derivative(alias(series_sum(\"request\", \"kafka_network_RequestMetrics_Requests\"{service=\"mdb\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"}), \"{{request}}\"))"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "ylsnvoa7o"
            }
        }, 
        {
            "position": {
                "y": "24", 
                "x": "12", 
                "w": "12", 
                "h": "8"
            }, 
            "chart": {
                "title": "Request time (0.95 quantile)", 
                "nameHidingSettings": {}, 
                "visualizationSettings": {
                    "colorSchemeSettings": {
                        "auto": {}
                    }, 
                    "yaxisSettings": {
                        "right": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_NONE"
                        }, 
                        "left": {
                            "type": "YAXIS_TYPE_LINEAR", 
                            "unitFormat": "UNIT_MILLISECONDS"
                        }
                    }, 
                    "interpolate": "INTERPOLATE_LINEAR"
                }, 
                "queries": {
                    "targets": [
                        {
                            "query": "series_avg(\"request\", alias(drop_below(\"kafka_network_RequestMetrics_TotalTimeMs\"{service=\"mdb\", quantile=\"0.95\", project=\"internal-mdb\", cluster=\"mdb_{{resource_id}}\", host=\"*\", node=\"by_host\", dc=\"by_host\"}, 1), \"{{request}}\"))"
                        }
                    ], 
                    "downsampling": {}
                }, 
                "seriesOverrides": [
                    {
                        "targetIndex": "0", 
                        "settings": {
                            "yaxisPosition": "YAXIS_POSITION_LEFT"
                        }
                    }
                ], 
                "id": "gdl6rxvny"
            }
        }
    ], 
    "id": "monh3aa8u5tsopcddeie", 
    "createdAt": "2021-06-22T10:58:37.783Z", 
    "name": "Managed Service for Apache Kafka\u00ae"
}
