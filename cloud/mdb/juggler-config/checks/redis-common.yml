- juggler_check:
  args: "{{ redis_common_limit_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: redis-alive
      flap:
        stable: 180
        critical: 360
      refresh_time: 60
      tags:
        - "mdb.{{ installation }}"
      children:
        service: redis_alive

- juggler_check:
  args: "{{ redis_workhours_checks | hash_merge( redis_unreach_pass, item ) }}"
  with_items:
    - service: redis-lag
      meta:
        urls:
          - { title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/redislag/", type: "mdb" }
      flap:
        stable: 180
        critical: 240
      refresh_time: 60
      tags:
        - "mdb.{{ installation }}"
      children:
        service: redis_lag

- juggler_check:
  args: "{{ redis_common_checks | hash_merge( redis_unreach_pass, item ) }}"
  with_items:
    - service: redis-master
      meta:
          urls:
              - { title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/redismaster/", type: "mdb" }
      flap:
        stable: 300
        critical: 600
      refresh_time: 60
      tags:
        - "mdb.{{ installation }}"
      children:
        service: redis_master

- juggler_check:
  args: "{{ redis_common_checks | hash_merge( redis_unreach_pass, item ) }}"
  with_items:
    - service: redis-cluster-state
      flap:
        stable: 300
        critical: 600
      refresh_time: 60
      tags:
        - "mdb.{{ installation }}"
      children:
        service: redis_cluster_state
