- juggler_check:
  args: "{{ kafka_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: kafka-ping
      refresh_time: 60
      children:
        service: kafka_ping

- juggler_check:
  args: "{{ kafka_ro_checks | hash_merge( kafka_unreach_pass, item ) }}"
  with_items:
    - service: kafka-ro-partitions
      flap:
        stable: 180
        critical: 240
      refresh_time: 60
      children:
        service: kafka_ro_partitions
      meta:
        urls:
          - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/kafka/#kafkaropartitions", type: "mdb"}

- juggler_check:
  args: "{{ kafka_checks | hash_merge( kafka_unreach_pass, item ) }}"
  with_items:
    - service: kafka-cluster-availability
      refresh_time: 300
      children:
        service: kafka_cluster_availability

- juggler_check:
  args: "{{ kafka_checks | hash_merge( kafka_unreach_pass, item ) }}"
  with_items:
    - service: kafka-topic-sync
      refresh_time: 300
      children:
        service: kafka_topic_sync
