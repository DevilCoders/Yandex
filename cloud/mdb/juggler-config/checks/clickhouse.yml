- juggler_check:
  args: "{{ ch_ping_check | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: ch-ping
      flap:
        stable: 300
        critical: 600
      children:
        service: ch_ping
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-ping"
            type: "mdb"

- juggler_check:
  args: "{{ ch_replication_check | hash_merge( ch_unreach_or_unispace_pass, item ) }}"
  with_items:
    - service: ch-replication-lag
      flap:
        stable: 300
        critical: 600
      children:
        service: ch_replication_lag
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-replication-lag"
            type: "mdb"

- juggler_check:
  args: "{{ ch_tls_check | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: tls
      ttl: 14400
      flap:
        stable: 7200
        critical: 14400
      children:
        service: tls
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#tls"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: mdb-dns-resolve
      children:
        service: mdb_dns_resolve_checker
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#mdb-dns-resolve"
            type: "mdb"

- juggler_check:
  args: "{{ ch_s3_check | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: ch-s3-config
      flap:
        stable: 300
        critical: 600
      children:
        service: ch_s3_config
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-s3-config"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: ch-geobase
      flap:
        stable: 300
        critical: 600
      children:
        service: ch_geobase
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-geobase"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: ch-dist-tables
      ttl: 3600
      children:
        service: ch_dist_tables
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-dist-tables"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_pass, item ) }}"
  with_items:
    - service: ch-resetup-state
      flap:
        stable: 300
        critical: 600
      children:
        service: ch_resetup_state
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-resetup-state"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_or_unispace_pass, item ) }}"
  with_items:
    - service: ch-backup
      ttl: 10800
      children:
        service: ch_backup
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-backup"
            type: "mdb"

- juggler_check:
  args: "{{ ch_checks | hash_merge( ch_unreach_or_unispace_pass, item ) }}"
  with_items:
    - service: ch_s3_backup_orphaned
      ttl: 86400
      children:
        service: ch_s3_backup_orphaned
      meta:
        urls:
          - title: "How to handle?"
            url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/clickhouse/#ch-s3-backup-orphaned"
            type: "mdb"
