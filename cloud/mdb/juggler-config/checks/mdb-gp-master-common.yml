- juggler_check:
  args: "{{ gp_common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: gp-ping
      refresh_time: 60
      ttl: 300
      children:
        service: gp_ping

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( gp_unreach_pass, item ) }}"
  with_items:
    - service: replication-lag
      refresh_time: 60
      ttl: 300
      children:
        service: replication_lag

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( gp_unreach_pass, item ) }}"
  with_items:
    - service: segments-up
      notifications: "{{ notifications_worktime }}"
      refresh_time: 60
      ttl: 300
      children:
        service: segments_up

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( gp_unreach_pass, item ) }}"
  with_items:
    - service: xid-wraparound
      refresh_time: 60
      ttl: 300
      children:
        service: xid_wraparound

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( gp_unreach_pass, item ) }}"
  with_items:
    - service: superusers-check
      refresh_time: 60
      ttl: 300
      children:
        service: superusers_check

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( gp_unreach_pass, item ) }}"
  with_items:
    - service: gp-s3-backup-age
      refresh_time: 1200
      ttl: 7200
      notifications: "{{ notifications_worktime }}"
      children:
        service: gp_s3_backup_age
      flap:
        stable: 6000
        critical: 30000
      aggregator: logic_or
      aggregator_kwargs:
        nodata_mode: skip
      meta:
        urls:
          - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/gp_s3_backup_age", type: "mdb"}

- juggler_check:
  args: "{{ gp_common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: gp-segment-pxf
      refresh_time: 60
      ttl: 300
      children:
        service: gp_segment_pxf
      aggregator_kwargs:
        nodata_mode: skip
