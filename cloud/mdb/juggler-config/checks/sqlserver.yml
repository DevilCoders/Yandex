
- juggler_check:
  args: "{{ sqlserver_common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: sqlserver-ping
      refresh_time: 60
      children:
        service: sqlserver_ping
      aggregator_kwargs:
        crit_limit: 1
        mode: normal

- juggler_check:
  args: "{{ sqlserver_common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: tls
      refresh_time: 3600
      ttl: 14400
      children:
        service: tls

- juggler_check:
  args: "{{ sqlserver_important_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: sqlserver-billing-lag
      refresh_time: 60
      children:
        service: sqlserver_billing_lag

- juggler_check:
  args: "{{ sqlserver_common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: superusers-check
      refresh_time: 600
      children:
        service: superusers_check
      aggregator_kwargs:
        nodata_mode: skip

- juggler_check:
  args: "{{ sqlserver_common_checks | hash_merge( sqlserver_unreach_pass, item ) }}"
  with_items:
    - service: sqlserver-backup-age
      refresh_time: 1200
      ttl: 7200
      notifications: "{{ notifications_worktime }}"
      children:
        service: sqlserver_backup_age
