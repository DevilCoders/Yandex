- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: ntp
      refresh_time: 300
      children:
        service: ntp_stratum

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='more_than_limit_is_problem', aggregator_kwargs=dict(mode='percent', warn_limit=10, crit_limit=70))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: yasmagent
      refresh_time: 300
      ttl: 1800
      children:
        service: yasmagent

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: sumcores
      refresh_time: 300
      ttl: 1800
      children:
        service: sumcores

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: ext-ip-dns
      refresh_time: 300
      ttl: 1800
      children:
        service: ext_ip_dns
      meta:
        urls:
          - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/ext-ip-dns/", type: "mdb"}

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: fqdn
      refresh_time: 300
      ttl: 1800
      children:
        service: fqdn
      meta:
        urls:
          - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/fqdn/", type: "mdb"}

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: correct-dc
      refresh_time: 3600
      ttl: 10800
      children:
        service: correct_dc

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict(mode='WARN', nodata_mode='skip'))) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: apt-check-updates
      refresh_time: 3600
      ttl: 10800
      children:
        service: apt_check_updates
