- juggler_check:
  args: "{{ common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: cron
      refresh_time: 300
      children:
        service: cron

- juggler_check:
  args: "{{ common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: restarts
      refresh_time: 180
      children:
        service: restarts

- juggler_check:
  args: "{{ common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: syslogd
      refresh_time: 60
      children:
        service: syslogd

- juggler_check:
  args: "{{ dict() | hash_replace(common_checks, dict(aggregator='logic_or', aggregator_kwargs=dict())) | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: ro-fs
      refresh_time: 600
      ttl: 3000
      children:
        service: ro_fs
      meta:
          urls:
              - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/ro-fs/", type: "mdb"}

- juggler_check:
  args: "{{ common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: unispace-rootfs
      refresh_time: 180
      ttl: 900
      children:
        service: unispace_rootfs

- juggler_check:
  args: "{{ common_checks | hash_merge( unreach_pass, item ) }}"
  with_items:
    - service: apparmor-check
      refresh_time: 600
      ttl: 3000
      meta:
        urls:
          - {title: "How to handle?", url: "https://wiki.yandex-team.ru/mdb/internal/operations/duty-howto/handling-alerts/apparmorcheck/", type: "mdb"}
      children:
        service: apparmor_check
      aggregator_kwargs:
        nodata_mode: skip

- include: common-errata.yml
- include: common-warn-only.yml
