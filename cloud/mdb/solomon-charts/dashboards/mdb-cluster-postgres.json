{
  "id": "mdb-cluster-postgres",
  "projectId": "{{projectId}}",
  "name": "MDB PostgreSQL",
  "description": "TODO: link to doc",
  "heightMultiplier": 1,
  "parameters": [
    {
      "name": "cluster",
      "value": "*"
    },
    {
      "name": "service",
      "value": "mdb|yandexcloud_dbaas"
    },
    {
      "name": "project",
      "value": "{{projectId}}"
    }
  ],
  "rows": [
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Statements, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=pooler-query_count&dc=by_host&graph=auto&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Average statement time, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=pooler-avg_query_time&dc=by_host&graph=auto&stack=false&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Age of oldest query, [seconds]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=postgres_oldest_query_duration&dc=by_host&graph=auto&stack=false&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Transactions, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=pooler-xact_count&dc=by_host&graph=auto&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Average transaction time, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=pooler-avg_xact_time&dc=by_host&graph=auto&stack=false&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Age of oldest transaction, [seconds]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=postgres_oldest_prepared_xact_duration|postgres_oldest_transaction_duration&dc=by_host&graph=auto&stack=false&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Is Alive, [boolean]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=by_host&host=*&dc=by_host&sensor=postgres-is_alive&graph=auto&graphMode=bars&aggr=last&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 3
        },
        {
          "type": "IFRAME",
          "title": "Is Primary, [boolean]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=by_host&host=*&dc=by_host&sensor=postgres-is_primary&graph=auto&graphMode=bars&aggr=last&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 3
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Sessions CPU usage, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&graph=auto&l.sensor=pg_backend_cpu_*&hideNoData=true&filter=top&filterBy=avg&filterLimit=30",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Sessions read bytes, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&graph=auto&l.sensor=pg_backend_read_bytes_*&hideNoData=true&filter=top&filterBy=avg&filterLimit=30",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Sessions write bytes, [boolean]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&graph=auto&l.sensor=pg_backend_write_bytes_*&hideNoData=true&filter=top&filterBy=avg&filterLimit=30",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "PostgreSQL connections, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&graph=auto&l.sensor=postgres_conn_active%7Cpostgres_conn_aborted%7Cpostgres_conn_idle%7Cpostgres_conn_idle_in_transaction%7Cpostgres_conn_waiting&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Pooler connections, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&sensor=pooler-free_clients%7Cpooler-used_clients%7Cpooler-free_servers%7Cpooler-used_servers&graph=auto&stack=false&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Is Replica, [boolean]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=by_host&host=*&dc=by_host&sensor=postgres-is_replica&graph=auto&graphMode=bars&aggr=last&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Disk capacity on primary, [bytes]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=primary&dc=by_node&host=by_node&sensor=disk-used_bytes_%2Fvar%2Flib%2Fpostgresql%7Cdisk-free_bytes_%2Fvar%2Flib%2Fpostgresql&graph=auto&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Replication lag, [seconds]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&host=*&sensor=postgres-replication_lag&graph=auto&stack=false&dc=by_host&hideNoData=true",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Sessions per wait event, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=total&host=total&graph=auto&l.sensor=postgres_wait_event_*&hideNoData=true&filter=top&filterBy=avg&filterLimit=30",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Quantile 0.99 transaction [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-transaction_0.99&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Quantile 0.75 transaction, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-transaction_0.75&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Quantile 0.5 transaction, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-transaction_0.5&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Quantile 0.99 query, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-query_0.99&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Quantile 0.75 query, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-transaction_0.75&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        },
        {
          "type": "IFRAME",
          "title": "Quantile 0.5 query, [ms]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.sensor=pooler-transaction_0.5&l.host=*&l.dc=by_host&stack=false&hideNoData=true&graph=auto",
          "markdown": "",
          "rowspan": 0,
          "colspan": 2
        }
      ]
    }
  ]
}
