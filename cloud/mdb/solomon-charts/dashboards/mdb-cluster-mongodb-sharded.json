{
  "id": "mdb-cluster-mongodb-sharded",
  "projectId": "{{projectId}}",
  "name": "MDB Sharded MongoDB",
  "description": "",
  "heightMultiplier": 1,
  "parameters": [
    {
      "name": "cluster",
      "value": "*"
    },
    {
      "name": "service",
      "value": "mdb|yandexcloud_dbaas"
    },
    {
      "name": "project",
      "value": "{{projectId}}"
    }
  ],
  "rows": [
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "MongoS connections, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=*&graph=auto&l.sensor=server_status_admin_connections.current%7Cserver_status_admin_connections.available&l.shard=mongos",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Operations, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=total&dc=*&graph=auto&l.sensor=server_status_admin_opcounters.command_rate%7Cserver_status_admin_opcounters.delete_rate%7Cserver_status_admin_opcounters.getmore_rate%7Cserver_status_admin_opcounters.insert_rate%7Cserver_status_admin_opcounters.query_rate%7Cserver_status_admin_opcounters.update_rate&l.shard=mongos",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Is Balancer Alive, [boolean]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&node=by_host&host=*&dc=by_host&sensor=mongos-balancer-enabled&graph=auto&graphMode=bars&aggr=last",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        }
      ]
    },
    {
      "panels": []
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Disk space on primary, [bytes]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&graph=internal-mdb-mongos-free-space-by-shard",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Data size, [bytes]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&graph=internal-mdb-mongos-data-size-by-db",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Used space by shard, [bytes]",
          "subtitle": "",
          "url": "?cluster={{cluster}}&project={{project}}&service={{service}}&graph=internal-mdb-mongos-data-size-by-shard",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        }
      ]
    },
    {
      "panels": []
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Replication lag, [seconds]",
          "subtitle": "",
          "url": "?cluster={{cluster}}&project={{project}}&service={{service}}&l.sensor=replset_status-replicationLag&dc=by_host&host=*&graph=auto&stack=0&l.shard=*",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Configured oplog size, [bytes]",
          "subtitle": "",
          "url": "?cluster={{cluster}}&project={{project}}&service={{service}}&l.sensor=oplog-maxSize&dc=by_host&host=*&graph=auto&stack=1&l.shard=*",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Index size, [bytes]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&graph=internal-mdb-mongos-index-size",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        }
      ]
    },
    {
      "panels": []
    },
    {
      "panels": [
        {
          "type": "IFRAME",
          "title": "Active Migrations, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.host=total&l.sensor=mongos-active-migrations&graph=auto&aggr=max",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        },
        {
          "type": "IFRAME",
          "title": "Migrations for 24H, [count]",
          "subtitle": "",
          "url": "?project={{project}}&cluster={{cluster}}&service={{service}}&l.host=total&l.sensor=mongos-migrations_24h_*&graph=auto&aggr=max",
          "markdown": "",
          "rowspan": 0,
          "colspan": 0
        }
      ]
    }
  ]
}
