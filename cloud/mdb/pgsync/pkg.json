{
    "meta": {
        "name": "yamail-pgsync",
        "maintainer": "MDB <mdb@yandex-team.ru>",
        "description": "Automatic failover of PostgreSQL with help of ZK",
        "version": "3.{svn_revision}",
        "homepage": "https://wiki.yandex-team.ru/mail/pg/pgsync/"
    },
    "build": {
         "pgsync": {
            "targets": [
                "cloud/mdb/pgsync"
            ],
            "build_type": "release"
         }
    },
    "data": [
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "pgsync",
                "path": "cloud/mdb/pgsync/pgsync"
            },
            "destination": {
                "path": "/usr/local/bin/pgsync"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "pgsync",
                "path": "cloud/mdb/pgsync/pgsync-util/pgsync-util"
            },
            "destination": {
                "path": "/usr/local/bin/pgsync-util"
            }
        },
        {
            "source": {
                "type": "BUILD_OUTPUT",
                "build_key": "pgsync",
                "path": "cloud/mdb/pgsync/wd_pgsync/wd_pgsync"
            },
            "destination": {
                "path": "/etc/cron.yandex/wd_pgsync"
            }
        },
        {
            "source": {
                "type": "ARCADIA",
                "path": "cloud/mdb/pgsync/static/pgsync.init.d"
            },
            "destination": {
                "path": "/etc/init.d/pgsync",
                "attributes": {"mode": { "value": "0755"} }
            }
        },
        {
            "source": {
                "type": "ARCADIA",
                "path": "cloud/mdb/pgsync/static/pgsync.sudoers.d"
            },
            "destination": {
                "path": "/etc/sudoers.d/pgsync",
                "attributes": {"mode": { "value": "0644"} }
            }
        },
        {
            "source": {
                "type": "ARCADIA",
                "path": "cloud/mdb/pgsync/static/pgsync.logrotate"
            },
            "destination": {
                "path": "/etc/logrotate.d/pgsync",
                "attributes": {"mode": { "value": "0644"} }
            }
        },
        {
            "source": {
                "type": "ARCADIA",
                "path": "cloud/mdb/pgsync/static/wd-pgsync.cron.d"
            },
            "destination": {
                "path": "/etc/cron.d/wd-pgsync",
                "attributes": {"mode": { "value": "0644"} }
            }
        },
        {
            "source": { "type": "DIRECTORY" },
            "destination": {
                "path": "/etc/pgsync/plugins"
            }
        }
    ]
}
