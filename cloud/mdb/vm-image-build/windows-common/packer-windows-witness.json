{
  "variables": {
    "name": "windows-witness.img",
    "iso_url": "https://mdb-windows.s3.mds.yandex.net/SW_DVD9_Win_Server_STD_CORE_2019_1809.9_64Bit_English_DC_STD_MLF_X22-44998.ISO",
    "iso_checksum_type": "sha1",
    "iso_checksum": "e5467624ec28d68c19b30f809c1db88bbfd0ee7d",
    "username": "Administrator",
    "password": "Passw0rd"
  },
  "builders": [
    {
      "name": "{{user `name`}}",
      "iso_url": "{{user `iso_url`}}",
      "iso_checksum_type": "{{user `iso_checksum_type`}}",
      "iso_checksum": "{{user `iso_checksum`}}",
      "output_directory": "./output/windows-witness",
      "floppy_files": [
	"floppy/*",
	"configs/*",
	"unattend/*.xml",
	"scripts/*.ps1"
      ],
      "communicator": "none",
      "shutdown_timeout": "180m",

      "machine_type": "q35",
      "use_default_display": true,
      "disk_size": 25600,
      "disk_compression": true,
      "disk_additional_size": ["2G"],
      "qemuargs": [
	       [ "-machine", "accel=kvm" ],
               [ "-parallel", "none" ],
               [ "-m", "4096M" ],
	       [ "-cpu", "SandyBridge" ],
               [ "-smp", "cpus=4" ],
         [ "-usb"],
               ["-device", "usb-tablet" ],
	       [ "-net", "nic" ],
	       [ "-net", "tap,script=../tap_up.sh" ],
	       [ "-net", "nic,model=rtl8139" ]
      ],
      "vnc_port_min": 5900,
      "vnc_port_max": 5900,
      "type": "qemu"
    }
  ]
}
