!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.StaffCard=e():t.StaffCard=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=o(i);t.exports=a.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)},c=n(2),l=o(c),p=n(14);n(15);var d=function(t,e){return"function"==typeof t.contains?t!==e&&t.contains(e):(16&t.compareDocumentPosition(e))>0},f=function(t){return d(document.body,t)};"function"==typeof window.Node&&"isConnected"in window.Node.prototype&&(f=function(t){return t.isConnected});var _=function(t){function e(){var t;i(this,e);for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var s=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o)));return s._checkAnchorFrame=null,s}return r(e,t),s(e,[{key:"_startCheckAnchor",value:function(){var t=this,e=function e(){f(t.element)?t._checkAnchorFrame=(0,p.setFrame)(e):t.destruct()};this._stopCheckAnchor(),e()}},{key:"_stopCheckAnchor",value:function(){(0,p.delFrame)(this._checkAnchorFrame),this._checkAnchorFrame=null}},{key:"_delPopup",value:function(){return this._stopCheckAnchor(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_delPopup",this).call(this)}},{key:"_createPopup",value:function(){var t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_createPopup",this).call(this);return this._startCheckAnchor(),t}}]),e}(l.default);e.default=_},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=n(3),r=n(11),s=n(12),u=n(13).version,c=200,l=500,p=10,d='<div class="'+a.row+" "+a.head+'">&nbsp;</div>\n<div class="'+a.row+'">\n    <div class="'+a.avatar+'"></div>\n    <div class="'+a.body+'">\n        <div class="'+a.spin+'"></div>\n    </div>\n</div>\n<div class="'+a.row+" "+a.location+'"></div>',f=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),"string"==typeof e?e=document.querySelector(e):window.jQuery&&e instanceof window.jQuery&&(console.warn("StaffCard работает без jQuery, передайте в конструктор HTMLElement или селектор"),e=e[0]),this.element=e,this.login=n,this.options=Object.assign({userInfo:{target:"_self"}},i),this.popup=null,this._hideTimeout=null,this._showTimeout=null,this.onHover=this.onHover.bind(this),this._onLeave=this._onLeave.bind(this),this._onWindowMouseMove=this._onWindowMouseMove.bind(this),this._mouseCaptureElement()}return i(t,null,[{key:"version",get:function(){return u}}]),i(t,[{key:"onHover",value:function(){this._startShow()}},{key:"_onLeave",value:function(){this._startHide()}},{key:"destruct",value:function(){this._cancelShow(),this._cancelHide(),this._delPopup()}},{key:"_zIndex",value:function(){for(var t=this.element.parentNode,e=100;t&&t!==document.body;){var n=window.getComputedStyle(t).getPropertyValue("z-index");isNaN(n)||(e=Math.max(e,n)),t=t.parentNode}return e+1}},{key:"_cancelHide",value:function(){clearTimeout(this._hideTimeout),this._hideTimeout=null}},{key:"_startHide",value:function(){var t=this;this._cancelHide(),this._cancelShow(),this._hideTimeout=setTimeout(function(){if(t.popup){t.popup.classList.remove(a.popup_visible);var e=function e(){t.popup.removeEventListener("transitionend",e),t._delPopup()};t.popup.addEventListener("transitionend",e)}},c)}},{key:"_cancelShow",value:function(){clearTimeout(this._showTimeout),this._showTimeout=null}},{key:"_startShow",value:function(){var t=this;this._cancelHide(),this._cancelShow(),this._showTimeout=setTimeout(function(){t.popup=t._createPopup(),t._position(!0),t.popup.classList.add(a.popup_visible),t._requestData().then(function(e){t._renderUser(e),t._position(!1)}).catch(function(){return t._renderError()})},l)}},{key:"_onWindowMouseMove",value:function(t){function e(e){return e===t.target||e!==t.target&&e.contains(t.target)}e(this.popup)||e(this.element)?this._cancelHide():this._startHide()}},{key:"_position",value:function(t){t&&(this.popup.style.transition="none"),this.popup.style.top=0,this.popup.style.left=0;var e=this.popup.offsetWidth,n=this.popup.offsetHeight,o=document.documentElement.clientWidth,i=window.innerHeight,r=void 0,s=this.element.getBoundingClientRect(),u=s.top,c=s.left,l=s.right,d=s.bottom,f=s.width,_=u-d;c+=window.pageXOffset,l+=window.pageXOffset;var g=o-l-p>=e,h=c-p>=e;g?(r=a.popup_side_right,c+=f):h?(r=a.popup_side_left,c-=e):(r=a.popup_side_right,c+=Math.max(p,o-c-p-e)),g||h||(u+=_),i-(u+n)<0&&i>n&&(u=d>i?i-n:d-n),u+=window.pageYOffset,this.popup.classList.remove(a.popup_side_left,a.popup_side_right),this.popup.classList.add(r),this.popup.style.top=u+"px",this.popup.style.left=c+"px",this.popup.style.zIndex=this._zIndex(),t&&(window.getComputedStyle(this.popup).getPropertyValue("transform"),this.popup.style.transition="")}},{key:"_createPopup",value:function(){var t=document.createElement("div");return t.innerHTML=d,t.classList.add(a.popup),document.body.appendChild(t),this._mouseCaptureWindow(),t}},{key:"_delPopup",value:function(){this._mouseCaptureElement(),this.popup&&(this.popup.parentNode.removeChild(this.popup),this.popup=null)}},{key:"_mouseCaptureWindow",value:function(){this.element.removeEventListener("mouseenter",this.onHover),this.element.removeEventListener("mouseleave",this._onLeave),window.addEventListener("mousemove",this._onWindowMouseMove)}},{key:"_mouseCaptureElement",value:function(){this.element.addEventListener("mouseenter",this.onHover),this.element.addEventListener("mouseleave",this._onLeave),window.removeEventListener("mousemove",this._onWindowMouseMove)}},{key:"_requestData",value:function(){return this.userData||(this.userData=s.getJSON("//center.yandex-team.ru/api/staff_cards/?"+this.login+"&format=json")),this.userData}},{key:"_renderUser",value:function(t){var e=t[this.login];return e?void new r(this.popup,e,this.options.userInfo):this._renderError()}},{key:"_renderError",value:function(){this.userData=null,this.popup&&(this.popup.querySelector("."+a.avatar).classList.add(a.avatar_error),this.popup.querySelector("."+a.body).innerHTML="<b>Ooops!</b>")}},{key:"login",get:function(){return this._login},set:function(t){this._login=t,this.userData=null}}]),t}();e.default=f},function(t,e,n){var o=n(4);"string"==typeof o&&(o=[[t.id,o,""]]);n(10)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(5)(),e.push([t.id,".staff-card__popup{position:absolute;box-sizing:border-box;min-width:300px;max-width:450px;min-height:150px;transition-timing-function:ease-out;transition-duration:.15s;transition-property:transform,opacity;opacity:0;border:1px solid rgba(0,0,0,.1);background:#fff;box-shadow:0 10px 20px -5px rgba(0,0,0,.4);font:13px Arial,Helvetica,sans-serif}.staff-card__popup_side_left{margin-left:-10px;transform:translateX(-5%)}.staff-card__popup_side_right{margin-left:10px;transform:translateX(5%)}.staff-card__popup_visible{transform:translateX(0);opacity:1}.staff-card__row{padding:10px 15px 0}.staff-card__avatar{position:relative;float:left;width:100px;height:100px;background:url("+n(6)+') 50% no-repeat}.staff-card__avatar:after{position:absolute;top:0;right:0;bottom:0;left:0;content:" ";border:1px solid rgba(0,0,0,.12)}.staff-card__avatar_error{transform-origin:0 0;animation:staff-card__error .5s linear forwards}.staff-card__head{font-weight:700}.staff-card__location{margin-bottom:10px}.staff-card__location_loaded:before{display:inline-block;width:15px;height:16px;margin-right:.3em;content:" ";vertical-align:bottom;background:url('+n(7)+") 50% no-repeat}.staff-card__body{position:relative;min-height:100px;margin-left:115px}.staff-card__spin{position:absolute;top:50%;left:50%;width:24px;height:24px;margin-top:-12px;margin-left:-12px;animation:staff-card__spin 1s infinite linear;background:url("+n(8)+') 50% no-repeat;background-size:contain}.staff-card__visit{color:#999}.staff-card__link{transition:color .15s ease-out;text-decoration:none;color:#07c}.staff-card__link_type_user{display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:#000;font-size:18px}.staff-card__link:hover,.staff-card__link_type_user:first-letter{color:red}.staff-card__button{margin:2px;padding:0 13px;cursor:pointer;white-space:nowrap;border:1px solid rgba(0,0,0,.2);border-radius:3px;outline:none;background:transparent;font:13px Arial,sans-serif;line-height:26px}.staff-card__button:active,.staff-card__button:hover{border-color:rgba(0,0,0,.3)}.staff-card__button:active{background-color:#f6f5f3}.staff-card__button_jabber:before{display:inline-block;width:8px;height:8px;margin-right:6px;content:"";border-radius:100%;background:#aaa}.staff-card__button_status_offline:before{background:#aaa}.staff-card__button_status_available:before,.staff-card__button_status_chat:before{background:#3a3}.staff-card__button_status_away:before{background:#4af}.staff-card__button_status_xa:before{background:#abb}.staff-card__button_status_dnd:before{background:#e54}.staff-card__button_status_notinlist:before{background:#cd8}.staff-card__button_status_none:before{content:none}.staff-card__button_phone:before{position:relative;top:1px;display:inline-block;width:11px;height:11px;margin-right:5px;content:" ";background:url('+n(9)+") 50% no-repeat}.staff-card__button_calling,.staff-card__button_phone:hover:before{animation:staff-card__call .1s infinite alternate linear}.staff-card__input{z-index:1;flex:1;padding:0 7px;border:1px solid rgba(0,0,0,.2);font:13px Arial,sans-serif;line-height:26px}.staff-card__input:focus{border-color:#ffdb4d;outline:none;box-shadow:inset 0 0 0 1px #ffdb4d}.staff-card__contacts{display:flex;align-items:flex-start;min-width:195px;margin-top:5px}.staff-card__contact{width:100px;margin:2px}.staff-card__contact__row{display:flex}.staff-card__contact__link{display:block;padding:5px 0 5px 20px;white-space:nowrap}.staff-card__contact__reset{width:16px;margin-right:4px;cursor:pointer;color:#888;font-size:20px;font-weight:300}.staff-card__gap{position:relative;z-index:0;margin:4px;padding:8px 15px;text-align:center}.staff-card__gap__overlay{position:absolute;z-index:-1;top:0;right:0;bottom:0;left:0;opacity:.5}.staff-card__gap__link{color:#000}@keyframes staff-card__error{0%{transform:rotate(0deg)}5%{transform:rotate(1deg)}10%{transform:rotate(0deg)}50%{transform:rotate(20deg)}60%{transform:rotate(10deg)}90%{transform:rotate(16deg)}to{transform:rotate(15deg)}}@keyframes staff-card__spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes staff-card__call{0%{transform:rotate(0deg) translateZ(0)}to{transform:rotate(15deg) translateZ(0)}}",""]),e.locals={popup:"staff-card__popup",popup_side_left:"staff-card__popup_side_left",popup_side_right:"staff-card__popup_side_right",popup_visible:"staff-card__popup_visible",row:"staff-card__row",avatar:"staff-card__avatar",avatar_error:"staff-card__avatar_error",error:"staff-card__error",head:"staff-card__head",location:"staff-card__location",location_loaded:"staff-card__location_loaded",body:"staff-card__body",spin:"staff-card__spin",visit:"staff-card__visit",link:"staff-card__link",link_type_user:"staff-card__link_type_user",button:"staff-card__button",button_jabber:"staff-card__button_jabber",button_status_offline:"staff-card__button_status_offline",button_status_available:"staff-card__button_status_available",button_status_chat:"staff-card__button_status_chat",button_status_away:"staff-card__button_status_away",button_status_xa:"staff-card__button_status_xa",button_status_dnd:"staff-card__button_status_dnd",button_status_notinlist:"staff-card__button_status_notinlist",button_status_none:"staff-card__button_status_none",button_phone:"staff-card__button_phone",call:"staff-card__call",button_calling:"staff-card__button_calling",input:"staff-card__input",contacts:"staff-card__contacts",contact:"staff-card__contact",contact__row:"staff-card__contact__row",contact__link:"staff-card__contact__link",contact__reset:"staff-card__contact__reset",gap:"staff-card__gap",gap__overlay:"staff-card__gap__overlay",gap__link:"staff-card__gap__link"}},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(o[a]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&o[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(t,e){t.exports="data:image/png;base64,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"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABVQTFRFAAAAzMzMo6Oj5eXlgoKCaGho/f39iySGTQAAAAd0Uk5T////////ABpLA0YAAAAqSURBVHjaYmBAADY2BmSAymPALQfUxwYCEJKaPEYmBlYWJkZmNjaAAAMAckQCBYTNkoEAAAAASUVORK5CYII="},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0OCA0OCIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxsaW5lYXJHcmFkaWVudCB4MT0iMjYuMyIgeTE9IjMzLjYiIHgyPSIzMy40IiB5Mj0iMjYuNSIgaWQ9IjciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4bGluazpocmVmPSIjMiIvPjxsaW5lYXJHcmFkaWVudCB4MT0iNDAuNiIgeTE9IjIxIiB4Mj0iMjciIHkyPSI3LjQiIGlkPSJCIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeGxpbms6aHJlZj0iIzEiLz48bGluZWFyR3JhZGllbnQgeDE9IjI4IiB5MT0iMzkuNSIgeDI9IjM5IiB5Mj0iMjguNCIgaWQ9IjgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4bGluazpocmVmPSIjMiIvPjxsaW5lYXJHcmFkaWVudCB4MT0iMTQuMiIgeTE9IjIxLjkiIHgyPSIyMS45IiB5Mj0iMTQuMiIgaWQ9IkEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4bGluazpocmVmPSIjNCIvPjxsaW5lYXJHcmFkaWVudCB4MT0iOC4xIiB5MT0iMjAuMyIgeDI9IjIwLjMiIHkyPSI4LjEiIGlkPSI5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeGxpbms6aHJlZj0iIzQiLz48bGluZWFyR3JhZGllbnQgeDE9IjM0IiB5MT0iMjIuNCIgeDI9IjI1LjYiIHkyPSIxMy43IiBpZD0iNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHhsaW5rOmhyZWY9IiMxIi8+PGxpbmVhckdyYWRpZW50IHgxPSI5LjEiIHkxPSIyOC43IiB4Mj0iMjAuOCIgeTI9IjQwIiBpZD0iMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHhsaW5rOmhyZWY9IiM1Ii8+PGxpbmVhckdyYWRpZW50IHgxPSIzLjQiIHkxPSIzMC43IiB4Mj0iMTkuMyIgeTI9IjQ2LjYiIGlkPSI1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3AvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuOCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IHgxPSI0NyIgeTE9IjE5LjYiIHgyPSIyOC40IiB5Mj0iMSIgaWQ9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLW9wYWNpdHk9Ii41Ii8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4zIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgeDE9IjE0LjgiIHkxPSIyNi43IiB4Mj0iMjIiIHkyPSIzNCIgaWQ9IjMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4bGluazpocmVmPSIjNSIvPjxsaW5lYXJHcmFkaWVudCB4MT0iMiIgeTE9IjE4LjYiIHgyPSIxOC42IiB5Mj0iMiIgaWQ9IjQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCB4MT0iMjkuOSIgeTE9IjQ1LjUiIHgyPSI0NSIgeTI9IjMwIiBpZD0iMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3Atb3BhY2l0eT0iLjgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3Atb3BhY2l0eT0iLjUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Im0yNCA0NC44NXYzLjE1Yy02LjE1LjAxLTEyLjI5LTIuMzQtMTYuOTgtNy00LjY4LTQuNjktNy0xMC44Mi03LTE2Ljk2aDMuMmMwIDUuMzMgMi4wMyAxMC42NyA2LjA5IDE0Ljc0IDQuMDYgNC4wNyA5LjM5IDYuMTEgMTQuNzEgNi4xMXoiIGZpbGw9InVybCgjNSkiLz48cGF0aCBkPSJtNDAuOTYgNDAuOTZjLTQuNjkgNC42OS0xMC44MiA3LTE2Ljk2IDd2LTMuMTVjNS4zMyAwIDEwLjY3LTIuMDQgMTQuNzQtNi4xMSA0LjA3LTQuMDcgNi4xLTkuNDEgNi4xLTE0Ljc0aDMuMTZjLS4wMSA2LjE0LTIuMzUgMTIuMjgtNyAxNi45NnoiIGZpbGw9InVybCgjMikiLz48cGF0aCBkPSJtNDQuODUgMjRjMC01LjMyLTIuMDMtMTAuNjUtNi4xLTE0LjcxLTQuMDctNC4wNi05LjQxLTYuMDktMTQuNzQtNi4wOXYtMy4yYzYuMTQuMDEgMTIuMjggMi4zNSAxNi45NiA3IDQuNyA0LjY5IDcgMTAuODMgNyAxNi45OGgtMy4xNnoiIGZpbGw9InVybCgjMSkiLz48cGF0aCBkPSJtMjQgMy4yYy01LjMyIDAtMTAuNjUgMi4wMy0xNC43MSA2LjA5LTQuMDYgNC4wNi02LjA5IDkuMzktNi4wOSAxNC43MWgtMy4yYy0uMDEtNi4xNSAyLjMzLTEyLjI5IDctMTYuOTggNC42OS00LjY5IDEwLjgzLTcgMTYuOTgtN3YzLjJ6IiBmaWxsPSJ1cmwoIzQpIi8+PHBhdGggZD0ibTI0IDM1LjJjLTIuODcgMC01Ljc0LTEuMDktNy45My0zLjI5LTIuMTgtMi4xOS0zLjI3LTUuMS0zLjI4LTcuOTFoMy4xOGMwIDIuMDUuNzggNC4xIDIuMzQgNS42NiAxLjU3IDEuNTcgMy42MiAyLjM1IDUuNjcgMi4zNHYzLjE5eiIgZmlsbD0idXJsKCMzKSIvPjxwYXRoIGQ9Im0yNCAzOC40djMuMjJjLTQuNTEuMDEtOS0xLjcxLTEyLjQ1LTUuMTYtMy40My0zLjQzLTUuMTQtNy45My01LjE1LTEyLjQ0aDMuMjFjLjAxIDMuNjggMS40MSA3LjM2IDQuMjEgMTAuMTYgMi44MSAyLjgyIDYuNSA0LjIzIDEwLjE5IDQuMjJ6IiBmaWxsPSJ1cmwoIzApIi8+PHBhdGggZD0ibTI0IDM1LjJ2LTMuMTljMi4wNSAwIDQuMS0uNzggNS42Ni0yLjM0IDEuNTctMS41NyAyLjM1LTMuNjEgMi4zNS01LjY2aDMuMTljLS4wMSAyLjg3LTEuMSA1LjczLTMuMjggNy45MS0yLjE4IDIuMTktNS4xIDMuMjgtNy45MiAzLjI5eiIgZmlsbD0idXJsKCM3KSIvPjxwYXRoIGQ9Im0yNCAxMi44YzIuODcgMCA1LjczIDEuMDkgNy45MiAzLjI3IDIuMiAyLjE5IDMuMjkgNS4wNiAzLjI4IDcuOTNoLTMuMTljMC0yLjA0LS43OC00LjA4LTIuMzUtNS42My0xLjU2LTEuNTUtMy42MS0yLjMzLTUuNjYtMi4zNHYtMy4yM3oiIGZpbGw9InVybCgjNikiLz48cGF0aCBkPSJtMjQgOS42MXYtMy4yMWM0LjUuMDEgOSAxLjcyIDEyLjQ0IDUuMTUgMy40NSAzLjQ0IDUuMTcgNy45NSA1LjE2IDEyLjQ1aC0zLjIyYy4wMS0zLjY4LTEuNC03LjM3LTQuMjItMTAuMTgtMi44MS0yLjgtNi40OC00LjItMTAuMTYtNC4yMXoiIGZpbGw9InVybCgjQikiLz48cGF0aCBkPSJtMjQgMTIuOHYzLjIzYy0yLjA1IDAtNC4xLjc4LTUuNjcgMi4zNC0xLjU2IDEuNTYtMi4zNCAzLjU5LTIuMzQgNS42M2gtMy4xOGMtLjAxLTIuODcgMS4wOS01Ljc0IDMuMjctNy45MyAyLjE5LTIuMTkgNS4wNi0zLjI4IDcuOTMtMy4yOHoiIGZpbGw9InVybCgjQSkiLz48cGF0aCBkPSJtMjQgNi40djMuMjFjLTMuNjgtLjAxLTcuMzcgMS4zOS0xMC4xOSA0LjIxLTIuODEgMi44MS00LjIxIDYuNS00LjIxIDEwLjE4aC0zLjIxYy0uMDEtNC41MSAxLjcxLTkgNS4xNS0xMi40NSAzLjQ0LTMuNDQgNy45NS01LjE1IDEyLjQ1LTUuMTV6IiBmaWxsPSJ1cmwoIzkpIi8+PHBhdGggZD0ibTI0IDQxLjZ2LTMuMjJjMy42OC0uMDEgNy4zNi0xLjQxIDEwLjE2LTQuMjIgMi44MS0yLjggNC4yMS02LjQ4IDQuMjItMTAuMTZoMy4yMmMtLjAxIDQuNS0xLjczIDktNS4xNiAxMi40NC0zLjQ0IDMuNDQtNy45NCA1LjE2LTEyLjQ0IDUuMTZ6IiBmaWxsPSJ1cmwoIzgpIi8+PC9nPjwvc3ZnPgo="},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFAAAA/f39emVIHQAAAAJ0Uk5T/wDltzBKAAAAMElEQVR42lTLAQoAAARD0b/7X5oYQenRoCogxzAXDnGgu7MFc6I6fncv/reXCgEGABPTAFKFjG5BAAAAAElFTkSuQmCC"},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=f[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(c(o.parts[a],e))}else{for(var r=[],a=0;a<o.parts.length;a++)r.push(c(o.parts[a],e));f[o.id]={id:o.id,refs:1,parts:r}}}}function i(t){for(var e=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],r=i[1],s=i[2],u=i[3],c={css:r,media:s,sourceMap:u};n[a]?n[a].parts.push(c):e.push(n[a]={id:a,parts:[c]})}return e}function a(t,e){var n=h(),o=m[m.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),m.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=m.indexOf(t);e>=0&&m.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function u(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function c(t,e){var n,o,i;if(e.singleton){var a=M++;n=b||(b=s(e)),o=l.bind(null,n,a,!1),i=l.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(e),o=d.bind(null,n),i=function(){r(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),o=p.bind(null,n),i=function(){r(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function l(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,i);else{var a=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}function p(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e){var n=e.css,o=e.sourceMap;o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}var f={},_=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=_(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),h=_(function(){return document.head||document.getElementsByTagName("head")[0]}),b=null,M=0,m=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=i(t);return o(n,e),function(t){for(var a=[],r=0;r<n.length;r++){var s=n[r],u=f[s.id];u.refs--,a.push(u)}if(t){var c=i(t);o(c,e)}for(var r=0;r<a.length;r++){var u=a[r];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete f[u.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n,o){t.addEventListener(e,function(t){var e=t.target.closest(n);e&&o(e)})}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(3),s=n(12),u=function(t){return'<div style="background: '+t.color+'" class="'+r.gap__overlay+'"></div>\n<a class="'+r.link+" "+r.gap__link+'" href="'+t.url+'">'+t.name+" "+t.time+"</a>"},c=function(t){var e=t.table?'<a class="'+r.link+'" href="'+t.table.url+'">'+t.office+"</a>":"<span>"+t.office+"</span>",n=t.last_office?'<span class="'+r.visit+'"> — '+t.last_office.office+", "+t.last_office.ago+"</span>":"";return e+" "+n},l=function(t){return'<button class="'+r.button+" "+r.button_jabber+" "+r["button_status_"+(t.is_dismissed?"none":t.jabber_status)]+'">'+t.work_email.replace(/yandex-team\.ru$/,"")+"</button>"},p=function(t,e){return'<div class="'+r.contact+'" style="width: '+e+'px">\n    <div class="'+r.contact__row+'">\n        <span class="'+r.contact__reset+" "+r.link+'">↺</span>\n        <input class="'+r.input+'" type="text" value="'+t.work_email+'" />\n    </div>\n    <a class="'+r.link+" "+r.contact__link+'" href="mailto:'+t.work_email+'">Write email</a>\n    <a class="'+r.link+" "+r.contact__link+'" href="xmpp:'+t.work_email+'">Write to jabber</a>\n</div>'},d=function(t,e){return'\n    <div><a class="'+r.link+" "+r.link_type_user+'" href="//staff.yandex-team.ru/'+t.login+'" target="'+e.target+'">'+t.first_name+" "+t.last_name+"</a></div>\n    <div>"+t.position+'</div>\n    <div class="'+r.contacts+'">\n        '+l(t)+"\n        "+(t.phones&&t.phones.work?'<button class="'+r.button+" "+r.button_phone+'">'+t.phones.work+"</button>":"")+'\n    </div>\n    <div class="'+r.contacts+'">\n        '+(t.phones&&t.phones.mobile?'<button class="'+r.button+" "+r.button_phone+'">'+t.phones.mobile+"</button>":"")+"\n    </div>\n"};t.exports=function(){function t(e,n){var a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(o(this,t),e.querySelector("."+r.head).textContent=n.dep.name,e.querySelector("."+r.avatar).innerHTML='<img src="'+n.avatar+'">',e.querySelector("."+r.body).innerHTML=d(n,s),n.is_dismissed){var f=e.querySelector("."+r.location);f.parentNode.removeChild(f)}else{var _=e.querySelector("."+r.location);_.classList.add(r.location_loaded),_.innerHTML=c(n)}if(n.gap){var g=document.createElement("div");g.innerHTML=u(n.gap),g.classList.add(r.gap),e.appendChild(g)}i(e,"click","."+r.button_jabber,function(){var t=e.querySelector("."+r.button_jabber);t.outerHTML=p(n,t.offsetWidth),e.querySelector("."+r.input).select()}),i(e,"click","."+r.contact__reset,function(){e.querySelector("."+r.contact).outerHTML=l(n)}),i(e,"click","."+r.button_phone,function(t){return a.callPhone(t)})}return a(t,[{key:"callPhone",value:function(t){function e(){o--,0===o&&t.classList.remove(r.button_calling)}var n=t.textContent,o=2;t.classList.add(r.button_calling),setTimeout(e,1e3),s.getJSON("//staff.yandex-team.ru/api/call/"+n+"?format=json").then(e).catch(e)}}]),t}()},function(t,e){"use strict";function n(t){return new Promise(function(e,n){var o=new XMLHttpRequest;Object.assign(o,{withCredentials:!0,onload:function(){try{e(JSON.parse(o.response))}catch(t){n()}},onerror:function(){return n()}}),o.open("GET",t),o.send(null)})}t.exports={getJSON:n}},function(t,e){t.exports={name:"staff-card",version:"2.1.0",description:"",main:"dist/staff-card.js",repository:"git@github.yandex-team.ru:tools/staff-card.git",scripts:{dev:"webpack --watch",prebuild:"rimraf dist/*",build:"npm run build:main && npm run build:min","build:main":"webpack","build:min":"webpack --optimize-minimize",start:"npm run build:main -- --watch",test:"mocha --compilers js:babel-register,css:css-modules-require-hook/preset --require ./util/setup-jsdom",coverage:"nyc --reporter=lcov --reporter=text npm test",preversion:"releaser changelog -v v${npm_package_version}",version:"git add changelog.md",postversion:"git push && git push --tags && npm run deploy",predeploy:"npm run build",deploy:"npm run mds:sync_version && npm run mds:sync_latest","mds:sync_version":"aws s3 --endpoint-url=https://s3.mds.yandex.net sync ./dist/ s3://${npm_package_name}/v${npm_package_version}/","mds:sync_latest":"aws s3 --endpoint-url=https://s3.mds.yandex.net sync ./dist/ s3://${npm_package_name}/_/"},keywords:[],author:"",license:"ISC",files:["dist","src"],nyc:{include:["src/*.js"]},devDependencies:{"babel-core":"^6.7.4","babel-loader":"^6.2.4","babel-preset-es2015":"^6.6.0","babel-register":"^6.7.2","copy-webpack-plugin":"3.0.1","cross-env":"^1.0.7","css-loader":"^0.23.1","css-modules-require-hook":"^4.0.0",eslint:"^2.7.0",expect:"^1.16.0","file-loader":"0.9.0","html-webpack-plugin":"^2.15.0",jsdom:"^8.3.1","json-loader":"^0.5.4",mocha:"^2.4.5",nyc:"^6.4.0",postcss:"^6.0.19","promise.prototype.finally":"^1.0.1",rimraf:"^2.5.2","style-loader":"^0.13.1","url-loader":"^0.5.7",webpack:"~1.13.3","webpack-dev-server":"1.15.*"},dependencies:{"element-closest":"^3.0.1"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=window.requestAnimationFrame,o=window.cancelAnimationFrame;"function"!=typeof n&&(e.setFrame=n=function(t){return window.setTimeout(t,1e3/60)},e.delFrame=o=window.clearTimeout),e.setFrame=n,e.delFrame=o},function(t,e){!function(t){var e=t.Element.prototype;"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(t){
for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=0;e[n]&&e[n]!==this;)++n;return Boolean(e[n])}),"function"!=typeof e.closest&&(e.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(e.matches(t))return e;e=e.parentNode}return null})}(window)}])});
//# sourceMappingURL=staff-card.min.js.map