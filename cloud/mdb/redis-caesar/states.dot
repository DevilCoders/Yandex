digraph States {
    FirstRun -> Candidate
    Candidate -> Manager[label="Acguire\nManager Lock"]
    Candidate -> Candidate
    Candidate -> Lost
    subgraph NeedManagerLock {
        label="Needs\nManager Lock"
        color=lightgrey
        style=filled
        shape=box

        Manager -> Manager
        Manager -> Lost
        Manager -> WaitForRedis[label="Database\nis not\nResponding"]
        WaitForRedis -> Manager[label="All Databases\nResponding"]
        Manager -> WaitFailover
        WaitFailover -> WaitFailover[label="Until\nTimeout"]
        WaitFailover -> Manager[label="Master\nResponeded"]
        WaitFailover -> Failover
        WaitFailover -> Lost
        Failover -> Manager
        Failover -> Lost
    }
    Manager -> Lost[label="Unable to\nConnect to DCS"]
    Lost -> Candidate[label="Connected\nto DCS"]
}
