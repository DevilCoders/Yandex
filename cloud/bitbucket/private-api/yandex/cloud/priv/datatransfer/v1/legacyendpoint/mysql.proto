syntax = "proto3";

package yandex.cloud.priv.datatransfer.v1.legacyendpoint;

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/datatransfer/v1/legacyendpoint;tm_server_legacyendpoint";

import "yandex/cloud/priv/datatransfer/v1/endpoint/common.proto";
import "yandex/cloud/priv/datatransfer/v1/endpoint/mysql.proto";
import "yandex/cloud/priv/sensitive.proto";

message OnPremiseMysqlSource {
    // Address of primary server
    string host = 1;
    int64 port = 9;
    // Database name
    string database = 3;
    // Replication user name
    string user = 2;
    // Cloud only raw password
    string raw_password = 10 [(sensitive) = true];
    string pem_file_content = 8;
    // Network interface for endpoint. If none will assume public ipv4
    string subnet_id = 30;
    // List of tables for replication. If none or empty list is presented - will
    // replicate all tables. Can contain * patterns.
    repeated string include_tables = 6;
    // List of tables excluded from replication. If none or empty list is presented -
    // will replicate all tables. Can contain * patterns.
    repeated string exclude_tables = 7;
    string timezone = 31;
    endpoint.MysqlDumpSteps pre_steps = 32;
    endpoint.MysqlDumpSteps post_steps = 33;
}
message ManagedMysqlSource {
    // MDB cluster identifier
    string cluster_id = 1;
    // Database name
    string database = 3;
    // Replication user name
    string user = 2;
    // Cloud only raw password
    string raw_password = 9 [(sensitive) = true];
    // Network interface for endpoint. If none will assume public ipv4
    string subnet_id = 30;
    // List of tables for replication. If none or empty list is presented - will
    // replicate all tables. Can contain * patterns.
    repeated string include_tables = 7;
    // List of tables excluded from replication. If none or empty list is presented -
    // will replicate all tables. Can contain * patterns.
    repeated string exclude_tables = 8;
    string timezone = 31;
    endpoint.MysqlDumpSteps pre_steps = 32;
    endpoint.MysqlDumpSteps post_steps = 33;
}
message ManagedMysqlTarget {
    // ID of cluster in MDB
    string cluster_id = 1;
    // Database
    string database = 5;
    // User name
    string user = 3;
    // Cloud only raw password
    string raw_password = 7 [(sensitive) = true];
    // Network interface for endpoint. If none will assume public ipv4
    string subnet_id = 30;
    string pem_file_content = 6;
    string timezone = 22;
    // SQL Mode, set default to infer from target cluster
    // Default is 'NO_AUTO_VALUE_ON_ZERO,NO_DIR_IN_CREATE,NO_ENGINE_SUBSTITUTION'
    string sql_mode = 8;
    bool skip_constraint_checks = 9;
    endpoint.CleanupPolicy cleanup_policy = 21;
}
message OnPremiseMysqlTarget {
    // Address of mysql host if not in MDB
    string host = 1;
    // Port, used when no cluster id provided
    int64 port = 2;
    // Database
    string database = 5;
    // User name
    string user = 3;
    // Cloud only raw password
    string raw_password = 7 [(sensitive) = true];
    string pem_file_content = 6;
    // Network interface for endpoint. If none will assume public ipv4
    string subnet_id = 30;
    string timezone = 22;
    // SQL Mode, set default to infer from target cluster
    // Default is 'NO_AUTO_VALUE_ON_ZERO,NO_DIR_IN_CREATE,NO_ENGINE_SUBSTITUTION'
    string sql_mode = 8;
    bool skip_constraint_checks = 9;
    endpoint.CleanupPolicy cleanup_policy = 21;
}
