syntax = "proto3";

package yandex.cloud.priv.organizationmanager.v1;

import "yandex/cloud/api/operation.proto";
import "yandex/cloud/priv/operation/operation.proto";
import "yandex/cloud/priv/validation.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/organizationmanager/v1;organizationmanager";
option java_outer_classname = "POIS";

// This API has a limited usage scope.
// In general an InvitationService should be used.
service InviteService {
  // Invite users for organization without user confirmation.
  rpc Create (InviteUsersRequest) returns (operation.Operation) {
    option (yandex.cloud.api.operation) = {
      metadata: "InviteUsersMetadata"
      response: "InviteUsersResponse"
    };
  }
}

message Invite {
  oneof identity {
    option (exactly_one) = true;
    YandexPassportUserAccount yandex_passport_user_account = 1;
  }
  message YandexPassportUserAccount {
    // Yandex.Passport login or Yandex.Passport email
    string login = 1 [(length) = "2-63"];
  }
}

message InviteUsersRequest {
  string organization_id = 1 [(required) = true, (length) = "<=50"];
  repeated Invite invites = 2 [(size) = "1-100"];
}

message InviteUsersMetadata {
  string organization_id = 1 [(required) = true, (length) = "<=50"];
}

message InviteUsersResponse {
  repeated Invite valid_invites = 1;
  repeated Invite invalid_invites = 2;
}
