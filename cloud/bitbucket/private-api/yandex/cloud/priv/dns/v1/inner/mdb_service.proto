syntax = "proto3";

package yandex.cloud.priv.dns.v1.inner;

import "google/protobuf/empty.proto";
import "yandex/cloud/priv/validation.proto";

option go_package = "a.yandex-team.ru/cloud/bitbucket/private-api/yandex/cloud/priv/dns/v1/inner;dns";
option java_outer_classname = "PMDS";

service MdbService {
  rpc SendRecords (SendRecordsRequest) returns (google.protobuf.Empty);
}

message SendRecordsRequest {
  repeated Record replacements = 1;
  repeated Record deletions = 2;
}

message Record {
  string network_id = 1 [(required) = true]; // Private network ID
  bool add_public_record = 2;

  ManagedCnameRecord cname = 10;
  // More managed record types can be added in the future
}

// CNAME for MDB cluster {rw,ro} master, shard etc.: alias_fqdn -> real_host_fqdn
message ManagedCnameRecord {
  string alias_fqdn = 1 [(required) = true];
  string real_host_fqdn = 2 [(required) = true];
}
