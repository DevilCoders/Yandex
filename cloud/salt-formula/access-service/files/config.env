{%- set access_service = pillar.get('access-service') -%}
{%- set java_memory = access_service.config.max_memory -%}
{%- set java_gc_threads = access_service.config.max_cores -%}
JAVA_OPTS="-Xmx{{ java_memory }} -Xms{{ java_memory }} \
    -XX:+UnlockExperimentalVMOptions \
    -XX:+UseZGC \
    -XX:+DisableExplicitGC \
    -XX:MaxGCPauseMillis=300 \
    -XX:ConcGCThreads={{ java_gc_threads }} \
    -XX:+CrashOnOutOfMemoryError \
    -XX:+HeapDumpOnOutOfMemoryError \
    -XX:HeapDumpPath=/var/lib/yc/access-service/ \
    -Dlog4j.configurationFile=file:///etc/yc/access-service/log4j2.yaml"
APPLICATION_YAML="/etc/yc/access-service/config.yaml"
