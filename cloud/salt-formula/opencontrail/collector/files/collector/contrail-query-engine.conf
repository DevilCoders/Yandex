{%- set default_log_settings = salt['pillar.get']('oct:log_settings:defaults') -%}
{%- set log_settings = salt['pillar.get']('oct:log_settings:contrail-query-engine', default=default_log_settings, merge=True) -%}
#
# Copyright (c) 2014 Juniper Networks, Inc. All rights reserved.
#
# Collector configuration options
#

[DEFAULT]
# analytics_data_ttl=48
cassandra_server_list={% for server in oct_collect_servers %}{{ grains['cluster_map']['hosts'][server]['ipv4']['addr'] }}:9042 {% endfor %}
# collectors= # Provided by discovery server
hostip={{ ipv4 }}
hostname={{ grains['nodename'] }}
# http_server_port=8089

log_level={{ log_settings['sandesh_level'] }}
log_local=1
log_property_file=/etc/contrail/contrail-query-engine_log4cplus.properties
# log_category must be unset or set to empty string to log all messages
# log_category=

# max_slice=100
# max_tasks=16
# start_time=0
# test_mode=0
# Sandesh send rate limit can be used to throttle system logs transmitted per
# second. System logs are dropped if the sending rate is exceeded
sandesh_send_rate_limit={{ log_settings['sandesh_send_rate_limit'] }}

[DISCOVERY]
server=127.0.0.1
port=5998

[REDIS]
port=6379
# Many pieces assume Redis and collector run on the same IP. Be explicit.
server={{ ipv4 }}
