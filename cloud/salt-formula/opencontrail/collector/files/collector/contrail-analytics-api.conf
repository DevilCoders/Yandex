{%- set default_log_settings = salt['pillar.get']('oct:log_settings:defaults') -%}
{%- set log_settings = salt['pillar.get']('oct:log_settings:contrail-analytics-api', default=default_log_settings, merge=True) -%}
[DEFAULTS]
host_ip = {{ ipv4 }}
#collectors = 127.0.0.1:8086
cassandra_server_list={% for server in oct_db_servers %}{{ grains['cluster_map']['hosts'][server]['ipv4']['addr'] }}:9160 {% endfor %}
#http_server_port = 8090
rest_api_port=8081
rest_api_ip=0.0.0.0

log_level={{ log_settings['sandesh_level'] }}
# Set log_local to empty string to disable, setting to 0 or False doesn't work
log_local=1
# log_category must be unset or set to empty string to log all messages
#log_category=
# log_file is not used in the logger class below
#log_file=
logger_class=pysandesh.sandesh_logger.SandeshConfigLogger
logging_conf=/etc/contrail/contrail-analytics-api.logging.conf

# Sandesh send rate limit can be used to throttle system logs transmitted per
# second. System logs are dropped if the sending rate is exceeded
sandesh_send_rate_limit={{ log_settings['sandesh_send_rate_limit'] }}

# disable caching, see CLOUD-3640
partitions=0
# XXX: yes, this is rather insecure
aaa_mode=no-auth

[DISCOVERY]
disc_server_ip=127.0.0.1
disc_server_port=5998

[REDIS]
redis_server_port=6379
