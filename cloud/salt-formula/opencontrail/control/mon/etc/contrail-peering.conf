{% from 'opencontrail/map.jinja' import other_oct_clusters -%}
{% set hostname = grains['nodename'] -%}
{% set external_control_node = salt['grains.get']('cluster_map:hosts:%s:oct:external_control_node' % hostname) -%}

{% if external_control_node and other_oct_clusters -%}
expected_peers:
  {% for other_oct_cluster_id, other_oct_cluster in other_oct_clusters | dictsort -%}
  {% for other_external_control in other_oct_cluster.external_controls -%}
  - {{ other_external_control }}
  {% endfor -%}
  {% endfor -%}
{% else %}
expected_peers: []
{%- endif %}

announces_address_families:  # To disable announces check, remove it
  - inet
  - inet6
