{%- set default_log_settings = salt['pillar.get']('oct:log_settings:defaults') -%}
{%- set log_settings = salt['pillar.get']('oct:log_settings:ifmap', default=default_log_settings, merge=True) -%}
# Set root logger level to DEBUG and its only appender to CONSOLE
log4j.rootLogger={{ log_settings['level'] }}, CONSOLE
log4j.error

log4j.logger.de.fhhannover.inform.irond.proc={{ log_settings['level'] }}, A2, A3, CONSOLE
log4j.additivity.de.fhhannover.inform.irond.proc=false

log4j.appender.A2=org.apache.log4j.RollingFileAppender
log4j.appender.A2.Threshold={{ log_settings['level'] }}
log4j.appender.A2.File=/var/log/contrail/ifmap-server.log

log4j.appender.A2.MaxFileSize={{ log_settings['file_size_mb'] }}MB
log4j.appender.A2.MaxBackupIndex={{ log_settings['files_count'] }}

log4j.appender.A2.layout=org.apache.log4j.PatternLayout
log4j.appender.A2.layout.ConversionPattern={"timestamp":"%d{yyyy-MM-dd HH:mm:ss}","level":"%5p","thread":"%t", "strace":"%x", "message":"%m"}%n

log4j.logger.de.fhhannover.inform.irond.rawrequests={{ log_settings['level'] }}, A3
log4j.additivity.de.fhhannover.inform.irond.rawrequests=false
log4j.appender.A3=org.apache.log4j.FileAppender
log4j.appender.A3.file=/var/log/contrail/ifmap-server-raw.log
log4j.appender.A3.layout=org.apache.log4j.PatternLayout
log4j.appender.A3.layout.ConversionPattern={"timestamp":"%d{HH:mm:ss}","level":"%5p","strace":"%x", "message":"%m"}%n

log4j.appender.CONSOLE=org.apache.log4j.RollingFileAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern={"ms_from_last_event":%8r,"timestamp":"%d{yyyy-MM-dd HH:mm:ss}","level":"%5p","category_level":"%C{1}","strace":"%x", "message":"%m"}%n
log4j.appender.CONSOLE.File=/var/log/contrail/ifmap-server-console.log

log4j.appender.CONSOLE.MaxFileSize={{ log_settings['file_size_mb'] }}MB
log4j.appender.CONSOLE.MaxBackupIndex={{ log_settings['files_count'] }}
