При походах в API других сервисов Облака (в том числе в БД) сервисы должны руководствоваться
[стандартными правилами работы с токенами, рекомендуемыми документацией](https://cloud.yandex.ru/docs/iam/operations/iam-token/create):

- токен выписывается способом, наиболее приемлемым для данного сервиса: например, это может быть сервис метаданных для
  SVM, Token Agent для железных хостов или JWT для сервисов, размещенных вне периметра Облака;
- приложение не начинает работу (не начинает принимать запросы) до того момента, как токен его системного SA был успешно
  выписан;
- приложение не начинает работу, если выписанный в момент старта токен валиден менее 15 минут;
- выписанный в момент старта токен используется в течение времени, равном как минимум 10% от разницы `expires_at` и
  временем выписки токена;
- токен, который был использован в течение указанного в предыдущем пункте времени, подлежит обновлению: приложение
  запускает фоновый процесс, который перевыписывает токен его системного SA, при этом все текущие запросы продолжают
  делаться с закэшированным токеном (таким образом, в случае каких-либо проблем с перевыписыванием токена останется
  90% времени жизни токена на то, чтобы заметить и исправить ситуацию);
- приложениям рекомендуется иметь мониторинг времени использвания токена системного SA, который необходимо зажигать,
  если время жизни токена приближается к 20% от разницы `expires_at` и временем выписки токена.

{% note info %}

В рамках [CLOUD-45990](https://st.yandex-team.ru/CLOUD-45990) делается мониторинг времени истечения токенов SA, с
которыми сервисы ходят друг в друга.

{% endnote %}

Пример использование данной схемы:

1. На старте приложения был выписан токен, его время жизни 10 часов.
2. В течение часа приложение пользуется этим токеном для походов в другие сервисы Облака.
3. Через час с момента старта приложения фоновый процесс пытается обновить его. Допустим, что обновление затянулось и
   случилось только через 10 минут от момента начала процесса перевыписки. В этом случае все 10 минут приложение
   продолжает пользоваться старым токеном.
