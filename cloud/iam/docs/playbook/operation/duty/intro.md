## Кто такой дежурный?

Дежурный — сотрудник подразделения IAM & Resource Manager, отвечающий в первую очередь за работоспособность всех
сервисов подразделения.

В наших сервисах всегда есть два дежурных: primary и backup.

## Перед дежурством

- ознакомься с [общим положением о дежурствах в Облаке](https://wiki.yandex-team.ru/cloud/devel/oncall/);
- проверь, что на стаффе задан Telegram-аккаунт и телефон;
- проверить, что состоишь в следующих Telegram-чатах https://wiki.yandex-team.ru/cloud/regulations/oncall/#kanalykommunikacii
- убедись, что можешь быть доступным по телефону и в чатах и сможешь подключиться к решению проблем в течении всего твоего
  дежурства не позднее, чем за 10 минут с момента призыва;
- [подтверди свою смену в сервисе дежурств ABC](https://abc.yandex-team.ru/services/yc_iam_dev/duty/);
- если во время смены не сможешь дежурить в какие-то дни, согласуй замену со своим руководителем или менеджером
  проектов;
- ознакомься с [FAQ](https://wiki.yandex-team.ru/cloud/iamrm/duty/faq/) и [Operation Playbook](https://docs.yandex-team.ru/iam-playbook-operation/);
- проверь, что появились необходимые доступы к продовым ресурсам;
- найди свой дежурный тикет;
- попроси предыдущего дежурного передать тебе задачи, оставшиеся с его дежурства, и необходимый контекст по инцидентам и
  текущему состоянию сервисов;
- сообщи предыдущему дежурному, что принял смену.

## Во время дежурства

### Обязанности primary-дежурного

В порядке приоретета от наивысшего: пока не закончены задачи более высокого приоритета,
не стоит приступать к задачам более низкого приоритета):

- обеспечение работоспособности сервисов: починка сломанного и предотвращение аварий, реакция на алерты;
- работа по [инцидентам Облака](https://wiki.yandex-team.ru/cloud/regulations/cloudinc/)
  ([очередь CLOUDINC](https://st.yandex-team.ru/CLOUDINC/grouping:components/order:updated:false/filter?resolution=empty()&components=46937))
  и [чрезвычайным ситуациям](emergency/);
- коммуникация с командой поддержки и внешними пользователями в тикетах
  [очереди CLOUDSUPPORT](https://st.yandex-team.ru/CLOUDSUPPORT/);
- поддержка внешних пользователей в чатах Облака и по другим каналам (по просьбе сапорта);
- поддержка сервисов Облака в [чате поддержки IAM & RM](https://t.me/joinchat/DmVJUQ0WnSUtv1zOnx1bcA),
  чатах поддержки стендов Облака, в тикетах и на рассылке [cloud-iam](https://ml.yandex-team.ru/lists/cloud-iam/);
- поддержка пользователей внутренней инсталляции [yc.yandex-team.ru](https://yc.yandex-team.ru/);
- поддержка внутренних пользователей в чате [Яндекс.Облако для Яндекса](https://t.me/joinchat/BpUNFEq8SrO8Yc0ltgo54g);
- координация [релизов](https://st.yandex-team.ru/CLOUD/order:updated:false/filter?resolution=empty()&type=release&components=2369)
  и [ad-hoc-операций](https://st.yandex-team.ru/CLOUDOPS/order:updated:true/filter?resolution=empty()&components=60793)
  в сервисах команды IAM & RM;
- согласование [сетевых доступов](firewall) до сервисов команды IAM & RM.

{% note alert %}

При отсутствии возможности оперативно подключаться к решению проблем (например, по пути с работы до дома, в случае
отсутствия связи или иных трудностях) обязательно предупреди backup-дежурного и получи от него подтверждение, что он
сможет тебя заменить. Помни, что согласно регламентам Облака время реакции на критичные инциденты не должно превышать
10 минут.

В случае регулярных длительных подмен договорись с backup-дежурным о возмещении потраченного времени, например, во
время следующей смены backup-дежурного, можешь подежурить за него.

{% endnote %}

Фиксируй все свои действия и вопросы, на которые отвечаешь, в дежурном тикете. Там же можно вычеркивать решенные
вопросы, чтобы вести их очередь и чтобы следующий дежурный мог увидеть неотвеченные вопросы, когда начнется его смена.
Если вопрос оказался слишком сложным или выходит за границы обязанностей дежурного, заведи тикет и сообщи об этом
команде сервиса в чат. Если вопрос лежит в сфере ответственности другого сервиса, призови соответствующего дежурного.

{% note alert %}

Не отвечай на вопросы в личных сообщениях. Лучше перевести диалог в
[чат поддержки IAM & RM](https://t.me/joinchat/DmVJUQ0WnSUtv1zOnx1bcA) или в тикет.

{% endnote %}

{% note info %}

Помни, что нашим сервисом пользуются разные люди, не всегда хорошо понимающие, как работает инфраструктура Облака.

{% endnote %}

### Обязанности backup-дежурного

- по просьбе primary-дежурного подключаться к решению задач из списка обязанностей primary-дежурного;
- backup-дежурный — обязательный апрувер всех PR'ов в команде, брать в работу приходящие PR'ы от коллег не позднее
  конца следующего рабочего дня с момента его открытия (после окончания просмотра обязательно поставить на него одну
  из двух резолюций — апрув или требуются доработки).

{% note info %}

Дежурный не несет ответственности за возможные проблемы, пропущенные в результаты просмотра PR'а, ответственность за
сервис лежит на его главном разработчике (который всегда является обязательным апрувером PR'ов в него).

{% endnote %}

### Чего НЕ делать во время дежурства?

- Дежурный не принимает решений по развитию сервиса, добавлению в него новых фич, не отвечает на вопросы, которые явно
  выходят за рамки его обязанностей как дежурного. Если вы не уверены на 120%, что знаете ответ на вопрос,
  перенаправьте человека в чат сервиса или на рассылку или напишите во внутренний чат.
- Дежурный не проводит операции с пользовательскими ресурсами или операции, потенциально влияющие на пользовательские
  ресурсы, без апрува двух руководителей и вне [ad-hoc-процесса](https://wiki.yandex-team.ru/cloud/regulations/adhoc/).
- Дежурный не занимается дебагом чужих сервисов. Сервисы должны предоставлять адекватную информацию для расследования
  проблем (например, request-id).

## После дежурства

- передай контекст текущего состояния стендов следующему дежурному, расскажи об активных инцидентах и имеющихся
  проблемах;
- убедись, что в дежурном тикете не осталось незакрытых и непереданных следующему дежурному задач;
- получи подтверждение от следующего дежурного, что он принял смену;
- если твоя смена выпала на выходные или праздничные дни, в течение месяца после окончания смены можно взять отгулы
  (на стаффе их необходимо [отмечать](https://staff.yandex-team.ru/gap/) как Отсутствие, а в комментарии к нему поставить тэг #duty).
