## Общие сведения

Сетевые доступы согласуются в интерфейсе [Puncher](https://puncher.yandex-team.ru/) дежурным или отвественным за сервис.

## Допустимые и недопустимые варианты доступов

Все возможные адреса, сетевые макросы и порты, до которых возможно выдавать доступ, указаны на странице
[Endpoints](https://docs.yandex-team.ru/iam-cookbook/6.appendices/endpoints).
Если destination из заявки не совпадает с каким-либо из этих значений, такую заявку необходимо отклонить. При согласовании
заявки обратите особое внимание на то, что для доступа к сервисам на некоторых стендах необходимо заказывать доступ не
только до endpoint'а сервиса, но и до указанного в примечании сетевого макроса.

{% note alert %}

Выдавать новые доступы на legacy-сервисы на странице
[Endpoints](https://docs.yandex-team.ru/iam-cookbook/6.appendices/endpoints) запрещено.

{% endnote %}

По умолчанию доступы между разными стендами запрещены, т.е. нельзя просто так заказать доступ из Pre-Prod в Prod или
из Prod в Testing. Все подобные доступы нужно предварительно обсудить в соответствующем тикете с командой Security.

На странице [Endpoints](https://docs.yandex-team.ru/iam-cookbook/6.appendices/endpoints) указан приватный API сервисов,
доступ в который могут иметь только сервисы самого Облака. Доступ к нему из-за периметра Облака запрещен. Для вызовов
сервисов снаружи (в том числе из сетей Яндекса) используется публичный API Облака, также доступный внешним
пользователям.

{% note info %}

Сервис Yandex Team Integration является исключением из этого правила. Доступ до него может быть запрошен с любой машины
из сетей Яндекса.

{% endnote %}

{% note info %}

Для тестирования, разработки и работы внутренних тулов (например, ycp) допускается выдавать доступ до приватного API с
разработческих машин и ноутбуков сотрудникам Облака.

{% endnote %}

В заявке должны быть указаны в точности те TCP-порты, которые указаны на странице
[Endpoints](https://docs.yandex-team.ru/iam-cookbook/6.appendices/endpoints).
Если в заявке присутствуют другие порты или протоколы, то такая заявка должна быть отклонена.

Нельзя запрашивать в одной заявке доступы до сервисов с разных стендов. Такую заявку следует разбить на несколько.

## Обоснование доступов

Каждая заявка должна сопровождаться внятным комментарием, объясняющим зачем этот доступ нужен и что станет возможным
благодаря ему. Комментарий должен начинаться с кода тикета, в котором подробно изложена решаемая этим доступом задача.
Это позволит найти автора правила, его сервис и облегчит процесс пересмотра доступов.
