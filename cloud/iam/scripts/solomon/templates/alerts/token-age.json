{
  "id": "${SERVICE_NAME}-token-age-${CLUSTER_NAME}",
  "projectId": "${PROJECT_ID}",
  "name": "${SERVICE_NAME} token age ${CLUSTER_NAME}",
  "groupByLabels": [
    "host"
  ],
  "type": {
    "threshold": {
      "selectors": "{host='myt*|sas*|vla*|spb*', cluster='${CLUSTER_NAME}', project='${PROJECT_ID}', sensor='age', service='${SERVICE_NAME}'}",
      "timeAggregation": "LAST_NON_NAN",
      "predicate": "GT",
      "threshold": 7500,
      "predicateRules": [
        {
          "thresholdType": "LAST_NON_NAN",
          "comparison": "GT",
          "threshold": 7500,
          "targetStatus": "WARN"
        },
        {
          "thresholdType": "LAST_NON_NAN",
          "comparison": "GT",
          "threshold": 15000,
          "targetStatus": "ALARM"
        }
      ]
    }
  },
  "annotations": {
    "description": "Status not equal to OK means some failures during token update.",
    "host": "{{labels.host}}",
    "service": "${SERVICE_NAME}",
    "url": "https://${SOLOMON_ENDPOINT}/admin/projects/${PROJECT_ID}/alerts/${SERVICE_NAME}-token-age-${CLUSTER_NAME}"
  },
  "windowSecs": 300,
  "delaySecs": 0,
  "channels": ${CHANNELS}
}
