apiVersion: v1
kind: Pod
metadata:
  clusterName: filestore-nfs
  name: filestore-nfs
spec:
  terminationGracePeriodSeconds: 70
  containers:
    - name: filestore-nfs
      image: "{{app_image}}:{{app_version}}"
      command: ["/usr/bin/filestore-nfs"]
      env:
        - name: APPLICATION_YAML
          value: /etc/filestore-nfs/app.yaml
      volumeMounts:
        - name: service-configs
          mountPath: /etc/filestore-nfs/
          readOnly: true
        - name: service-secrets
          mountPath: /var/run/filestore-nfs/
          readOnly: true
        - name: service-logs
          mountPath: /var/log/filestore-nfs/
          readOnly: false
        - name: systemd-log
          mountPath: /dev/log
          readOnly: false
  hostNetwork: true
  hostPID: true
  volumes:
    - name: service-configs
      hostPath:
        path: /etc/filestore-nfs/
        type: DirectoryOrCreate
    - name: service-secrets
      hostPath:
        path: /var/run/filestore-nfs/
        type: DirectoryOrCreate
    - name: service-logs
      hostPath:
        path: /var/log/filestore-nfs/
        type: DirectoryOrCreate
    - name: systemd-log
      hostPath:
        type: Socket
        path: /dev/log
