definitions:
  - defaults: &defaults
      name: "auth"
      port: 8769
      path: "/counters/counters=blockstore/component=auth/spack"
      add_ts_args: false
      interval: 15
      grid_sec: 15
      protocol: "PULL_PROTOCOL_UNSPECIFIED"
      sensors_ttl_days: 7
services:
  - id: "nbs_auth"
    <<: *defaults
    clusters:
      - prod
    sensor_conf:
      aggr_rules:
      - cond:
        - host=*
        target:
        - host=cluster
      - cond:
        - host=vla*
        target:
        - host=cluster-vla
      - cond:
        - host=myt*
        target:
        - host=cluster-myt
      - cond:
        - host=sas*
        target:
        - host=cluster-sas
      - cond:
        - host=nbs-control*
        target:
        - host=nbs-control
      - cond:
        - host=nbs-control-sas*
        target:
        - host=cluster-sas
      - cond:
        - host=nbs-control-myt*
        target:
        - host=cluster-myt
      - cond:
        - host=nbs-control-vla*
        target:
        - host=cluster-vla
      - cond:
        - host=man*
        target:
        - host=cluster-man
      - cond:
        - host=nbs-control-man*
        target:
        - host=cluster-man

  - id: "nbs_auth"
    <<: *defaults
    clusters:
      - israel
    sensor_conf:
      aggr_rules:
      - cond:
        - host=*
        target:
        - host=cluster
      - cond:
        - host=il1-a*
        target:
        - host=cluster-il1-a
      - cond:
        - host=nbs-control*
        target:
        - host=nbs-control
      - cond:
        - host=nbs-control-il1-a*
        target:
        - host=cluster-il1-a
