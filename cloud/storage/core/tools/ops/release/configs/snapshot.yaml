name: snapshot
description: Snapshot Service
definitions:
  - &prod-telegram-chat-id "-1001286817181"
  - &prod-qmssngr-chat-id "1/0/c1066948-3a77-4e1a-b9d6-a270dc110f3b"
  - &testing-telegram-chat-id "-1001335463048"
  - &testing-qmssngr-chat-id "1/0/85b6e495-1d27-4ac2-9dc2-7fc5b4325ee6"
  - &snapshot-binary-packages
    - yc-snapshot
  - &snapshot-services
    - name: yc-snapshot
      restart_delay: 5s
clusters:
  testing:
    {{- range (seq "sas" "vla" "myt")}}
    {{.}}:
      telegram:
        chat_id: *testing-telegram-chat-id
      qmssngr:
        chat_id: *testing-qmssngr-chat-id
      infra:
        environment_id: 521
      targets:
        - name: snapshot
          tags:
            - svm
          binary_packages: *snapshot-binary-packages
          services: *snapshot-services
          z2:
            meta_group: YCLOUDVM_TESTING_SNAPSHOT
            group: YCLOUDVM_TESTING_SNAPSHOT_{{.|ToUpper}}
    {{end}}
