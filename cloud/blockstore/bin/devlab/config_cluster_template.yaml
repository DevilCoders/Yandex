use_walle: True
use_fixed_tablet_types: True
require_address: False
cluster_uuid: "2452520"
static_pdisk_type: SSD
static_erasure: block-4-2
fail_domain_type: body
monitoring_address: "::"
hosts:
  - name: myt1-ct5-17.cloud.yandex.net
    body: '103058926'
    datacenter: 'sas'
    rack: 'sas-1:1'
    drives: &disk_set_nvme3_hdd1
      - path: /dev/disk/by-partlabel/NVMEKIKIMR01
        type: SSD
      - path: /dev/disk/by-partlabel/NVMEKIKIMR02
        type: SSD
      - path: /dev/disk/by-partlabel/NVMEKIKIMR03
        type: SSD
      - path: /dev/disk/by-partlabel/ROTKIKIMR01
        type: ROT
  - name: myt1-ct5-14.cloud.yandex.net
    body: '113058926'
    datacenter: 'sas'
    rack: 'sas-2:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-15.cloud.yandex.net
    body: '123058926'
    datacenter: 'sas'
    rack: 'sas-3:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-16.cloud.yandex.net
    body: '133058926'
    datacenter: 'sas'
    rack: 'sas-4:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-12.cloud.yandex.net
    body: '143058926'
    datacenter: 'sas'
    rack: 'sas-5:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-18.cloud.yandex.net
    body: '153058926'
    datacenter: 'sas'
    rack: 'sas-6:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-24.cloud.yandex.net
    body: '163058926'
    datacenter: 'sas'
    rack: 'sas-7:1'
    drives: *disk_set_nvme3_hdd1
  - name: myt1-ct5-25.cloud.yandex.net
    body: '173058926'
    datacenter: 'sas'
    rack: 'sas-8:1'
    drives: *disk_set_nvme3_hdd1
log:
  default: 3
domains:
  - domain_name: dev_global
    storage_pool_kinds:
      - kind: "ssd"
        erasure: block-4-2
        fail_domain_type: body
        filter_properties:
          type: SSD
      - kind: "rot"
        erasure: block-4-2
        fail_domain_type: body
        filter_properties:
          type: ROT
      - kind: "ssdencrypted"
        erasure: block-4-2
        fail_domain_type: body
        encryption_mode: 1
        filter_properties:
          type: SSD
      - kind: "rotencrypted"
        erasure: block-4-2
        fail_domain_type: body
        encryption_mode: 1
        filter_properties:
          type: ROT
    console_initializers:
      - cloud_ssdencrypted_table_profile
    databases:
      - name: NBS
        storage_units:
          - kind: "ssd"
            count: 20
          - kind: "rot"
            count: 1
        overridden_configs:
          log:
            default: 3
          monitoring_address: "::"
          ic:
            merge_peer_counters: True
          nbs:
            enable: True
            storage:
              channels_profile: 3
              channels_profile_ssd: 4
              channels_profile_hybrid: 5
              scatter_volumes_in_scheme_shard: True
              channel_allocation_mode: CA_EXPLICIT
              allocate_separate_mixed_channels: True
              write_request_batching_enabled: True
              two_stage_local_mount_enabled: True
              ssd_compaction_type: 1
              hdd_compaction_type: 1
              v1_garbage_compaction_enabled: True
              compaction_garbage_threshold: 20
              multipartition_volumes_enabled: True
              volume_preemption_type: PREEMPTION_MOVE_MOST_HEAVY
              preemption_push_percentage: 80
              preemption_pull_percentage: 40
              max_disks_in_placement_group: 2
              cleanup_partition_channels_at_startup: true
              run_v2_soft_gc_at_startup: true
              acquire_non_replicated_devices: true
              non_replicated_migration_start_allowed: true
              fresh_channel_count: 1
              fresh_channel_write_requests_enabled: true
              use_sparse_merged_blobs: true
              incremental_compaction_enabled: true
              throttling_enabled: true
              throttling_enabled_s_s_d: true
            diagnostics:
              host_name_scheme: HOSTNAME_YDBVIEWER
              viewer_host_name: "ydb.bastion.cloud.yandex-team.ru"
              solomon_cluster_name: "cloud_hw-nbs-dev-lab"
              use_async_logger: True
              ssd_perf_threshold:
                read_threshold:
                  threshold: 100
                  percentile: 95
                write_threshold:
                  threshold: 100
                  percentile: 95
              hdd_perf_threshold:
                read_threshold:
                  threshold: 1000
                  percentile: 95
                write_threshold:
                  threshold: 1000
                  percentile: 95
              ssd_perf_settings:
                write:
                  iops: 4200
                  bandwidth: 342000000
                read:
                  iops: 4200
                  bandwidth: 342000000
              hdd_perf_settings:
                write:
                  iops: 1023
                  bandwidth: 129000000
                read:
                  iops: 1023
                  bandwidth: 129000000
              nonrepl_perf_settings:
                write:
                  iops: 35114
                  bandwidth: 843000000
                read:
                  iops: 35114
                  bandwidth: 843000000
            server:
              data_host: "localhost"
              strict_contract_validation: True
              endpoints_keyring_name: "nbs-endpoints-v2"
              vhost_enabled: True
              vhost_threads_count: 4
              nbd_enabled: True
              nbd_threads_count: 4
              nbd_socket_suffix: "_nbd"
              node_type: nbs
              grpc_keep_alive_time: 10000
              grpc_keep_alive_timeout: 1000
              grpc_keep_alive_permit_without_calls: true
              grpc_http2_min_recv_ping_interval_without_data: 1000
            client:
              client_config:
                nbd_socket_suffix: "_nbd"
                ipc_type: 2
            http_proxy:
              port: 9770
              nbs_server_host: "localhost"
              nbs_server_port: 9766
              nbs_server_insecure: true
            names:
              suppress_version_check: True
            auth:
              access_service_endpoint: "local-lb.cloud-lab.yandex.net:14286"
              use_black_box: False
              use_access_service: True
              use_staff: False
              use_user_account_service: False
            breakpad:
              enable: True
      - name: NFS
        storage_units:
          - kind: "ssd"
            count: 3
          - kind: "rot"
            count: 1

profiles:
   - channels:
     - storage_pool_kind: ssdencrypted
     - storage_pool_kind: ssdencrypted
     - storage_pool_kind: ssdencrypted
   # channels reserved for S3 Proxy, only S3 Proxy should use them
   - channels:
     - storage_pool_kind: ssdencrypted
     - storage_pool_kind: ssdencrypted
     - storage_pool_kind: rotencrypted
   - channels:
     - storage_pool_kind: ssdencrypted
     - storage_pool_kind: rotencrypted
     - storage_pool_kind: rotencrypted
   # channels used by NBS
   - channels:
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
   - channels:
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
   - channels:
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
     - storage_pool_kind: rot
   # Reserved for Solomon
   - channels:
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
   - channels:
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
       - storage_pool_kind: ssdencrypted
   # reserved for nfs
   - channels:
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd
     - storage_pool_kind: ssd

