{
    "annotations": {
        "host": "{{labels.host}}.cloud.yandex.net", 
        "service": "solomon_alert_nbs_server_fatal_errors", 
        "tags": "yc-preprod-nbs-solomon"
    }, 
    "channels": [
        {
            "config": {}, 
            "id": "juggler"
        }
    ], 
    "createdAt": "2019-11-01T12:40:41Z", 
    "createdBy": "haposik", 
    "delaySeconds": 30, 
    "delaySecs": 30, 
    "description": "", 
    "groupByLabels": [
        "host"
    ], 
    "id": "preprod_nbs_server_fatal_errors", 
    "name": "[PRE-PROD] NBS Server Fatal Errors", 
    "noPointsPolicy": "NO_POINTS_DEFAULT", 
    "notificationChannels": [
        "juggler"
    ], 
    "periodMillis": 600000, 
    "projectId": "nbs", 
    "resolvedEmptyPolicy": "RESOLVED_EMPTY_DEFAULT", 
    "state": "ACTIVE", 
    "type": {
        "expression": {
            "checkExpression": "", 
            "program": "let not_so_fatal_error_list='DescribeVolume';\n\nlet fatal_errors = integrate_fn(group_lines('sum', {\n\tproject='nbs',\n\tcluster='yandexcloud_preprod',\n\tservice='server',\n\thost='vla04-*|myt1-*|sas09-*',\n\trequest!='{{not_so_fatal_error_list}}',\n\tsensor='Errors/Fatal',\n\ttype= 'ssd|hdd'\n}));\n\nlet not_so_fatal_errors = integrate_fn(group_lines('sum', {\n\tproject='nbs',\n\tcluster='yandexcloud_preprod',\n\tservice='server',\n\thost='vla04-*|myt1-*|sas09-*',\n\trequest='{{not_so_fatal_error_list}}',\n\tsensor='Errors/Fatal'\n}));\n\nno_data_if(count(fatal_errors) == 0);\n\nwarn_if(max(fatal_errors) == 1);\nalarm_if(max(fatal_errors) > 1);\n\nwarn_if(max(not_so_fatal_errors) > 10);\nalarm_if(max(not_so_fatal_errors) > 20);\n"
        }
    }, 
    "updatedAt": "2021-03-12T13:12:57Z", 
    "updatedBy": "yegorskii", 
    "version": 18, 
    "windowSecs": 600
}