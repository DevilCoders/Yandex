{
    "annotations": {}, 
    "channels": [
        {
            "config": {}, 
            "id": "telegram"
        }
    ], 
    "createdAt": "2019-12-26T11:22:36Z", 
    "createdBy": "alshabalin", 
    "delaySeconds": 60, 
    "delaySecs": 60, 
    "description": "Sensors quota reached: https://solomon.yandex-team.ru/?project=solomon&cluster=production&service=coremon&l.sensor=engine.fileSensors*&l.host=cluster&l.projectId=nbs&l.shardId=nbs_yandexcloud_preprod_*&graph=auto&stack=false&b=1h&e=&min=0", 
    "groupByLabels": [
        "shardId", 
        "host"
    ], 
    "id": "preprod-solomon-quota", 
    "name": "[PRE-PROD] Solomon quota", 
    "noPointsPolicy": "NO_POINTS_DEFAULT", 
    "notificationChannels": [
        "telegram"
    ], 
    "periodMillis": 300000, 
    "projectId": "nbs", 
    "resolvedEmptyPolicy": "RESOLVED_EMPTY_DEFAULT", 
    "state": "ACTIVE", 
    "type": {
        "expression": {
            "checkExpression": "", 
            "program": "let limit = {\n    project=\"solomon\",\n    cluster=\"production\",\n    service=\"coremon\",\n    host=\"???\",\n    sensor=\"engine.fileSensorsLimit\",\n    projectId=\"nbs\",\n    shardId=\"nbs_yandexcloud_preprod_*\"};\n\nlet usage = {\n    project=\"solomon\",\n    cluster=\"production\",\n    service=\"coremon\",\n    host=\"???\",\n    sensor=\"engine.fileSensors\",\n    projectId=\"nbs\",\n    shardId=\"nbs_yandexcloud_preprod_*\"};\n\nlet avg_usage = avg(usage);\nlet avg_limit = avg(limit);\n\nalarm_if(avg_usage/avg_limit > 0.9);\nwarn_if(avg_usage/avg_limit > 0.8);"
        }
    }, 
    "updatedAt": "2019-12-26T11:26:16Z", 
    "updatedBy": "alshabalin", 
    "version": 3, 
    "windowSecs": 300
}