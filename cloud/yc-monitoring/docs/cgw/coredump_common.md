# coredump_common

**Значение:** Какой-то из сервисов упал с coredump.
**Воздействие:** Сервис на конеретной машине порестартился или упал.
**Что делать:**
1. Посмотреть в /var/crashes, найти корку из описания ошибки.
2. Попытаться понять в чем причина. В случае go-сервисов ошибка должна быть как panic в логах сервиса. В случае C - сервисов нужно смотреть в логи сервиса и gdb. Пример для vpp:
```
sudo gdb /usr/bin/vpp /var/crashes/core.vpp_korka.000000
(gdb) bt 50
(gdb) thread apply all bt 50
```
Если gdb ругается, что не тот бинарь, то можно это уточнить:
` sudo file /var/crashes/core.vpp_korka.000000` - в выхлопе будет путь до бинаря.
3. По найденным ключевым словам пытаемся найти тикет в стартреке. Если не находим, создаем новый. В названии желательно указывать функцию, близкую к дну стека (неинтересно, если там `#0 unix_signal_handler`, но интересно `#4 fib_table_purge`). При создании навесь тег coredump. Не надо кидать backtrace в paste - так будет сложнее искать похожие проблемы. Лучше спрятать его под кат.
4. Убеждаемся что сервис поднят и работает. Важно убедиться, что сервис не ушел в циклические падения.
5. В /var/crashes создаем директорию по названию тикета и моваем туда корку (/var/crashes/CLOUD-XXX/core.vpp_korka.000000)
6. После перекладывания корки мониторинг должен погаснуть. В тикет нужно призвать ответственного.
