# cgw_traffic_deviation

Бывает в двух вариантах:
`cgw_traffic_deviation_egress` - проверяет исходящий из облака трафика по интерфейсу, направленному в сторону виртуалок.
`cgw_traffic_deviation_ingress` - проверяет входящий в облако из внешних площадок трафик по интерфейсу, смотрящему в upstream.
Проверяет, что трафик равномерно распределяется между хостами одного шарда.
Важно смотреть на "reason" в описании алерта:
1. `This host gets too few traffic`:
- Означает, что хост по какой-то причине недополучает трафик. Может загораться, если вывести хост из эксплуатации с помощью yavpp-disable-announces
2. `This host gets too much traffic`:
- Означает, что хост получает больше половины трафика на себя. Может загореться, если кто-нибудь целенаправленно отправляет высокий пакет-рейт в одной сессии. Также может означать, что где-нибудь сломалась ecmp балансировка трафика.
3. `Too few hosts for production!`
- По какой-то причине остался только один хост, который получает трафик. Возможно, сломалась выгрузка в соломон, или действительно остался последний хост, и нужно срочно восстанавливать их а не читать эту вики!
