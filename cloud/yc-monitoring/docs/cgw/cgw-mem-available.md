# cgw-mem-available
[Алерт в Juggler](https://juggler.yandex-team.ru/aggregate_checks/?project=&query=service%3Dcgw-mem-available)

## Проверяет
* Хост обладает достаточным количеством свободной памяти.

## Подробности
* Имеет два порога срабатывания: warn и crit
* Лимиты памяти на хост выставляются индивидуально по стенду+роли.

## Что делать
* Необходимо понять, кто потребляет память.
* Для этого смотреть в график потребления памяти по хосту в соломоне (обращать внимание на тренд).
* Смотреть историю потребления памяти по процессам на самом хосте, через atop: `sudo atop -r /var/log/atop/atop_20220701`
* При необходимости погрепать логи подозреваемого процесса.
* Если память отъедает какой-то сторонний сервис, то возможно есть смысл его порестартить.
* Если отъедает наш - необходимо разобраться в причинах. В крайнем случае снять профиль и выполнить грейсфул рестарт.
* По результату предпринятых действий отписать в дежурном тикете.
