# ydb-resources-cpu
[Алерт в Juggler](https://juggler.yandex-team.ru/aggregate_checks/?project=&query=service%3Dydb-resources-cpu)

## Проверяет
- Уровень потребления CPU в User пуле на хостах базы данных. По умолчаниию, оповещение срабатывает в Warning, если суммарное потребление CPU в User пулах базы данных достигает порога 75% и в Critical при достижении порога 85%.

## Подробности
- Звонящий.
- В алерте host и database определяет где именно произошло превышение.
- При достижении порогов база данных может начать деградировать, может ухудшиться время отлика запросов.

## Что делать
При достижении порогов можно предпринять следующие действия:
- Расширить ресурсы базы данных.
- Уменьшить нагрузку на базу данных, уменьшить поток запросов.
- С помощью доступных средств мониторинга, системных таблиц проанализировать запросы и оптимизировать иx. Например, можно получить план запроса и далее оптимизировать паттерны доступа, такие как FullScan.
- Локализовать причину повышения интенсивности запросов к базе. Например с использованием jaeger

## Ссылки
- [Jaeger](https://jaeger.private-api.ycp.cloud.yandex.net)
- [Справочник метрик](https://ydb.yandex-team.ru/docs/troubleshooting/monitoring)
