api_path: /shards/
tags: ["ylb"]

entities:
  billbro@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_billbro"
      service_id: "ylb_{{ env }}_billbro"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  healthcheck_ctrl_proxy@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_healthcheck_ctrl_proxy"
      service_id: "ylb_{{ env }}_healthcheck_ctrl_proxy"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  healthcheck_ctrl@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_healthcheck_ctrl"
      service_id: "ylb_{{ env }}_healthcheck_ctrl"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  healthcheck_node@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_healthcheck_node"
      service_id: "ylb_{{ env }}_healthcheck_node"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  loadbalancer_ctrl@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_loadbalancer_ctrl"
      service_id: "ylb_{{ env }}_loadbalancer_ctrl"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  loadbalancer_node@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_loadbalancer_node"
      service_id: "ylb_{{ env }}_loadbalancer_node"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  bootstrap@ylb:
    template: ../../base/shard.j2
    exclude:
      solomon:
        - israel # until bootstrap deploys its service
    context:
      override_short_ttl: 2
    env_context:
      preprod:
        override_short_ttl: 3
      prod:
        ttl_days: 3

  logsync@ylb:
    id: "cloud_{{ env }}_logsync"
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_logsync"
      service_id: "ylb_{{ env }}_logsync"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  juggler_events@ylb:
    template: ../../base/shard.j2
    context:
      service_name: "juggler-events"
      id_override: "cloud_{{ env }}_ylb_juggler_events"
      service_id: "ylb_{{ env }}_juggler_events"
      cluster_id: "cloud_{{ env }}_ylb"
      state: "ACTIVE"

  sys@ylb:
    template: ../../base/shard.j2
    exclude:
      solomon:
        - israel # until bootstrap deploys its service
    context:
      id_override: "cloud_{{ env }}_ylb_sys"
      cluster_id: "cloud_{{ env }}_ylb"
      service_id: "ylb_{{ env }}_sys"
      state: "ACTIVE"

  clickphite@ylb:
    template: ../../base/shard.j2
    context:
      id_override: "cloud_{{ env }}_ylb_clickphite"
      cluster_id: "cloud_{{ env }}_ylb"
      service_id: "ylb_{{ env }}_clickphite"
      state: "ACTIVE"
