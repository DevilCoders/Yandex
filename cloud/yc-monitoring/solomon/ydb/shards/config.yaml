{% import "vars.yaml" as vars with context %}

api_path: /shards/
entities:
{% for service in vars.default_ydb_services %}
  {{ service }}@global:
    project_id: "{{ vars.project_id }}"
    template: ../../base/shard.j2
    context:
      cluster_id: "{{ vars.project_id }}_{{ env }}_global"
      cluster_name: "{{ env }}_global"
      id_override: "{{ vars.project_id }}_{{ env }}_global_{{ service }}"
      no_project_id_prefix: false
{% for az in vars.zones_by_env.get(env, zones_by_env[env]) %}
  {{ service }}@{{ az.prefix }}:
    project_id: "{{ vars.project_id }}"
    template: ../../base/shard.j2
    context:
      cluster_id: "{{ vars.project_id }}_{{ env }}_{{ az.prefix }}"
      cluster_name: "{{ env }}_{{ az.prefix }}"
      id_override: "{{ vars.project_id }}_{{ env }}_{{ az.prefix }}_{{ service }}"
      no_project_id_prefix: false
{% endfor %}
{% endfor %}
