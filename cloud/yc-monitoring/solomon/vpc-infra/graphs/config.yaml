menu: "[Infra] Graphs"
menu_type: preview
api_path: /graphs/
tags: ["infra"]
entities:
  e2e-oct:
    template: e2e-oct.j2
    id: "vpc-{{ env }}-e2e-oct"  # FIXME! For all clusters, alerts have been created with "yandexcloud_" prefix!
    context:
      name: "VPC E2E on oct-head errors&warns"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-oct-timings:
    template: e2e-timings.j2
    id: "vpc-{{ env }}-e2e-oct-timings"
    context:
      {#- After new _oct shards for e2e will have enough data, this if can be removed: after 08.2020 is ok #}
      {%- if env in ["prod", "preprod"] %}
      cluster: "cloud_{{ env }}_oct_control"
      {%- else %}
      cluster: "cloud_{{ env }}_oct"
      {%- endif %}
      service: "e2e-timing"
      host: "oct*"
      name: "VPC E2E timings on oct-head"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-compute-node:
    template: e2e-compute-node.j2
    id: "vpc-{{ env }}-e2e-compute-node"
    context:
      name: "VPC E2E on compute-node errors&warns"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-compute-node-timings:
    template: e2e-timings.j2
    id: "vpc-{{ env }}-e2e-compute-node-timings"
    context:
      cluster: "cloud_{{ env }}_compute"
      service: "e2e-timing"
      host: "*"
      name: "VPC E2E timings on compute-nodes"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-cloudgate:
    template: e2e-cloudgate.j2
    id: "vpc-{{ env }}-e2e-cloudgate"
    context:
      name: "VPC E2E on gateways errors&warns"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-cloudgate-timings:
    template: e2e-timings.j2
    id: "vpc-{{ env }}-e2e-cloudgate-timings"
    context:
      cluster: "cloud_{{ env }}_cloudgate"
      service: "e2e-timing"
      host: "cgw-dc*|cgw-nat*"
      name: "VPC E2E timings on gateways"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-ylb:
    template: e2e-ylb.j2
    id: "vpc-{{ env }}-e2e-ylb"
    context:
      name: "VPC E2E for YLB errors&warns"
      hide_no_data: "true"
      downsampling_func: "LAST"
  e2e-ylb-timings:
    template: e2e-timings.j2
    id: "vpc-{{ env }}-e2e-ylb-timings"
    context:
      cluster: "cloud_{{ env }}_ylb_lb-e2e_e2e-launcher"
      service: "e2e"
      host: "e2e*"
      name: "VPC E2E timings on ylb e2e launchers"
      hide_no_data: "true"
      downsampling_func: "LAST"
