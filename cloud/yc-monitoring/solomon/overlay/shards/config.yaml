api_path: /shards/
entities:
  # Формат имени: <сервис>@<кластер>

  # Внимание!
  # При добавлении нового шарда нужно добавить его в мониторинг квот:
  # [vpc-solomon-quotas-oct-head]     https://bb.yandex-team.ru/projects/CLOUD/repos/salt-formula/browse/juggler/checks_config/roles/oct_head/tasks/staging.yml
  # [vpc-solomon-quotas-compute-node] https://bb.yandex-team.ru/projects/CLOUD/repos/salt-formula/browse/juggler/checks_config/roles/compute/tasks/staging-network.yml

  # ...@compute
  arp_replies@compute:
    template: ../../base/shard.j2
  network_cpu_time@compute:
    template: ../../base/shard.j2
  network_sli_checks@compute:
    template: ../../base/shard.j2
  network-flow-collector@compute:
    template: ../../base/shard.j2
  network-flow-collector-sys@compute:
    template: ../../base/shard.j2
  oct_vrouter@compute:
    template: ../../base/shard.j2
  oct_vrouter_interface_stats@compute:
    template: ../../base/shard.j2
  oct_vrouter_flows_per_vm@compute:
    template: ../../base/shard.j2
  oct_vrouter_interface_drop_stats@compute:
    template: ../../base/shard.j2
  oct_vrouter_port_control@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_itf@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_services@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_tasks@compute:
    template: ../../base/shard.j2
    context:
      ttl_days: 1
  oct_vrouter_snh_packet_latency@compute:
    template: ../../base/shard.j2
    context:
      ttl_days: 1
  oct_vrouter_snh_xmpp@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_flows@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_vm_flows@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_subordinate_flows@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_vports@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_routes@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_sf2rule@compute:
    template: ../../base/shard.j2
  oct_vrouter_snh_health@compute:
    template: ../../base/shard.j2
  vpcmon@compute:
    template: ../../base/shard.j2
  vpc-node@compute:
    template: ../../base/shard.j2
  {% for az in zones_by_env[env] %}
  network-sys@compute_{{ az.prefix }}:
    template: ../../base/shard.j2
  {% endfor %}

  # ...@oct
  sys@oct:
    template: ../../base/shard.j2

  oct_confdb_objects@oct:
    template: ../../base/shard.j2
  oct_cassandra@oct:
    template: ../../base/shard.j2
  oct_rabbitmq@oct:
    template: ../../base/shard.j2
  oct_head_cgroup_metrics@oct:
    template: ../../base/shard.j2
  oct_ctrl_cgroup_metrics@oct:
    template: ../../base/shard.j2
  oct_ifmap@oct:
    template: ../../base/shard.j2
  oct_control@oct:
    template: ../../base/shard.j2
  oct_control_routes@oct:
    template: ../../base/shard.j2
  contrail_api@oct:
    template: ../../base/shard.j2

  e2e-timing@oct:
    template: ../../base/shard.j2
  juggler-events@oct:
    template: ../../base/shard.j2

  oct_named_metrics@oct:            # TODO: kill
    template: ../../base/shard.j2
  oct_named_reconfig@oct:           # TODO: kill
    template: ../../base/shard.j2
  oct_named_zones_and_records@oct:  # TODO: kill
    template: ../../base/shard.j2

  # ...@vpc-control
  sys@vpc-control:
    template: ../../base/shard.j2
  vpc-control@vpc-control:
    template: ../../base/shard.j2
