{
    "id": "compute-instance-health",
    "rows": [
        {
            "panels": [
                {
                    "subtitle": "Instance state reporting (1 - VM is in RUNNING state, 0 - VM is not active)",
                    "colspan": 1,
                    "title": "Healthcheck - ru-central1-a (VLA)",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=cloud_prod_compute_vla&service=internals&l.metric=instance_health&l.instance_id=[[instance_id]]&l.host=!cluster&l.cloud_id=!total&graph=auto"
                },
                {
                    "subtitle": "Instance state reporting (1 - VM is in RUNNING state, 0 - VM is not active)",
                    "colspan": 1,
                    "title": "Healthcheck - ru-central1-b (SAS)",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=cloud_prod_compute_sas&service=internals&l.metric=instance_health&l.instance_id=[[instance_id]]&l.host=!cluster&l.cloud_id=!total&graph=auto"
                },
                {
                    "subtitle": "Instance state reporting (1 - VM is in RUNNING state, 0 - VM is not active)",
                    "colspan": 1,
                    "title": "Healthcheck - ru-central1-c (MYT)",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=cloud_prod_compute_myt&service=internals&l.metric=instance_health&l.instance_id=[[instance_id]]&l.host=!cluster&l.cloud_id=!total&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "VPC monitorings that can show connectivity problems (0=OK, 1=CRIT)",
                    "colspan": 3,
                    "title": "Network checks",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=network_sli_checks&l.host=*&l.instance_id=[[instance_id]]&l.metric=*&graph=auto&hideNoData=true&min=0&max=3&stack=false"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "0 means VM does not answer to ARP probes",
                    "colspan": 3,
                    "title": "Arp reply rate (1 probe in 10 sec)",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=arp_replies&l.host=*&l.instance_id=[[instance_id]]&l.metric=*&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "",
                    "colspan": 3,
                    "title": "vRouter's flows",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter*&l.metric_group=FlowPerVm&graph=auto&stack=false&l.metric=flow_count&l.instance_id=[[instance_id]]"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "Part of CPU time utilized by VM",
                    "colspan": 3,
                    "title": "CPU usage, %",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=cpu-util&cpu_name=cpu_*&graph=auto"
                }
            ]
        },
        {
             "panels": [
                {
                  "type": "IFRAME",
                  "title": "QEMU main thread CPU usage, %",
                  "subtitle": "May be bottleneck for the network",
                  "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=cpu-util&graph=auto&cpu_name=main",
                  "markdown": "",
                  "rowspan": 1,
                  "colspan": 3
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: rd_bytes",
                    "colspan": 3,
                    "title": "Disk read throughput, bytes/sec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_read_bytes&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: wr_bytes",
                    "colspan": 3,
                    "title": "Disk write throughput, bytes/sec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_write_bytes&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: rd_operations",
                    "colspan": 3,
                    "title": "Disk read operations, operations/sec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_read_ops&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: wr_operations",
                    "colspan": 3,
                    "title": "Disk write operations, operations/sec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_write_ops&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: x_rd_latency_histogram (30, 50, 70, 90, 99)",
                    "colspan": 3,
                    "title": "Disk read latency histogram, ms",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_read_latency&overLinesTransform=WEIGHTED_PERCENTILE&bucketLabel=bucket&percentiles=30%2C50%2C70%2C90%2C99&l.resource_type=-&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "QEMU blockstat metric: x_wr_latency_histogram (30, 50, 70, 90, 99)",
                    "colspan": 3,
                    "title": "Disk write latency hsitogram, ms",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=[[service]]&l.instance_id=[[instance_id]]&l.metric=disk_write_latency&overLinesTransform=WEIGHTED_PERCENTILE&bucketLabel=bucket&percentiles=30%2C50%2C70%2C90%2C99&l.resource_type=-&graph=auto"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "",
                    "colspan": 3,
                    "title": "Interface Rx/Tx bytes/s",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter*&l.resource_id=[[instance_id]]&l.name=network_received_bytes|network_sent_bytes&graph=auto&stack=false&asc=false&downsamplingAggr=max"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "",
                    "colspan": 3,
                    "title": "Interface Rx/Tx packets/s",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter*&l.resource_id=[[instance_id]]&l.name=network_received_packets|network_sent_packets&graph=auto&stack=false&asc=false&downsamplingAggr=max"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "",
                    "colspan": 3,
                    "title": "Interface Rx/Tx errors/s",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter*&l.resource_id=[[instance_id]]&l.name=network_received_errors|network_sent_errors&graph=auto&stack=false&asc=false&downsamplingAggr=max Row span"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "",
                    "colspan": 1,
                    "title": "VRouter route count",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_snh_routes&l.name=routes.count&l.instance_id=[[instance_id]]&graph=auto&downsamplingAggr=MIN"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "https://nda.ya.ru/t/-uPXNn0F3VwQC2",
                    "colspan": 1,
                    "title": "VRouter: Flow Errors ",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_interface_drop_stats&l.metric_group=InterfaceDropStats&l.resource_id=[[instance_id]]&host=*&graph=vrouter_interface_dropstats_flow_errors"
                },
                {
                    "subtitle": "https://nda.ya.ru/t/-uPXNn0F3VwQC2",
                    "colspan": 1,
                    "title": "VRouter: Routing Errors & Bad Packets",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_interface_drop_stats&metric_group=InterfaceDropStats&resource_id=[[instance_id]]&host=*&graph=vrouter_interface_dropstats_bad_packets_route_errors"
                },
                {
                    "subtitle": "https://nda.ya.ru/t/-uPXNn0F3VwQC2",
                    "colspan": 1,
                    "title": "VRouter: Internal Bugs",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_interface_drop_stats&metric_group=InterfaceDropStats&resource_id=[[instance_id]]&host=*&graph=vrouter_interface_dropstats_bugs"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "interface_index=0",
                    "colspan": 1,
                    "title": "vRouter forward packet latency [egress], µsec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_snh_packet_latency&l.name=latency.egress.forward-pkt.packets_per_second&l.instance_id=[[instance_id]]&graph=auto&l.interface_index=0"
                },
                {
                    "subtitle": "interface_index=0",
                    "colspan": 1,
                    "title": "vRouter forward packet latency [ingress], µsec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_snh_packet_latency&l.name=latency.ingress.forward-pkt.packets_per_second&l.instance_id=[[instance_id]]&graph=auto&l.interface_index=0"
                }
            ]
        },
        {
            "panels": [
                {
                    "subtitle": "interface_index=0",
                    "colspan": 1,
                    "title": "vRouter flow-queue packet latency [egress], µsec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_snh_packet_latency&l.name=latency.egress.flow-queue.packets_per_second&l.instance_id=[[instance_id]]&graph=auto&l.interface_index=0"
                },
                {
                    "subtitle": "interface_index=0",
                    "colspan": 1,
                    "title": "vRouter flow-queue packet latency [ingress], µsec",
                    "markdown": "",
                    "type": "IFRAME",
                    "rowspan": 1,
                    "url": "/?project={{project_id}}&cluster=[[cluster]]&service=oct_vrouter_snh_packet_latency&l.name=latency.ingress.flow-queue.packets_per_second&l.instance_id=[[instance_id]]&graph=auto&l.interface_index=0"
                }
            ]
        }
    ],
    "heightMultiplier": 1.0,
    "name": "[instance] compute instance health",
    "projectId": "{{ project_id }}",
    "description": "",
    "parameters": [
        {
            "value": "cloud_*_compute",
            "name": "cluster"
        },
        {
            "value": "compute",
            "name": "service"
        },
        {
            "value": "*",
            "name": "instance_id"
        }
    ]
}
