{% import "vars.yaml" as vars with context %}

menu: "[YCM] Graphs"
menu_type: preview
api_path: /graphs/
tags: ["ycm"]

entities:
  grpc_api_requests_rps:
    project_id: "{{vars.project_id}}"
    id: "grpc_api_requests_rps"
    template: grpc_api_requests_rps.j2
    context:
      name: "GRPC api requests rps"
  grpc_api_duration:
    project_id: "{{vars.project_id}}"
    id: "grpc_api_duration"
    template: grpc_api_duration.j2
    context:
      name: "GRPC api duration"
  grpc_api_statuses_errors:
    project_id: "{{vars.project_id}}"
    id: "grpc_api_statuses_errors"
    template: grpc_api_statuses_errors.j2
    context:
      name: "GRPC api statuses errors"
  private_envoy_l7_rps:
    project_id: "{{vars.project_id}}"
    id: "private_envoy_l7_rps"
    template: private_l7_rps.j2
    context:
      name: "YCM Private L7 rps"
  private_envoy_l7_errors:
    project_id: "{{vars.project_id}}"
    id: "private_envoy_l7_errors"
    template: private_l7_errors.j2
    context:
      name: "YCM Private L7 errors"
  private_envoy_l7_upstream_errors:
    project_id: "{{vars.project_id}}"
    id: "private_envoy_l7_upstream_errors"
    template: private_l7_upstream_errors.j2
    context:
      name: "YCM Private L7 upstream errors"
  private_envoy_l7_duration:
    project_id: "{{vars.project_id}}"
    id: "private_envoy_l7_duration"
    template: l7_duration.j2
    context:
      name: "YCM Private L7 duration"
      service: "private_envoy"
  private_envoy_l7_hc_failures:
    project_id: "{{vars.project_id}}"
    id: "private_envoy_l7_hc_failures"
    template: private_l7_hc_failures.j2
    context:
      name: "YCM Private L7 Failed Healthcheck"
  public_envoy_l7_rps:
    project_id: "{{vars.project_id}}"
    id: "public_envoy_l7_rps"
    template: public_l7_rps.j2
    context:
      name: "YCM Public L7 rps"
  public_envoy_l7_errors:
    project_id: "{{vars.project_id}}"
    id: "public_envoy_l7_errors"
    template: public_l7_errors.j2
    context:
      name: "YCM Public L7 errors"
  public_envoy_l7_duration:
    project_id: "{{vars.project_id}}"
    id: "public_envoy_l7_duration"
    template: l7_duration.j2
    context:
      name: "YCM Public L7 duration"
      service: "public_envoy"
  instance_healthy:
    project_id: "{{vars.project_id}}"
    id: "instance_healthy"
    template: group_by_avg.j2
    context:
      name: "Instances"
      sensor: "jvm_info"
      title: "[[host]]"
      stack: "true"
  jvm_memory:
    project_id: "{{vars.project_id}}"
    id: "jvm_memory"
    template: jvm_memory.j2
    context:
      name: "JVM Memory"
  jvm_memory_sum:
    project_id: "{{vars.project_id}}"
    id: "jvm_memory_sum"
    template: jvm_memory_sum.j2
    context:
      name: "Sum JVM Memory"
  jvm_threads:
    project_id: "{{vars.project_id}}"
    id: "jvm_threads"
    template: jvm_threads.j2
    context:
      name: "JVM Threads"
  load_average:
    project_id: "{{vars.project_id}}"
    id: "load_average"
    template: load_average.j2
    context:
      name: "Load Average (1min)"
      title: "la"
      aggregation: "max"
  load_average_sum:
    project_id: "{{vars.project_id}}"
    id: "load_average_sum"
    template: load_average.j2
    context:
      name: "Sum Load Average (1min)"
      title: "la"
      aggregation: "sum"
  sum_cpu_time:
    project_id: "{{vars.project_id}}"
    id: "sum_cpu_time"
    template: sum_cpu_time.j2
    context:
      name: "Sum CPU Time"
  memory:
    project_id: "{{vars.project_id}}"
    id: "memory"
    template: memory.j2
    context:
      name: "Memory"
      aggregation: "max"
  memory_sum:
    project_id: "{{vars.project_id}}"
    id: "memory_sum"
    template: memory.j2
    context:
      name: "Sum Memory"
      aggregation: "sum"
  network_bytes:
    project_id: "{{vars.project_id}}"
    id: "network_bytes"
    template: network.j2
    context:
      name: "Network Bytes"
      path_suffix: "Bytes"
  network_packets:
    project_id: "{{vars.project_id}}"
    id: "network_packets"
    template: network.j2
    context:
      name: "Network Packets"
      path_suffix: "Packets"
  network_drop:
    project_id: "{{vars.project_id}}"
    id: "network_drop"
    template: network.j2
    context:
      name: "Network Drop"
      path_suffix: "Drop"
  network_errs:
    project_id: "{{vars.project_id}}"
    id: "network_errs"
    template: network.j2
    context:
      name: "Network Errs"
      path_suffix: "Errs"
  file_descriptors:
    project_id: "{{vars.project_id}}"
    id: "file_descriptors"
    template: max_group_by_max.j2
    context:
      name: "File Descriptors"
      sensor: "process_open_fds"
      title: "max FDs"
  free_space:
    project_id: "{{vars.project_id}}"
    id: "free_space"
    template: free_space.j2
    context:
      name: "Free Space"
  io_bytes:
    project_id: "{{vars.project_id}}"
    id: "io_bytes"
    template: io_disks.j2
    context:
      name: "IO Bytes"
      path_suffix: "Bytes"
      aggregation: "sum"
  io_ops:
    project_id: "{{vars.project_id}}"
    id: "io_ops"
    template: io_disks.j2
    context:
      name: "IO Ops"
      path_suffix: "s"
      aggregation: "sum"
  io_waits:
    project_id: "{{vars.project_id}}"
    id: "io_waits"
    template: io_disks.j2
    context:
      name: "IO Waits (msec)"
      path_suffix: "WaitMillisec"
      aggregation: "max"
  major_page_faults:
    project_id: "{{vars.project_id}}"
    id: "major_page_faults"
    template: major_page_faults.j2
    context:
      name: "Major Page Faults"
  order_job_fails:
    project_id: "{{vars.project_id}}"
    id: "order_job_fails"
    template: group_by_avg.j2
    context:
      name: "Order Job Fails"
      sensor: "orderJobFails"
      title: "fails"
  order_job_failed_authorizations:
    project_id: "{{vars.project_id}}"
    id: "order_job_failed_authorizations"
    template: group_by_avg.j2
    context:
      name: "Order Job Failed Authorizations"
      sensor: "orderJobFailedAuthorizations"
      title: "fails"
  fresh_orders:
    project_id: "{{vars.project_id}}"
    id: "fresh_orders"
    template: group_by_avg.j2
    context:
      name: "Orders created in last 3 hours"
      sensor_label: "name"
      sensor: "fresh_orders"
      title: "orders"
  acme_service_total_errors:
    project_id: "{{vars.project_id}}"
    id: "acme_service_total_errors"
    template: group_by_avg.j2
    context:
      name: "ACME Total Errors"
      sensor: "acmeServiceTotalErrors"
      title: "errors"
  acme_service_unique_errors_acme_rate_limited_exception:
    project_id: "{{vars.project_id}}"
    id: "acme_service_unique_errors_acme_rate_limited_exception"
    template: group_by_avg.j2
    context:
      name: "ACME Unique Rate Errors"
      sensor: "acmeServiceUniqueErrorsAcmeRateLimitedException"
      title: "errors"
  acme_service_unique_errors_by_type:
    project_id: "{{vars.project_id}}"
    id: "acme_service_unique_errors_by_type"
    template: group_by_avg.j2
    context:
      name: "ACME Unique Errors By Type"
      sensor: "acmeServiceUniqueErrorsAcme*"
      title: "[[{{vars.sensor_label}}]]"
  acme_service_errors_by_type:
    project_id: "{{vars.project_id}}"
    id: "acme_service_errors_by_type"
    template: group_by_avg.j2
    context:
      name: "ACME Errors By Type"
      sensor: "acmeServiceErrorsAcme*"
      title: "[[{{vars.sensor_label}}]]"
  orders_states:
    project_id: "{{vars.project_id}}"
    id: "orders_states"
    template: orders_states.j2
    context:
      name: "Orders States"
      sensor_label: "name"
  orders_problems:
    project_id: "{{vars.project_id}}"
    id: "orders_problems"
    template: orders_problems.j2
    context:
      name: "Orders Problems"
      sensor_label: "name"
  order_job_total_times:
    project_id: "{{vars.project_id}}"
    id: "order_job_total_times"
    template: order_job_time.j2
    context:
      name: "OrderJob Time to Finish"
      sensor: "orderJobTotalTimes"
  order_job_run_times:
    project_id: "{{vars.project_id}}"
    id: "order_job_run_times"
    template: order_job_time.j2
    context:
      name: "OrderJob Run Time"
      sensor: "orderJobRunTimes"
  acme_accounts_usage:
    project_id: "{{vars.project_id}}"
    id: "acme_accounts_usage"
    template: acme_accounts_usage.j2
    context:
      name: "ACME Accounts Usage"
  certificate_service_renew_alien_usages:
    project_id: "{{vars.project_id}}"
    id: "certificate_service_renew_alien_usages"
    template: group_by_avg.j2
    context:
      name: "Rejects of previous account on renew"
      sensor: "certificateServiceRenewAlienUsages"
      title: "[[host]]"
  crt_api_fails:
    project_id: "{{vars.project_id}}"
    id: "crt_api_fails"
    template: group_by_avg.j2
    context:
      name: "Internal Providers Job Fails"
      sensor: "crtApiFails"
      title: "fails"
  crt_api_certificate_errors:
    project_id: "{{vars.project_id}}"
    id: "crt_api_certificate_errors"
    template: group_by_avg.j2
    context:
      name: "Internal Providers Certificate Errors"
      sensor: "crtApiCertificateStatusErrors"
      title: "errors"
  crt_api_http_errors:
    project_id: "{{vars.project_id}}"
    id: "crt_api_http_errors"
    template: group_by_avg.j2
    context:
      name: "Internal Providers API HTTP Errors"
      sensor: "crtApiHttpErrors"
      title: "errors"
  crt_api_job_total_times:
    project_id: "{{vars.project_id}}"
    id: "crt_api_job_total_times"
    template: order_job_time.j2
    context:
      name: "Internal Providers Job Time to Finish"
      sensor: "crtApiJobTotalTimes"
  crt_api_job_run_times:
    project_id: "{{vars.project_id}}"
    id: "crt_api_job_run_times"
    template: order_job_time.j2
    context:
      name: "Internal Providers Job Run Time"
      sensor: "crtApiJobRunTimes"
  crt_api_job_too_long:
    project_id: "{{vars.project_id}}"
    id: "crt_api_job_too_long"
    template: group_by_avg.j2
    context:
      name: "Internal Providers Job too Long"
      sensor: "crtApiJobTooLong"
      title: "[[host]]"
  crt_api_success_new:
    project_id: "{{vars.project_id}}"
    id: "crt_api_success_new"
    template: group_by_avg.j2
    context:
      name: "Successfully Created Internal Certificates"
      sensor: "crtApiSuccessNew"
      title: "[[host]]"
  crt_api_success_renew:
    project_id: "{{vars.project_id}}"
    id: "crt_api_success_renew"
    template: group_by_avg.j2
    context:
      name: "Successfully Renewed Internal Certificates"
      sensor: "crtApiSuccessRenew"
      title: "[[host]]"
  certificates_total:
    project_id: "{{vars.project_id}}"
    id: "certificates_total"
    template: group_by_avg.j2
    context:
      name: "Certificates Total"
      sensor: "certificates_count"
      title: "certificates"
      sensor_label: "name"
  certificates_by_type:
    project_id: "{{vars.project_id}}"
    id: "certificates_by_type"
    template: certificates_by_type.j2
    context:
      name: "Certificates By Type"
      sensor_label: "name"
  certificates_by_status:
    project_id: "{{vars.project_id}}"
    id: "certificates_by_status"
    template: certificates_by_status.j2
    context:
      name: "Certificates By Status"
      sensor_label: "name"
  certificates_validating:
    project_id: "{{vars.project_id}}"
    id: "certificates_validating"
    template: certificates_validating.j2
    context:
      name: "Certificates Validating"
      sensor_label: "name"
  certificates_renewing:
    project_id: "{{vars.project_id}}"
    id: "certificates_renewing"
    template: certificates_renewing.j2
    context:
      name: "Certificates Renewing"
      sensor_label: "name"
  certificates_used_in_s3_buckets:
    project_id: "{{vars.project_id}}"
    id: "certificates_used_in_s3_buckets"
    template: group_by_avg.j2
    context:
      name: "Certificates Used in S3 Buckets"
      sensor_label: "name"
      sensor: "certificates_count_used_by_s3_bucket"
      title: "certificates"
