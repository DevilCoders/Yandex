# Here you can create silent check using silent_check instead of default_check.
# silent_check has no alert method.

- name: 'juggler_check: need-service-restart'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: need-service-restart
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/need-service-restart
            type: wiki

- name: 'juggler_check: contrail-services-uptime'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-services-uptime
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-services-uptime
            type: wiki

# FIXME(CLOUD-41638): for now we do not have logbroker for testing
- name: 'juggler_check : push-client'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: push-client
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/push-client
            type: wiki
  when: env not in ["testing"]

- name: 'juggler_check : cpu-idle-time'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: cpu-idle-time
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/cpu-idle-time
            type: wiki
  tags: ["cpu-idle-time"]

- name: 'juggler_check : overlay-common *-cpu, *-memory'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  tags: ["vpc-cpu-memory"]
  with_items:
    - service: osqueryd-cpu
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-cpu
            type: wiki
    - service: osqueryd-memory
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-memory
            type: wiki

- name: 'juggler_check: salt-minion_version'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  with_items:
    - service: salt-minion_version
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/shared/salt-minion-version
            type: wiki

- name: 'juggler_check: certificates-validity'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: certificates-validity
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/certificates-validity
            type: wiki
