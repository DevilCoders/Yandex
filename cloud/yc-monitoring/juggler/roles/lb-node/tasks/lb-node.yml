- name: 'lb-node-ping{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: lb-node-ping

- name: 'lb-node-log-errors{{ dc_suffix }}'
  juggler_check: ''
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: lb-node-log-errors
      pronounce: "Высокий уровень ошибок в л+огах лб-ноды {{ pronounce_suffix }}"

- name: 'lb-node-unknown-vips{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: lb-node-unknown-vips

- name: 'lb-node-unknown-rips{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: lb-node-unknown-rips

- name: 'lb-node-announce-flaps{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) | hash_merge(item, default_timed_limits_nodata_skip) }}"
  with_items:
    - service: lb-node-announce-flaps

- name: 'lb-node-grpc-client-error-rate{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: grpc-client-error-rate
      pronounce: "Высокий уровень ошибок ГРПЦ-клиента лб-ноды {{ pronounce_suffix }}"

- name: 'lb-node-vpp-lengthy-barrier{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: lb-node-vpp-lengthy-barrier

- name: 'lb-node-initial-state{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_20_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: lb-node-initial-state

- name: 'lb-node-announces{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_20_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: lb-node-announces

- name: 'billing-ingress-traffic'
  when: env in ["prod", "preprod"]
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: billing-ingress-traffic
      refresh_time: 300
      ttl: 900
      children: []

- name: 'hc-announce{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_20_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: hc-announce

- name: 'drain-status{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: drain-status

- name: 'vpp-modules{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: vpp-modules

- name: 'vpp-bytes-used-local{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_30_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: vpp-bytes-used-local
      refresh_time: 300
      ttl: 1800

- name: 'vpp-api-bytes-used-local{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_30_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok) }}"
  with_items:
    - service: vpp-api-bytes-used-local
      refresh_time: 300
      ttl: 900

- name: 'vpp-cpu-load{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: vpp-cpu-load
      refresh_time: 300
      ttl: 900

- name: 'vpp-bgp-consistent{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_vpp_skip) }}"
  with_items:
    - service: vpp-bgp-consistent

- name: 'cgw-stats-balancer-rules{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  with_items:
      - service: cgw-stats-balancer-rules

- name: 'vpp-vectors-per-call{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: vpp-vectors-per-call
      refresh_time: 300
      ttl: 900

- name: 'salt-versions-diff{{ dc_suffix }}'
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: salt-versions-diff
      host: "yc_loadbalancer_lb-node{{ host_suffix }}"
      children:
        - host: "ylb_loadbalancer-node{{ host_suffix }}"
          service: salt-versions-diff
          type: HOST
