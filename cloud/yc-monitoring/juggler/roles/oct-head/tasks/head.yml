---
- name: 'juggler_check: contrail-api'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-api
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-api
            type: wiki

- name: 'juggler_check : contrail-discovery'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-discovery
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-discovery
            type: wiki

- name: 'juggler_check : contrail-ifmap'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-ifmap
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-ifmap
            type: wiki
      tags: "{{ default_tags }} + ['{{ notify_delay20_tag }}']"

- name: 'juggler_check : contrail-schema'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_logic_and) }}"
  with_items:
    - service: contrail-schema
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-schema
            type: wiki

- name: 'juggler_check : contrail-cassandra'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-cassandra
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-cassandra
            type: wiki

- name: 'juggler_check : contrail-cassandra-repair'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, timed_limits_20perc_crit) }}"
  with_items:
    - service: contrail-cassandra-repair
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-cassandra-repair
            type: wiki
      ttl: 86400

- name: 'juggler_check : contrail-rabbitmq'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-rabbitmq
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-rabbitmq
            type: wiki

- name: 'juggler_check : contrail-zookeeper'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-zookeeper
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-zookeeper
            type: wiki

- name: 'juggler_check : e2e-tests-network'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, e2e_behind_lock) }}"
  with_items:
    - service: e2e-tests-network
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/e2e/e2e-tests-network
            type: wiki
      ttl: 600
      refresh_time: 120
      tags: "{{ default_tags }} + ['{{ notify_delay20_tag }}']"

- name: 'juggler_check : e2e-tests-network-fip'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, e2e_behind_lock) }}"
  with_items:
    - service: e2e-tests-network-fip
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/e2e/e2e-tests-network-fip
            type: wiki
      ttl: 600
      refresh_time: 120
      tags: "{{ default_tags }} + ['{{ notify_delay20_tag }}']"

- name: 'juggler_check: contrail-backup'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-backup
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-backup
            type: wiki
      ttl: 15000
      flap: { stable: 1200, critical: 3600 }

- name: 'juggler_check: contrail-dns'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-dns
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-dns
            type: wiki
      tags: "{{ default_tags }} + ['{{ notify_delay20_tag }}']"
  when: env not in ["prod", "preprod", "testing", "israel"]  # contrail-dns and contrail-named are disabled there in favor of new DNS service

- name: 'juggler_check: contrail-named'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-named
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-named
            type: wiki
      tags: "{{ default_tags }} + ['{{ notify_delay20_tag }}']"
  when: env not in ["prod", "preprod", "testing", "israel"]  # contrail-dns and contrail-named are disabled there in favor of new DNS service
