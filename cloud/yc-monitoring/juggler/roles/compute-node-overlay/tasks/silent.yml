# Here you can create silent check using silent_check instead of default_check.
# silent_check has no alert method.

- name: 'juggler_check : UNREACHABLE'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: UNREACHABLE
      active: icmpping

- name: 'juggler_check : META'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: META

- name: 'juggler_check: deb-package-versions'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: deb-package-versions
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/deb-package-versions
            type: wiki

- name: 'juggler_check: dns-unanswered-requests'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: dns-unanswered-requests
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/dns-unanswered-requests
            type: wiki

- name: 'juggler_check: dns-response-latency'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, percent) | hash_merge(item, dns_latency_limits_percent) }}"
  with_items:
    - service: dns-response-latency
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/dns-response-latency
            type: wiki

# NOTE(CLOUD-101016): deprecated in SbS
- name: 'juggler_check : vrouter-uptime'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: vrouter-uptime
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-uptime
            type: wiki
      ttl: 60
      refresh_time: 30

- name: 'juggler_check : contrail-vrouter-uptime'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: contrail-vrouter-uptime
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-uptime
            type: wiki
      ttl: 60
      refresh_time: 30

- name: 'juggler_check: eth0vf0-rx-drops'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: eth0vf0-rx-drops
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/eth0vf0-rx-drops
            type: wiki

- name: 'juggler_check: network-cpus-overload'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: network-cpus-overload
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/network-cpus-overload
            type: wiki

# CLOUD-25178 vRouter autorecovery is disabled
#- name: 'juggler_check : vrouter-autorecovery'
#  juggler_check: ''
#  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
#  with_items:
#    - service: vrouter-autorecovery
#      meta:
#        urls:
#          - title: "[?] Инструкция по алерту"
#            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-autorecovery
#            type: wiki
#      ttl: 1800
#      refresh_time: 30

- name: 'juggler_check: need-service-restart'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: need-service-restart
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/need-service-restart
            type: wiki

- name: 'juggler_check: vrouter-flows-created-per-second'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  with_items:
    - service: vrouter-flows-created-per-second
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-flows-created-per-second
            type: wiki

- name: 'juggler_check : e2e-permnet-ipv4-ext-dns'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_skip) }}"
  with_items:
    - service: e2e-permnet-ipv4-ext-dns
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/e2e-permnet-ipv4-ext-dns
            type: wiki
      ttl: 240
      refresh_time: 60

- name: 'juggler_check : e2e-permnet-ipv4-int-dns'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_skip) }}"
  with_items:
    - service: e2e-permnet-ipv4-int-dns
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/e2e-permnet-ipv4-int-dns
            type: wiki
      ttl: 240
      refresh_time: 60

- name: 'juggler_check : e2e-permnet-ipv6-int-dns'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_skip) }}"
  with_items:
    - service: e2e-permnet-ipv6-int-dns
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/e2e-permnet-ipv6-int-dns
            type: wiki
      ttl: 240
      refresh_time: 60

- name: 'juggler_check: vrouter-dropstats-l3-route-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, percent) | hash_merge(item, vrouter_dropstats_limits_percent) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-l3-route-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-l3-route-errors__vrouter_dropstats-l2-l3-minor-route_errors
            type: wiki

- name: 'juggler_check: vrouter-dropstats-l2-l3-minor-route-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, percent) | hash_merge(item, vrouter_dropstats_limits_percent) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-l2-l3-minor-route-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-l3-route-errors__vrouter_dropstats-l2-l3-minor-route_errors
            type: wiki

- name: 'juggler_check: vrouter-dropstats-route-inconsistency'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-route-inconsistency
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-route-inconsistency
            type: wiki

- name: 'juggler_check: vrouter-dropstats-flow-establish-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-flow-establish-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-shortflows__vrouter-dropstats
            type: wiki

- name: 'juggler_check: vrouter-dropstats-flaky-flow-establish-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, percent) | hash_merge(item, vrouter_dropstats_limits_percent) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-flaky-flow-establish-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-flaky-flow-establish-errors
            type: wiki

- name: 'juggler_check: vrouter-dropstats-clone-resize-failure'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-clone-resize-failure
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-clone-resize-failure
            type: wiki

- name: 'juggler_check: vrouter-dropstats-internal-bugs'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-dropstats"]
  with_items:
    - service: vrouter-dropstats-internal-bugs
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-dropstats-internal-bugs
            type: wiki

- name: 'juggler_check: vrouter-shortflows'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-shortflows"]
  with_items:
    - service: vrouter-shortflows
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-shortflows__vrouter-dropstats
            type: wiki

- name: 'juggler_check: vrouter-shortflows-noisy'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, percent) | hash_merge(item, vrouter_dropstats_noisy_limits_percent) }}"
  tags: ["vpc-shortflows"]
  with_items:
    - service: vrouter-shortflows-noisy
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vrouter-shortflows-noisy
            type: wiki

- name: 'juggler_check : contrail-flows-known-bugs'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  with_items:
    - service: contrail-flows-known-bugs
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-flows-known-bugs
            type: wiki
      ttl: 1800

- name: 'juggler_check : contrail-flows-known-bugs-unrecoverable'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  with_items:
    - service: contrail-flows-known-bugs-unrecoverable
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-flows-known-bugs-unrecoverable
            type: wiki
      ttl: 1800

- name: 'juggler_check : contrail-flows-known-bugs-warn'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  with_items:
    - service: contrail-flows-known-bugs-warn
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-flows-known-bugs-warn
            type: wiki
      ttl: 1800
      refresh_time: 60
      flap: { stable: 900, critical: 3600 }

- name: 'juggler_check: compute-metadata-nginx'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  with_items:
    - service: compute-metadata-nginx
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/compute-metadata-nginx
            type: wiki

- name: 'juggler_check: vpc-solomon-quotas-compute-node'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  tags: ["network", "staging"]
  with_items:
    - service: vpc-solomon-quotas-compute-node
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/shared/solomon-quotas
            type: wiki
      refresh_time: 60
      ttl: 180
      children:
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_network_cpu_time-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_arp_replies-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_network_sli_checks-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_network-flow-collector-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_interface_stats-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_flows_per_vm-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_port_control-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_interface_drop_stats-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_itf-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_services-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_tasks-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_packet_latency-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_xmpp-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_flows-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_vm_flows-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_subordinate_flows-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_routes-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_sf2rule-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_vpcmon-solomon-quotas
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_vpc-node-solomon-quotas
          type: HOST

- name: 'juggler_check: vpc-solomon-quotas-compute-node{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_with_only_telegram_notification | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: vpc-solomon-quotas-compute-node{{ dc_suffix }}
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/shared/solomon-quotas
            type: wiki
      refresh_time: 60
      ttl: 180
      children:
          - host: "vpc-infra-{{ env }}"
            service: yandexcloud_cloud_{{ env }}_compute{{ dc_suffix }}_e2e-timing-solomon-quotas
            type: HOST
          - host: "vpc-infra-{{ env }}"
            service: yandexcloud_cloud_{{ env }}_compute{{ dc_suffix }}_juggler-events-solomon-quotas
            type: HOST

- name: 'juggler_check : *-cpu, *-memory'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  tags: ["vpc-cpu-memory"]
  with_items:
    - service: contrail-vrouter-agent-cpu
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-cpu
            type: wiki
    - service: contrail-vrouter-agent-memory
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-memory
            type: wiki

- name: 'juggler_check: contrail-vrouter-broken-sf2rules'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  tags: ["contrail-vrouter-broken-sf2rules"]
  with_items:
    - service: contrail-vrouter-broken-sf2rules
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-broken-sf2rules
            type: wiki
      ttl: 450
      refresh_time: 150

- name: 'juggler_check: contrail-vrouter-inconsistent-sf2rules'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  tags: ["contrail-vrouter-inconsistent-sf2rules"]
  with_items:
    - service: contrail-vrouter-inconsistent-sf2rules
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-inconsistent-sf2rules
            type: wiki
      ttl: 450
      refresh_time: 150
      flap: { stable: 600, critical: 1200 }

- name: 'juggler_check: contrail-vrouter-agent-control-connections'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_unreach_skip) }}"
  tags: ["contrail-vrouter-agent-control-connections"]
  with_items:
    - service: contrail-vrouter-agent-control-connections
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-agent-control-connections
            type: wiki
      flap: { stable: 140, critical: 300 }

- name: 'juggler_check: vpc-node-inconsistent-ports'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node-inconsistent-ports
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-node-inconsistent-ports
            type: wiki
  when: env in ["testing"]

- name: 'juggler_check: vpc-node'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-node
            type: wiki
  when: env in ["testing"]

- name: 'juggler_check: vpc-node-actor-active-ratio'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node-actor-active-ratio
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-node-actor-active-ratio
            type: wiki
      refresh_time: 60
      flap: { stable: 180, critical: 900 }
  when: env in ["testing"]

- name: 'juggler_check: vpc-node-sync-messages-context-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node-sync-messages-context-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-node-sync-messages-context-errors
            type: wiki
  when: env in ["testing"]

- name: 'juggler_check: vpc-node-long-actor-requests'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node-long-actor-requests
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-node-long-actor-requests
            type: wiki
  when: env in ["testing"]

- name: 'juggler_check: vpc-node-grpc-server-errors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  tags: ["vpc-node"]
  with_items:
    - service: vpc-node-grpc-server-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/vpc-control/vpc-node-grpc-server-errors
            type: wiki
  when: env in ["testing"]

- name: 'juggler_check: certificates-validity-vpc'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_network_limits_unreach_skip_nodata_force_ok) }}"
  with_items:
    - service: certificates-validity-vpc
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/certificates-validity
            type: wiki

- name: 'juggler_check : contrail-vrouter-routes-latency'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: contrail-vrouter-routes-latency
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-routes-latency
            type: wiki
      ttl: 450
      refresh_time: 150

- name: 'juggler_check : contrail-vrouter-routes-interface'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: contrail-vrouter-routes-interface
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-routes-interface
            type: wiki
      ttl: 450
      refresh_time: 150

- name: 'juggler_check : contrail-vrouter-routes-disparity'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: contrail-vrouter-routes-disparity
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-routes-disparity
            type: wiki
      ttl: 450
      refresh_time: 150

- name: 'juggler_check : contrail-vrouter-routes-default'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: contrail-vrouter-routes-default
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-routes-default
            type: wiki
      ttl: 450
      refresh_time: 150

- name: 'juggler_check : contrail-vrouter-routes-lb-stuck'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: contrail-vrouter-routes-lb-stuck
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-vrouter-routes-lb-stuck
            type: wiki
      ttl: 450
      refresh_time: 150
      flap: { stable: 600, critical: 1200 }

- name: 'juggler_check: contrail-snh-push-sensors'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-snh-push-sensors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-snh-push-sensors
            type: wiki
      refresh_time: 60
      ttl: 180
      children:
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_itf-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_services-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_tasks-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_packet_latency-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_xmpp-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_flows-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_vm_flows-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_subordinate_flows-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_routes-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_compute_oct_vrouter_snh_sf2rule-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_oct_oct_control-push-sensors
          type: HOST
        - host: "vpc-infra-{{ env }}"
          service: yandexcloud_cloud_{{ env }}_oct_oct_control_routes-push-sensors
          type: HOST
