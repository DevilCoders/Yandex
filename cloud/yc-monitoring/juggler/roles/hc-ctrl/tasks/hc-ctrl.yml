- name: 'http-ping{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: http-ping

- name: 'hc-ctrl-limits-check{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: hc-ctrl-limits-check

- name: 'gc-cycles{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: gc-cycles
      refresh_time: 300
      ttl: 900

# TODO(svartapetov) CLOUD-94757: remove deployment downtime
- name: 'hc-ctrl-log-errors{{ dc_suffix }}'
  juggler_check: ''
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: hc-ctrl-log-errors
      pronounce: "Высокий уровень ошибок в л+огах хелс-ч+ек-контроллера {{ pronounce_suffix }}"

- name: 'hc-ctrl-grpc-perm-error-rate{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: grpc-perm-error-rate
      pronounce: "Высокий уровень ошибок авторизации ГРПЦ-сервера хелс-ч+ек контроллера {{ pronounce_suffix }}"

- name: 'hc-ctrl-grpc-perm-denied-rate{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: grpc-perm-denied-rate
      pronounce: "Обнаружены неавторизованные запросы к ГРПЦ-серверу хелс-ч+ек контроллера {{ pronounce_suffix }}"

- name: 'hc-ctrl-grpc-server-error-rate{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: grpc-server-error-rate
      pronounce: "Высокий уровень ошибок ГРПЦ-сервера хелс-ч+ек контроллера {{ pronounce_suffix }}"

- name: 'ydb_open_conns-hc-ctrl{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: ydb_open_conns
      pronounce: "Установлено малое количество соединений к Y-DB у хелс-ч+ек контроллера {{ pronounce_suffix }}"
      refresh_time: 300
      ttl: 900

- name: 'ydb-session-pool-overflows-hc-ctrl{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: ydb-session-pool-overflows

- name: 'ydb-errors{{ dc_suffix }}'
  juggler_check: ''
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_nodata_force_ok_with_deployment) }}"
  with_items:
    - service: ydb-errors
      refresh_time: 300
      ttl: 900
      pronounce: "Высокий уровень ошибок Y-DB хелс-ч+ек-контроллера {{ pronounce_suffix }}"

- name: 'grpc-restricted{{ dc_suffix }}'
  juggler_check: ''
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: grpc-restricted
      refresh_time: 300
      ttl: 900
      pronounce: "Активирован рестриктед режим хелс-ч+ек-контроллера {{ pronounce_suffix }}"

- name: 'ydb-timings{{ dc_suffix }}'
  juggler_check: ''
  args: "{{ default_check_delay_10_tag | hash_merge(item, default_timed_limits_unreach_skip_with_deployment) }}"
  with_items:
    - service: ydb-timings
      refresh_time: 300
      ttl: 900
      pronounce: "Задержки при работе с Y-DB у хелс-ч+ек-контроллера {{ pronounce_suffix }}"

- name: 'salt-versions-diff{{ dc_suffix }}'
  when: env not in ["hw-cgw-dev-lab", "hw-cgw-ci-lab"]
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: salt-versions-diff
      host: "yc_loadbalancer_hc-ctrl{{ host_suffix }}"
      refresh_time: 60
      ttl: 180
      children:
        - host: "ylb_healthcheck-ctrl{{ host_suffix }}"
          service: salt-versions-diff
          type: HOST
