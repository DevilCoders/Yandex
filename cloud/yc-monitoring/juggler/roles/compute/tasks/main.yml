- include: compute-node.yml
  tags: ["compute", "yc-compute-node-team"]
  vars:
    telegram_chat_id: ComputeNodeDuty
    check_tags: ["yc-compute", "yc-compute-node-team"]

- include: compute-node-infra.yml
  tags: ["compute", "yc-compute-node-infra"]
  vars:
    check_tags: ["yc-compute", "yc-compute-node-infra"]  # CLOUD-73039, alert is hidden from main dashboard (https://juggler.yandex-team.ru/dashboards/ycloud_compute), but shown on per-stand dashboards ("misc" section)

- include: serialproxy.yml
  tags: ["compute", "yc-compute-api-team"]
  vars:
    telegram_chat_id: ComputeAPIDuty
    check_tags: ["yc-compute", "yc-compute-api-team"]

- include: compute-metadata.yml
  tags: ["compute", "compute-metadata", "yc-compute-api-team"]
  vars:
    telegram_chat_id: ComputeAPIDuty
    check_tags: ["yc-compute", "yc-compute-api-team"]

- include: solomon-quotas-dc.yml
  tags: ["compute", "yc-compute-node-team"]
  vars:
      telegram_chat_id: ComputeNodeDuty
      check_tags: ["yc-compute", "yc-compute-node-team"]
  with_items: "{{ datacenters | default(omit) }}"
  loop_control:
      loop_var: dc

- include: tasks/local-lb.yml
  tags: ["compute"]
  when: env in ["testing"]  # we use local_lb only in testing now
  vars:
      telegram_chat_id: ""
      check_tags: ['local-lb', 'bootstrap', 'selfhost']
