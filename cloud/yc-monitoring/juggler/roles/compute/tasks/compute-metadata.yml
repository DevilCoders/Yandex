---
- name: 'juggler_check : compute-metadata'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_unreach_force_ok) }}"
  with_items:
    - service: compute-metadata

- name: 'juggler_check : compute-metadata-errors'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: compute-metadata-errors
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/compute-api/compute-metadata-errors
            type: wiki

- name: 'juggler_check : compute-metadata-latency'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: compute-metadata-latency
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/compute-api/compute-metadata-latency
            type: wiki

- name: 'juggler_check : compute-metadata-token-agent'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: compute-metadata-token-agent
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/compute-api/compute-metadata-token-agent
            type: wiki
  tags: ["compute-tokens"]

- name: 'juggler_check : compute-metadata-token-service'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits_nodata_ok) }}"
  with_items:
    - service: compute-metadata-token-service
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/compute-api/compute-metadata-token-service
            type: wiki
  tags: ["compute-tokens"]

- name: 'juggler_check: compute-metadata-solomon-quotas'
  juggler_check: ''
  args: "{{ default_check_with_only_telegram_notification | hash_merge(item, default_timed_limits) }}"
  with_items:
      - service: compute-metadata-solomon-quotas
        refresh_time: 60
        ttl: 180
        children:
            - host: "vpc-infra-{{ env }}"
              service: yandexcloud_cloud_{{ env }}_compute_compute_metadata-solomon-quotas
              type: HOST
        meta:
            urls:
                - title: "[?] Инструкция по алерту"
                  url: https://docs.yandex-team.ru/yc-monitoring/shared/solomon-quotas
                  type: wiki
