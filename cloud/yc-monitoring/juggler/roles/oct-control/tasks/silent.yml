# Here you can create silent check using silent_check instead of default_check.
# silent_check has no alert method.

- name: 'juggler_check : contrail *-cpu, *-memory'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  tags: ["vpc-cpu-memory"]
  with_items:
    - service: contrail-control-cpu
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-cpu
            type: wiki
    - service: contrail-control-memory
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/service-memory
            type: wiki

- name: 'juggler_check: contrail-control-ifmap'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: contrail-control-ifmap
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-control-ifmap
            type: wiki

- name: 'juggler_check: contrail-control-routes-divergence'
  juggler_check: ''
  args: "{{ silent_check | hash_merge(item) }}"
  with_items:
    - service: contrail-control-routes-divergence
      meta:
        urls:
          - title: "[?] Инструкция по алерту"
            url: https://docs.yandex-team.ru/yc-monitoring/overlay/contrail-control-routes-divergence
            type: wiki
      aggregator: logic_or
      children:
        - EVENTS%(host=cloud_{{ env }}_overlay_solomon_{{ dc }}*)&(tag=routes-divergence)
