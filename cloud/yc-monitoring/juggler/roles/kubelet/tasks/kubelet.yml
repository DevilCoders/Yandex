---
- name: 'juggler_check : yc-k8s-metadata-plugin-success-rate'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: yc-k8s-metadata-plugin-success-rate
      timed_more_than_limit_is_problem:
        nodata_mode: skip
  when: not hw

- name: 'juggler_check : yc-k8s-ta-plugin-success-rate'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: yc-k8s-ta-plugin-success-rate
      timed_more_than_limit_is_problem:
        nodata_mode: skip
  when: hw

- name: 'juggler_check : k8s_cpuset'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: k8s_cpuset
      timed_more_than_limit_is_problem:
        nodata_mode: skip
  vars:
    flap: { stable: 360, critical: 1080 }
  when: hw

- name: 'juggler_check : kubelet-client-requests-failures'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, default_timed_limits) }}"
  with_items:
    - service: kubelet-client-requests-failures
      children: {}

- name: 'juggler_check : kubelet'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: kubelet
  vars:
      flap: { stable: 360, critical: 1080 }

- name: 'juggler_check : containerd'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: containerd
  vars:
      flap: { stable: 360, critical: 1080 }

- name: 'juggler_check : certificates-validity'
  juggler_check: ''
  args: "{{ default_check | hash_merge(item, unreach_limits) }}"
  with_items:
    - service: certificates-validity
