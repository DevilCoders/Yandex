---
apiVersion: v1
kind: Service
metadata:
  name: cloudbeaver-app
  annotations:
    yandex.cloud/yandex-only: "true"
spec:
  selector:
    app: cloudbeaver-app
  type: NodePort
  ipFamilyPolicy: PreferDualStack
  ipFamilies:
    - IPv6
    - IPv4
  ports:
    - name: http
      port: 80
      targetPort: 8080
      protocol: TCP

{{- if .Values.global.nginx_devhost_proxy.enabled }}
---
apiVersion: v1
kind: Service
metadata:
  name: nginx-devhost-proxy
  annotations:
    yandex.cloud/yandex-only: "true"
spec:
  selector:
    app: nginx-devhost-proxy
  type: NodePort
  ipFamilyPolicy: PreferDualStack
  ipFamilies:
    - IPv6
    - IPv4
  ports:
    - name: http
      port: 80
      targetPort: 80
      protocol: TCP
{{- end }}
