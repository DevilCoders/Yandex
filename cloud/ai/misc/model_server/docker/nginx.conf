worker_processes 2;

events {
    use epoll;
    worker_connections 1024;
    multi_accept on;
}

http {
    client_max_body_size 128m;

    upstream frontends {
        server 127.0.0.1:8000;
        server 127.0.0.1:8001;
        server 127.0.0.1:8002;
        server 127.0.0.1:8003;
        server 127.0.0.1:8004;
        server 127.0.0.1:8005;
        server 127.0.0.1:8006;
        server 127.0.0.1:8007;
    }

    server {
        listen [::]:80 default_server;
        listen 80 default_server;

        location / {
            proxy_pass http://frontends;
        }
    }
}
