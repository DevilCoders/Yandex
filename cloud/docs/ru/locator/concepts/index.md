# Как определяется местоположение

{{ locator-short-name }} определяет местоположение мобильного устройства на основе одного из трех типов данных о мобильном устройстве в порядке приоритета:

1. [Сигналы точек доступа Wi-Fi](#wifi);
2. [Сигналы сетей мобильной связи](#network);
3. [IP-адрес](#ip).

{{ locator-short-name }} возвращает местоположение мобильного устройства в виде окружности: координаты центра (широта, долгота) в системе [WGS-84](https://ru.wikipedia.org/wiki/WGS_84) и радиус окружности в метрах.

При определении местоположения существует вероятность, что мобильное устройство в действительности находится за пределами области, которую указал {{ locator-short-name }}. Достоверность сведений различается для разных территорий и в среднем составляет 80%.

Сервис не может определять местоположение на территории, о которой у него нет данных. В таких случаях возвращается сообщение об ошибке.

## Входные данные

### Сигналы точек доступа Wi-Fi {#wifi}

Наиболее точный способ определения местоположение. В среднем точность составляет 50 м.

Сведения о точке доступа Wi-Fi:

* MAC-адрес;
* уровень сигнала.

### Сигналы сетей мобильной связи {#network}

Точность определения местоположения зависит от плотности установки базовых станций. Наибольшая плотность базовых станций — в центрах городов. В таких местах точность составляет от 200 до 500 м. При уменьшении плотности станций и ухудшении условий приема точность снижается — на окраинах городов она составляет 1500–2000 м.

Сведения о базовой станции мобильной связи:

* код страны — MCC (Mobile Country Code);
* код сети мобильной связи — MNC (Mobile Network Code);
* код местоположения:
  * для GSM и WCDMA — LAC (Location Area Code).
  * для LTE — TAC (Tracking Area Code).
* идентификатор соты, к которой подключено мобильное устройство:
  * для GSM — CID (Cell identifier);
  * для LTE и WCDMA/UMTS — ECI (E-UTRAN Cell Identifier).
* уровень сигнала соты.

### IP-адрес {#ip}

IP-адрес мобильного устройства, назначенный оператором мобильного интернета.

Наименее точный способ определения местоположение, поскольку местоположение совпадает с территорией подсети, к которой принадлежит IP-адрес. Подсеть мобильного оператора обычно покрывает территорию радиусом не менее 5 км.

Если IP-адрес в запросе отсутствует или некорректен, то будет использован адрес отправителя из заголовка IP-пакета. Этот адрес может быть подменен прокси-сервером, через который прошел IP-пакет.