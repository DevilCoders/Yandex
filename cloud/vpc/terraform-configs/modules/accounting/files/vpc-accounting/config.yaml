log-level: ${log_level}
log-path: "" # write to stdout
introspect-addr: 127.0.0.1:8000
health-check-addr: 0.0.0.0:80
mode: ${mode}

cidrs-matcher:
  healthcheck-cidrs:
    - 198.18.235.0/24
    - 198.18.248.0/24
    # _CLOUD_LB_HC_PREPROD_NETS_
    - 2a0d:d6c0:2:ba:ffff::/80
    # _CLOUD_LB_HC_PROD_NETS_
    - 2a0d:d6c0:2:ba::/80
  internal-cidrs:
    - 172.16.0.0/12
    - 10.0.0.0/8
    - 192.168.0.0/16

billing:
  max-aggregated-messages: 100000 # ~30mb
  add-labels: true
  marshaler:
    goroutines: ${marshaller_goroutines}
    batch-bytes: ${marshaller_batch_bytes}
    batch-duration: ${marshaller_batch_duration}
    marshals-per-goroutine: ${marshals_per_goroutine}
  output:
    endpoint: ${endpoint}
    database: ${billing_database}
    topic: ${output_topic}
    compression-level: ${compression_level}
    unified-agent-socket: unix:///etc/yandex/unified_agent/accounting

balancer:
  environment: ${environment}
  cache-url: ${cache_url}
  send-internal: false
  send-hc-metric: true
  bucket-duration: 15s
  max-bucket-count: 4
  balancer-cache-sync: 30s
  send-to-solomon: true
  bill-elb-egress-traffic: ${bill_elb_egress_traffic}
  bill-healtcheck-traffic: ${bill_healtcheck_traffic}
  bill-internal-balancers: ${bill_internal_balancers}
  bill-unknown-traffic: ${bill_unknown_balancers}
  marshaler:
    goroutines: ${marshaller_goroutines}
    batch-bytes: ${marshaller_batch_bytes}
    batch-duration: ${marshaller_batch_duration}
    marshals-per-goroutine: ${marshals_per_goroutine}
  output:
    endpoint: ${endpoint}
    database: ${billing_database}
    topic: ${loadbalancer_topic}
    compression-level: 9
    unified-agent-socket: unix:///etc/yandex/unified_agent/accounting
  fip-buckets:
    qrator:
      - 130.193.62.0/24
      - 178.154.243.0/24
      - 178.154.244.0/24
      - 178.154.245.0/24
      - 193.32.216.0/26
      - 193.32.216.128/26
      - 193.32.216.192/26
      - 193.32.216.64/26
      - 51.250.48.0/24
      - 51.250.50.0/24
      - 51.250.51.0/24
      - 51.250.126.0/25
      - 51.250.126.128/26
      - 51.250.126.192/26
      - 84.201.184.0/24
      - 84.201.185.0/24
      - 84.201.186.0/24
      - 84.201.187.0/26
      - 84.201.187.128/26
      - 84.201.187.192/27
      - 84.201.187.224/28
      - 84.201.187.64/26
      - 84.201.188.0/26
      - 84.201.188.128/25
      - 84.201.188.64/26
      - 84.201.189.0/24

flow-reader:
  input-count: ${input_count}
  input:
    endpoint: ${endpoint}
    database: ${accounting_database}
    topic: ${input_topic}
    consumer: ${consumer}
    max-read-partitions-count: 1
    max-read-message-count: 100000
    max-read-size: 31457280 # 30mb

static-metrics:
  address: 127.0.0.1:15002
  report-interval: ${pull_interval}
  path: /metrics

balancer-metrics:
  address: 127.0.0.1:15001
  report-interval: ${pull_interval}
  unchanged-metrics-lifetime: ${unchanged_metrics_lifetime}
  path: /balancer-metrics