name: "[RB] Static Routes: HTTP Requests"
slug: rb-sr-http-k8s
description: "Check HTTP connection to targets using k8s-like routes (including cross-net access)"
runner:
  type: BASH
  command: /bin/bash ./sr-http.sh $VAR_family $VAR_target_index
files:
  - directory: ../files
  - directory: ../sr-http-common
    glob: ./sr-http.sh
configs:
  - is_prober_enabled: true
    interval_seconds: 30
    timeout_seconds: 15
    s3_logs_policy: FAIL
    # NOTE: default_routing_interface is not specified as routing is done manually by bootcmd
    # It is even breaking things due to forceful use of SNAT
    matrix:
      family:
        - "inet"
        - "inet6"
      target_index:
        - "local"
        - "remote"
        - "right"
    variables:
      family: ${matrix.family}
      target_index: ${matrix.target_index}
    clusters:
      - clusters/*/rb-sr-k8s-cross-network/cluster.yaml
