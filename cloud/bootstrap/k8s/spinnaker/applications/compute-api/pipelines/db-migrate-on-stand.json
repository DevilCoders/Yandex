{
    "application": "compute-api",
    "id": "7f002686-853d-490f-816a-78e2221c8bbb",
    "index": 6,
    "keepWaitingPipelines": false,
    "limitConcurrent": true,
    "name": "db-migrate-on-stand",
    "parameterConfig": [
        {
            "default": "",
            "description": "A stand name",
            "hasOptions": true,
            "label": "",
            "name": "stand",
            "options": [
                {
                    "value": "testing"
                },
                {
                    "value": "preprod"
                },
                {
                    "value": "prod"
                }
            ],
            "pinned": true,
            "required": true
        },
        {
            "default": "",
            "description": "A name of the stage of migration",
            "hasOptions": true,
            "label": "",
            "name": "migration_stage",
            "options": [
                {
                    "value": "pre"
                },
                {
                    "value": "post"
                }
            ],
            "pinned": false,
            "required": true
        },
        {
            "default": "a",
            "description": "",
            "hasOptions": true,
            "label": "",
            "name": "az",
            "options": [
                {
                    "value": "a"
                },
                {
                    "value": "b"
                },
                {
                    "value": "c"
                }
            ],
            "pinned": false,
            "required": true
        }
    ],
    "spelEvaluator": "v4",
    "stages": [
        {
            "failOnFailedExpressions": true,
            "name": "Configure context",
            "refId": "2",
            "requisiteStageRefIds": [],
            "type": "evaluateVariables",
            "variables": [
                {
                    "key": "stand",
                    "value": "${parameters.stand}"
                },
                {
                    "key": "stage",
                    "value": "${parameters.migration_stage}"
                },
                {
                    "key": "az",
                    "value": "${parameters.az}"
                }
            ]
        },
        {
            "account": "kten_${stand}-${az}-svm_compute-api",
            "alias": "runJob",
            "application": "compute-api",
            "cloudProvider": "kubernetes",
            "manifestArtifact": {
                "artifactAccount": "bb.yandex-team.ru",
                "id": "79d9556d-ded0-4bb2-8439-16c803ab40e7",
                "reference": "https://bb.yandex-team.ru/projects/CLOUD/repos/k8s-deploy/raw/${stand}/ru-central1-${az}-svm/manifests/compute/compute-api/templates/compute-${stage}-migrate.yaml",
                "type": "bitbucket/file"
            },
            "moniker": {
                "app": "compute-api"
            },
            "name": "Run migration stage",
            "refId": "3",
            "requisiteStageRefIds": [
                "2"
            ],
            "skipExpressionEvaluation": true,
            "source": "artifact",
            "trafficManagement": {
                "enabled": false,
                "options": {
                    "enableTraffic": false,
                    "services": []
                }
            },
            "type": "runJobManifest"
        }
    ],
    "triggers": []
}
