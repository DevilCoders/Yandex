{
    "application": "compute-api",
    "id": "8aee57a8-598a-4de5-9c53-5f063388c483",
    "index": 0,
    "keepWaitingPipelines": false,
    "limitConcurrent": true,
    "name": "deploy-compute-api",
    "parameterConfig": [
        {
            "default": "",
            "description": "Startrek release ticket ID",
            "hasOptions": false,
            "label": "",
            "name": "releaseTicket",
            "options": [
                {
                    "value": ""
                }
            ],
            "pinned": false,
            "required": true
        },
        {
            "default": "",
            "description": "Required for now",
            "hasOptions": false,
            "label": "",
            "name": "chartVersion",
            "options": [
                {
                    "value": ""
                }
            ],
            "pinned": false,
            "required": true
        }
    ],
    "spelEvaluator": "v4",
    "stages": [
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "Generate manifets - testing",
            "pipeline": "5fedcde2-9757-4208-a593-6c11e60431c7",
            "pipelineParameters": {
                "chartVersion": "${parameters.chartVersion}",
                "releaseTicket": "${parameters.releaseTicket}",
                "stand": "testing"
            },
            "refId": "1",
            "requisiteStageRefIds": [],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "Deploy compute-api - testing - vla",
            "pipeline": "603a4b06-8535-4cc3-8e56-6ecd6749ace8",
            "pipelineParameters": {
                "az": "a",
                "releaseTicket": "${parameters.releaseTicket}",
                "stand": "testing"
            },
            "refId": "2",
            "requisiteStageRefIds": [
                "10"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "Deploy compute-api - testing - sas",
            "pipeline": "603a4b06-8535-4cc3-8e56-6ecd6749ace8",
            "pipelineParameters": {
                "az": "b",
                "releaseTicket": "${parameters.releaseTicket}",
                "stand": "testing"
            },
            "refId": "3",
            "requisiteStageRefIds": [
                "10"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "Deploy compute-api - testing - myt",
            "pipeline": "603a4b06-8535-4cc3-8e56-6ecd6749ace8",
            "pipelineParameters": {
                "az": "c",
                "releaseTicket": "${parameters.releaseTicket}",
                "stand": "testing"
            },
            "refId": "4",
            "requisiteStageRefIds": [
                "10"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "failPipeline": true,
            "judgmentInputs": [],
            "name": "Deploy compute-api",
            "notifications": [],
            "refId": "9",
            "requisiteStageRefIds": [
                "1"
            ],
            "selectedStageRoles": [
                "yccompute2:development"
            ],
            "type": "manualJudgment"
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "DB pre-migrate - testing",
            "pipeline": "7f002686-853d-490f-816a-78e2221c8bbb",
            "pipelineParameters": {
                "migration_stage": "pre",
                "stand": "testing"
            },
            "refId": "10",
            "requisiteStageRefIds": [
                "9"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "failPipeline": true,
            "instructions": "Check that all services have the same app version:\n* compute-head: http://[::1]:9083/version\n* compute-tasks: http://[::1]:9283/version",
            "judgmentInputs": [],
            "name": "Check service version",
            "notifications": [],
            "propagateAuthenticationContext": true,
            "refId": "11",
            "requisiteStageRefIds": [
                "2",
                "3",
                "4"
            ],
            "type": "manualJudgment"
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "DB post-migrate testing",
            "pipeline": "7f002686-853d-490f-816a-78e2221c8bbb",
            "pipelineParameters": {
                "migration_stage": "post",
                "stand": "testing"
            },
            "refId": "12",
            "requisiteStageRefIds": [
                "11",
                "13"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        },
        {
            "application": "compute-api",
            "failPipeline": true,
            "name": "Inspect juggler checks",
            "pipeline": "3ec4a23e-8415-4af3-9a02-80d6599e6677",
            "pipelineParameters": {
                "stand": "testing"
            },
            "refId": "13",
            "requisiteStageRefIds": [
                "2",
                "3",
                "4"
            ],
            "type": "pipeline",
            "waitForCompletion": true
        }
    ],
    "triggers": []
}
