{
  "__comment":"universal build recipie for quemu builder, with minimal customization - userdata and winrm",
  "variables": { "name": "" },
  "builders": [
    {
      "name": "{{user `name`}}-dc",
      "output_directory": "{{build_name}}/output",

      "iso_url": "{{build_name}}/{{build_name}}.iso",
      "iso_checksum": "file:{{build_name}}/{{build_name}}.iso.sha1",

      "floppy_dirs": [
        "scripts/*",
        "autounattend_dc/*",
        "{{build_name}}/drivers/*"
      ],

      "type": "hyperv-iso",
      "cpus": 2,
      "memory": 4096,
      "disk_size": 51200,

      "communicator": "none",
      "shutdown_timeout": "60m"
    },
    {
      "name": "{{user `name`}}-std",
      "output_directory": "{{build_name}}/output",

      "iso_url": "{{build_name}}/{{build_name}}.iso",
      "iso_checksum": "file:{{build_name}}/{{build_name}}.iso.sha1",

      "floppy_dirs": [
        "scripts/*",
        "autounattend_std/*",
        "{{build_name}}/drivers/*"
      ],

      "type": "hyperv-iso",
      "cpus": 2,
      "memory": 4096,
      "disk_size": 51200,

      "communicator": "none",
      "shutdown_timeout": "60m"
    }
  ],
  "provisioners":
  [
    {
      "type": "breakpoint",
      "note": "shazam!"
    }
  ]
}