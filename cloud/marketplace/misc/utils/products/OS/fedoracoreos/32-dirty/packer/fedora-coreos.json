{
  "variables": {
    "iso_url": "https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/32.20200907.3.0/x86_64/fedora-coreos-32.20200907.3.0-live.x86_64.iso",
    "iso_checksum": "6417d5a65d1b3cce5276b52613ba3a81302de17d0155888fad0d7305c1678866",
    "raw_url": "https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/32.20200907.3.0/x86_64/fedora-coreos-32.20200907.3.0-metal.x86_64.raw.xz"
  },
  "builders": [
    {
      "name": "fcos",
      "type": "qemu",
      "machine_type": "q35",
      "use_default_display": true,
      "vnc_port_min": 5901,
      "vnc_port_max": 5901,
      "vnc_bind_address": "0.0.0.0",
      "iso_url": "{{user `iso_url`}}",
      "iso_checksum": "sha256:{{user `iso_checksum`}}",
      "communicator": "none",
      "boot_command": [
        "<enter>",
        "<wait30s>",
        "sudo /usr/bin/coreos-installer install -p aws -u {{user `raw_url`}} /dev/vda <enter>",
        "<wait3m>",
        "sudo /sbin/shutdown -P -h now <enter>"
      ],
      "qemuargs": [
        [ "-parallel", "none" ],
        [ "-m", "4096M" ],
        [ "-smp", "cpus=2" ]
      ],
      "accelerator": "kvm",
      "http_directory": "http",
      "disk_compression": true,
      "disk_size": 5120,
      "format": "qcow2",
      "boot_wait": "90s",
      "shutdown_timeout": "90m",
      "output_directory": "output/packer-fcos"
    }
  ]
}
