{
    "variables": {
        "password": "randompass",
        "disk_size": "10240",
        "domain": ""
    },

    "builders": [
        {
            "name": "CentOS-7",

            "communicator":"none",
            "shutdown_command": "",
            "shutdown_timeout": "60m",
            "type": "qemu",
            "format": "qcow2",
            "disk_size": "{{ user `disk_size` }}",
            "disk_compression": true,

            "iso_url": "https://mirror.yandex.ru/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso",
            "iso_checksum": "07b94e6b1a0b0260b94c83d6bb76b26bf7a310dc78d7a9c7432809fb9bc6194a",
            "iso_checksum_type": "sha256",

            "http_directory": "http",

            "use_default_display": true,
            "machine_type": "q35",

            "boot_wait": "5s",
            "boot_command": [
                "<esc>",
	        "<wait>",
                "linux inst.gpt inst.ks=http://{{.HTTPIP}}:{{.HTTPPort}}/centos-7-ks.cfg biosdevname=0 net.ifnames=0",
		"<enter>"
            ],
            "qemuargs": [
               [ "-parallel", "none" ],
               [ "-m", "4096M" ],
               [ "-smp", "cpus=2" ]
            ] 
        }
    ]
}

