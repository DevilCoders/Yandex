{
    "variables": {
        "password": "randompass",
        "disk_size": "10240",
        "domain": ""
    },

    "builders": [
        {
            "name": "CentOS-8",

            "communicator":"none",
            "shutdown_command": "",
            "shutdown_timeout": "60m",
            "type": "qemu",
            "format": "qcow2",
            "disk_size": "{{ user `disk_size` }}",
            "disk_compression": true,

            "iso_url": "https://mirror.yandex.ru/centos/8.3.2011/isos/x86_64/CentOS-8.3.2011-x86_64-boot.iso",
            "iso_checksum": "2b801bc5801816d0cf27fc74552cf058951c42c7b72b1fe313429b1070c3876c",
            "iso_checksum_type": "sha256",

            "http_directory": "http",

            "use_default_display": true,
            "machine_type": "q35",

            "boot_wait": "5s",
            "boot_command": [
                "<esc>",
	        "<wait>",
                "linux inst.gpt inst.ks=http://{{.HTTPIP}}:{{.HTTPPort}}/centos-8-ks.cfg biosdevname=0 net.ifnames=0",
		"<enter>"
            ],
            "qemuargs": [
               [ "-parallel", "none" ],
               [ "-m", "4096M" ],
               [ "-smp", "cpus=2" ]
            ] 
        }
    ]
}
