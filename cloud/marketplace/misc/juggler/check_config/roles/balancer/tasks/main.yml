---
- name: 'juggler_check: yc-marketplace-balancer-unreachable'
  juggler_check:
  args:
    __force__: True
    namespace: "{{ namespace }}"
    host: '{{ balancer }}'
    service: UNREACHABLE
    active: icmpping
    responsible: "{{ service_responsibles | default(responsibles) }}"
    flap:
      stable: 120
      critical: 180
    notifications: "{{ telegram_template }}"

- name: 'juggler_check: yc-marketplace-balancer-http-ipv6'
  juggler_check:
  args:
    __force__: True
    namespace: "{{ namespace }}"
    host: '{{ balancer }}'
    service: http_ipv6
    active: https
    responsible: "{{ service_responsibles | default(responsibles) }}"
    active_kwargs:
      host: '{{ balancer }}'
      port: 443
      path: "/ping"
      disable_ipv4: "yes"
    flap:
      stable: 120
      critical: 180
    notifications: "{{ telegram_template }}"

- name: 'juggler_check: yc-marketplace-balancer-cert-check'
  juggler_check:
  args:
    __force__: True
    namespace: "{{ namespace }}"
    host: '{{ balancer }}'
    service: https_cert_expire
    active: https_cert
    responsible: "{{ service_responsibles | default(responsibles) }}"
    active_kwargs:
      warn_expire: 21
      crit_expire: 14
    flap:
      stable: 120
      critical: 180
    notifications: "{{ telegram_template }}"
