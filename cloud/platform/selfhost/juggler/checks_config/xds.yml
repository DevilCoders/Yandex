---
- hosts: localhost
  gather_facts: false
  pre_tasks:
    - juggler_facts:  jserver_api={{ jserver_api }}
      tags:
        - always
        -
  post_tasks:
    - juggler_cleanup:

  vars:
    app: "xds"
    notification_methods: []
    tags: "{{ duty_tags }} + ['{{ apiteam_tag }}']"

  roles:
    - role: xds
      vars:
        env: "preprod"
        host: "cloud_{{ env }}_{{ app }}"
        children:
          - 'CGROUP%{{ host }}'
        unreachable_host: '{{ host }}'

    - role: xds
      vars:
        env: "prod"
        host: "cloud_{{ env }}_{{ app }}"
        children:
          - 'CGROUP%{{ host }}'
        unreachable_host: '{{ host }}'
