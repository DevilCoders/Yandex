---
- hosts: localhost
  gather_facts: false
  pre_tasks:
      - juggler_facts:  jserver_api={{ jserver_api }}
        tags:
            - always

  post_tasks:
      - juggler_cleanup:

  vars:
      app: "l7-als"
      notification_methods: []
      tags: "{{ duty_tags }} + ['{{ apiteam_tag }}']"
      namespace: "ycloud.l7"

  roles:
      - role: "{{ app }}"
        vars:
          env: "preprod"
          host: "cloud_{{ env }}_{{ app }}"
          services:
              - als-healthcheck
              - coredumps
              - freespace
              - oom-killer
              - push-client
              - reboot-count
