# Update:
#
#  $ ycp --profile=prod load-balancer network-load-balancer update b7r9aemg7k973d1mvqve -r l3-v4-nlb-spec.yaml
#

# Fields used for creation (also remove "address"):
#folder_id: "b1gaqi8r2cbb368gp68v"
#region_id: "ru-central1"
#type: EXTERNAL

update_mask: {paths: [attached_target_groups]} # Extra safety.

name: "platform-l7-container-registry-lb-v4-prod"
description: "LB for container registry v4 (PROD)"
labels: {}
listener_specs:
- name: "tls-v4"
  port: 443
  target_port: 2443
  protocol: TCP
  external_address_spec:
    address: 84.201.171.239
    ip_version: IPV4
    yandex_only: false # It's exposed to Internet
attached_target_groups:
- target_group_id: "b7rtspbqsv3fqu0fud94"
  health_checks:
  - name: "envoy-ping"
    timeout: 1s
    interval: 2s
    unhealthy_threshold: 2
    healthy_threshold: 2
    http_options:
      port: 30080
      path: /ready/no_drain
