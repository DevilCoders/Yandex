# Update:
#  $ ycp --profile=prod platform alb load-balancer update -r alb-lb.yaml
#

# Fields used for creation:
#folder_id: "b1gvgqhc57450av0d77p"
#internal: true

load_balancer_id: ds76dumn75n4bvk1otqc

# diff -y  <(ycp --profile=prod platform alb load-balancer get ds76dumn75n4bvk1otqc) <(ycp --profile=prod platform alb load-balancer update -r alb-lb.yaml)
dry_run: true
update_mask:
  paths:
  - labels
  - listener_specs

name: "jaeger"
labels:
  internal-no-tracing: "yes"
  internal-instance-name: jaeger-prod
  internal-solomon-cluster: cloud_prod_jaeger
  internal-conductor-group: l7-jaeger
  internal-enable-remote-als: yyy
  internal-disable-local-als: yyy
listener_specs:
- name: tls
  endpoint_specs:
  - ports: [443]
    address_specs:
    - external_ipv6_address_spec:
        yandex_only: true
  tls:
    default_handler:
      http_handler:
        http_router_id: ds78ms0obd2ppvg56vjk
        is_edge: false
      certificate_ids: ["fpq96ai61momkhf7a10q"]
    tcp_options:
      connection_buffer_limit_bytes: 262144 # 256K

allocation_policy:
  locations:
  - { zone_id: ru-central1-a, subnet_id: e9bi9drqb7rddf4od5jk }
  - { zone_id: ru-central1-b, subnet_id: e2lo6auqjjfru2tfnorm }
  - { zone_id: ru-central1-c, subnet_id: b0c3id3uje06qohkgmlg }
