apiVersion: v1
kind: Pod
metadata:
  name: solomon-agent
  namespace: kube-system
  annotations:
    scheduler.alpha.kubernetes.io/critical-pod: ""
  labels:
    role: api
spec:
  priority: 2000000001
  hostNetwork: true
  hostPID: true
  priorityClassName: system-cluster-critical
  containers:
    - name: solomon-agent
      image: cr.yandex/crpr3khkepsccf25vvt6/solomon-agent:${solomon_version}
      imagePullPolicy: IfNotPresent
      resources:
        requests:
          memory: "4600Mi"
        limits:
          memory: "4600Mi"
      volumeMounts:
        - name: solomon-agent-config
          mountPath: /etc/solomon-agent/
          readOnly: true
  volumes:
    - name: var-log
      hostPath:
        path: /var/log
    - name: solomon-agent-config
      hostPath:
        path: /etc/solomon-agent
