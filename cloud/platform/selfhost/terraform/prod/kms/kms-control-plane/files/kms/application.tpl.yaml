grpcServer:
  maxConcurrentRequests: 100
  port: 443
  reflectionEnabled: true
  certificatePemFile: /etc/kms/certificate.pem

# authClient:
#   fake: true

authClient:
  host: as.private-api.cloud.yandex.net
  port: 4286
  timeout: PT2S
  channels: 10
  fake: false
  loggingMinCallDuration: PT0.5S
  exponentialBackoffRetryPolicy:
    maxRetries: 11
    delay: PT0.1S
    maxDelay: PT1.5S
    delayFactor: 2

resourceManager:
  host: api-adapter.private-api.ycp.cloud.yandex.net
  port: 443
  maxRetries: 3
  timeout: PT10S

metrics:
  pullPort: 4302

repository:
  kikimr:
    host: ""
    discoveryEndpoint: kms-dn.ydb.cloud.yandex.net:2136
    database: /global/kms
    tablespace: /global/kms/main/
    maxResultSetSize: 5000
    useSSL: true
    readTableBatchSize: 50000
  ydbServiceAccountId: aje64bemb42jm155ligs

quota:
  defaultMaxKeysPerCloud: 100
  defaultMaxVersionsPerKey: 100

cluster:
  clusterId: abj

cache:
  refreshDuration: 10

specialKeys:
  refreshDuration: PT10S
  defaultRootKmsKeyId: m2RootKmsKeyId1

kmsTasks:
  versionDestroyScheduleInterval: PT1H
  keyRotateScheduleInterval: PT1H
  keyNextRotationDeferInterval: P1D
  keystoreRotateScheduleInterval: PT1H
  keystoreNextRotationDeferInterval: P1D
  deletedKeyKeepPeriod: PT0S
  cleanDeletedKeysTaskScheduleInterval: PT3H
  billingInterval: PT10M

rootKmsClient:
  fake: false
  hosts: [root-kms-${zone}1.cloud.yandex.net, root-kms-myt1.cloud.yandex.net, root-kms-sas1.cloud.yandex.net, root-kms-vla1.cloud.yandex.net]
  port: 4301
  tls: true
  maxRetries: 3
  timeout: PT4S

tokenService:
  port: 4282
  host: ts.private-api.cloud.yandex.net
  maxRetries: 3
  timeout: PT5S
  tls: true

tracer:
  serviceName: kms-control-plane
  host: "127.0.0.1"
  port: 5775

hsmFront:
  fake: false
  kmsHsmFrontClient:
    host: ""
    port: 4401
    timeout: PT2S
    maxRetries: 3
    tls: true
  kmsServiceId: kms
  hosts: [root-kms-${zone}2.cloud.yandex.net, root-kms-myt2.cloud.yandex.net, root-kms-sas2.cloud.yandex.net, root-kms-vla2.cloud.yandex.net]

oldAccessBindingClient:
  host: api-adapter.private-api.ycp.cloud.yandex.net
  port: 443
  maxRetries: 3
  timeout: PT10S
  tls: true

accessBindingClient:
  host: iam.private-api.cloud.yandex.net
  port: 4283
  maxRetries: 3
  timeout: PT10S
  tls: true

search:
  taskProcessorPoolName: default
  batchSize: 1000
  logbroker:
    discoveryEndpoint: lb.etn03iai600jur7pipla.ydb.mdb.yandexcloud.net:2135
    database: /global/b1gvcqr959dbmi1jltep/etn03iai600jur7pipla
    useSSL: true
    topic: /yc.search/search-access
