grpcServer:
  maxConcurrentRequests: 100
  port: ${api_port}
  reflectionEnabled: true
  certificatePemFile: /run/certificate-manager/certificate.pem

authClient:
  host: local-lb.cloud-lab.yandex.net
#  host: vla04-3ct5-11a.cloud.yandex.net
  port: 14286
  maxRetries: 11
  timeout: PT2S

accessCheck:
  providersFolderId: yc.certificate-manager.providers

security:
  systemKmsKeyId: ${system_kms_key_id}

kmsClient:
  host: cpl.kms.hw-blue.cloud-lab.yandex.net
  port: 8443
  tls: true
  maxRetries: 3
  timeout: PT2S

kmsCryptoClient:
  hosts: [dpl.kms.hw-blue.cloud-lab.yandex.net]
  port: 8443
  tls: true
  maxRetries: 3
  timeout: PT2S

# TODO: Remove from certificate-manager config.
iamConfig:
  host: unused
  port: 0
  tls: true
  maxRetries: 0
  timeout: PT0S

resourceManager:
  host: local-lb.cloud-lab.yandex.net
  #  host: vla04-3ct5-11a.cloud.yandex.net
  port: 14284
  maxRetries: 3
  timeout: PT10S

# TODO: Remove from certificate-manager config.
apiAdapter:
  host: unused
  port: 0
  maxRetries: 0
  timeout: PT0S

accessBindingClient:
  host: local-lb.cloud-lab.yandex.net
  #  host: vla04-3ct5-11a.cloud.yandex.net
  port: 14283
  tls: true
  maxRetries: 3
  timeout: PT5S

metrics:
  pullPort: 4302

yandexMonitoringMetrics:
  refreshPeriod: PT15S
  pullPort: 4303

repository:
  kikimr:
    host: ""
    discoveryEndpoint: u-lb.certificate-manager-hw-blue-lab.ydb.mdb.yandexcloud.net:2135
    database: /dev_global/certificate-manager
    tablespace: /dev_global/certificate-manager/main/
    useSSL: true
    sessionCreationTimeout: PT15S

quota:
  defaultMaxCertificatesPerCloud: 20
  defaultMaxDomainsPerCloud: 10

cluster:
  clusterId: ${id_prefix}

acme:
  providers: {}
  accountKeySize: 2048
  email: unused
  reportNotificationInterval: PT24H

solomonPusher:
  host: unused
  project: unused
  cluster: unused
  service: unused
  oauthTokenFile: "/dev/null"

renew:
  period: PT10M
  batch: 10
  renewBeforeExpirationPeriod: P0D
  renewAfterExpirationPeriod: P0D

# TODO: Looks pretty useless, remove from certificate-manager
healthCheckServer:
  port: 9444
  path: /ping

dns:
  hosts:
    - localhost
  maxRetries: 0
  systemZone:
    zoneId: unused
    fqdn: unused
    ttl: 0

cleanup:
  period: PT1M
  batch: 100
  cleanupAfter: P2D
  cleanupAccountDomainUsagesAfter: P300D

orderJob:
  minDelay: PT0S
  maxDelay: PT0S
  maxAge: PT0S
  cautiousAccountReusePeriod: PT0S
  challengeSuccessLimit: 0
  reuseAccountsForFolders: []

notification:
  clientConfig:
    host: unused
    port: 0
    maxRetries: 0
    timeout: PT0M
    tls: true
  period: PT0H
  notifyBeforeExpirationDays: []

scheduledDispatcher:
  interval: P500D
  period: PT1M
  limit: 100

dnsClient:
  host: unused
  port: 0
  tls: true
  maxRetries: 0
  timeout: PT0S

search:
  taskProcessorPoolName: default
  batchSize: 100
  logbroker:
    discoveryEndpoint: unused
    database: unused
    useSSL: true
    topic: unused

challengeStopList:
  httpDomains: []
  dnsDomains: []

trustedRoots:
  files: []

crtApi:
  minDelay: PT1M
  timeout: PT15S
  # The requests will be retried after minDelay, do not set this too high.
  numRetries: 2
  providers:
    INTERNAL_CA:
      # The ending slashes ARE important.
      endpoint: https://crt.cloud.yandex.net/api/certificate
      oauthTokenFile: /run/certificate-manager/cloud-crt-api-token
      defaultType: ca
      # https://abc.yandex-team.ru/services/yckms
      abcService: 4260
      warnAfter: PT1H
