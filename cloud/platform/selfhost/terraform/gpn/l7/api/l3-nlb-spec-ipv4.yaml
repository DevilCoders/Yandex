# Update:
#
#  $ ycp --profile gpn load-balancer network-load-balancer update cupsfkp9nkakccak6dcu -r l3-nlb-spec-ipv4.yaml
#

# Fields used for creation (also remove "address"):
#folder_id: bn3v8a9sj6u8ih3a088r # common
#region_id: ru-central1 # should be "ru-gpn" but L3 doesn't know it
#type: EXTERNAL


name: api-router-v4
description: "Public API"
labels: {}
listener_specs:
- name: "tls-v4"
  port: 443
  target_port: 2443
  protocol: TCP
  external_address_spec:
    address: 10.50.61.135
    ip_version: IPV4
attached_target_groups:
- target_group_id: cupgos9qc35nmmilth32 # api-router-with-v4
  health_checks:
  - name: "envoy-ping"
    timeout: 1s
    interval: 2s
    unhealthy_threshold: 2
    healthy_threshold: 2
    http_options:
      port: 30080
      path: /ready/no_drain
