authClient:
  host: as.private-api.cloud-preprod.yandex.net
  port: 4286
  maxRetries: 5
  timeout: 5
  tls: true

metrics:
  pullPort: 4302

cluster:
  clusterId: f99

resourceManager:
  host: rm.private-api.cloud-preprod.yandex.net
  port: 4284
  timeout: PT5S
  tls: true

kikimr:
  host: localhost
  discoveryEndpoint: lb.cc803kmei33k779pquc5.ydb.mdb.cloud-preprod.yandex.net
  port: 2135
  tablespace: /pre-prod_global/aoedsmvctptsmbkj4g90/cc803kmei33k779pquc5/${ydb_tablespace}
  database: /pre-prod_global/aoedsmvctptsmbkj4g90/cc803kmei33k779pquc5
  useSSL: true

healthCheck:
  port: 9982
  path: /ping

objectStorage:
  endpointPrivate: https://storage-idm.private-api.cloud-preprod.yandex.net:1443
  connectionTimeoutMs: 200
  socketTimeoutMs: 60000
  connectionTTL: PT30M
  maxConnectionsCount: 30
  errorRetryCount: 3
  retryIntervalMs: 1000

s3Client:
  endpoint: storage.cloud-preprod.yandex.net:443
  region: us-east-1
  connectionTimeout: 200
  socketTimeout: 600000
  connectionIdleTimeout: 300000
  connectionTTL: 1800000
  maxConnectionsCount: 30
  errorRetryCount: 3
  retryInterval: 1000
  pathToSecretKey: /run/trail/sa-objectstorage/secret.key
  pathToAccessKey: /run/trail/sa-objectstorage/access.key

preparer:
  destinations:
    - destination:
        installation:
          predefinedName: ${logbroker_destination_installation}
        topic: ${logbroker_destination_topic_prefix}yc-trail
        maxChunkBytes: 262144
      unparsed:
        installation:
          predefinedName: ${logbroker_destination_installation}
        topic: ${logbroker_destination_topic_prefix}yc-trail-unparsed
        maxChunkBytes: 262144
      unfiltered:
        installation:
          predefinedName: ${logbroker_destination_installation}
        topic: ${logbroker_destination_topic_prefix}yc-trail-unfiltered
        maxChunkBytes: 262144
      cloudLogging:
        installation:
          predefinedName: ${logbroker_destination_installation}
        topic: ${logbroker_cloud_logging_topic}
        maxChunkBytes: 262144
        messageFormat: LOGGING
        compressionCodec: ZSTD
      sources:
        - name: yc-events-override
          installation:
            predefinedName: ${logbroker_source_installation}
          topic: ${logbroker_source_topic}
          consumer: ${logbroker_source_consumer}
          maxMessages: 1600
          taskPoolSize: 0

e2ETestResources:
  saTrailE2eId: bfb0ujnv3id6lkc8ca1l
  saTrailE2eNoRoles1Id: bfbon3jrgvgab8lku5gv
  saTrailE2eNoRoles2Id: bfbio50enhd6pb4ehmep
  saTrailE2e1Id: bfb26hrmcmdgf6be79s5
  saTrailE2e2Id: bfbq4bkq1uojs65o111l
  saTrailE2eFolderViewerId: bfbfeoq705808m5k53rl
  testE2eBucket1Id: test-e2e-bucket-1
  testE2eBucket2Id: test-e2e-bucket-2
  testE2eLoggingId: af3smbmdi5fem54sra81
  defaultLoggingId: af3sj7d7vg32lq4m5plh
  cloudId: aoeg65j8d09cbn03rjpu
  folderId: aoed13imagmcglgptvgr

auditTrailsClient:
  host: trail.private-api.ycp.cloud-preprod.yandex.net
  port: 443
  timeout: PT10S
  tls: true

eventIngestionClient:
  host: ${ingest_api_host}
  port: 443
  timeout: PT10S
  tls: true

tokenService:
  host: ts.private-api.cloud-preprod.yandex.net
  port: 4282
  maxRetries: 3
  timeout: PT5S
  tls: true

jwtTokenService:
  host: iam.api.cloud-preprod.yandex.net
  port: 443
  timeout: PT5S
  tls: true

dplE2ETest:
  timeLimit: PT15M
  logBrokerInstallation:
    predefinedName: ${logbroker_source_installation}
  logBrokerTopic: /aoedsmvctptsmbkj4g90/e2e/yc-events-e2e
  afterCreateTrailDuration: PT1M

dplTestResources:
  cloudId: aoeg65j8d09cbn03rjpu
  resourcesFolderId: aoenl0bicf1ldatkoacv
  eventsFolderId: aoer26a5rbk1qejfbk3b
  bucketId: trail-e2e-data-plane
  organizationName: yc-organization-manager-yandex
  organizationId: yc.organization-manager.yandex
  serviceAccountId: bfb0tmjli12epmhcdd2f # sa-trail-e2e-dpl
  federatedUserAccountId: bfba8aps74hk2b2mgnkv #zhumash
  passportUserAccountId: bfb3m3obltmbd3kr235u # xseiko
  ingestServiceAccountId: bfb78iv9pn7l76cqq7qc # sa-trail-e2e-roles-audit-trails-event-writer

accessE2ETest:
  cloudId: aoeg65j8d09cbn03rjpu
  folderId: aoed13imagmcglgptvgr
  baseServiceAccount: bfb0ujnv3id6lkc8ca1l
  trailServiceAccount: bfb0ujnv3id6lkc8ca1l
  trailBucket: test-e2e-bucket-1
  bindingsServiceAccount: bfbt3go5b1j7ber8ruk5
  roleAccounts:
    NONE: bfb0r8i4kmsh8ug7nrut
    VIEWER: bfbfeoq705808m5k53rl
    EDITOR: bfb72rvadp0431uj91rj
    ADMIN: bfbku32r7e0po3loj5di
    AUDIT_TRAILS_CONFIG_VIEWER: bfbtokqnk3p6fdluman7
    AUDIT_TRAILS_VIEWER: bfb13e90gjbajuvdfi80
    AUDIT_TRAILS_EDITOR: bfb4n615u7kgiptvqemt
    AUDIT_TRAILS_EDITOR_WITHOUT_VIEWER_ON_CLOUD: bfbfc842micutglu8ctl
    AUDIT_TRAILS_ADMIN: bfbd3ir0ukv6bdjli8mi
    AUDIT_TRAILS_SUPPORT: bfbgmbi0e9foljr7kdo9
    AUDIT_TRAILS_SUPPORT_ADMIN: bfbr90usb9tfcst5mn7d
    AUDIT_TRAILS_ONCALL: bfbfuu84pmenpq7buu9v
    AUDIT_TRAILS_ONCALL_ADMIN: bfb6uqq30gjcm31goik3
    AUDIT_TRAILS_EVENT_WRITER: bfb78iv9pn7l76cqq7qc
    OTHER_FOLDER: bfb5i9qj4e9htb80s43v

iam:
  host: iam.private-api.cloud-preprod.yandex.net
  port: 4283
  maxRetries: 3
  timeout: PT10S
  tls: true

organizationManager:
  host: org.private-api.cloud-preprod.yandex.net
  port: 4290
  timeout: PT5S
  tls: true

cloudLogging:
  host: logs-cpl.private-api.ycp.cloud-preprod.yandex.net
  port: 443
  timeout: PT5S
  tls: true

systemAccount:
  common:
    type: INSTANCE_METADATA
  ydb:
    type: INSTANCE_METADATA

#tvm:
#  clientId: 2021125 # YC Cloud Trail ABC
#  secretFile: /run/trail/tvm-secret
#  destinationClients:
#    - 2001059 # Logbroker
