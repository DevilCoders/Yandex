apiVersion: v1
kind: PodList
items:
${infra_pod_spec}
- apiVersion: v1
  kind: Pod
  metadata:
    name: jaegermeister
    namespace: kube-system
    annotations:
      config_digest: ${config_digest}
      scheduler.alpha.kubernetes.io/critical-pod: ""
  spec:
    priority: 2000000001
    priorityClassName: system-cluster-critical
    hostNetwork: true
    initContainers:
    - name: deploy-configs
      image: registry.yandex.net/cloud/api/metadata:6c1bc05bc
      volumeMounts:
      - name: config-dir
        mountPath: /etc
        terminationGracePeriodSeconds: 30
    containers:
    - name: jaegermeister
      image: registry.yandex.net/cloud/api/jaegermeister:2bd63e494c
      env:
      - name: AWS_ACCESS_KEY_ID
        value: ${aws_access_key}
      - name: AWS_SECRET_ACCESS_KEY
        value: ${aws_secret_key}
      volumeMounts:
      - mountPath: /etc/jaegermeister/jaegermeister.yaml
        name: jaegermester-config
        readOnly: true
    volumes:
    - name: jaegermester-config
      hostPath:
        path: /etc/jaegermeister/jaegermeister.yaml
    - name: yandex-all-ca-pem
      hostPath:
        path: /etc/jaegermeister/ssl/certs/allCAs.pem
    - name: config-dir
      hostPath:
        path: /etc
