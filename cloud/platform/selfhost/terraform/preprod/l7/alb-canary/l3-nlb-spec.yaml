# Update:
#
#  $ ycp --profile preprod load-balancer network-load-balancer update ... -r l3-nlb-spec.yaml
#

# Fields used for creation (also remove "address"):
#folder_id: aoe4lof1sp0df92r6l8j # l7-common
#region_id: ru-central1
#type: EXTERNAL

name: alb-canary-lb-preprod
description: "LB for ALB Canary"
labels: {}
listener_specs:
- name: "tls-v6"
  port: 443
  target_port: 3443
  protocol: TCP
  external_address_spec:
    address: 2a0d:d6c0:0:ff1a::44
    ip_version: IPV6
    yandex_only: true
- name: "plaintext-v6"
  port: 80
  target_port: 80
  protocol: TCP
  external_address_spec:
    address: 2a0d:d6c0:0:ff1a::44
    ip_version: IPV6
    yandex_only: true
attached_target_groups:
- target_group_id: ... # canary-targetgroup
  health_checks:
  - name: "envoy-ping"
    timeout: 1s
    interval: 2s
    unhealthy_threshold: 2
    healthy_threshold: 2
    http_options:
      port: 80
      path: /ready/no_drain
