{
  "version": 4,
  "terraform_version": "1.0.10",
  "serial": 80,
  "lineage": "16ee3a5d-c334-6384-fe86-deae5b78da6c",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "ycp_certificatemanager_certificate_request",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "cert_provider": "INTERNAL_CA",
            "certificate": null,
            "chain": null,
            "challenge": [],
            "challenge_type": "CHALLENGE_TYPE_UNSPECIFIED",
            "created_at": "2022-05-13T12:09:46Z",
            "description": "",
            "domains": [
              "demo-l7.ycp.cloud-preprod.yandex.net"
            ],
            "folder_id": "aoernscbbg560jvhk69a",
            "id": "fd36pk4uq651k5bngke1",
            "issued_at": "2022-05-13T12:09:48Z",
            "issuer": "1.2.840.113549.1.9.1=#1612706b694079616e6465782d7465616d2e7275,1.2.840.113549.1.9.1=#1618636c6f75642d706b694079616e6465782d7465616d2e7275,CN=YandexCloudInternalIntermediateCA,OU=Yandex.Cloud,O=Yandex LLC,L=Moscow,ST=Russian Federation,C=RU",
            "kms_key_id": "",
            "labels": {},
            "name": "demo-l7",
            "not_after": "2023-05-13T12:09:47Z",
            "not_before": "2022-05-13T12:09:47Z",
            "private_key": null,
            "reference": [],
            "serial": "8b5604b865f8a3e1b729563b9c2ffb7c",
            "status": "ISSUED",
            "subject": "CN=demo-l7.ycp.cloud-preprod.yandex.net,OU=Infra,O=Yandex.Cloud,L=Moscow,ST=Moscow,C=RU",
            "timeouts": null,
            "type": "MANAGED",
            "updated_at": "2022-05-13T12:10:46Z"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_microcosm_instance_group_instance_group",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allocation_policy": [
              {
                "zone": [
                  {
                    "instance_tags_pool": [],
                    "zone_id": "ru-central1-a"
                  }
                ]
              }
            ],
            "application_load_balancer_spec": [
              {
                "max_opening_traffic_duration": "",
                "target_group_spec": [
                  {
                    "address_names": [
                      "ig-v6addr"
                    ],
                    "description": "",
                    "labels": {},
                    "name": ""
                  }
                ]
              }
            ],
            "application_load_balancer_state": [
              {
                "status_message": "",
                "target_group_id": "a5d7c8213jl9lgpkgg9f"
              }
            ],
            "confirmation_spec": [],
            "created_at": "2021-05-20T19:19:05Z",
            "deletion_protection": false,
            "deploy_policy": [
              {
                "max_creating": 0,
                "max_deleting": 0,
                "max_expansion": 0,
                "max_unavailable": 1,
                "startup_duration": "",
                "strategy": "PROACTIVE"
              }
            ],
            "description": "",
            "dry_run": null,
            "error": [],
            "folder_id": "aoernscbbg560jvhk69a",
            "health_checks_spec": [],
            "id": "amcpksu1m0quf3i9t0jv",
            "instance_group_id": "amcpksu1m0quf3i9t0jv",
            "instance_template": [
              {
                "boot_disk": [
                  {
                    "device_name": "",
                    "disk_id": "",
                    "disk_spec": [
                      {
                        "description": "",
                        "image_id": "fdvoujtrnj85g623bvrv",
                        "preserve_after_instance_delete": false,
                        "size": 10,
                        "snapshot_id": "",
                        "type_id": "network-hdd"
                      }
                    ],
                    "mode": "READ_WRITE"
                  }
                ],
                "cauth": false,
                "description": "",
                "fqdn": "",
                "fqdn_template": "",
                "hostname": "",
                "hostname_template": "",
                "internal_data_disk_id": "",
                "labels": {},
                "metadata": {
                  "user-data": "#cloud-config\nusers:\n- name: demoserver\n  sudo: False\nwrite_files:\n- path: /home/demoserver/ping\n  content: OK\n- path: /usr/bin/local/demoserver.py\n  content: |\n    from http.server import HTTPServer\n    from http.server import SimpleHTTPRequestHandler\n    import socket\n\n    class Srv(HTTPServer):\n        address_family = socket.AF_INET6\n\n    server = Srv(('::', 8000), SimpleHTTPRequestHandler)\n    server.serve_forever()\n- path: /etc/systemd/system/demoserver.service\n  content: |\n    [Unit]\n    Wants=network-online.target\n    After=network-online.target\n    StartLimitIntervalSec=0\n    [Service]\n    Type=simple\n    Restart=always\n    RestartSec=\n    User=demoserver\n    WorkingDirectory=/home/demoserver\n    ExecStart=/usr/bin/python3 /usr/bin/local/demoserver.py\n    [Install]\n    WantedBy=multi-user.target\nruncmd:\n- 'chown -R demoserver:demoserver /home/demoserver'\n- systemctl enable demoserver\n- systemctl start demoserver\n"
                },
                "name": "",
                "name_template": "",
                "network_interface": [
                  {
                    "network_id": "c64vqqt3eb7ls0chrj0t",
                    "primary_v4_address": [
                      {
                        "additional_fqdns": [],
                        "address": "",
                        "dns_record_spec": [],
                        "name": "ig-v4addr",
                        "one_to_one_nat": []
                      }
                    ],
                    "primary_v6_address": [
                      {
                        "additional_fqdns": [],
                        "address": "",
                        "dns_record_spec": [],
                        "name": "ig-v6addr",
                        "one_to_one_nat": []
                      }
                    ],
                    "security_group_ids": [],
                    "subnet_ids": [
                      "bucpba0hulgrkgpd58qp"
                    ]
                  }
                ],
                "network_settings": [],
                "pci_topology_id": "PCI_TOPOLOGY_ID_UNSPECIFIED",
                "placement_policy": [],
                "platform_id": "standard-v2",
                "resources": [
                  {
                    "core_fraction": 20,
                    "cores": 2,
                    "gpus": 0,
                    "memory": 1
                  }
                ],
                "scheduling_policy": [
                  {
                    "deny_deallocation": false,
                    "preemptible": false,
                    "service": false,
                    "start_without_compute": false,
                    "termination_grace_period": ""
                  }
                ],
                "secondary_disk": [],
                "service_account_id": "",
                "underlay_network": []
              }
            ],
            "labels": {},
            "load_balancer_spec": [],
            "load_balancer_state": [
              {
                "status_message": "",
                "target_group_id": ""
              }
            ],
            "managed_instance_statuses": {
              "AWAITING_STARTUP_DURATION": 0,
              "AWAITING_WARMUP_DURATION": 0,
              "CHECKING_HEALTH": 0,
              "CLOSING_TRAFFIC": 0,
              "CREATING_INSTANCE": 0,
              "DELETED": 0,
              "DELETING_INSTANCE": 0,
              "OPENING_TRAFFIC": 0,
              "PREPARING_RESOURCES": 0,
              "RUNNING_ACTUAL": 1,
              "RUNNING_OUTDATED": 0,
              "STARTING_INSTANCE": 0,
              "STOPPED": 0,
              "STOPPING_INSTANCE": 0,
              "UPDATING_INSTANCE": 0
            },
            "managed_instances_state": [
              {
                "latest_instances": [],
                "outdated_instances": [],
                "processing_count": 0,
                "running_actual_count": 1,
                "running_outdated_count": 0,
                "target_size": 1
              }
            ],
            "name": "demo-backend",
            "platform_l7_load_balancer_spec": [
              {
                "max_opening_traffic_duration": "",
                "preferred_ip_version": "IP_VERSION_UNSPECIFIED",
                "target_group_spec": [
                  {
                    "address_names": [
                      "ig-v6addr"
                    ],
                    "description": "",
                    "labels": {},
                    "name": ""
                  }
                ]
              }
            ],
            "platform_l7_load_balancer_state": [
              {
                "status_message": "",
                "target_group_id": "a5d7c8213jl9lgpkgg9f"
              }
            ],
            "reference": [],
            "scale_policy": [
              {
                "auto_scale": [],
                "fixed_scale": [
                  {
                    "size": 1,
                    "zone_size": []
                  }
                ],
                "test_auto_scale": []
              }
            ],
            "service_account_id": "bfb73m3egaqqbdngto5m",
            "status": "ACTIVE",
            "status_message": "",
            "timeouts": null,
            "variable": []
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_platform_alb_backend_group",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "created_at": "2021-05-20T19:20:26Z",
            "created_by": "",
            "description": "",
            "folder_id": "aoernscbbg560jvhk69a",
            "grpc": [],
            "http": [
              {
                "backend": [
                  {
                    "allow_connect": false,
                    "backend_weight": 0,
                    "dynamic_forward_proxy": [],
                    "healthchecks": [
                      {
                        "grpc": [],
                        "healthcheck_port": 0,
                        "healthy_threshold": 2,
                        "http": [
                          {
                            "host": "",
                            "path": "/ping",
                            "use_http2": false
                          }
                        ],
                        "interval": "2s",
                        "interval_jitter_percent": 0,
                        "plaintext": [],
                        "stream": [],
                        "timeout": "0.500s",
                        "tls": [],
                        "unhealthy_threshold": 2
                      }
                    ],
                    "http2_options": [],
                    "load_balancing_config": [],
                    "name": "default",
                    "passive_healthcheck": [],
                    "port": 8000,
                    "storage_bucket": [],
                    "target": [],
                    "target_group": [
                      {
                        "target_group_id": "a5d7c8213jl9lgpkgg9f"
                      }
                    ],
                    "target_groups": [],
                    "tcp_options": [],
                    "thresholds": [],
                    "tls": [],
                    "use_http2": false,
                    "weight": 0
                  }
                ],
                "connection": [],
                "cookie": [],
                "header": []
              }
            ],
            "http_router_ids": [
              "a5dr5ojq0j4h077vcf9q"
            ],
            "id": "a5d9i0eoc1funlf5ec9g",
            "labels": {},
            "load_balancer_ids": [],
            "modified_at": "1970-01-01T00:00:00Z",
            "name": "demo-l7",
            "stream": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "ycp_microcosm_instance_group_instance_group.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_platform_alb_http_router",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "created_at": "2021-05-20T16:06:03Z",
            "created_by": "",
            "deletion_protection": false,
            "description": "",
            "folder_id": "aoernscbbg560jvhk69a",
            "id": "a5dr5ojq0j4h077vcf9q",
            "labels": {},
            "load_balancer_ids": [
              "a5d1tohv8mvgdenna2np"
            ],
            "modified_at": "1970-01-01T00:00:00Z",
            "name": "demo-l7",
            "route_options": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_platform_alb_load_balancer",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allocation_policy": [
              {
                "location": [
                  {
                    "disable_traffic": false,
                    "subnet_id": "bucpba0hulgrkgpd58qp",
                    "zone_id": "ru-central1-a"
                  }
                ]
              }
            ],
            "close_traffic_policy": "CLOSE_TRAFFIC_POLICY_UNSPECIFIED",
            "created_at": "2021-05-26T20:05:48Z",
            "created_by": "",
            "deletion_protection": false,
            "description": "",
            "folder_id": "aoernscbbg560jvhk69a",
            "id": "a5d1tohv8mvgdenna2np",
            "internal": false,
            "juggler_host": "cloud_preprod_l7-demo",
            "labels": {},
            "listener": [
              {
                "endpoint": [
                  {
                    "address": [
                      {
                        "external_ipv4_address": [],
                        "external_ipv6_address": [
                          {
                            "address": "2a0d:d6c1:0:ff1c::318",
                            "yandex_only": false
                          }
                        ],
                        "internal_ipv4_address": []
                      }
                    ],
                    "ports": [
                      443
                    ]
                  }
                ],
                "http": [],
                "name": "tls",
                "stream": [],
                "tls": [
                  {
                    "default_handler": [
                      {
                        "certificate_ids": [
                          "fd36pk4uq651k5bngke1"
                        ],
                        "http_handler": [
                          {
                            "allow_http10": false,
                            "external_authorization": [],
                            "http2_options": [
                              {
                                "initial_connection_window_size": 1048576,
                                "initial_stream_window_size": 1048576,
                                "max_concurrent_streams": 100
                              }
                            ],
                            "http_router_id": "a5dr5ojq0j4h077vcf9q",
                            "is_edge": true
                          }
                        ],
                        "stream_handler": [],
                        "tls_options": []
                      }
                    ],
                    "sni_handlers": [],
                    "tcp_options": [
                      {
                        "connection_buffer_limit_bytes": 32768
                      }
                    ]
                  }
                ]
              }
            ],
            "log_group_id": "eol351tick4500jh2vg6",
            "modified_at": "2022-05-13T12:10:06Z",
            "name": "demo-l7",
            "network_id": "c64vqqt3eb7ls0chrj0t",
            "persistent_logs": false,
            "region_id": "ru-central1",
            "security_group_ids": [],
            "solomon_cluster_name": "demo-l7",
            "status": "ACTIVE",
            "timeouts": null,
            "tracing": [
              {
                "service_name": "demo-l7"
              }
            ],
            "traffic_scheme": "TRAFFIC_SCHEME_MULTI_INTERFACE"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "ycp_platform_alb_http_router.this",
            "ycp_vpc_address.this",
            "ycp_certificatemanager_certificate_request.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_platform_alb_virtual_host",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "authority": [
              "*"
            ],
            "http_router_id": "a5dr5ojq0j4h077vcf9q",
            "id": "a5dr5ojq0j4h077vcf9q/default",
            "modify_request_headers": [],
            "modify_response_headers": [],
            "name": "default",
            "ports": [],
            "rate_limit": [],
            "route": [
              {
                "disable_external_authorization": false,
                "grpc": [],
                "http": [
                  {
                    "direct_response": [],
                    "match": [
                      {
                        "http_method": [],
                        "path": [
                          {
                            "exact_match": "",
                            "prefix_match": "/"
                          }
                        ]
                      }
                    ],
                    "redirect": [],
                    "route": [
                      {
                        "auto_host_rewrite": false,
                        "backend_group_id": "a5d9i0eoc1funlf5ec9g",
                        "host_rewrite": "",
                        "idle_timeout": "",
                        "prefix_rewrite": "",
                        "retry_policy": [],
                        "support_websockets": false,
                        "timeout": "",
                        "upgrade_types": []
                      }
                    ]
                  }
                ],
                "name": "default",
                "rate_limit": [],
                "route_options": []
              }
            ],
            "route_options": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "ycp_microcosm_instance_group_instance_group.this",
            "ycp_platform_alb_backend_group.this",
            "ycp_platform_alb_http_router.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "ycp_vpc_address",
      "name": "this",
      "provider": "provider[\"terraform.storage.cloud-preprod.yandex.net/yandex-cloud/ycp\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "created_at": "2021-05-26T20:05:47Z",
            "description": "",
            "external_ipv4_address": [],
            "external_ipv4_address_spec": [],
            "folder_id": "aoernscbbg560jvhk69a",
            "id": "fo2dlchitm7pq6hreg95",
            "internal_ipv4_address": [],
            "internal_ipv4_address_spec": [],
            "ip_version": "IPV6",
            "ipv6_address": [
              {
                "address": "2a0d:d6c1:0:ff1c::318",
                "requirements": [
                  {
                    "ddos_protection_provider": "",
                    "hints": [],
                    "outgoing_smtp_capability": ""
                  }
                ],
                "subnet_id": ""
              }
            ],
            "ipv6_address_spec": [
              {
                "address": "",
                "requirements": [
                  {
                    "ddos_protection_provider": "",
                    "hints": [],
                    "outgoing_smtp_capability": ""
                  }
                ],
                "subnet_id": ""
              }
            ],
            "labels": {},
            "name": "demo-l7-ipv6",
            "reserved": true,
            "timeouts": null,
            "type": "EXTERNAL",
            "used": true
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    }
  ]
}
