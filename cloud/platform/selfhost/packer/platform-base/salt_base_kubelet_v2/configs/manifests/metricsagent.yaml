apiVersion: v1
kind: Pod
metadata:
  name: metrics-agent
  namespace: kube-system
  annotations:
    config_digest: 6fa30aba7514e5145c8d3cfdc1671d677ca326c933c6d1814ee7dc1e17e7292f
    scheduler.alpha.kubernetes.io/critical-pod: ""
  labels:
    role: api
spec:
  priority: 2000000001
  hostNetwork: true
  hostPID: true
  priorityClassName: system-cluster-critical
  containers:
  - name: metricsagent
    image: registry.yandex.net/cloud/api/metricsagent:6af7679
    imagePullPolicy: IfNotPresent
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        memory: 128Mi
    volumeMounts:
    - name: metricsagent-config
      mountPath: /etc/metricsagent/metricsagent.yaml
      readOnly: true
  volumes:
    - name: metricsagent-config
      hostPath:
        path: /etc/metricsagent/metricsagent.yaml
