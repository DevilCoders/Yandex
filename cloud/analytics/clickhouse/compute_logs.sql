CREATE TABLE %(table_name)s
(
    vm_id String,
        vm_start DateTime,
        vm_finish DateTime,
        slice_time DateTime,
        slice_time_str String,
        vm_age UInt64,
        vm_age_months Float64,
        vm_age_weeks Float64,
        vm_age_days Float64,
        slice_time_day Date,
        slice_time_week Date,
        slice_time_month Date,
        slice_time_quarter Date,
        ba_id String,
        cloud_id String,
        folder_id String,
        node_id String,
        node_az String,
        vm_cores UInt64,
        vm_gpus UInt64,
        vm_core_fraction UInt64,
        vm_cores_real Float64,
        vm_memory Float64,
        vm_config String,
        vm_memory_to_cores_ratio Float64,
        node_platform String,
        vm_preemptible UInt64,
        vm_public_fips UInt64,
        vm_product_ids String,
        vm_product_id String,
        vm_product_name String,
        vm_labels_str String,
        vm_managed_kubernetes_cluster_id String,
        vm_origin String,
        ba_is_fraud UInt64, 
        ba_name String, 
        ba_person_type String, 
        ba_type String, 
        ba_channel String, 
        ba_segment String, 
        ba_board_segment String, 
        ba_user_email String, 
        ba_client_name String, 
        ba_state String, 
        vm_is_service String, 
        ba_block_reason String, 
        ba_sales_name String, 
        ba_architect String, 
        ba_paid_status String, 
        ba_m_cohort String,
        ba_w_cohort String,
        node_cores_total Float64,
        node_memory_total Float64,
        node_cores_free Float64,
        node_memory_free Float64,
        vm_price_1h_cpu Float64,
        vm_price_1h_ram Float64,
        vm_price_1h_gpu Float64,
        vm_price_lifetime Float64,
        vm_price_1h Float64,
        vm_price_4h Float64
)
ENGINE = ReplicatedMergeTree('/clickhouse/tables/{shard}/%(table_name)s', '{replica}')
ORDER BY(vm_id,vm_start) PARTITION BY toYYYYMM(slice_time)
