apiVersion: v1
kind: Pod
metadata:
  name: solomon-agent
  namespace: kube-system
  annotations:
    scheduler.alpha.kubernetes.io/critical-pod: ""
  labels:
    role: api
spec:
  priority: 2000000001
  hostNetwork: true
  hostPID: true
  priorityClassName: system-cluster-critical
  containers:
    - name: solomon-agent
      image: cr.yandex/crp71i0m8b2qn22pp957/solomon-agent:${solomon_version}
      imagePullPolicy: IfNotPresent
      resources:
        requests:
          memory: "384Mi"
        limits:
          memory: "384Mi"
      volumeMounts:
        - name: solomon-agent-config
          mountPath: /etc/solomon-agent/
          readOnly: true
        - name: logs-volume
          mountPath: /var/log/yc
          terminationGracePeriodSeconds: 30
        - name: media-volume
          mountPath: /media/yc
          terminationGracePeriodSeconds: 30
  volumes:
    - name: logs-volume
      hostPath:
        path: /var/log/yc
        type: DirectoryOrCreate
    - name: media-volume
      hostPath:
        path: /media/yc
        type: DirectoryOrCreate
    - name: solomon-agent-config
      hostPath:
        path: /etc/solomon-agent
