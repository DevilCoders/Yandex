core:
    tempfile:
        prefix: gcfg
    text:
        indent: "    "
backend:
    logging:
        logdir: /usr/local/www/logs
        logtpl: current-gencfgd-%(port)s-loadlog
        dbglogtpl: current-gencfgd-%(port)s-dbg-loadlog
    api:
        url: "http://api.gencfg.yandex-team.ru"
        resources:
            build_status:
                delay: 1800
        version: "1.0"
    wbe:
        url: "http://wbe.gencfg.yandex-team.ru"
        version: "1.0"
looper:
    logging:
        logdir: /usr/local/www/logs
        logtpl: current-gencfgd-%(port)s-loadlog
        dbglogtpl: current-gencfgd-%(port)s-dbg-loadlog
services:
    abc:
        rest:
            url: https://abc-back.yandex-team.ru/api/v4
    qloud:
        allocated_resources:
            test:
                url: https://qloud-test.yandex-team.ru/api/stats/allocated
            prestable:
                url: https://qloud.yandex-team.ru/api/stats/allocated
            stable:
                url: https://platform.yandex-team.ru/api/stats/allocated
    dbaas:
        rest:
            url: https://api.db.yandex-team.ru/
        gencfg_graphs:
            cid: e431001c-87b7-4240-b0af-b2b2e8d183eb
            hosts: [man-wwtufkajbj4qp4vv.db.yandex.net, vla-elgry6um232uwdqo.db.yandex.net]
            database: gencfg_graphs
            user: kimkim
            password: aevohngaC0fahchaeh3yohp7eic
            client_port: 9000
            http_port: 8123
    nanny:
        rest:
            url: http://nanny.yandex-team.ru/
            path:
                services: /v2/services/
                tickets: /v1/tickets/
    startrek:
        http:
            url: https://st.yandex-team.ru/
        rest:
            url: https://st-api.yandex-team.ru/
    sandbox:
        xmlrpc:
            url: https://sandbox.yandex-team.ru/sandbox/xmlrpc
        http:
            tasks:
                url: https://sandbox.yandex-team.ru/sandbox/tasks/view?task_id=
        rest:
            url: https://sandbox.yandex-team.ru:443/api/v1.0
    staff:
        http:
            url: https://staff.yandex-team.ru/
        rest:
            v1:
                url: https://api.staff.yandex-team.ru/
            v3:
                url: https://staff-api.yandex-team.ru/v3
    clusterstate:
        rest:
            url: https://clusterstate.yandex-team.ru/api/v1
    blackbox:
        rest:
            url: http://blackbox-ipv6.yandex-team.ru/blackbox/
    bot:
        rest:
            consistof:
                url: https://bot.yandex-team.ru/api/consistof.php
            storages_by_invnum:
                url: http://bot.yandex-team.ru/api/storages-by-serverinv.php
    oops:
        rest:
            url: https://oops.yandex-team.ru/api/
            hosts:
                url: http://bot.yandex-team.ru/api/view.php?name=view_oops_hardware
                json_url: http://bot.yandex-team.ru/api/view.php?name=view_oops_hardware&format=json
            ip_broker:
                url: https://oops.yandex-team.ru/api/hosts/ip-broker-info
            fqdns:
                url: https://oops.yandex-team.ru/api/hosts/fqdn
    mongo:
        heartbeat: # database with heartbeat table
            instances: myt1-0559.search.yandex.net:27017,hb-dbs05.search.yandex.net:27017,hb-dbs01.search.yandex.net:27017,iva1-0435.search.yandex.net:27017,vla1-4606.search.yandex.net:27017 # group ALL_HEARTBEAT_MONGODB
            replicaset: heartbeat
            db: heartbeat
        instanceusage: # database with instanceusage/instanceusagetagcache tables
            instances: sas1-8999.search.yandex.net:27017,myt0-4019.search.yandex.net:27017,sas1-6859.search.yandex.net:27017,vla1-3212.search.yandex.net:27017,myt0-4011.search.yandex.net:27017 # group ALL_HEARTBEAT_B_MONGODB
            replicaset: heartbeat_mongodb_b
            db: heartbeat
        cache: # database with cache on gencfg tags, verified commits, etc.
            instances: vla1-3984.search.yandex.net:27017,myt0-4012.search.yandex.net:27017,sas1-6063.search.yandex.net:27017,myt0-4019.search.yandex.net:27017,sas1-6136.search.yandex.net:27017 # group ALL_HEARTBEAT_C_MONGODB
            replicaset: heartbeat_mongodb_c
            db: topology_commits
    trello:
        rest:
            url: https://api.trello.com/1
            application_key: 7a83a186ae76e5da17e227465dab21a4
            token: 120710718a82896918b95161862cfab8c2c0c72645ea8575cde271040f521e15
            board: 567d555f5e3333372e31451c
    putilin_graphs:
        rest:
            url: http://chgraphs.clusterstate.yandex-team.ru
            startts: 1471269770
    statface:
        rest:
            url: https://upload.stat.yandex-team.ru/_api
            auth:
                login: robot_kimkim
                password: niAc4alIza54bul
        http:
            url: https://stat.yandex-team.ru
    racktables:
        l3nets:
            url: https://racktables.yandex.net/export/l3-tors.txt
        slb:
            get:
                url: https://ro.racktables.yandex.net/export/slb-api.php
            list_:
                url: https://racktables.yandex.net/export/golem-slb-list.php?no_rslist=1  # RX-357 (list of all slbs in racktables)
        hbf:
            http:
                services:
                    url: https://racktables.yandex.net/index.php?page=services&tab=projects
            rest:
                url: https://racktables.yandex-team.ru/export/project-id.php
                all_macroses_url: https://ro.racktables.yandex.net/export/network-macros-owners.php  # GENCFG-2390
        ip4tunnel:
            rest:
                updateurl: https://racktables.yandex.net/export/map64request.php
                geturl: https://racktables.yandex.net/export/map64.json
    clickhouse:
        instances: ['man1-8406.search.yandex.net:17352', 'vla1-4552.search.yandex.net:17352', 'sas1-1716.search.yandex.net:17352'] # group ALL_GENCFG_CLICKHOUSE
    telegram:
        botname: gencfg-announcer
        ids:
            gencfg_support: "-1001062672577"
    capaview:
        usage:
            rest:
                url: http://capaview.clusterstate.yandex-team.ru/raw_data/get_usage_and_allocated_stats
        optimization:
            config:
                followers: [sereglond, kimkim]
            rest:
                url: http://capaview.clusterstate.yandex-team.ru/api/optimization_wave
kpi:
    reports:
        -   name: Yandex/Gencfg/Commits/GreenLevel5
            type: exact
            title: Time when gencfg trunk build is broken
            scale: i
            signals:
                -  name: gencfg_not_working
                   type: number
            report_cgi: _fg2=1&_graph_json_config=%7B%22graphs%22%3A%20%5B%7B%22fields%22%3A%20%5B%22gencfg_not_working%22%5D%2C%20%22x_field%22%3A%20%22fielddate%22%2C%20%22scale%22%3A%20%22i%22%2C%20%22type%22%3A%20%22stack%22%7D%5D%7D&_type=visual&scale=i&visualiser=HighStock&_period_distance=30000
        -   name: Yandex/Gencfg/SandboxTasks/SchedulersKpi4
            type: period
            title: Sandbox Schedulers Time Since Last Success
            scale: i
            signals:
                -   name: sandbox_scheduler_9499
                    type: number
                -   name: sandbox_scheduler_9498
                    type: number
                -   name: sandbox_scheduler_8779
                    type: number
                -   name: sandbox_scheduler_8573
                    type: number
                -   name: sandbox_scheduler_8295
                    type: number
                -   name: sandbox_scheduler_7991
                    type: number
                -   name: sandbox_scheduler_7335
                    type: number
                -   name: sandbox_scheduler_6104
                    type: number
                -   name: sandbox_scheduler_6096
                    type: number
                -   name: sandbox_scheduler_4227
                    type: number
                -   name: sandbox_scheduler_2504
                    type: number
                -   name: sandbox_scheduler_2489
                    type: number
                -   name: sandbox_scheduler_2074
                    type: number
                -   name: sandbox_scheduler_1919
                    type: number
                -   name: sandbox_scheduler_1512
                    type: number
                -   name: sandbox_scheduler_1307
                    type: number
                -   name: sandbox_scheduler_981
                    type: number
                -   name: sandbox_scheduler_932
                    type: number
                -   name: sandbox_scheduler_931
                    type: number
                -   name: sandbox_scheduler_927
                    type: number
                -   name: sandbox_scheduler_926
                    type: number
                -   name: sandbox_scheduler_924
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&scale=i&_graph_field=sandbox_scheduler_9499&_graph_field=sandbox_scheduler_9498&_graph_field=sandbox_scheduler_8573&_graph_field=sandbox_scheduler_8295&_graph_field=sandbox_scheduler_7991&_graph_field=sandbox_scheduler_7335&_graph_field=sandbox_scheduler_6104&_graph_field=sandbox_scheduler_6096&_graph_field=sandbox_scheduler_4227&_graph_field=sandbox_scheduler_2504&_graph_field=sandbox_scheduler_2489&_graph_field=sandbox_scheduler_2074&_graph_field=sandbox_scheduler_1919&_graph_field=sandbox_scheduler_1512&_graph_field=sandbox_scheduler_1307&_graph_field=sandbox_scheduler_981&_graph_field=sandbox_scheduler_932&_graph_field=sandbox_scheduler_931&_graph_field=sandbox_scheduler_927&_graph_field=sandbox_scheduler_926&_graph_field=sandbox_scheduler_924&_graph_title=Sandbox%20Schedulers%20Time%20Since%20Last%20Success&_graph_json_config=%7B%22graphs%22%3A%20%5B%7B%22titles%22%3A%20%7B%22sandbox_scheduler_9499%22%3A%20%22Sync%20staff%20groups%22%2C%20%22sandbox_scheduler_9498%22%3A%20%22Sync%20abc%20groups%22%2C%20%22sandbox_scheduler_8295%22%3A%20%22Update%20nanny%20services%20cache%22%2C%20%22sandbox_scheduler_1919%22%3A%20%22Update%20kpi%20graphics%22%2C%20%22sandbox_scheduler_6096%22%3A%20%22Update%20dns%20cache%20of%20virtual%20machines%22%2C%20%22sandbox_scheduler_927%22%3A%20%22Move%20free%20hosts%20to%20reserved%20group%22%2C%20%22sandbox_scheduler_1512%22%3A%20%22Cycle%20unworking%20machines%20%28move%20working%20machines%20from%20ALL_UNWORKING%20group%22%2C%20%22sandbox_scheduler_4227%22%3A%20%22Update%20groups%20with%20monitoring%20ports%20ready%22%2C%20%22sandbox_scheduler_924%22%3A%20%22Update%20ipv4/ipv6%20addrs%22%2C%20%22sandbox_scheduler_1791%22%3A%20%22Build%20balancer%20for%20gencfg%20group%20service%22%2C%20%22sandbox_scheduler_8573%22%3A%20%22Move%20background%20groups%22%2C%20%22sandbox_scheduler_981%22%3A%20%22Updated%20hosts%20info%20from%20hb%22%2C%20%22sandbox_scheduler_932%22%3A%20%22Rename%20hosts%20based%20on%20invnum%20information%22%2C%20%22sandbox_scheduler_931%22%3A%20%22Update%20invnum/dc/queue/switch/rack/vlan%20for%20all%20hosts%22%2C%20%22sandbox_scheduler_2489%22%3A%20%22Create%20json%20with%20mapping%20%28group%20-%3E%20instances%22%2C%20%22sandbox_scheduler_2074%22%3A%20%22Remove%20fired%20group%20owners/watchers%22%2C%20%22sandbox_scheduler_7991%22%3A%20%22Sync%20slbs%20with%20racktables%22%2C%20%22sandbox_scheduler_2504%22%3A%20%22Export%20gencfg%20project_ids%20to%20hbf%22%2C%20%22sandbox_scheduler_926%22%3A%20%22Sync%20with%20bot%22%2C%20%22sandbox_scheduler_1307%22%3A%20%22Create%20files%20with%20%3Chosts%3E%20and%20%3Cowners%3E%20of%20all%20gencfg%20groups%20in%20order%20to%20export%20this%20to%20cauth.%22%2C%20%22sandbox_scheduler_7335%22%3A%20%22Export%20mtn%20hosts%20dns%20cache%20to%20mongo%20%28db%20%3Ctopology_commits%3E%20table%20%3Cgencfg_dns%3E%22%2C%20%22sandbox_scheduler_6104%22%3A%20%22Update%20ipv4tunnels%20for%20groups%20with%20internet%20tunnels%20required%22%7D%7D%5D%7D
        -   name: Yandex/Gencfg/SandboxTasks/Timings2
            type: period
            title: Gencfg Sandbox Tasks Timings
            scale: h
            signals:
                -   name: test_config_generator_time
                    type: number
                -   name: build_config_generator_time
                    type: number
                -   name: release_config_generator_time
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&_graph_bdma_window=240&scale=h&_graph_field=test_config_generator_time&_graph_field=build_config_generator_time&_graph_field=release_config_generator_time&_graph_title=Gencfg%20Sandbox%20Tasks%20Timings&_graph_json_config=%7B%22graphs%22%3A%5B%7B%22titles%22%3A%7B%22build_config_generator_time%22%3A%20%22BUILD_CONFIG_GENERATOR%22%2C%20%22release_config_generator_time%22%3A%20%22RELEASE_CONFIG_GENERATOR%22%2C%20%22test_config_generator_time%22%20%3A%20%22TEST_CONFIG_GENERATOR%22%7D%7D%5D%7D
        -   name: Yandex/Gencfg/Commits/Counts2
            type: period
            title: Gencfg Commits Counts
            scale: h
            incremental: True
            signals:
                -   name: kimkim_commit_count
                    type: number
                -   name: noninterface_commit_count
                    type: number
                -   name: interface_commit_count
                    type: number
                -   name: service_commit_count
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&_graph_bdma_window=5&scale=h&_graph_field=noninterface_commit_count&_graph_field=interface_commit_count&_graph_field=service_commit_count&_graph_field=kimkim_commit_count&_graph_title=Gencfg%20commit%20count&_graph_json_config=%7B%22graphs%22%3A%5B%7B%22titles%22%3A%7B%22interface_commit_count%22%3A%20%22Interface%20Commit%20Count%22%2C%20%22noninterface_commit_count%22%3A%20%22Manual%20Commit%20Count%22%2C%20%22service_commit_count%22%20%3A%20%22Service%20Commit%20Count%22%2C%20%22kimkim_commit_count%22%20%3A%20%22Kimkim%20Commit%20Count%22%7D%7D%5D%7D
        -   name: Yandex/Gencfg/Commits/GreenLevel2
            type: period
            title: Gencfg Commits Green Level
            scale: h
            signals:
                -   name: green_time_perc
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&_graph_bdma_window=5&scale=h&_graph_field=green_time_perc&_graph_title=Percentage%20of%20gencfg%20working&_graph_type=stack
        -   name: Yandex/Gencfg/Resources/MetaPrjs/AssignedMachines
            type: period
            title: Number Of Machines In Master Groups
            scale: h
            signals:
                -   name: addrs_machine_count
                    type: number
                -   name: disk_machine_count
                    type: number
                -   name: freshness_machine_count
                    type: number
                -   name: imgs_machine_count
                    type: number
                -   name: internal_machine_count
                    type: number
                -   name: mail_machine_count
                    type: number
                -   name: maintenance_machine_count
                    type: number
                -   name: music_machine_count
                    type: number
                -   name: news_machine_count
                    type: number
                -   name: reserve_machine_count
                    type: number
                -   name: robot_machine_count
                    type: number
                -   name: saas_machine_count
                    type: number
                -   name: unknown_machine_count
                    type: number
                -   name: unsorted_machine_count
                    type: number
                -   name: video_machine_count
                    type: number
                -   name: web_machine_count
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&_graph_bdma_window=5&scale=h&_graph_field=addrs_machine_count&_graph_field=disk_machine_count&_graph_field=freshness_machine_count&_graph_field=imgs_machine_count&_graph_field=internal_machine_count&_graph_field=mail_machine_count&_graph_field=maintenance_machine_count&_graph_field=music_machine_count&_graph_field=news_machine_count&_graph_field=reserve_machine_count&_graph_field=robot_machine_count&_graph_field=saas_machine_count&_graph_field=unknown_machine_count&_graph_field=unsorted_machine_count&_graph_field=video_machine_count&_graph_field=web_machine_count&_graph_title=Machine%20Count%20By%20MetaProject(In%20Gb)&_graph_sort_lines_by=last_value_desc&_graph_type=stack
        -   name: Yandex/Gencfg/Resources/Metaprj/AssignedMemory
            type: period
            title: Number Of Memory Assigned To Instances
            scale: h
            signals:
                -   name: addrs_assigned_memory
                    type: number
                -   name: disk_assigned_memory
                    type: number
                -   name: freshness_assigned_memory
                    type: number
                -   name: imgs_assigned_memory
                    type: number
                -   name: internal_assigned_memory
                    type: number
                -   name: mail_assigned_memory
                    type: number
                -   name: maintenance_assigned_memory
                    type: number
                -   name: music_assigned_memory
                    type: number
                -   name: news_assigned_memory
                    type: number
                -   name: reserve_assigned_memory
                    type: number
                -   name: robot_assigned_memory
                    type: number
                -   name: saas_assigned_memory
                    type: number
                -   name: unknown_assigned_memory
                    type: number
                -   name: unsorted_assigned_memory
                    type: number
                -   name: video_assigned_memory
                    type: number
                -   name: web_assigned_memory
                    type: number
            report_cgi: _fg2=1&_type=visual&_period_distance=8760&_graph_bdma_window=5&scale=h&_graph_field=addrs_assigned_memory&_graph_field=disk_assigned_memory&_graph_field=freshness_assigned_memory&_graph_field=imgs_assigned_memory&_graph_field=internal_assigned_memory&_graph_field=mail_assigned_memory&_graph_field=maintenance_assigned_memory&_graph_field=music_assigned_memory&_graph_field=news_assigned_memory&_graph_field=reserve_assigned_memory&_graph_field=robot_assigned_memory&_graph_field=saas_assigned_memory&_graph_field=unknown_assigned_memory&_graph_field=unsorted_assigned_memory&_graph_field=video_assigned_memory&_graph_field=web_assigned_memory&_graph_title=Memory%20Allocated%20By%20MetaProject&_graph_sort_lines_by=last_value_desc&_graph_type=stack

constants:
    portovm:
        itype: portovm
    hbf:
        vlans: [vlan688, vlan788]
