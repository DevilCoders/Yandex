<Collection id="yandsearch" autostart="must">

    <UserParams>
        NoAutoDetectUtf8Keys

        Pruning
    </UserParams>


    AbortTout 600000000

    EmergencyFile ./controls/degrade

    DbgReqsQueueSize 100
    DbgReqsThreads 2

    ElasticQueues yes

    EnableCheckConfig ${EnableCheckConfig or 'yes'}
    EnableIndexFactorAnnWadData True
    EnableIndexMegaWad False
    EnablePanther True

    EstimateReqDurationOptions 500000 70

    FactorsQueueSize 0
    FactorsThreads  ${NCPU}

    IndexDir ${ IndexDir and IndexDir or './database' }

    LongReqsQueueSize 1000
    LongReqsThreads 2

    MXNetFile ${ (IndexDir and IndexDir or './database') .. '/models.archive' }

    MaxIntervalLimit=50000

    PreSearchQueueSize: 50
    PreSearchThreads: ${ PreSearchThreads or 20}

    PrefetchSize ${ PrefetchSize or 0 }
    PrefetchSteps ${ PrefetchSteps or 0 }

    PruningDocumentCount 7500
    PruningLimits "web" 7500, "for" 4000

    RequestQueueSize 0
    RequestThreads ${NCPU}
    RequestTout 11000000

    RequiredIndexFiles indexaa indexarc indexdir indexerf2 indexfrq indexfrq indexherf indexinv indexinvhash indexkey indexnavutf_dnorm index.omni index.refarc index.refaww index.refdir index.refdmap index.refinv index.refkey index.reflerf index.refxmap indexregerf indexregerfcomp indexregex indexregherf indexsent indexuserdoppurldat indexuserdoppurlinv indexuserdoppurlkey indexuserurldat indexuserurlinv indexuserurlkey

    SearchType ${ SearchType or 'web' }

    ServiceName VLA_WEB_PLATINUM_JUPITER_BASE

    SnippetQueueSize 0
    SnippetThreads 8

    SuperMindSharedFile ${SuperMindSharedFile or '/run/shm/basesearch.supermind'}
</Collection>

<Server>
    Compression true

    ConfigVersion stable-102-r93

    Connections ${1 + NCPU * 150}

    LoadLog ${ LoadLog and LoadLog or './loadlog' }

    NehPorts netliba:+1
    NehThreads 4

    PassageLog ${ PassageLog and PassageLog or './passagelog' }

    Port 8041

    QueueSize ${1 + NCPU * 10}

    Threads ${1 + NCPU}
</Server>

