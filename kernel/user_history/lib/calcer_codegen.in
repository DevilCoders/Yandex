CalcerConfigs {
    ClassName: "TFadingEmbeddingsLogDtBigramsFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Aggregators {
            Type: AT_IDENTITY
            Params: 1
            Params: 2
            Params: 3
            Params: 4
            Params: 5
            Params: 6
            Params: 7
            Params: 8
            Params: 9
            Params: 10
            Params: 11
            Params: 12
            Params: 13
            Params: 14
            Params: 15
            Params: 16
            Params: 17
        }
    }
}

BoosterConfigs {
    ClassName: "TFadingEmbeddingsLogDtBigramsFeaturesBooster"
    CalcerClassNames: "TFadingEmbeddingsLogDtBigramsFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TFadingEmbeddingsLogDtBigramsQueryPartFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Aggregators {
            Type: AT_IDENTITY
            Params: 1
            Params: 2
            Params: 3
            Params: 4
            Params: 5
            Params: 6
        }
    }
}

BoosterConfigs {
    ClassName: "TFadingEmbeddingsLogDtBigramsQueryPartFeaturesBooster"
    CalcerClassNames: "TFadingEmbeddingsLogDtBigramsQueryPartFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TShortClusteredEmbeddingsDocFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        WeightsIndex: 0
        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.3
            Params: 0.6
            Params: 0.9
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.95
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }
}

BoosterConfigs {
    ClassName: "TShortClusteredEmbeddingsDocFeaturesBooster"
    CalcerClassNames: "TShortClusteredEmbeddingsDocFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TLongClusteredEmbeddingsDocFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        WeightsIndex: 0
        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.3
            Params: 0.6
            Params: 0.9
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.95
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold5Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
            Params: 0.05
            Params: 0.30
            Params: 1
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0.05
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.30
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }
    AggregatorLists {
        Name: "Threshold5GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.10
        }
    }
    AggregatorLists {
        Name: "Threshold10Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 10
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
            Params: 0.10
        }
    }

    AggregatorLists {
        Name: "Threshold20Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 20
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.7
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold30Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 30
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0.2
        }
    }
}

BoosterConfigs {
    ClassName: "TLongClusteredEmbeddingsDocFeaturesBooster"
    CalcerClassNames: "TLongClusteredEmbeddingsDocFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TShortClusteredEmbeddingsQueryFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        WeightsIndex: 0
        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.3
            Params: 0.6
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold5Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 1
        }

    }
}

BoosterConfigs {
    ClassName: "TShortClusteredEmbeddingsQueryFeaturesBooster"
    CalcerClassNames: "TShortClusteredEmbeddingsQueryFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TLongClusteredEmbeddingsQueryFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        WeightsIndex: 0
        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.3
            Params: 0.6
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold5Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.1
            Params: 0.9
            Params: 1
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.3
            Params: 0.4
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
            ThresholdStats: TST_COUNT
        }
    }

    AggregatorLists {
        Name: "Threshold10Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 10
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 5
        }
    }
}

BoosterConfigs {
    ClassName: "TLongClusteredEmbeddingsQueryFeaturesBooster"
    CalcerClassNames: "TLongClusteredEmbeddingsQueryFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TUserRecordsQueryAllClicksCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }
}

BoosterConfigs {
    ClassName: "TUserRecordsQueryAllClicksBooster"
    CalcerClassNames: "TUserRecordsQueryAllClicksCalcer"
}

CalcerConfigs {
    ClassName: "TUserRecordsDocAllClicksCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Threshold60Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 60
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.5
            ThresholdStats: TST_COUNT
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 1
        }

    }

    AggregatorLists {
        Name: "Threshold60GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 60
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 2
            Params: 4
        }
    }

    AggregatorLists {
        Name: "Threshold90GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 90
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.4
            ThresholdStats: TST_COUNT
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.4
        }
    }

    AggregatorLists {
        Name: "Threshold180GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 180
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 4
        }
    }

    AggregatorLists {
        Name: "Threshold210GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 210
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.1
        }
    }

    AggregatorLists {
        Name: "Threshold450GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 450
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 1.0
            ThresholdStats: TST_REL_COUNT
        }
    }
}

BoosterConfigs {
    ClassName: "TUserRecordsDocAllClicksBooster"
    CalcerClassNames: "TUserRecordsDocAllClicksCalcer"
}

CalcerConfigs {
    ClassName: "TUserRecordsQueryLongD120ClicksCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold600GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 600
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.2
        }
    }
}

BoosterConfigs {
    ClassName: "TUserRecordsQueryLongD120ClicksBooster"
    CalcerClassNames: "TUserRecordsQueryLongD120ClicksCalcer"
}

CalcerConfigs {
    ClassName: "TUserRecordsDocLongD120ClicksCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Threshold180Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 180
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0.3
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.9
        }
    }

    AggregatorLists {
        Name: "Threshold180GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 180
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }
    }

    AggregatorLists {
        Name: "Threshold360GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 360
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 0.1
            Params: 2
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.2
        }
    }

    AggregatorLists {
        Name: "Threshold600Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 600
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.5
            ThresholdStats: TST_COUNT
        }
    }

    AggregatorLists {
        Name: "Threshold600GreaterEqual"
        WeightsIndex: 0
        Slicer {
            Type: ST_GREATER_EQUAL
            ThresholdValue: 600
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 2
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.4
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 1
            ThresholdStats: TST_REL_COUNT
        }
        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
        }
    }
}

BoosterConfigs {
    ClassName: "TUserRecordsDocLongD120ClicksBooster"
    CalcerClassNames: "TUserRecordsDocLongD120ClicksCalcer"
}

CalcerConfigs {
    ClassName: "TQueryHistoryDocFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Last10Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 10
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }
}

BoosterConfigs {
    ClassName: "TQueryHistoryDocFeaturesBooster"
    CalcerClassNames: "TQueryHistoryDocFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TQueryHistoryQueryFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Last10Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 10
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Last20Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 20
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 3
        }
    }

    AggregatorLists {
        Name: "Last30Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 30
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.05
        }
    }

    AggregatorLists {
        Name: "Last40Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 40
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Last50Records"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 50
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
            Params: 2
        }
    }
}

BoosterConfigs {
    ClassName: "TQueryHistoryQueryFeaturesBooster"
    CalcerClassNames: "TQueryHistoryQueryFeaturesCalcer"
}


CalcerConfigs {
    ClassName: "TQueryClusteredEmbeddingsDocFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.55
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold3Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 3
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.05
            Params: 1
        }
    }

    AggregatorLists {
        Name: "Threshold5Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 1
        }
    }

    AggregatorLists {
        Name: "Threshold15Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 15
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.45
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }
}

BoosterConfigs {
    ClassName: "TQueryClusteredEmbeddingsDocFeaturesBooster"
    CalcerClassNames: "TQueryClusteredEmbeddingsDocFeaturesCalcer"
}

CalcerConfigs {
    ClassName: "TQueryClusteredEmbeddingsQueryFeaturesCalcer"
    Type: CT_SIM_AGGR

    Similarity {
        Type: ST_DOT_NO_SIZE_CHECK
    }

    AggregatorLists {
        Name: "Threshold0All"
        WeightsIndex: 0
        Slicer {
            Type: ST_ALL
            ThresholdValue: 0
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
            Params: 4
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.75
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }

    AggregatorLists {
        Name: "Threshold3Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 3
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0.95
        }
    }

    AggregatorLists {
        Name: "Threshold5Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 5
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.55
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 1
        }
    }

    AggregatorLists {
        Name: "Threshold10Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 10
        }

        Aggregators {
            Type: AT_MIN_TOP_SCORE
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Threshold15Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 15
        }

        Aggregators {
            Type: AT_AVG_TOP_SCORE_X_WEIGHT
            Params: 0
        }
    }

    AggregatorLists {
        Name: "Threshold20Less"
        WeightsIndex: 0
        Slicer {
            Type: ST_LESS
            ThresholdValue: 20
        }

        Aggregators {
            Type: AT_SCORE_THRESHOLD
            Params: 0.70
            ThresholdStats: TST_SATURATED_WEIGHT_SUM
        }
    }
}

BoosterConfigs {
    ClassName: "TQueryClusteredEmbeddingsQueryFeaturesBooster"
    CalcerClassNames: "TQueryClusteredEmbeddingsQueryFeaturesCalcer"
}
