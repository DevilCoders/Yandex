// Manual: http://wiki.yandex-team.ru/BaseSearch/StaticFeaturesDescriptionLanguage

// List of arguments of each generated function, a verbatim fragment of c++ code
args "ui32 docId, TFactorView& factor, const TErfManagerType& em, typename TErfManagerType::TErfAccessor* erfAccessor, typename TErfManagerType::THostErfAccessor* herfAccessor, const TCalcStaticFeaturesParams& csfp";

// only web search uses fastrank
fastrank_factor FI_COMM_LINKS_SEO_HOSTS;   // multiplier for FI_COMM_LINKS_SEO_HOSTS_PORNO_QUERY, FI_COMM_LINKS_SEO_HOSTS_NON_COMM

// list of known factors marked as static which are computed elsewhere
external_factors FI_PAGE_DATE, FI_DATER_AGE, FI_TIMESTAMP, FI_ADD_TIME_FULL;  // search/relevance/datetime_features.cpp
external_factors FI_DATER_ADDTIME_80HOURS, FI_DATER_ADDTIME_10DAYS, FI_DATER_AGE_10DAYS;  // search/relevance/datetime_features.cpp
external_factors FI_FIRST_VALID_TS_10DAYS;                                    // search/relevance/datetime_features.cpp
external_factors FI_HARD_PESSIMIZATION;                                       // search/relevance/pessimizator.cpp
external_factors FI_QURL_STAT_POWER, FI_QDOWNER_STAT_POWER;                   // calc_docrelev_user.cpp
external_factors FI_IS_FOREIGN_CLUSTER;                                       // search/relevance/query_factors/query_factors.h
external_factors FI_SR;                                                       // search/rank/calc_docrelev.cpp
external_factors FI_DOMAIN_HAS_METRIKA;                                       // search/meta/rank/features/domain_has_metrika_features.cpp
external_factors FI_HISTORICAL_ANNOTATION_COUNT;                              // search/rank/calc_docrelev.cpp
external_factors FI_HISTORICAL_ANN_WORD_COUNT;                                // search/rank/calc_docrelev.cpp
external_factors FI_HISTORICAL_ANN_REG_COUNT;                                 // search/rank/calc_docrelev.cpp
external_factors FI_YELLOWNESS_MAX;                                           // search/meta/rank/features/domain_yellowness_features.cpp
external_factors FI_YELLOWNESS_MEAN;                                          // search/meta/rank/features/domain_yellowness_features.cpp
external_factors FI_YELLOWNESS_MEDIAN;                                        // search/meta/rank/features/domain_yellowness_features.cpp
external_factors FI_YELLOWNESS_MIN;                                           // search/meta/rank/features/domain_yellowness_features.cpp
external_factors FI_YELLOWNESS_DISPERSION;                                    // search/meta/rank/features/domain_yellowness_features.cpp
external_factors FI_OWNER_WEBSITE_ATTENTION;                                  // search/meta/rank/features/replace_static_features.cpp
external_factors FI_CHAT_SCORE;                                               // search/meta/rank/features/replace_static_features.cpp
external_factors FI_HOST_PLAYER_VIEW_DEPTH;                                   // search/meta/rank/features/replace_static_features.cpp
external_factors FI_HAS_TURBO;                                                // search/meta/rank/features/replace_static_features.cpp
external_factors FI_RANDOM_COMMERCIAL;                                                // search/meta/rank/features/replace_static_features.cpp
external_factors FI_IS_HTTPS;                                                 // search/rank/calc_docrelev.cpp
external_factors FI_DOC_SOURCE_FRESH;                                         // search/rank/calc_docrelev.cpp
external_factors FI_DOC_FROM_QUICK, FI_DOC_FROM_QUICK_MED, FI_DOC_FROM_QUICK_RT, FI_DOC_FROM_CALLISTO, FI_DOC_FROM_WEB_TIER1, FI_DOC_FROM_PLATINUM0;  // search/rank/calc_docrelev.cpp
external_factors FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D1T240_FROZEN, FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D0_5T30_FROZEN;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D3T120_FROZEN, FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D14T300_FROZEN;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D0_5T30_AT_REQ, FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D1T240_AT_REQ;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D14T300_AT_REQ, FI_RC_SPYLOG_URL_RATIONAL_SIGMOID_D3T120_AT_REQ;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SEARCH_BASE_URL_RATIONAL_SIGMOID_D1TM600_AT_REQ, FI_RC_SEARCH_BASE_URL_CONTRAST_D30ODD0_9_X_D30T1_AT_REQ;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SEARCH_BASE_URL_RATIONAL_SIGMOID_D3T120_AT_REQ, FI_RC_SEARCH_BASE_URL_RATIONAL_SIGMOID_D1TM600_FROZEN;     // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SEARCH_BASE_URL_CONTRAST_D30ODD0_9_X_D30T1_FROZEN, FI_RC_SEARCH_BASE_URL_RATIONAL_SIGMOID_D3T120_FROZEN;   // search/relevance/rapid_clicks_features.cpp
external_factors FI_RC_SPYLOG_FRESHNESS_AT_REQ;  // search/relevance/rapid_clicks_features.cpp
external_factors FI_IS_URL_FOR_CLICK_DEBOOST;    // search/meta/rank/features/replace_static_features.cpp
external_factors FI_SHORT_VIDEO;    //search/relevance/url_query.cpp
external_factors FI_TELEGRAM_CHANNEL_WEB, FI_TELEGRAM_POST;    //search/relevance/url_query.cpp
external_factors FI_DSSM_PAGE_QUALITY;    // search/begemot/rules/optimized_model/optimized_model_rule.cpp
external_factors FI_TIKTOK_TAG, FI_TIKTOK_DISCOVERY, FI_TIKTOK_MUSIC;    //search/relevance/url_query.cpp
external_factors FI_DSSM_DOG_L3;    // search/begemot/rules/optimized_model/optimized_model_rule.cpp
external_factors FI_CS_DOCUMENTATION_HOST;    //search/relevance/url_query.cpp

// C++ code to appear at the beginning of each generated function
block prologue {
    Y_UNUSED(csfp);
    Y_UNUSED(erfAccessor);
    Y_UNUSED(herfAccessor);
    em.Prefetch(docId);
}


structure erf {
    const typename TErfManagerType::TDocErfInfoType& erf = em.GetDocErf(docId, erfAccessor);
    Y_PREFETCH_READ(&erf, 3);
}

structure herf depends(erf) {
    const THostErfInfo& herf = em.GetHostErf(erf.HostId, herfAccessor);
    Y_PREFETCH_READ(&herf, 3);
}

structure pLerf2 {
    const typename TErfManagerType::TDocLinkErfInfoType* pLerf2 = em.GetDocLinkErf2(docId, erfAccessor);
    Y_PREFETCH_READ(pLerf2, 3);
}

structure tfdoc {
    const typename TErfManagerType::TTfDocType& tfdoc = em.GetIndexTfDoc(docId, erfAccessor);
    Y_PREFETCH_READ(&tfdoc, 3);
}

structure pr {
    ui32 pr = em.GetPageRank(docId, csfp.UseIndexPR, erfAccessor);
}

structure prua {
    ui32 prua = em.GetUkrainPageRank(docId, csfp.UseIndexUkrPR, erfAccessor);
}


// Note: order of factors in this file is not important. Code generator reorders
// computations (currently by factor index), subject to provided dependencies.
//
// You can specify block names, structure names, structure fields (may be used
// in future for performance hinting), or factor names as dependencies.

factor FI_PAGE_RANK depends(pr) = expr(remapRank.Remap(pr));
factor FI_PAGE_RANK_UKR depends(prua) = expr(remapRank.Remap(prua));

// indextf factors
factor FI_TLEN depends(tfdoc.DocTLen) = expr(MapFactor((float)tfdoc.DocTLen, 1.f/400));

factor FI_DOC_TFIDF_SUM_FIXED = tfdoc.FDocTfIdfSum:float;
factor FI_TITLE_IDF_SUM_FIXED = tfdoc.FTitleIdfSum:float;
factor FI_HEADING_IDF_SUM_FIXED = tfdoc.FHeadingIdfSum:float;
factor FI_NORMAL_TEXT_IDF_SUM_FIXED = tfdoc.FNormalTextIdfSum:float;

// broken indextf factors, to be removed
block docFactor depends(tfdoc.DocIdfSum, tfdoc.DocTLen) {
    const float docFactor = tfdoc.DocIdfSum / Max((float)tfdoc.DocTLen, 1.f);
}
factor FI_DOC_TFIDF_SUM depends(tfdoc.DocIdfSum) = expr(MapFactor(tfdoc.DocIdfSum, 400));
factor FI_TITLE_IDF_SUM depends(tfdoc.TitleLen, docFactor) = expr(MapFactor(docFactor * tfdoc.TitleLen, 400));
factor FI_HEADING_IDF_SUM depends(tfdoc.HeadingLen, docFactor) = expr(MapFactor(docFactor * tfdoc.HeadingLen, 20));
factor FI_NORMAL_TEXT_IDF_SUM depends(tfdoc.NormalTextLen, docFactor) = expr(MapFactor(docFactor * tfdoc.NormalTextLen, 5));

// indexlerf2 factors, for web search only
factor FI_LINK_QUALITY                  depends(pLerf2) = expr(pLerf2 ? ((1.5f + pLerf2->UnpackTotalScore()) * 0.333f) : 0.f);
factor FI_PERIODIC_LINK_DATES_PERCENT   depends(pLerf2) = expr(pLerf2 ? ((float)pLerf2->PeriodicDatesPercent / 256.f) : 0.f);
factor FI_LINK_ALMOST_PERIOD            depends(pLerf2) = expr(pLerf2 ? (pLerf2->UnpackAlmostPeriod() / 1024.f) : 0.f);
factor FI_HAS_LINK_QUALITY_FIXED        depends(pLerf2) = expr(pLerf2 ? (float)pLerf2->HasLinkQuality : 0.f);
factor FI_NUM_LINKS                     depends(pLerf2) = expr(pLerf2 ? remapNumLinks.Remap((float)pLerf2->NumLink) : 0.f);
factor FI_NUM_LINKS_FROM_MP             depends(pLerf2) = expr(pLerf2 ? Log10Remap(pLerf2->NumLinksFromMP, 6.f) : 0.f);
factor FI_GEO_DISPERSION                depends(pLerf2) = expr(pLerf2 ? (float)pLerf2->UnpackGeoDispersion() : 0.f);
factor FI_LANG_DISPERSION               depends(pLerf2) = expr(pLerf2 ? (float)pLerf2->UnpackLangDispersion() : 0.f);
factor FI_URL_LINK_PERCENT              depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->UrlLinkPercent) : 0.f);
factor FI_NUM_NON_RUSSIAN_LINKS         depends(pLerf2) = expr(pLerf2 ? remapNumLinks.Remap((float)pLerf2->NumNonRussianLink) : 0.f);
factor FI_NEW_LINK_QUALITY              depends(pLerf2) = expr(pLerf2 ? pLerf2->UnpackNewScore() : 0.f);
factor FI_DIFFERENT_INTERNAL_LINKS      depends(pLerf2) = expr(pLerf2 ? (static_cast<float>(pLerf2->DifferentInternalLinks) / 255.f) : 1.f);
factor FI_LINK_QUALITY_FIXED            depends(pLerf2, FI_LINK_QUALITY) = expr((pLerf2 && pLerf2->HasLinkQuality) ? factor[FI_LINK_QUALITY] : 0.f);
factor FI_NEW_LINK_QUALITY_FIXED        depends(pLerf2, FI_NEW_LINK_QUALITY) = expr((pLerf2 && pLerf2->HasLinkQuality) ? factor[FI_NEW_LINK_QUALITY] : 0.f);
factor FI_STATIC_TITLE_LR_BM25          depends(pLerf2) = expr(pLerf2 ? pLerf2->UnpackTitleLRBM25() : 0.f);
factor FI_TITLE_IN_LINKS_TRIGRAMS       depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->TitleInLinksTrigrams) : 0.f);
factor FI_LINKS_IN_TITLE_TRIGRAMS       depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->LinksInTitleTrigrams) : 0.f);
factor FI_SOWNER_MAX_SUM_SOURCE_RANK    depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->SOMaxSumSourceRank) : 0.f);
factor FI_LINKS_ALIVE                   depends(pLerf2) = expr(pLerf2 ? (float)pLerf2->UnpackLinksAlive() : 0.f);
factor FI_FOOTER_IN_LINKS_TRIGRAMS      depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->FooterInLinksTrigrams) : 0.f);
factor FI_LINKS_IN_FOOTER_TRIGRAMS      depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->LinksInFooterTrigrams) : 0.f);
factor FI_URL_IN_LINKS_TRIGRAMS_STATIC  depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->UrlInLinksTrigrams) : 0.f);
factor FI_LINKS_IN_URL_TRIGRAMS_STATIC  depends(pLerf2) = expr(pLerf2 ? Ui82Float(pLerf2->LinksInUrlTrigrams) : 0.f);

// simple erf factors
factor FI_IS_PORNO = erf.IsPorno:1;
factor FI_WIKI_INFOBOX = erf.WikiInfoboxLink:1;
factor FI_IS_COMM = erf.IsComm:1;
factor FI_IS_FAKE = erf.IsFake:1;
factor FI_IS_SEO = erf.IsSEO:1;
factor FI_IS_ESHOP = erf.IsCommEshop:1;
factor FI_IS_FORUM = erf.IsForum:1;
factor FI_IS_OBSOLETE = erf.IsObsolete:1;
factor FI_HAS_PAYMENTS = erf.HasPayments:1;
factor FI_CLICKED_WITH_ANOTHER_SE_CLICKS = erf.ClickedWithAnotherSEClicks:8;
factor FI_SHOWS_WITH_ANOTHER_SE_CLICKS = erf.ShowsWithAnotherSEClicks:8;
factor FI_ESHOP_VALUE = erf.Eshop:4;
factor FI_PORNO_VALUE = erf.PornoValue:4;
factor FI_IS_PORNO_ADVERT = erf.IsPornoAdvert:1;
factor FI_POETRY = erf.Poetry:8;
factor FI_POETRY_QUAD = erf.PoetryQuad:8;
factor FI_SYN_S1 = erf.SynS1:8;
factor FI_SYN_FL_REMAP1 = erf.SynFLremap1:8;
factor FI_SYN_FL_REMAP2 = erf.SynFLremap2:8;
factor FI_URL_SESS_NORM_DUR_RATE = erf.SessNormDurRate:8;
factor FI_SYN_BAD_WORD_PAIRS = erf.SynPercentBadWordPairs:8;
factor FI_SYN_NUM_BAD_WORD_PAIRS = erf.SynNumBadWordPairs:8;
factor FI_NUM_LATIN_LETTERS = erf.NumLatinLetters:8;
factor FI_HAS_BIG_PICTURE = erf.HasBigPicture:1;
factor FI_WORDS_IN_TEXT = erf.WordsInText:8;
factor FI_WORDS_IN_TITLE = erf.WordsInTitle:8;
factor FI_MEAN_WORD_LENGTH = erf.MeanWordLength:8;
factor FI_PERCENT_WORDS_IN_LINKS = erf.PercentWordsInLinks:8;
factor FI_PERCENT_VISIBLE_CONTENT = erf.PercentVisibleContent:8;
factor FI_PERCENT_FREQ_WORDS = erf.PercentFreqWords:8;
factor FI_PERCENT_USED_FREQ_WORDS = erf.PercentUsedFreqWords:8;
factor FI_TRIGRAMS_PROB = erf.TrigramsProb:8;
factor FI_TRIGRAMS_COND_PROB = erf.TrigramsCondProb:8;
factor FI_NUMERALS_PORTION = erf.NumeralsPortion:8;
factor FI_PARTICLES_PORTION = erf.ParticlesPortion:8;
factor FI_ADJ_PRONOUNS_PORTION = erf.AdjPronounsPortion:8;
factor FI_ADV_PRONOUNS_PORTION = erf.AdvPronounsPortion:8;
factor FI_VERBS_PORTION = erf.VerbsPortion:8;
factor FI_FEM_MAS_NOUNS_PORTION = erf.FemAndMasNounsPortion:8;
factor FI_VIDEO_RATING = erf.VideoRating:8;
factor FI_LONGEST_TEXT = erf.LongestText:8;
factor FI_HAS_LIRU_CNT = erf.HasLiRuCNT:1;
factor FI_URL_TRIGRAMS = erf.UrlTrigrams:8;
factor FI_NUM_SLASHES = erf.NumSlashes:4;
factor FI_WATCH_VIDEO = erf.WatchVideo:1;
factor FI_DOWNLOAD_VIDEO = erf.DownloadVideo:1;
factor FI_GSK_URL_MODEL = erf.GskUrlModel:8;
factor FI_SEGMENT_AUX_ALPHAS_IN_TEXT = erf.SegmentAuxAlphasInText:8;
factor FI_SEGMENT_AUX_SPACES_IN_TEXT = erf.SegmentAuxSpacesInText:8;
factor FI_SEGMENT_CONTENT_COMMAS_IN_TEXT = erf.SegmentContentCommasInText:8;
factor FI_CLASSIF_IS_SHOP = erf.IsShop:1;
factor FI_URL_NGRAMS_MODEL = erf.UrlNGramsModel:8;
factor FI_STATIC_TITLE_COMM = erf.TitleComm:8;
factor FI_STATIC_TITLE_BM25_EX = erf.TitleBM25Ex:8;
factor FI_TRASH_ADV = erf.TrashAdv:4;
factor FI_COMM_RUS = erf.CommRus:8;
factor FI_URL_CLICKS_MAX_GEO_CITY_FRC_WEIGHT = erf.MaxGcFrcRegionWeight:8;
factor FI_IS_MOBILE_BEAUTY = erf.IsMobileBeauty:1;
factor FI_IS_EMBED_VIDEO_BROKEN = erf.EmbedVideoBroken:1;
factor FI_SUM_FLASH_AREA = erf.SumFlashArea:8;
factor FI_ADULTNESS_PROD = erf.AdultnessProd:8;
factor FI_ADULTNESS_URL = erf.AdultnessUrl:4;
factor FI_NASTY_IMAGE_VALUE = erf.NastyImageValue:7;
factor FI_NASTY_VIDEO = erf.NastyVideo:3;

// web search only
factor FI_SOFT_404 = erf.Soft404:8;
factor FI_NEWS = erf.nNews:1;
factor FI_SHOP = erf.nShop:1;
factor FI_CATALOG = erf.nCatalog:1;
factor FI_PURE_TEXT = erf.nLongPureText:1;
factor FI_ROOT = erf.nRoot:1;
factor FI_IS_INDEX_PAGE = erf.IsIndexPage:1;
factor FI_IS_INDEX_PAGE_SOFT = erf.IsIndexPageSoft:1;
factor FI_IS_OWNER = erf.IsMainMirrorUrl:1;
factor FI_MIN_PATH_LEN = erf.MinSemiDuplicatesPathLen:8;
factor FI_IS_NOT_CGI = erf.IsNotCgi:1;
factor FI_TOTAL_DUPS   = erf.TotalDups:8;
factor FI_RUS_LANG depends(erf.Language) = expr(BOOL_TO_FLOAT(LANG_RUS == erf.Language));
factor FI_ADD_TIME = erf.AddTime:8;
factor FI_IS_MAIN_PAGE = erf.IsMainPage:1;
factor FI_HOPS = erf.Hops:8;
factor FI_UKR = erf.IsUkr:1;
factor FI_IS_BLOG = erf.IsBlog:1;
factor FI_IS_LJ = erf.IsLJ:1;
factor FI_IS_UNREACHABLE = erf.IsUnreachable:1;
factor FI_NUM_NON_LETTERS_IN_URL = erf.NumNonLettersInUrl:8;
factor FI_URL_LENGTH_2 = erf.UrlLen2:8;
factor FI_IS_HUB = erf.IsHub:1;
factor FI_AURA_DOC_LOG_SHARED = erf.AuraDocLogShared:8;
factor FI_AURA_DOC_LOG_AUTHOR = erf.AuraDocLogAuthor:8;
factor FI_AURA_DOC_LOG_ORIGIN = erf.AuraDocLogOrigin:8;
factor FI_AURA_DOC_MEAN_SHARED_WEIGHT = erf.AuraDocMeanSharedWeight:8;
factor FI_AURA_DOC_MEAN_FLT_AUTHOR_SOURCE = erf.AuraDocMeanFltAuthorSource:8;
factor FI_HAS_USER_REVIEWS depends(erf.HasUserReviewL, erf.HasUserReviewH) = expr(Frac2Float<ui8>(erf.HasUserReviewH * 2 + erf.HasUserReviewL));
factor FI_HAS_DOWNLOAD_LINK_ON_FILE = erf.HasDownloadLinkOnFile:1;
factor FI_HAS_DOWNLOAD_LINK_ON_FILE_HOSTING = erf.HasDownloadLinkOnFileHosting:1;
factor FI_SEGMENT_WORD_PORTION_FROM_MAINCONTENT = erf.SegmentWordPortionFromMainContent:8;
factor FI_WIKI_LINK_COUNT = erf.WikiLinkCount:8;
factor FI_NASTY_CONTENT = erf.NastyContent:8;
factor FI_YABAR_URL_REVISITS = erf.YabarUrlRevisits:8;
factor FI_PAGE_HAS_MAPS_API = erf.PageHasMapsApi:1;
factor FI_US_LONG_PERIOD_URL_CTR = erf.USLongPeriodCtr:8;
factor FI_US_LONG_PERIOD_URL_DT3600_AVG = erf.USLongPeriodDt3600Avg:8;
factor FI_US_LONG_PERIOD_URL_DT180_AVG = erf.USLongPeriodDt180Avg:8;
factor FI_US_LONG_PERIOD_URL_LONG_CLICK_PROB = erf.USLongPeriodLongClickProb:8;
factor FI_US_LONG_PERIOD_URL_SHOWS = erf.USLongPeriodShows:8;
factor FI_US_LONG_PERIOD_URL_WINS_PROB = erf.USLongPeriodWinsProb:8;
factor FI_US_LONG_PERIOD_URL_LOSSES_PROB = erf.USLongPeriodLossesProb:8;
factor FI_US_LONG_PERIOD_URL_MOBILE_DT180_AVG = erf.USLongPeriodMobileDt180Avg:8;
factor FI_US_LONG_PERIOD_URL_MOBILE_LONG_CLICK_PROB = erf.USLongPeriodMobileLongClickProb:8;
factor FI_US_LONG_PERIOD_URL_MOBILE_LOSSES_PROB = erf.USLongPeriodMobileLossesProb:8;
factor FI_UB_LONG_PERIOD_URL_VISITS_SN_PROB = erf.UBLongPeriodVisitsSNProb:8;
factor FI_UB_LONG_PERIOD_URL_DIRECT_H_CHILDREN_90_CNT_FROM_EXT_HOST = erf.UBLongPeriodDirectHChildren90CntFromExtHost:8;
factor FI_UB_LONG_PERIOD_URL_DEPTH_FROM_EXT_HOST = erf.UBLongPeriodDepthFromExtHost:8;
factor FI_UB_LONG_PERIOD_URL_BROWSE_FRC = erf.UBLongPeriodBrowseFrc:8;
factor FI_UB_LONG_PERIOD_URL_AVG_SEARCH_DURATION_600 = erf.UBLongPeriodAvgSearchDuration600:8;
factor FI_UB_LONG_PERIOD_URL_SEARCH_PERCENT_END = erf.UBLongPeriodSearchPercentEnd:8;
factor FI_UB_LONG_PERIOD_URL_SEARCH_PERCENT_MIDDLE_30 = erf.UBLongPeriodSearchPercentMiddle30:8;
factor FI_UB_LONG_PERIOD_URL_VISIT_120_PROB = erf.UBLongPeriodVisit120Prob:8;
factor FI_UB_LONG_PERIOD_URL_LEAVES_CNT = erf.UBLongPeriodLeavesCnt:8;
factor FI_UB_LONG_PERIOD_URL_DT_URL_H_CHILDREN_CUT_600 = erf.UBLongPeriodDtUrlHChildrenCut600:8;
factor FI_UB_LONG_PERIOD_URL_MIN_TIME_WHEN_PAGE_SHOW = erf.UBLongPeriodMinTimeWhenPageShow:8;
factor FI_UB_LONG_PERIOD_URL_DELTA_AVG_MIN_TIME_WHEN_PAGE_SHOW = erf.UBLongPeriodDeltaAvgMinTimeWhenPageShow:8;
factor FI_UB_LONG_PERIOD_URL_LATITUDE = erf.UBLongPeriodLatitude:16;
factor FI_UB_LONG_PERIOD_URL_LONGITUDE = erf.UBLongPeriodLongitude:16;
factor FI_UB_LONG_PERIOD_URL_DOWNLOADS_PROB = erf.UBLongPeriodDownloadsProb:8;
factor FI_UB_LONG_PERIOD_URL_DOWNLOADS_IMAGE_PROB = erf.UBLongPeriodDownloadsImageProb:8;
factor FI_UB_LONG_PERIOD_URL_DOWNLOADS_TORRENT_PROB = erf.UBLongPeriodDownloadsTorrentProb:8;
factor FI_UB_LONG_PERIOD_RANK = erf.UBLongPeriodRank:8;
factor FI_HAS_VIDEO = erf.HasVideo:1;
factor FI_HAS_SIDEBLOCK = erf.HasTurboMobile:1;
factor FI_HAS_TURBO_MOBILE = erf.HasTurboMobile:1;
factor FI_HAS_TURBO_DESKTOP = erf.HasTurboDesktop:1;
factor FI_HAS_TURBO_APP = erf.HasTurboApp:1;
factor FI_HAS_TURBO_ECOM = erf.HasTurboEcom:1;

// SEARCHSPAM-15486
factor FI_IS_FEED_OFFER = erf.IsFeedOffer:1;
factor FI_IS_FEED_LISTING = erf.IsFeedListing:1;
factor FI_IS_FEED_MAIN = erf.IsFeedMain:1;
factor FI_IS_FEED_STRATOCASTER = erf.IsFeedStratocaster:1;
factor FI_IS_FEED_ANY = erf.IsFeedAny:1;

// CONTENTQUALITY-169 
factor FI_MEMORANDUM_URL_TYPE = erf.MemorandumUrlType:2;

// CONTENTQUALITY-302
factor FI_HAS_CLOAKING = erf.HasCloaking:1;

// web & images
factor FI_TEXT_FEATURES = erf.TextFeatures:8;
factor FI_TEXT_LIKE = erf.TextLike:8;
factor FI_DOC_LEN = erf.DocLen:8;
factor FI_URL_LEN = erf.UrlLen:8;
factor FI_IS_HTML = erf.IsHTML:1;
factor FI_YABAR_URL_VISITS = erf.YabarUrlVisits:8;
factor FI_YABAR_URL_VISITORS = erf.YabarUrlVisitors:8;
factor FI_YABAR_URL_AVG_TIME = erf.YabarUrlAvgTime:8;
factor FI_URL_QUERY_VARIETY = erf.UrlQueryVariety:8;
factor FI_IS_COMM_BY_KEYWORDS = erf.IsCommByKeywords:1;
factor FI_METRIKA_URL_VISITS = erf.MetrikaUrlVisits:8;
factor FI_YABAR_URL_LCAC = erf.YabarUrlLcAc:8;
factor FI_METRIKA_URL_VISITORS = erf.MetrikaUrlVisitors:8;
factor FI_METRIKA_URL_AVG_TIME = erf.MetrikaUrlAvgTime:8;
factor FI_METRIKA_URL_CORE_AUDIENCE = erf.MetrikaUrlCoreAudience:8;
factor FI_METRIKA_URL_HOST_VISIT_TIME = erf.MetrikaUrlHostVisitTime:8;
factor FI_YABAR_URL_DOWNLOADS = erf.YabarUrlDownloads:8;
factor FI_METRIKA_URL_HOST_VISIT_DEPTH = erf.MetrikaUrlHostVisitDepth:8;

// simple herf factors
factor FI_ADV = herf.HasAdv:1;
factor FI_YANDEX_ADV = herf.HasYandexAdv:1;
factor FI_NO_SPAM = herf.NoSpam:8;
factor FI_IS_WIKI = herf.IsWikipedia:1;
factor FI_ADV_ASPAM = herf.AdvAspam:1;
factor FI_COMM_LINKS_SEO_HOSTS = herf.CommLinksHostSEO:8;
factor FI_COUNTERS_SEARCH_TRAFFIC1 = herf.LiruSearchTraffic1:8;
factor FI_COUNTERS_SEARCH_TRAFFIC2 = herf.LiruSearchTraffic2:8;
factor FI_YABAR_HOST_VISITORS = herf.YabarHostVisitors:8;
factor FI_YABAR_HOST_SEARCH_TRAFFIC = herf.YabarHostSearchTraffic:8;
factor FI_OWNER_SDIFF_CLICK_ENTROPY = herf.OwnerSDiffClickEntropy:8;
factor FI_OWNER_SDIFF_SHOW_ENTROPY = herf.OwnerSDiffShowEntropy:8;
factor FI_OWNER_SDIFF_CSRATIO_ENTROPY = herf.OwnerSDiffCSRatioEntropy:8;
factor FI_OWNER_NAV_QUOTA = herf.OwnerNavQuota:8;
factor FI_OWNER_SATISFIED4_RATE = herf.OwnerSatisfied4Rate:8;
factor FI_IS_COM = herf.IsCom:1;
factor FI_OWNER_SESS_NORM_DUR = herf.OwnerSessNormDur:8;
factor FI_OWNER_REQS_POPULARITY = herf.OwnerReqsPopularity:8;
factor FI_HOST_RELIABILITY = herf.HostReliability:8;
factor FI_OWNER_IS_COMMERCIAL = expr(BOOL_TO_FLOAT(herf.HostCommercialRank >= 5));
factor FI_YABAR_HOST_SURFTR_DEPTH_NODES_LEAFLN = herf.YabarHostSurfTrDpNdLeafLn:8;
factor FI_YABAR_HOST_SURFTR_NODES_TIME_GRDISP = herf.YabarHostSurfTrNdTmGrDsp:8;
factor FI_YABAR_HOST_SURFTR_NODES_TIME_LEADFLN90 = herf.YabarHostSurfTrNdTmLeafLn90:8;
factor FI_YABAR_HOST_SURFTR_NODES_HANGS_GRADIENT = herf.YabarHostSurfTrNdHgGr:8;
factor FI_BROWSER_HOST_DOWNLOAD_PROBABILITY = herf.HostDownloadProbability:8;
factor FI_LOG_CTR_MEAN = herf.LogCtrMean:8;
factor FI_NEWS_AGENCY_RATING = herf.NewsAgencyRating:float;
factor FI_HAS_JS_FROM_MARKETGID_COM = herf.HasJsFromMarketgidCom:1;
factor FI_HAS_JS_FROM_RFITY_COM = herf.HasJsFromRfityCom:1;
factor FI_HAS_JS_FROM_GOOGLE_ANALYTICS_COM = herf.HasJsFromGoogleAnalyticsCom:1;
factor FI_HAS_JS_FROM_GOOGLEAPIS_COM = herf.HasJsFromGoogleApisCom:1;
factor FI_HAS_JS_FROM_FACEBOOK_NET = herf.HasJsFromFacebookNet:1;
factor FI_HAS_JS_FROM_MC_YANDEX_RU = herf.HasJsFromMcYandexRu:1;
factor FI_NASTY_HOST = herf.NastyHost:3;
factor FI_IS_TASIX = herf.IsTasix:1;

// SEARCHSPAM-12401
factor FI_YELLOWNESS_IMG_MAX = herf.YellownessImgMax:6;
factor FI_YELLOWNESS_IMG_AVG = herf.YellownessImgAvg:6;
factor FI_YELLOW_IMG_SHARE = herf.YellowImgShare:4;
factor FI_YELLOW_IMG_COUNT = herf.YellowImgCount:3;
factor FI_TEASERS_COUNT = herf.TeasersCount:3;
factor FI_TEASERS_AREA = herf.TeasersArea:4;
factor FI_YELLOWNESS_TXT_MIN = herf.YellownessTxtMin:6;
factor FI_YELLOWNESS_TXT_AVG = herf.YellownessTxtAvg:6;
factor FI_HAS_ADV_CLICKABLE_BG = herf.HasAdvClickableBG:1;
factor FI_ADV_NETS_AREA = herf.AdvNetsArea:3;
factor FI_ADV_NETS_AREA_FIRST_PAGE = herf.AdvNetsAreaFirstPage:3;
factor FI_ADV_NETS_COUNT = herf.AdvNetsCount:3;
factor FI_ADV_TRAFF_OUT_SHARE_DESKTOP = herf.AdvTraffOutShareDesktop:4;
factor FI_RTB_TRAFF_OUT_SHARE_DESKTOP = herf.RTBTraffOutShareDesktop:4;

// SEARCHSPAM-12937
factor FI_HOST_SPEED_FROM_SPYLOG = herf.Speed:8;
factor FI_HOST_OFFICIAL = herf.Official:1;
factor FI_HOST_CY_100_LOG = herf.Cy100log:8;
factor FI_HOST_NEVASCA2_SHARE_WEIGHT = herf.Nevasca2ShareWeight:8;
factor FI_HOST_NEVASCA2_FRESH_WEEK = herf.Nevasca2FreshWeek:8;
factor FI_HOST_TRAFGRAPH_IN_GT_SHARE_D = herf.TrafgraphInGT_share_d:8;
factor FI_HOST_TRAFGRAPH_IN_GT_SHARE_M = herf.TrafgraphInGT_share_m:8;
factor FI_HOST_GREEN_TRAFFIC_DESKTOP_LOG = herf.GreenTrafficDesktop_log:8;
factor FI_HOST_RETURN_RATE_MONTH = herf.ReturnRateMonth:8;
factor FI_HOST_BIZ_KERNEL = herf.BizKernel:8;
factor FI_HOST_BIZ_KERNEL_QUANTILE = herf.BizKernelQuantile:8;

// SEARCHSPAM-14212
factor FI_HOST_VIDEO_STEVENSON = herf.VideoPirate:8;
factor FI_HOST_VIDEO_DISTRIBUTOR = herf.VideoDistributor:8;
factor FI_HOST_STEVENSON_BINARY = herf.StevensonBinary:1;
factor FI_HOST_STEVENSON_URLS_PER_CLICKS = herf.StevensonUrlsPerClicks:8;
factor FI_HOST_STEVENSON_URLS_PER_SHOWS = herf.StevensonUrlsPerShows:8;
factor FI_HOST_STEVENSON_URLS_PER_SHOWS10 = herf.StevensonUrlsPerShows10:8;
factor FI_HOST_STEVENSON_WEIGHT = herf.StevensonWeight:8;

// SEARCHSPAM-15473
factor FI_HOST_VIDEO_DISTRIBUTOR_PROD = herf.VideoDistributorProd:8;
factor FI_HOST_MEMORANDUM_WEIGHT = herf.MemorandumWeight:8;

// SEARCHSPAM-14333
factor FI_LEGAL_PLAYERS = herf.LegalPlayers:8;
factor FI_SOCIAL_NETWORKS_PLAYERS = herf.SocialNetworksPlayers:8;
factor FI_STEVENSON_PLAYERS = herf.StevensonPlayers:8;

// SEARCHSPAM-14593
factor FI_HOST_BIZ_KERNEL_PERCENTILE = herf.MascotScorePercentile:8;

// SEARCHSPAM-14322
factor FI_ANTISPAM_BAN depends(erf.AntispamBanDoc, herf.AntispamBanOwner, herf.AntispamBanHost) = expr(BOOL_TO_FLOAT((herf.AntispamBanOwner == 1) || (herf.AntispamBanHost == 1) || (erf.AntispamBanDoc == 1)));
factor FI_ANTISPAM_BAN_GSM = herf.AntispamBanHostGsm:1;
factor FI_ANTISPAM_BAN_FRESH = herf.AntispamBanHostFresh:1;

// SEARCHSPAM-15486
factor FI_HOST_HAS_FEED_URLS = herf.HostHasFeedUrls:float;

// SEARCHSPAM-15417
factor FI_HOST_ECOM_KERNEL_1 = herf.EcomKernel1:8;
factor FI_HOST_ECOM_KERNEL_2 = herf.EcomKernel2:8;
factor FI_HOST_ECOM_KERNEL_3 = herf.EcomKernel3:8;

//CONTENTQUALITY-45
factor FI_HOST_NUM_SOVETNIK = expr(Ui82Float(herf.NumSovetnik));

//SEARCHSPAM-15531
factor FI_TRAFGRAPH_OUT_ALL_SHARE_D = expr(Ui82Float(herf.TrafgraphOutAll_share_d));
factor FI_TRAFGRAPH_OUT_ALL_SHARE_M = expr(Ui82Float(herf.TrafgraphOutAll_share_m));
factor FI_TRAFGRAPH_OUT_ALL_SE_SHARE_D = expr(Ui82Float(herf.TrafgraphOutAllSE_share_d));
factor FI_TRAFGRAPH_OUT_ALL_SE_SHARE_M = expr(Ui82Float(herf.TrafgraphOutAllSE_share_m));
factor FI_NO_EXT_CLICKS_SHARE = expr(Ui82Float(herf.NoExtClicksShare));
factor FI_MORE_120_SEC_VISITS_NOT_SEARCH_SHARE = expr(Ui82Float(herf.More120SecVisitsNotSearchShare));
factor FI_VISITS_P_VISITORS = expr(Ui82Float(herf.VisitsPVisitors));
factor FI_MARKET_QUALITY_RATING = expr(Ui82Float(herf.MarketQualityRating));

// SEARCHSPAM-15565
factor FI_DISTRIBUTOR_HOSTS = herf.DistributorHosts:1;

//SEARCHSPAM-15568
factor FI_PAY_DETECTOR_PREDICT_AVG = expr(Ui82Float(herf.PayDetectorPredictAvg));
factor FI_ONE_PRODUCT_PROBABILITY_AVG = expr(Ui82Float(herf.OneProductProbabilityAvg));
factor FI_MANY_PRODUCTS_PROBABILITY_AVG = expr(Ui82Float(herf.ManyProductsProbabilityAvg));

//SEARCHSPEC-3
factor FI_MEDICAL_HOST_QUALITY = herf.MedicalHostQuality:float;

// CONTENTQUALITY-189
factor FI_PAGE_QUALITY_HOST = herf.PageQualityHost:float;

//SEARCHSPEC-32
factor FI_MEDICAL_HOST_QUALITY_METRIC = herf.MedicalHostQualityMetric:float;
factor FI_MEDICAL_HOST_QUALITY_FRESH = herf.MedicalHostQualityFresh:float;

//SENS-84
factor FI_SOS_HOST_QUALITY = herf.SosHostQuality:float;
factor FI_SOS_HOST_QUALITY_FRESH = herf.SosHostQualityFresh:float;

//SENS-85
factor FI_FIN_LAW_HOST_QUALITY = herf.FinLawHostQuality:float;
factor FI_FIN_LAW_HOST_QUALITY_FRESH = herf.FinLawHostQualityFresh:float;

//SENS-87
factor FI_MEDICAL2_HOST_QUALITY = herf.Medical2HostQuality:float;
factor FI_MEDICAL2_HOST_QUALITY_FRESH = herf.Medical2HostQualityFresh:float;

//COMMERCIAL-41
factor FI_URL_IS_MARKET_OFFER = erf.UrlIsMarketOffer:1;
factor FI_HOST_IS_MARKET_OFFER = herf.HostIsMarketOffer:1;

//COMMERCIAL-124
factor FI_HOST_IS_ECOM_PURCHASE = herf.HostIsEcomPurchase:1;
factor FI_HOST_IS_VISIT_LOGS_PURCHASE = herf.HostIsVisitLogsPurchase:1;

//COMMERCIAL-145
factor FI_OWNER_IS_ECOM_PURCHASE = herf.OwnerIsEcomPurchase:1;
factor FI_OWNER_IS_VISIT_LOGS_PURCHASE = herf.OwnerIsVisitLogsPurchase:1;

//COMMERCIAL-168
factor FI_HOST_USER_LEAKAGE = herf.OwnerUserLeakage:float;

//COMMERCIAL-62
factor FI_OWNER_IS_ACTUAL_SHOP = herf.OwnerIsActualShop:float;
factor FI_OWNER_IS_SERVICE = herf.OwnerIsService:float;

//COMMERCIAL-90
factor FI_OWNER_IS_PARTNER = herf.OwnerIsPartner:float;

//COMMERCIAL-64
factor FI_NO_PRODUCTS_PROBABILITY = erf.NoProductsProbability:float;
factor FI_ONE_PRODUCT_PROBABILITY = erf.OneProductProbability:float;
factor FI_MANY_PRODUCTS_PROBABILITY = erf.ManyProductsProbability:float;

//FACTOR-2471
factor FI_NAV_PARASITES = erf.NavParasites:float;

//FACTOR-2475
factor FI_SOS_DSSM = erf.SosDssm:float;
factor FI_MED_DSSM = erf.MedDssm:float;
factor FI_FIN_LAW_DSSM = erf.FinLawDssm:float;

factor FI_SOS_URL_QUALITY = erf.SosDssm:float;
factor FI_MEDICAL2_URL_QUALITY = erf.MedDssm:float;
factor FI_FIN_LAW_URL_QUALITY = erf.FinLawDssm:float;

//FACTOR-2476
factor FI_CRUELTY_DSSM = erf.CrueltyDssm:float;

//LOWSEARCH-105
factor FI_DSSM_LANGUAGE_CLASSIFIER_RUS_L2 = erf.DssmLanguageClassifierRusL2:float;
factor FI_DSSM_LANGUAGE_CLASSIFIER_ENG_L2 = erf.DssmLanguageClassifierEngL2:float;
factor FI_DSSM_LANGUAGE_CLASSIFIER_OTH_L2 = erf.DssmLanguageClassifierOthL2:float;

//SENS-177
factor FI_MED_DSSM_WITH_TRASH = erf.MedDssmWithTrash:float;
factor FI_FIN_LAW_DSSM_WITH_TRASH = erf.FinLawDssmWithTrash:float;

factor FI_UNEXPECTED_TRASH_URL_QUALITY = erf.CrueltyDssm:float;

//SEARCHSPEC-220
factor FI_DSSM_PAGE_QUALITY_RTHUB = erf.DssmPageQualityRTHub:float;

//SEARCHSPEC-235
factor FI_DSSM_PAGE_QUALITY_RTHUB_SLOT2 depends(erf.DssmPageQualityRTHubSlot2) = expr(Ui82Float(erf.DssmPageQualityRTHubSlot2));

//COMMERCIAL-78
factor FI_PRODUCT_OFFER_ANY_AVAILABLE = erf.ProductOfferAnyAvailable:1;
factor FI_PRODUCT_OFFER_NOT_AVAILABLE = erf.ProductOfferNotAvailable:1;
factor FI_PRODUCT_OFFER_NO_PRODUCTS = expr(BOOL_TO_FLOAT(erf.ProductOfferNumberOfProducts == 0));

//COMMERCIAL-186
factor FI_OFFER_AVAILABILITY_IS_SET_UP = erf.OfferAvailabilityIsSetUp:1;
factor FI_OFFER_AVAILABILITY = erf.OfferAvailability:1;

//COMMERCIAL-135
factor FI_SHOP_IN_SHOP_URL = erf.ShopInShopUrl:1;

// SEARCHSPAM-14934
factor FI_QUERIES_RATIO_MORDA_2 = herf.QueriesRatioMorda2:8;
factor SERP_CLICKS_BY_HOP_PART_0_30 = herf.SerpClicksByHopPart_0_30:8;
factor QUERIES_AVG_TOP = herf.QueriesAvgTop:8;
factor TRAFGRAPH_MOBILE_DESKTOP_SE_SHARE = herf.TrafgraphMobileDesktopSE_share:8;
factor TRAFGRAPH_MOBILE_DESKTOP_OUT_ALL_SHARE = herf.TrafgraphMobileDesktopOutAll_share:8;
factor AVG_IS_ORG = herf.AvgIsOrg:8;
factor AVG_QS_F_PUNCT_BLANKS_RAT = herf.AvgQsFPunctBlanksRat:8;

//SEARCHPLAY-130
factor FI_SOCIAL_URL_IS_VERIFIED = erf.SocialUrlIsVerified:1;

// web search only
factor FI_YA_BAR = herf.YaBar:8;
factor FI_ADD_TIME_MP = herf.AddTimeMP:8;
factor FI_OWNER_CLICKS_PCTR = herf.OwnerClicksPCTR:8;
factor FI_SPAM2 = herf.Spam2:8;
factor FI_NEVASCA1 = herf.Nevasca1:8;
factor FI_NEVASCA2 = herf.Nevasca2:8;
factor FI_SEO_IN_PAY_LINKS = herf.SeoInPayLinks:8;
factor FI_RANK_COM_GOODNESS = herf.RankComGoodness:8;
factor FI_RANK_COM_GOODNESS_BAR = herf.RankComGoodnessBar:8;
factor FI_RANK_BOOST_GOODNESS = herf.RankBoostGoodness:8;
factor FI_QUERIES_AVG_CM2 = herf.QueriesAvgCM2:8;
factor FI_MORE_90_SEC_VISITS_SHARE = herf.Mascot01:8;
factor FI_MORE_160_SEC_VISITS_SHARE = herf.Mascot02:8;
factor FI_RANK_HACKED_NOVA_PHP = herf.Mascot04:8;
factor FI_RANK_AGS4 = herf.Mascot07:8;
factor FI_MAX_QS_DOC_CLASS_QS_RANK_PTH_QUERY_SPAM = herf.Mascot10:8;
factor FI_AVG_QS_RANK_ON_NOT_SUBDOMAIN_DOCS = herf.Mascot14:8;
factor FI_VISITORS_RETURN_MONTH_SHARE = herf.Mascot16:8;
factor FI_VISITORS_RETURN_MONTH_NUMBER = herf.Mascot18:8;
factor FI_RANK_XIT_DOOR = herf.Mascot19:8;
factor FI_AVG_TITLE_CAPITAL_LETTERS_RATIO = herf.Mascot24:8;
factor FI_FROM_SEARCH_SHARE_NORMALIZED = herf.Mascot25:8;
factor FI_GREEN_TRAFFIC_SHARE_NORMALIZED = herf.Mascot26:8;
factor FI_AVG_QS_F_WND_500_TOKEN = herf.Mascot32:8;
factor FI_MIN_OWNER_QS_RANK = herf.Mascot33:8;
factor FI_AVG_NUMHOPS = herf.Mascot35:8;
factor FI_RANK_ARTROZ = herf.MascotRankArtroz:8;
factor FI_IS_MOBILE_BEAUTY_HOST = herf.IsMobileBeautyHost:1;

factor FI_RANDOMLOGHOST_HAS_PAYMENTS_AVG = herf.RandomLogHostHasPaymentsAvg:8;
factor FI_RANDOMLOGHOST_IS_VIDEO_QUERY_AVG = herf.RandomLogHostIsVideoQueryAvg:8;
factor FI_RANDOMLOGHOST_SYNT_QUALITY_AVG = herf.RandomLogHostSyntQualityAvg:8;
factor FI_RANDOMLOGHOST_REGIONAL_V_QUERY_NEW_PERCENTALE_90 = herf.RandomLogHostGeoRegionalityVNewPerc90:8;
factor FI_RANDOMLOGHOST_QCLASS_DOWNLOAD_AVG = herf.RandomLogHostQClassDownloadAvg:8;
factor FI_RANDOMLOGHOST_QUERY_ISMUSIC_AVG = herf.RandomLogHostIsMusicAvg:8;
factor FI_RANDOMLOGHOST_QUERY_TH3561_PERCENTALE_25 = herf.RandomLogHostQueryThEncyclopedicPerc25:8;
factor FI_RANDOMLOGHOST_COMMERCIAL_OWNER_RANK_REG_AVG = herf.RandomLogHostCommercialOwnerRankRegAvg:8;
factor FI_RANDOMLOGHOST_YABAR_WORD_DNGI_PERCENTALE_25 = herf.RandomLogHostYabarWordDNGIPerc25:8;
factor FI_RANDOMLOGHOST_PSE_FRC_BROWSER_AVG = herf.RandomLogHostPopularSEFRCBrowserAvg:8;
factor FI_RANDOMLOGHOST_URL_CLICKS_MAX_GEO_REGION_FRC_RATIO_AVG = herf.RandomLogHostURLClicksMaxGeoRegionFRCRatioAvg:8;
factor FI_RANDOMLOGHOST_UB_LONG_PERIOD_URL_DIRECT_H_CHILDREN_90_CNT_FROM_EXT_HOST_PERCENTALE_90 = herf.RandomLogHostUBLongPeriodDirectHChildren90CntPerc90:8;
factor FI_RANDOMLOGHOST_UB_LONG_PERIOD_URL_DT_URL_H_CHILDREN_CUT_600_REG_PERCENTALE_90 = herf.RandomLogHostUBLongPeriodDtUrlHChildrenPerc90:8;
factor FI_RANDOMLOGHOST_QUERY_ISPICTURE_AVG = herf.RandomLogHostIsPictureAvg:8;
factor FI_RANDOMLOGHOST_ERRATUM_LOG_QUERY_PROBABILITY_AVG = herf.RandomLogHostErratumLogQueryProbabilityAvg:8;

factor FI_RANDOMLOGHOST_VISITS_FROM_WIKI_AVG = herf.RandomLogHostVisitsFromWikiAvg:8;
factor FI_RANDOMLOGHOST_NAV_LINEAR_PERCENTALE_25 = herf.RandomLogHostNavLinearPerc25:8;
factor FI_RANDOMLOGHOST_FOUND_PERCENTALE_90 = herf.RandomLogHostFoundPerc90:8;
factor FI_RANDOMLOGHOST_SUBQUERY_THEME_MATCH_AVG = herf.RandomLogHostSubqueryThMatchAvg:8;
factor FI_RANDOMLOGHOST_SEGMENT_WORD_PORTION_FROM_MAINCONTENT_AVG = herf.RandomLogHostSegmentWordPortionFromMainContentAvg:8;
factor FI_RANDOMLOGHOST_XF_DT_SHOW_ALL_MAX_F_FIELD_SET2_BM15FLOG_K0_001_AVG = herf.RandomLogHostXfDtShowAllMaxFFieldSet2Bm15FLogK0001Avg:8;
factor FI_RANDOMLOGHOST_QUERY_REGION_SIZE_AVG = herf.RandomLogHostQueryRegionSizeAvg:8;
factor FI_RANDOMLOGHOST_IS_RELEV_LOCALE_UA_AVG = herf.RandomLogHostIsRelevLocaleUAAvg:8;
factor FI_RANDOMLOGHOST_QFUF_ALL_SUM_WF_SUM_W_FIELD_SET3_BCLM_WEIGHTED_FLOG_W0_K0_001_PERCENTALE_90 = herf.RandomLogHostQfufAllSumWFSumWFieldSet3BclmWeightedFLogW0K0001Perc90:8;
factor FI_RANDOMLOGHOST_DSSM_BOOSTING_CTR_QUERY_SELF_SIMILARITY_PERCENTALE_90 = herf.RandomLogHostDssmBoostingCtrQuerySelfSimilarityPerc90:8;
factor FI_RANDOMLOGHOST_QUERY_TO_DOC_ALL_SUM_F_COUNT_TEXT_BOCM11_NORM256_AVG = herf.RandomLogHostQueryToDocAllSumFCountTextBocm11Norm256Avg:8;
factor FI_RANDOMLOGHOST_QUERY_IS_NAV_MX_PERCENTALE_90 = herf.RandomLogHostIsNavMxQueryPerc90:8;
factor FI_RANDOMLOGHOST_DBM15_WARES2_AVG = herf.RandomLogHostDBM15Wares2Avg:8;
factor FI_RANDOMLOGHOST_URL_NGRAMS_MODEL_PERCENTALE_90 = herf.RandomLogHostUrlNGramsModelPerc90:8;
factor FI_RANDOMLOGHOST_DSSM_BOOSTING_CTR_KMEANS_1_SCORE_SCALED_SUM_WEIGHTED_QE_PERCENTALE_25 = herf.RandomLogHostDssmBoostingCtrKMeans1ScoreScaledSumWeightedQEPerc25:8;
factor FI_RANDOMLOGHOST_LONG_CLICK_MOBILE_ALL_WCM_WEIGHTED_VALUE_PERCENTALE_90 = herf.RandomLogHostLongClickMobileAllWcmWeightedValuePerc90:8;
factor FI_RANDOMLOGHOST_DSSM_VK_POPULARITY_PERCENTALE_25 = herf.RandomLogHostDssmVkPopularityPerc25:8;
factor FI_RANDOMLOGHOST_UB_LONG_PERIOD_URL_VISITS_SN_PROB_AVG = herf.RandomLogHostUBLongPeriodVisitsSNProbAvg:8;
factor FI_RANDOMLOGHOST_COUNTRY_QUERY_REGIONALITY_PERCENTALE_90 = herf.RandomLogHostCountryQueryRegionalityPerc90:8;
factor FI_RANDOMLOGHOST_HIT_WEIGHT_PERCENTALE_90 = herf.RandomLogHostTRhitwPerc90:8;
factor FI_RANDOMLOGHOST_UB_LONG_PERIOD_URL_AVG_SEARCH_DURATION_600_PERCENTALE_90 = herf.RandomLogHostUBLongPeriodAvgSearchDuration600Perc90:8;
factor FI_RANDOMLOGHOST_REQUEST_IS_FROM_IOS_AVG = herf.RandomLogHostRequestIsFromIOSAvg:8;
factor FI_RANDOMLOGHOST_DSSM_QUERY_EMBEDDING_CTR_NO_MINER_PCA_4_PERCENTALE_90 = herf.RandomLogHostDssmQueryEmbeddingCtrNoMinerPca4Perc90:8;
factor FI_RANDOMLOGHOST_XF_DT_SHOW_ALL_MAX_F_FIELD_SET_UT_BM15FLOG_W0_K0_0001_AVG = herf.RandomLogHostXfDtShowAllMaxFFieldSetUTBm15FLogW0Avg:8;
factor FI_RANDOMLOGHOST_URL_TRIGRAMS_PERCENTALE_25 = herf.RandomLogHostUrlTrigramsPerc25:8;
factor FI_RANDOMLOGHOST_DSSM_QUERY_EMBEDDING_CTR_NO_MINER_PCA_1_PERCENTALE_90 = herf.RandomLogHostDssmQueryEmbeddingCtrNoMinerPca1Perc90:8;
factor FI_RANDOMLOGHOST_IS_RELEV_LOCALE_KZ_AVG = herf.RandomLogHostIsRelevLocaleKZAvg:8;
factor FI_RANDOMLOGHOST_TEXT_FEATURES_PERCENTALE_90 = herf.RandomLogHostTextFeaturesPerc90:8;

factor FI_RANDOMLOGHOST_LONG_RMSE = herf.RandomLogHostLongRmse:8;
factor FI_RANDOMLOGHOST_QUERY_ISORG_RMSE = herf.RandomLogHostIsOrgRmse:8;
factor FI_RANDOMLOGHOST_GSK_URL_MODEL_RMSE = herf.RandomLogHostGskUrlModelRmse:8;
factor FI_RANDOMLOGHOST_DATER_STATS_AVERAGE_SOURCE_SEGMENT_RMSE = herf.RandomLogHostDaterStatsAverageSourceSegmentRmse:8;
factor FI_RANDOMLOGHOST_VISITS_FROM_WIKI_RMSE = herf.RandomLogHostVisitsFromWikiRmse:8;
factor FI_RANDOMLOGHOST_XF_DT_SHOW_BAG_OF_WORDS_TITLE_COSINE_MAX_MATCH_RMSE = herf.RandomLogHostXfDtShowBagOfWordsTitleCosineMaxMatchRmse:8;
factor FI_RANDOMLOGHOST_UB_LONG_PERIOD_URL_DOWNLOADS_PROB_RMSE = herf.RandomLogHostUBLongPeriodDownloadsProbRmse:8;
factor FI_RANDOMLOGHOST_META_AVG_IS_NOT_CGI_RMSE = herf.RandomLogHostMetaAvgIsNotCgiRmse:8;
factor FI_RANDOMLOGHOST_META_RMS_SYN_BAD_WORD_PAIRS_RMSE = herf.RandomLogHostMetaRmsSynPercentBadWordPairsRmse:8;
factor FI_RANDOMLOGHOST_META_POS_TRIGRAMS_PROB_RMSE = herf.RandomLogHostMetaPosTrigramsProbRmse:8;
factor FI_RANDOMLOGHOST_BOCM_PERCENTALE_90 = herf.RandomLogHostBocmPerc90:8;
factor FI_RANDOMLOGHOST_SEGMENT_WORD_PORTION_FROM_MAINCONTENT_PERCENTALE_90 = herf.RandomLogHostSegmentWordPortionFromMainContentPerc90:8;
factor FI_RANDOMLOGHOST_IS_MOBILE_BEAUTY_PERCENTALE_90 = herf.RandomLogHostIsMobileBeautyPerc90:8;
factor FI_RANDOMLOGHOST_US_LONG_PERIOD_URL_WINS_PROB_PERCENTALE_90 = herf.RandomLogHostUSLongPeriodUrlWinsProbPerc90:8;
factor FI_RANDOMLOGHOST_DSSM_BOOSTING_XF_WEIGHT_KMEANS_5_AVG_TOP_02_SCORE_QE_PERCENTALE_90 = herf.RandomLogHostDssmBoostingXfWeightKMeans5AvgTop02ScoreQEPerc90:8;
factor FI_RANDOMLOGHOST_DSSM_BOOSTING_CTR_KMEANS_1_SCORE_PERCENTALE_90 = herf.RandomLogHostDssmBoostingCtrKMeans1ScorePerc90:8;
factor FI_RANDOMLOGHOST_SD_IS_NAV_MX_QUERY_MAX_PERCENTALE_90 = herf.RandomLogHostSDIsNavMxQueryMaxPerc90:8;
factor FI_RANDOMLOGHOST_META_WEB_764_1076_PRODUCT_INV_AVG_PERCENTALE_90 = herf.RandomLogHostMetaWeb764Web1076ProductInvAvgPerc90:8;
factor FI_RANDOMLOGHOST_META_WEB_1099_1219_PRODUCT_INV_POS_PERCENTALE_90 = herf.RandomLogHostMetaWeb1099Web1219ProductInvPosPerc90:8;
factor FI_RANDOMLOGHOST_META_MAX_DSSM_MIDDLE_VS_SHORT_LONG_HARD_NO_CLICKS_PERCENTALE_90 = herf.RandomLogHostMetaMaxDssmMiddleVsShortLongHardNoClicksPerc90:8;
factor FI_RANDOMLOGHOST_NUM_LINKS_FROM_MP_MAX = herf.RandomLogHostNumLinksFromMPMax:8;
factor FI_RANDOMLOGHOST_NAV_LINEAR_MAX = herf.RandomLogHostNavLinearMax:8;
factor FI_RANDOMLOGHOST_DATER_STATS_AVERAGE_SOURCE_SEGMENT_MAX = herf.RandomLogHostDaterStatsAverageSourceSegmentMax:8;
factor FI_RANDOMLOGHOST_WS_IS_INDEX_PAGE_AND_QUERY_IS_NAV_MX_MAX = herf.RandomLogHostWeightedSumIsIndexPageIsNavMxQueryMax:8;
factor FI_RANDOMLOGHOST_QUERY_TO_DOC_ALL_SUM_F_COUNT_TEXT_BOCM11_NORM256_MAX = herf.RandomLogHostQueryToDocAllSumFCountTextBocm11Norm256Max:8;
factor FI_RANDOMLOGHOST_DSSM_LOG_DWELL_TIME_BIGRAMS_QUERY_DERIVATIVE_MAX_MAX = herf.RandomLogHostDssmBigramsQueryDerivativeMaxMax:8;
factor FI_RANDOMLOGHOST_DSSM_QUERY_COUNTRY_TO_URL_ESTIMATED_DISTANCE_MAX = herf.RandomLogHostDssmQueryCountryToUrlEstimatedDistanceMax:8;
factor FI_RANDOMLOGHOST_META_WEB_764_1076_PRODUCT_INV_AVG_MAX = herf.RandomLogHostMetaWeb764Web1076ProductInvAvgMax:8;
factor FI_RANDOMLOGHOST_TEXT_FEATURES_LOGAVG = herf.RandomLogHostTextFeaturesLogAvg:8;
factor FI_RANDOMLOGHOST_DOC_LEN_LOGAVG = herf.RandomLogHostDocLenLogAvg:8;
factor FI_RANDOMLOGHOST_IS_HTML_LOGAVG = herf.RandomLogHostIsHTMLLogAvg:8;
factor FI_RANDOMLOGHOST_DOC_HAS_LEVENSHT1_QUERY_FRAGMENT_LOGAVG = herf.RandomLogHostHasLevensht1QueryFragmentLogAvg:8;
factor FI_RANDOMLOGHOST_HEADING_IDF_SUM_FIXED_LOGAVG = herf.RandomLogHostHeadingIdfSumFixedLogAvg:8;
factor FI_RANDOMLOGHOST_ADV_PRONOUNS_PORTION_LOGAVG = herf.RandomLogHostAdvPronounsPortionLogAvg:8;
factor FI_RANDOMLOGHOST_LONGEST_TEXT_LOGAVG = herf.RandomLogHostLongestTextLogAvg:8;
factor FI_RANDOMLOGHOST_COUNTRY_HOUR_LOGAVG = herf.RandomLogHostCountryHourLogAvg:8;
factor FI_RANDOMLOGHOST_METRIKA_URL_AVG_TIME_LOGAVG = herf.RandomLogHostMetrikaUrlAvgTimeLogAvg:8;
factor FI_RANDOMLOGHOST_WIKI_LINK_COUNT_LOGAVG = herf.RandomLogHostWikiLinkCountLogAvg:8;
factor FI_RANDOMLOGHOST_BROWSER_URL_DWELL_TIME_REGION_FRC_LOGAVG = herf.RandomLogHostBrowserUrlDwellTimeRegionFrcLogAvg:8;
factor FI_RANDOMLOGHOST_WIKI_INFOBOX_LOGAVG = herf.RandomLogHostWikiInfoboxLogAvg:8;
factor FI_RANDOMLOGHOST_QUERY_DOC_TITLE_RANGES_MATCHING_SCORE_LOGAVG = herf.RandomLogHostQueryDocTitleRangesMatchingScoreLogAvg:8;
factor FI_RANDOMLOGHOST_IS_MOBILE_BEAUTY_LOGAVG = herf.RandomLogHostIsMobileBeautyLogAvg:8;
factor FI_RANDOMLOGHOST_QUERY_TO_TEXT_ALL_SUM_WF_SUM_W_BODY_MIN_WINDOW_SIZE_LOGAVG = herf.RandomLogHostQueryToTextAllSumWFSumWBodyMinWindowSizeLogAvg:8;
factor FI_RANDOMLOGHOST_DSSM_RANDOM_LOG_QUERY_AVG_DIFFERENT_INTERNAL_LINKS_LOGAVG = herf.RandomLogHostDssmRandomLogQueryAvgDifferentInternalLinksLogAvg:8;
factor FI_RANDOMLOGHOST_META_URL_DIRECT_CHILDREN_CNT_LOGAVG = herf.RandomLogHostMetaUrlDirectChildrenCntLogAvg:8;
factor FI_RANDOMLOGHOST_META_WEB_1241_1299_PRODUCT_INV_POS_LOGAVG = herf.RandomLogHostMetaWeb1241Web1299ProductInvPosLogAvg:8;
factor FI_RANDOMLOGHOST_META_EPS_HASH_SHARE_NATIONAL_LANGUAGE_LOGAVG = herf.RandomLogHostMetaEpsHashShareNationalLanguageLogAvg:8;

factor FI_DWELL_TIME_SUM_FRACTION_PERCENTALE25_AGGR = herf.DwellTimeSumFractionPercentale25Aggr:8;
factor FI_AVERAGE_RETURN_TIME_PERCENTALE99_AGGR = herf.AverageReturnTimePercentale99Aggr:8;
factor FI_AVERAGE_RETURN_TIME_PERCENTALE97_AGGR = herf.AverageReturnTimePercentale97Aggr:8;
factor FI_AVERAGE_RETURN_TIME_GREATER_FRACTION99_AGGR = herf.AverageReturnTimeGreaterFraction99Aggr:8;
factor FI_AVERAGE_LOG_RETURN_TIME_PERCENTALE99_AGGR = herf.AverageLogReturnTimePercentale99Aggr:8;
factor FI_AVERAGE_LOG_RETURN_TIME_GREATER_FRACTION90_AGGR = herf.AverageLogReturnTimeGreaterFraction90Aggr:8;
factor FI_FIRST_CLICK_DWELL_TIME_LESS_FRACTION5_AGGR = herf.FirstClickDwellTimeLessFraction5Aggr:8;
factor FI_AVERAGE_VISITS_PER_3_HOURS_WEIGHTED_AVERAGE_AGGR = herf.AverageVisitsPer3HoursWeightedAverageAggr:8;
factor FI_AVERAGE_DWELL_TIME_PER_HOUR_WEIGHTED_AVERAGE_AGGR = herf.AverageDwellTimePerHourWeightedAverageAggr:8;
factor FI_AVERAGE_DWELL_TIME_PER_3_HOURS_LESS_FRACTION10_AGGR = herf.AverageDwellTimePer3HoursLessFraction10Aggr:8;
factor FI_AVERAGE_DWELL_TIME_PER_WEEK_MAX_AGGR = herf.AverageDwellTimePerWeekMaxAggr:8;

factor FI_RANDOMLOGOWNER_RANDOM_LOG_WORD_MAX_META_NUM_URLS_PER_HOST_FIXED_PERCENTALE_90 = herf.RandomLogOwnerRandomLogWordMaxMetaNumUrlsPerHostFixedPerc90:8;
factor FI_RANDOMLOGOWNER_META_WEB_1099_1219_PRODUCT_INV_POS_LOGAVG = herf.RandomLogOwnerMetaWeb1099Web1219ProductInvPosLogAvg:8;
factor FI_RANDOMLOGOWNER_DSSM_DWELLTIME_REG_CHAIN_TRAINED_EMBEDDING_PERCENTALE_90 = herf.RandomLogOwnerDssmDwelltimeRegChainTrainedEmbeddingPerc90:8;
factor FI_RANDOMLOGOWNER_DSSM_RANDOM_LOG_QUERY_AVG_HAS_PAYMENTS_LOGAVG = herf.RandomLogOwnerDssmRandomLogQueryAvgHasPaymentsLogAvg:8;
factor FI_RANDOMLOGOWNER_UB_LONG_PERIOD_URL_BROWSE_FRC_PERCENTALE_90 = herf.RandomLogOwnerUBLongPeriodBrowseFrcPerc90:8;
factor FI_RANDOMLOGOWNER_META_URL_CHILDREN_CNT_LOGAVG = herf.RandomLogOwnerMetaUrlChildrenCntLogAvg:8;
factor FI_RANDOMLOGOWNER_META_RMS_DIFFERENT_INTERNAL_LINKS_PERCENTALE_25 = herf.RandomLogOwnerMetaRmsDifferentInternalLinksPerc25:8;
factor FI_RANDOMLOGOWNER_RANDOM_LOG_WORD_MAX_HAS_NO_TR_PERCENTALE_90 = herf.RandomLogOwnerRandomLogWordMaxHasNoTrPerc90:8;
factor FI_RANDOMLOGOWNER_META_RESID_US_LONG_PERIOD_URL_WINS_PROB_RMSE = herf.RandomLogOwnerMetaResidUSLongPeriodUrlWinsProbRmse:8;
factor FI_RANDOMLOGOWNER_PORNO_QUERY_LOGAVG = herf.RandomLogOwnerPornoQueryLogAvg:8;
factor FI_RANDOMLOGOWNER_NATIONAL_LANGUAGE_LOGAVG = herf.RandomLogOwnerNationalLanguageLogAvg:8;
factor FI_RANDOMLOGOWNER_PERCENT_VISIBLE_CONTENT_PERCENTALE_90 = herf.RandomLogOwnerPercentVisibleContentPerc90:8;
factor FI_RANDOMLOGOWNER_META_WEB_1241_1299_PRODUCT_INV_POS_PERCENTALE_25 = herf.RandomLogOwnerMetaWeb1241Web1299ProductInvPosPerc25:8;
factor FI_RANDOMLOGOWNER_LINKANN_FLOAT_MULTIPLICITY_ATTENV1_BM15_K001_LOGAVG = herf.RandomLogOwnerLinkAnnFloatMultiplicityAttenV1Bm15K001LogAvg:8;
factor FI_RANDOMLOGOWNER_UB_LONG_PERIOD_URL_LEAVES_CNT_RMSE = herf.RandomLogOwnerUBLongPeriodLeavesCntRmse:8;
factor FI_RANDOMLOGOWNER_NUM_LINKS_FROM_MP_LOGAVG = herf.RandomLogOwnerNumLinksFromMPLogAvg:8;
factor FI_RANDOMLOGOWNER_DSSM_RANDOM_LOG_QUERY_AVG_DIFFERENT_INTERNAL_LINKS_PERCENTALE_25 = herf.RandomLogOwnerDssmRandomLogQueryAvgDifferentInternalLinksPerc25:8;
factor FI_RANDOMLOGOWNER_QUERY_ISORG_RMSE = herf.RandomLogOwnerIsOrgRmse:8;
factor FI_RANDOMLOGOWNER_QSEGMENTS_BM25_MAX = herf.RandomLogOwnerQSegmentsBM25Max:8;
factor FI_RANDOMLOGOWNER_SEGMENT_AUX_ALPHAS_IN_TEXT_RMSE = herf.RandomLogOwnerSegmentAuxAlphasInTextRmse:8;
factor FI_RANDOMLOGOWNER_RANDOM_LOG_QUERY_DWELLTIME_WEIGHTED_AVG_URL_DOMAIN_FRACTION_LOGAVG = herf.RandomLogOwnerRandomLogQueryDwelltimeWeightedAvgUrlDomainFractionLogAvg:8;
factor FI_RANDOMLOGOWNER_RANDOM_LOG_WORD_SKIP_STOP_WORDS_MAX_IS_DESKTOP_REQUEST_LOGAVG = herf.RandomLogOwnerRandomLogWordSkipStopWordsMaxIsDesktopRequestLogAvg:8;
factor FI_RANDOMLOGOWNER_VISITS_FROM_WIKI_RMSE = herf.RandomLogOwnerVisitsFromWikiRmse:8;
factor FI_RANDOMLOGOWNER_QUERY_ISTEXT_RMSE = herf.RandomLogOwnerIsTextRmse:8;
factor FI_RANDOMLOGOWNER_DBM_SUBSTANTIVE_MAX = herf.RandomLogOwnerDBMSubstantiveMax:8;
factor FI_RANDOMLOGOWNER_DATER_STATS_AVERAGE_SOURCE_SEGMENT_RMSE = herf.RandomLogOwnerDaterStatsAverageSourceSegmentRmse:8;
factor FI_RANDOMLOGOWNER_IS_MOBILE_BEAUTY_LOGAVG = herf.RandomLogOwnerIsMobileBeautyLogAvg:8;
factor FI_RANDOMLOGOWNER_LONG_CLICK_SP_MIX_MATCH_WEIGHTED_VALUE_PERCENTALE_90 = herf.RandomLogOwnerLongClickSPMixMatchWeightedValuePerc90:8;
factor FI_RANDOMLOGOWNER_FEM_MAS_NOUNS_PORTION_LOGAVG = herf.RandomLogOwnerFemAndMasNounsPortionLogAvg:8;
factor FI_RANDOMLOGOWNER_TRIGRAMS_PROB_PERCENTALE_90 = herf.RandomLogOwnerTrigramsProbPerc90:8;
factor FI_RANDOMLOGOWNER_DATER_STATS_YEAR_NORM_LIKELIHOOD_PERCENTALE_25 = herf.RandomLogOwnerDaterStatsYearNormLikelihoodPerc25:8;
factor FI_RANDOMLOGOWNER_URL_PATH_AND_PARAMS_FRACTION_MAX = herf.RandomLogOwnerUrlPathAndParamsFractionMax:8;

factor FI_RANDOM_LOG_HOST_TOP_CLICKED_URLS_IS_MOBILE_REQUEST_LOGAVG = erf.RandomLogHostTopClickedUrlsIsMobileRequestLogAvg:16;
factor FI_RANDOM_LOG_HOST_TOP_CLICKED_URLS_NANOBTANIUM_QUERY_WORD_TITLE_5N_DIST2MAXX_MAX_IS_MOBILE_REQUEST_LOGAVG = erf.RandomLogHostTopClickedUrlsNanobtaniumQueryWordTitle5nDist2maxXMaxIsMobileRequestLogAvg:16;

// web & images
factor FI_BROWSER_BOOKMARKS_URL = erf.BrowserBookmarks:8;
factor FI_YABAR_CORE_OWNER = herf.YaBarCoreOwner:8;
factor FI_YABAR_CORE_HOST = herf.YaBarCoreHost:8;
factor FI_YABAR_HOST_INTERNAL_TRAFFIC = herf.YabarHostInternalTraffic:8;
factor FI_YABAR_HOST_AVG_TIME = herf.YabarHostAvgTime:8;
factor FI_YABAR_HOST_AVG_TIME2 = herf.YabarHostAvgTime2:8;
factor FI_YABAR_HOST_AVG_ACTIONS = herf.YabarHostAvgActions:8;
factor FI_YABAR_HOST_BROWSE_RANK = herf.YabarHostBrowseRank:8;

// fresh factors
factor FI_FRESH_HOST_AVG_30DAYS_SURPLUS = herf.WebFreshHostAvg30DaysSurplus:float;
factor FI_FRESH_HOST_30DAYS_POSITIVE_SURPLUS_RATE = herf.WebFreshHost30DaysPositiveSurplusRate:float;

// factors expressed by a c++ expression
factor FI_ADULTNESS depends(erf.NastyContent) = expr(Min(2.f * Ui82Float(erf.NastyContent), 1.f));
factor FI_HOST_ADULTNESS depends(erf.NastyContent) = expr(Min(2.f * Ui82Float(erf.NastyContent), 1.f));
factor FI_KC_HOST_ADULTNESS = expr(0.f);
factor FI_IS_UA depends(herf.NationalDomainId) = expr(BOOL_TO_FLOAT(COUNTRY_UKRAINE.ErfCode == herf.NationalDomainId));
factor FI_ENG_LANG depends(erf.Language) = expr(BOOL_TO_FLOAT(erf.Language == LANG_ENG));
factor FI_CYR_LANG depends(erf.Language) = expr(BOOL_TO_FLOAT((LANG_RUS == erf.Language) || (LANG_UKR == erf.Language) || (LANG_BEL == erf.Language)));
factor FI_LANG_POPULARITY depends(erf.Language) = expr(GetLangPopularity(ELanguage(erf.Language)));
factor FI_IS_NOT_RU depends(herf.NationalDomainId) = expr(BOOL_TO_FLOAT(!(COUNTRY_RUSSIA.ErfCode == herf.NationalDomainId)));
factor FI_URL_HAS_NO_DIGITS depends(erf.UrlHasDigits) = expr(BOOL_TO_FLOAT(!erf.UrlHasDigits));
factor FI_IS_INTERNATIONAL_DOMAIN depends(herf.IsInternationalDomain) = expr(BOOL_TO_FLOAT(herf.IsInternationalDomain));
factor FI_DATER_STATS_YEAR_NORM_LIKELIHOOD depends(erf.DaterStatsYearNormLikelihood) = expr(Ui82Float(erf.DaterStatsYearNormLikelihood));
factor FI_DATER_STATS_AVERAGE_SOURCE_SEGMENT depends(erf.DaterStatsAverageSourceSegment) = expr(Ui82Float(erf.DaterStatsAverageSourceSegment));
factor FI_HAS_NEWS_AGENCY_RATING = expr(BOOL_TO_FLOAT(herf.NewsAgencyRating > 0));

// indexfrq factor
factor FI_LONG depends(erf.IsFake, erf.MaxFreq) = expr(MapFactor(erf.IsFake ? 0 : erf.MaxFreq, 1.0f / 20));


// web & images
factor FI_HAS_YA_BAR_CORE depends(herf.YaBarCoreOwner) = expr(BOOL_TO_FLOAT(0 != herf.YaBarCoreOwner));
factor FI_HOST_SIZE depends(erf.IsFake, herf.HostSize) = expr(erf.IsFake ? 0 : Ui82Float(herf.HostSize));

//MT-14803
factor FI_IS_TRANSLATED_DOCUMENT = erf.IsTranslatedDocument:1;

block dater_common depends(erf) {
    NDater::TDaterDate daterDate = NDater::ReadBestDateFromErf(erf);
    const int addFullYear = erf.AddTimeFull != 0 ? YearFromTime(erf.AddTimeFull) : 0;
    const int docDateYear = erf.DocDateYear;
}

block current_year_month {
        int currentYearMonth = csfp.CurrentDate ? csfp.CurrentDate->YM : NDater::TCurrentDateParams().YM;
}

block calc_doc_create_month computes(FI_DOC_CREATE_MONTH) depends(erf, current_year_month) {
    factor[FI_DOC_CREATE_MONTH] = MapLinear(erf.DocCreateMonth, currentYearMonth, 120);
}

block calc_doc_update_month computes(FI_DOC_UPDATE_MONTH) depends(erf, current_year_month) {
    factor[FI_DOC_UPDATE_MONTH] = MapLinear(erf.DocUpdateMonth, currentYearMonth, 120);
}

// vim: ft=cpp
