syntax = "proto3";

package NUgc.NSchema;

import "kernel/ugc/proto/aggregate.proto";
import "kernel/ugc/proto/board_subscription.proto";
import "kernel/ugc/proto/collections/meta_info.proto";
import "kernel/ugc/proto/deleted_favorite.proto";
import "kernel/ugc/proto/favorite_book.proto";
import "kernel/ugc/proto/favorite_film.proto";
import "kernel/ugc/proto/favorite_game.proto";
import "kernel/ugc/proto/favorite_geo.proto";
import "kernel/ugc/proto/favorite_goods.proto";
import "kernel/ugc/proto/favorite_image.proto";
import "kernel/ugc/proto/favorite_link.proto";
import "kernel/ugc/proto/favorite_music.proto";
import "kernel/ugc/proto/favorite_news.proto";
import "kernel/ugc/proto/favorite_organization.proto";
import "kernel/ugc/proto/favorite_serial.proto";
import "kernel/ugc/proto/favorite_specialist.proto";
import "kernel/ugc/proto/favorite_video.proto";
import "kernel/ugc/proto/images.proto";
import "kernel/ugc/proto/liked_news.proto";
import "kernel/ugc/proto/onto/object.proto";
import "kernel/ugc/proto/reactions.proto";
import "kernel/ugc/proto/services_worker.proto";
import "kernel/ugc/proto/subscription.proto";
import "kernel/ugc/proto/user_achievement.proto";
import "kernel/ugc/proto/user_org.proto";
import "kernel/ugc/schema/proto/schema.proto";

// Next field: 59
message TVisitorProfile {
    string YandexUID = 1;

    repeated NOrgs.TUserOrg Orgs = 2;

    repeated NOnto.TOntoObject Onto = 51 [(topic) = "ugc"];

    // for kinopoisk rating migration
    repeated NOnto.TRatedOntoObject FilmUgcRating = 52 [(topic) = "ugc"];
    repeated NOnto.TRatedOntoObject FilmKinopoiskRating = 53 [(topic) = "ugc"];

    TAggregate Aggregate = 54;
    repeated TAggregateItem Aggregates = 88 [(value_format) = PROTO];

    repeated TUserAchievementData AchievementsData = 28 [(topic) = "ugc"];

    repeated TFavoriteBook FavoriteBooks = 16 [(storage) = "collections"];
    repeated TFavoriteFilm FavoriteFilms = 4 [(storage) = "collections"];
    repeated TFavoriteGame FavoriteGames = 17 [(storage) = "collections"];
    repeated TFavoriteGeo FavoriteGeos = 22 [(storage) = "collections"];
    repeated TFavoriteGoods FavoriteGoods = 56 [(storage) = "collections"];
    repeated TFavoriteImage FavoriteImages = 3 [(storage) = "collections"];
    repeated TFavoriteLink FavoriteLinks = 10 [(storage) = "collections"];
    repeated TFavoriteMusic FavoriteMusics = 18 [(storage) = "collections"];
    repeated TFavoriteOrganization FavoriteOrganizations = 8 [(storage) = "collections"];
    repeated TFavoriteSerial FavoriteSerials = 5 [(storage) = "collections"];
    repeated TFavoriteVideo FavoriteVideos = 6 [(storage) = "collections"];
    repeated TDeletedFavorite DeletedFavorites = 13 [(storage) = "collections"];
    repeated TFavoriteSpecialist FavoriteSpecialists = 37 [(storage) = "collections"];
    repeated TFavoriteNews FavoriteNews = 42 [(storage) = "collections"];
    // List of collections board subscriptions
    repeated TBoardSubscription BoardSubscriptions = 35 [(storage) = "collections"];

    // Collections snapshot. TODO: move to internal.
    NCollections.TMetaInfo CollectionsMetaInfo = 21 [(storage) = "collections"];


    repeated TUserNewsStoryLike LikedNews = 9 [(topic) = "ugc"]; // TODO Migrate to new reactions
    repeated TUserReaction LikedWoman = 29 [(topic) = "ugc"];
    repeated TUserReaction LikedSport = 30 [(topic) = "ugc"];
    repeated TUserReaction LikedVideo = 32 [(topic) = "ugc"];
    repeated TUserReaction OrgReviewLikes = 33 [(topic) = "ugc"];
    repeated TUserReaction OntoReviewLikes = 34 [(topic) = "ugc"];
    repeated TUserReaction LikedSpravPost = 38 [(topic) = "ugc"];
    repeated TUserReaction LikedTalkArticle = 39 [(topic) = "ugc"];
    repeated TUserReaction LikedVhSubs = 40 [(topic) = "ugc"];
    repeated TUserReaction SiteReviewLikes = 41 [(topic) = "ugc"];
    repeated TUserReaction LikedVhSkip = 43 [(topic) = "ugc"];
    repeated TUserReaction LikedSpravImage = 44 [(topic) = "ugc"];
    repeated TUserReaction LikedUrlrec = 45 [(topic) = "ugc"];
    repeated TUserReaction LikedWeatherFact = 46 [(topic) = "ugc"];
    repeated TUserReaction LikedHealthArticle = 47 [(topic) = "ugc"];
    repeated TUserReaction LikedTurboPage = 48 [(topic) = "ugc"];
    repeated TUserReaction LikedEntity = 49 [(topic) = "ugc"];
    repeated TUserReaction LikedDistrict = 50 [(topic) = "ugc"];
    repeated TUserReaction LikedVkus = 55 [(topic) = "ugc"];
    repeated TUserReaction MiniAppReviewLikes = 57 [(topic) = "ugc"];
    repeated TUserReaction OfferReviewLikes = 58 [(topic) = "ugc"];

    // Subscriptions for video series events. Key: series ontoid.
    repeated TOntoIdSeriesSubscription SeriesSubscriptions = 23 [(topic) = "ugc"];

    // Subscriptions for video broadcast events. Key: broadcast ontoid.
    repeated TOntoIdSeriesSubscription BroadcastSubscriptions = 24 [(topic) = "ugc"];

    // Subscriptions for video broadcast events not in ontodb. Key: broadcast content id.
    repeated TContentIdSeriesSubscription BroadcastCmsSubscriptions = 25 [(topic) = "ugc"];

    // Subscriptions for video stream events. Key: stream content id.
    repeated TContentIdSeriesSubscription StreamSubscriptions = 26 [(topic) = "ugc"];

    // Subscriptions for celebrity persona events. Key: person's Yandex login.
    repeated TPersonSubscription PersonSubscriptions = 27 [(topic) = "ugc"];

    // Image Search pre-request feedback.
    repeated NImages.TImageSearchFeedback ImageSearchFeedbacks = 31;

    // Reviews of Yandex.Services workers. Key: worker id assigned by Yandex.Services.
    repeated NServices.TWorkerReview ServicesWorkers = 36 [(topic) = "ugc"];

    option (schema) = {
        Table: {
            Name: "orgs"
            Field: "Orgs"
            Key: "OrgId"
        }

        Table: {
            Name: "onto"
            Field: "Onto"
            Key: "OntoId"
        }

        Table: {
            Name: "film-ugc-rating"
            Field: "FilmUgcRating"
            Key: "OntoId"
        }

        Table: {
            Name: "film-kinopoisk-rating"
            Field: "FilmKinopoiskRating"
            Key: "OntoId"
        }

        Column: {
            Name: "aggregate"
            Field: "Aggregate"
        }

        Table: {
            Name: "aggregates"
            Field: "Aggregates"
            Key: "ItemOrder"
        }

        Table: {
            Name: "achievements-data"
            Field: "AchievementsData"
            Key: "Id"
        }

        Rpc {
            Name: "achievements"
            Handler: "UserAchievements"
            Key: "AchievementId"
        }

        Table: {
            Name: "favorite-books"
            Field: "FavoriteBooks"
            Key: "Id"
        }

        Table: {
            Name: "favorite-films"
            Field: "FavoriteFilms"
            Key: "Id"
        }

        Table: {
            Name: "favorite-games"
            Field: "FavoriteGames"
            Key: "Id"
        }

        Table: {
            Name: "favorite-geos"
            Field: "FavoriteGeos"
            Key: "Id"
        }

        Table: {
            Name: "favorite-goods"
            Field: "FavoriteGoods"
            Key: "Id"
        }

        Table: {
            Name: "favorite-images",
            Field: "FavoriteImages",
            Key: "Id"
        }

        Table: {
            Name: "favorite-links",
            Field: "FavoriteLinks",
            Key: "Id"
        }

        Table: {
            Name: "favorite-musics"
            Field: "FavoriteMusics"
            Key: "Id"
        }

        Table: {
            Name: "favorite-organizations",
            Field: "FavoriteOrganizations",
            Key: "Id"
        }

        Table: {
            Name: "favorite-serials"
            Field: "FavoriteSerials"
            Key: "Id"
        }

        Table: {
            Name: "favorite-videos"
            Field: "FavoriteVideos"
            Key: "Id"
        }

        Table: {
            Name: "favorite-specialists"
            Field: "FavoriteSpecialists"
            Key: "Id"
        }

        Table: {
            Name: "favorite-news"
            Field: "FavoriteNews"
            Key: "Id"
        }

        Table: {
            Name: "deleted-favorites"
            Field: "DeletedFavorites"
            Key: "Id"
        }

        Table: {
            Name: "board-subscriptions"
            Field: "BoardSubscriptions"
            Key: "Id"
        }

        Column: {
            Name: "collections-meta-info"
            Field: "CollectionsMetaInfo"
        }

        Table: {
            Name: "liked-news"
            Field: "LikedNews"
            Key: "StoryId"
        }

        Table: {
            Name: "liked-woman"
            Field: "LikedWoman"
            Key: "Id"
        }

        Table: {
            Name: "liked-sport"
            Field: "LikedSport"
            Key: "Id"
        }

        Table: {
            Name: "liked-video"
            Field: "LikedVideo"
            Key: "Id"
        }

        Table: {
            Name: "org-review-likes"
            Field: "OrgReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "onto-review-likes"
            Field: "OntoReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "liked-sprav-post"
            Field: "LikedSpravPost"
            Key: "Id"
        }

        Table: {
            Name: "liked-talk-article"
            Field: "LikedTalkArticle"
            Key: "Id"
        }

        Table: {
            Name: "liked-vh-subs"
            Field: "LikedVhSubs"
            Key: "Id"
        }

        Table: {
            Name: "site-review-likes"
            Field: "SiteReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "miniapp-review-likes"
            Field: "MiniAppReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "offer-review-likes"
            Field: "OfferReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "liked-vh-skip"
            Field: "LikedVhSkip"
            Key: "Id"
        }

        Table: {
            Name: "liked-sprav-image"
            Field: "LikedSpravImage"
            Key: "Id"
        }

        Table: {
            Name: "liked-urlrec"
            Field: "LikedUrlrec"
            Key: "Id"
        }

        Table: {
            Name: "liked-weather-fact"
            Field: "LikedWeatherFact"
            Key: "Id"
        }

        Table: {
            Name: "liked-health-article"
            Field: "LikedHealthArticle"
            Key: "Id"
        }

        Table: {
            Name: "liked-turbo-page"
            Field: "LikedTurboPage"
            Key: "Id"
        }

        Table: {
            Name: "liked-entity"
            Field: "LikedEntity"
            Key: "Id"
        }

        Table: {
            Name: "liked-district"
            Field: "LikedDistrict"
            Key: "Id"
        }

        Table: {
            Name: "liked-vkus"
            Field: "LikedVkus"
            Key: "Id"
        }

        Table: {
            Name: "series-subs"
            Field: "SeriesSubscriptions"
            Key: "OntoId"
        }

        Table: {
            Name: "broadcast-subs"
            Field: "BroadcastSubscriptions"
            Key: "OntoId"
        }

        Table: {
            Name: "broadcast-cms-subs"
            Field: "BroadcastCmsSubscriptions"
            Key: "ContentId"
        }

        Table: {
            Name: "stream-subs"
            Field: "StreamSubscriptions"
            Key: "ContentId"
        }

        Table: {
            Name: "person-subs"
            Field: "PersonSubscriptions"
            Key: "Login"
        }

        Table: {
            Name: "image-search-feedbacks"
            Field: "ImageSearchFeedbacks"
            Key: "RequestId"
        }

        Table: {
            Name: "services-workers"
            Field: "ServicesWorkers"
            Key: "WorkerId"
        }
    };
}
