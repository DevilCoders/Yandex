syntax = "proto3";

package NUgc.NSchema;

import "kernel/ugc/proto/afisha/afisha_feedback.proto";
import "kernel/ugc/proto/aggregate.proto";
import "kernel/ugc/proto/ban_data.proto";
import "kernel/ugc/proto/board_subscription.proto";
import "kernel/ugc/proto/collections/meta_info.proto";
import "kernel/ugc/proto/deleted_favorite.proto";
import "kernel/ugc/proto/favorite_book.proto";
import "kernel/ugc/proto/favorite_film.proto";
import "kernel/ugc/proto/favorite_game.proto";
import "kernel/ugc/proto/favorite_geo.proto";
import "kernel/ugc/proto/favorite_goods.proto";
import "kernel/ugc/proto/favorite_image.proto";
import "kernel/ugc/proto/favorite_link.proto";
import "kernel/ugc/proto/favorite_music.proto";
import "kernel/ugc/proto/favorite_news.proto";
import "kernel/ugc/proto/favorite_organization.proto";
import "kernel/ugc/proto/favorite_serial.proto";
import "kernel/ugc/proto/favorite_specialist.proto";
import "kernel/ugc/proto/favorite_video.proto";
import "kernel/ugc/proto/geosearch/business_filter.proto";
import "kernel/ugc/proto/hqcg/articles_v3.proto";
import "kernel/ugc/proto/hqcg/likes.proto";
import "kernel/ugc/proto/hqcg/profile.proto";
import "kernel/ugc/proto/images.proto";
import "kernel/ugc/proto/liked_news.proto";
import "kernel/ugc/proto/liked_video.proto";
import "kernel/ugc/proto/onto/film.proto";
import "kernel/ugc/proto/onto/object.proto";
import "kernel/ugc/proto/onto/series.proto";
import "kernel/ugc/proto/org/org_settings.proto";
import "kernel/ugc/proto/pk_settings.proto";
import "kernel/ugc/proto/pushes.proto";
import "kernel/ugc/proto/reactions.proto";
import "kernel/ugc/proto/sbs_answer.proto";
import "kernel/ugc/proto/services_worker.proto";
import "kernel/ugc/proto/site/site_feedback.proto";
import "kernel/ugc/proto/subscription.proto";
import "kernel/ugc/proto/unisearch/education.proto";
import "kernel/ugc/proto/user_achievement.proto";
import "kernel/ugc/proto/user_community.proto";
import "kernel/ugc/proto/user_org.proto";
import "kernel/ugc/proto/user_profession.proto";
import "kernel/ugc/proto/user_splash_screen.proto";
import "kernel/ugc/proto/video_notifications.proto";
import "kernel/ugc/proto/alice_skill_review.proto";
import "kernel/ugc/schema/proto/schema.proto";

// Next field: 97
message TUserProfile {
    string PassportUID = 1;

    repeated NOrgs.TUserOrg Orgs = 2;
    repeated NOnto.TFilm Films = 12;
    repeated NOnto.TSeries Series = 13;

    repeated NOnto.TOntoObject Onto = 73 [(topic) = "ugc"];
    repeated NAfisha.TAfishaObject Afisha = 90 [(topic) = "ugc"];
    repeated NSite.TSiteObject Sites = 91 [(topic) = "ugc"];

    // for kinopoisk rating migration
    repeated NOnto.TRatedOntoObject FilmUgcRating = 74 [(topic) = "ugc"];
    repeated NOnto.TRatedOntoObject FilmKinopoiskRating = 75 [(topic) = "ugc"];

    NOrgs.TUserOrgSettings OrgSettings = 82;

    TAggregate Aggregate = 77;
    repeated TAggregateItem Aggregates = 88 [(value_format) = PROTO];
    repeated TSbsAggregateItem SbsAggregates = 93 [(value_format) = PROTO];

    repeated TFavoriteVideo FavoriteVideos = 3 [(storage) = "collections"];
    repeated TLikedVideo LikedVideos = 7;

    repeated TUserSettings UserSettings = 6 [(topic) = "ugc"];

    repeated TFavoriteBook FavoriteBooks = 32 [(storage) = "collections"];
    repeated TFavoriteFilm FavoriteFilms = 11 [(storage) = "collections"];
    repeated TFavoriteGame FavoriteGames = 33 [(storage) = "collections"];
    repeated TFavoriteGeo FavoriteGeos = 41 [(storage) = "collections"];
    repeated TFavoriteGoods FavoriteGoods = 79 [(storage) = "collections"];
    repeated TFavoriteLink FavoriteLinks = 21 [(storage) = "collections"];
    repeated TFavoriteMusic FavoriteMusics = 34 [(storage) = "collections"];
    repeated TFavoriteOrganization FavoriteOrganizations = 17 [(storage) = "collections"];
    repeated TFavoriteImage FavoriteImages = 8 [(storage) = "collections"];
    repeated TFavoriteSerial FavoriteSerials = 10 [(storage) = "collections"];
    repeated TDeletedFavorite DeletedFavorites = 28 [(storage) = "collections"];
    repeated TFavoriteSpecialist FavoriteSpecialists = 51 [(storage) = "collections"];
    repeated TFavoriteNews FavoriteNews = 57 [(storage) = "collections"];
    // List of collections board subscriptions
    repeated TBoardSubscription BoardSubscriptions = 50 [(storage) = "collections"];

    repeated TObjectSubscription ObjectSubscriptions = 54 [(topic) = "ugc"];
    repeated TOrgSubscription OrgSubscriptions = 76 [(topic) = "ugc"];
    repeated TUserSubscription UserSubscriptions = 63 [(topic) = "ugc"];
    repeated TNewReleasesSubscription NewReleasesSubscription = 66 [(topic) = "ugc"];
    repeated TCommunitySubscription CommunitiesSubscriptions = 69 [(topic) = "ugc"];

    // Collections snapshot. TODO: move to internal.
    NCollections.TMetaInfo CollectionsMetaInfo = 38 [(storage) = "collections"];

    repeated TUserAchievementData AchievementsData = 9 [(topic) = "ugc"];

    repeated TArticle Articles = 25;
    repeated TLikedArticle LikedArticles = 24;
    THqcgUserProfile HqcgUserProfile = 23;

    repeated TUserNewsStoryLike LikedNews = 18 [(topic) = "ugc"]; // TODO Migrate to new reactions
    repeated TUserReaction LikedWoman = 43 [(topic) = "ugc"];
    repeated TUserReaction LikedSport = 44 [(topic) = "ugc"];
    repeated TUserReaction LikedVideo = 47 [(topic) = "ugc"];
    repeated TUserReaction OrgReviewLikes = 48 [(topic) = "ugc"];
    repeated TUserReaction OntoReviewLikes = 49 [(topic) = "ugc"];
    repeated TUserReaction LikedSpravPost = 52 [(topic) = "ugc"];
    repeated TUserReaction LikedTalkArticle = 53 [(topic) = "ugc"];
    repeated TUserReaction LikedVhSubs = 55 [(topic) = "ugc"];
    repeated TUserReaction SiteReviewLikes = 56 [(topic) = "ugc"];
    repeated TUserReaction LikedVhSkip = 59 [(topic) = "ugc"];
    repeated TUserReaction LikedSpravImage = 60 [(topic) = "ugc"];
    repeated TUserReaction LikedUrlrec = 61 [(topic) = "ugc"];
    repeated TUserReaction LikedWeatherFact = 64 [(topic) = "ugc"];
    repeated TUserReaction LikedHealthArticle = 65 [(topic) = "ugc"];
    repeated TUserReaction LikedTurboPage = 70 [(topic) = "ugc"];
    repeated TUserReaction LikedEntity = 71 [(topic) = "ugc"];
    repeated TUserReaction LikedDistrict = 72 [(topic) = "ugc"];
    repeated TUserReaction LikedVkus = 78 [(topic) = "ugc"];
    repeated TUserReaction MiniAppReviewLikes = 80 [(topic) = "ugc"];
    repeated TUserReaction OfferReviewLikes = 81 [(topic) = "ugc"];

    repeated TUserSplashScreen SplashScreens = 19 [(topic) = "ugc"];
    repeated TVideoEmailNotifications VideoEmailNotifications = 20;

    repeated NGeosearch.TBusinessFilter BusinessFilters = 29;

    // Subscriptions for video series events. Key: series ontoid.
    repeated TOntoIdSeriesSubscription SeriesSubscriptions = 35 [(topic) = "ugc"];

    // Subscriptions for video broadcast events. Key: broadcast ontoid.
    repeated TOntoIdSeriesSubscription BroadcastSubscriptions = 36 [(topic) = "ugc"];

    // Subscriptions for video broadcast events not in ontodb. Key: broadcast content id.
    repeated TContentIdSeriesSubscription BroadcastCmsSubscriptions = 37 [(topic) = "ugc"];

    // Subscriptions for video stream events. Key: stream content id.
    repeated TContentIdSeriesSubscription StreamSubscriptions = 39 [(topic) = "ugc"];

    // Subscriptions for celebrity persona events. Key: person's Yandex login.
    repeated TPersonSubscription PersonSubscriptions = 40 [(topic) = "ugc"];

    // Reviews of Yandex.Services workers. Key: worker id assigned by Yandex.Services.
    repeated NServices.TWorkerReview ServicesWorkers = 42 [(topic) = "ugc"];

    // Image Search pre-request feedback.
    repeated NImages.TImageSearchFeedback ImageSearchFeedbacks = 45;

    repeated TUserProfessionData ProfessionsData = 46 [(topic) = "ugc"];

    repeated TPush Pushes = 58;

    repeated TAliceSkillReview AliceSkillReviews = 62 [(topic) = "ugc"];

    // communities user posts
    repeated TUserCommunity Communities = 68 [(topic) = "ugc"];

    // user ban
    TUserBanData UserBanData = 87 [(topic) = "ugc"];

    repeated NUnisearch.TEducationFeedback EducationFeedback = 89 [(topic) = "ugc"];

    repeated TObjectSbsAnswer OrgSbsAnswers = 94;
    repeated TObjectSbsAnswer OntoSbsAnswers = 95;
    repeated TObjectSbsAnswer SiteSbsAnswers = 96;

    option (schema) = {
        Table: {
            Name: "orgs"
            Field: "Orgs"
            Key: "OrgId"
        }

        Table: {
            Name: "films"
            Field: "Films"
            Key: "OntoId"
        }

        Table: {
            Name: "onto"
            Field: "Onto"
            Key: "OntoId"
        }

        Table: {
            Name: "afisha"
            Field: "Afisha"
            Key: "Id"
        }

        Table: {
            Name: "sites"
            Field: "Sites"
            Key: "Id"
        }

        Table: {
            Name: "film-ugc-rating"
            Field: "FilmUgcRating"
            Key: "OntoId"
        }

        Table: {
            Name: "film-kinopoisk-rating"
            Field: "FilmKinopoiskRating"
            Key: "OntoId"
        }

        Column: {
            Name: "aggregate"
            Field: "Aggregate"
        }

        Table: {
            Name: "aggregates"
            Field: "Aggregates"
            Key: "ItemOrder"
        }

        Table: {
            Name: "sbs-aggregates"
            Field: "SbsAggregates"
            Key: "ItemOrder"
        }

        Table: {
            Name: "favorite-videos"
            Field: "FavoriteVideos"
            Key: "Id"
        }

        Table: {
            Name: "liked-videos"
            Field: "LikedVideos"
            Key: "OntoId"
        }

        Rpc {
            Name: "video"
            Handler: "UserVideo"
        }

        Table: {
            Name: "user-settings",
            Field: "UserSettings",
            Key: "Dummy"
        }

        Table: {
            Name: "favorite-books"
            Field: "FavoriteBooks"
            Key: "Id"
        }

        Table: {
            Name: "favorite-films"
            Field: "FavoriteFilms"
            Key: "Id"
        }

        Table: {
            Name: "favorite-games"
            Field: "FavoriteGames"
            Key: "Id"
        }

        Table: {
            Name: "favorite-geos"
            Field: "FavoriteGeos"
            Key: "Id"
        }

        Table: {
            Name: "favorite-goods"
            Field: "FavoriteGoods"
            Key: "Id"
        }

        Table: {
            Name: "favorite-links",
            Field: "FavoriteLinks",
            Key: "Id"
        }

        Table: {
            Name: "favorite-musics"
            Field: "FavoriteMusics"
            Key: "Id"
        }

        Table: {
            Name: "favorite-organizations",
            Field: "FavoriteOrganizations",
            Key: "Id"
        }

        Table: {
            Name: "favorite-images",
            Field: "FavoriteImages",
            Key: "Id"
        }

        Table: {
            Name: "favorite-serials"
            Field: "FavoriteSerials"
            Key: "Id"
        }

        Table: {
            Name: "favorite-specialists"
            Field: "FavoriteSpecialists"
            Key: "Id"
        }

        Table: {
            Name: "favorite-news"
            Field: "FavoriteNews"
            Key: "Id"
        }

        Table: {
            Name: "deleted-favorites"
            Field: "DeletedFavorites"
            Key: "Id"
        }

        Table: {
            Name: "board-subscriptions"
            Field: "BoardSubscriptions"
            Key: "Id"
        }

        Column: {
            Name: "collections-meta-info"
            Field: "CollectionsMetaInfo"
        }

        Table: {
            Name: "achievements-data"
            Field: "AchievementsData"
            Key: "Id"
        }

        Table {
            Name: "professions-data"
            Field: "ProfessionsData"
            Key: "Id"
        }

        Rpc {
            Name: "achievements"
            Handler: "UserAchievements"
            Key: "AchievementId"
        }

        Rpc {
            Name: "org-questions"
            Handler: "UserOrgQuestions"
        }

        Table: {
            Name: "articles-v3"
            Field: "Articles"
            Key: "Id"
        }

        Table: {
            Name: "liked-articles"
            Field: "LikedArticles"
            Key: "Id"
        }

        Column: {
            Name: "hqcg-user-profile"
            Field: "HqcgUserProfile"
        }

        Table: {
            Name: "liked-news"
            Field: "LikedNews"
            Key: "StoryId"
        }

        Table: {
            Name: "liked-woman"
            Field: "LikedWoman"
            Key: "Id"
        }

        Table: {
            Name: "liked-sport"
            Field: "LikedSport"
            Key: "Id"
        }

        Table: {
            Name: "liked-video"
            Field: "LikedVideo"
            Key: "Id"
        }

        Table: {
            Name: "org-review-likes"
            Field: "OrgReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "onto-review-likes"
            Field: "OntoReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "liked-sprav-post"
            Field: "LikedSpravPost"
            Key: "Id"
        }

        Table: {
            Name: "liked-talk-article"
            Field: "LikedTalkArticle"
            Key: "Id"
        }

        Table: {
            Name: "liked-vh-subs"
            Field: "LikedVhSubs"
            Key: "Id"
        }

        Table: {
            Name: "liked-sprav-image"
            Field: "LikedSpravImage"
            Key: "Id"
        }

        Table: {
            Name: "liked-urlrec"
            Field: "LikedUrlrec"
            Key: "Id"
        }

        Table: {
            Name: "liked-weather-fact"
            Field: "LikedWeatherFact"
            Key: "Id"
        }

        Table: {
            Name: "liked-health-article"
            Field: "LikedHealthArticle"
            Key: "Id"
        }

        Table: {
            Name: "liked-turbo-page"
            Field: "LikedTurboPage"
            Key: "Id"
        }

        Table: {
            Name: "liked-entity"
            Field: "LikedEntity"
            Key: "Id"
        }

        Table: {
            Name: "liked-district"
            Field: "LikedDistrict"
            Key: "Id"
        }

        Table: {
            Name: "liked-vkus"
            Field: "LikedVkus"
            Key: "Id"
        }

        Table: {
            Name: "site-review-likes"
            Field: "SiteReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "miniapp-review-likes"
            Field: "MiniAppReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "offer-review-likes"
            Field: "OfferReviewLikes"
            Key: "Id"
        }

        Table: {
            Name: "liked-vh-skip"
            Field: "LikedVhSkip"
            Key: "Id"
        }

        Table: {
            Name: "splash-screens"
            Field: "SplashScreens"
            Key: "ScreenId"
        }

        Table: {
            Name: "video-email-notifications"
            Field: "VideoEmailNotifications"
            Key: "EmailHash"
        }

        Table: {
            Name: "business-filters"
            Field: "BusinessFilters"
            Key: "QueryTextMD5"
        }

        Table: {
            Name: "series-subs"
            Field: "SeriesSubscriptions"
            Key: "OntoId"
        }

        Table: {
            Name: "broadcast-subs"
            Field: "BroadcastSubscriptions"
            Key: "OntoId"
        }

        Table: {
            Name: "broadcast-cms-subs"
            Field: "BroadcastCmsSubscriptions"
            Key: "ContentId"
        }

        Table: {
            Name: "stream-subs"
            Field: "StreamSubscriptions"
            Key: "ContentId"
        }

        Table: {
            Name: "person-subs"
            Field: "PersonSubscriptions"
            Key: "Login"
        }

        Table: {
            Name: "object-subs"
            Field: "ObjectSubscriptions"
            Key: "Id"
        }

        Table: {
            Name: "org-subs"
            Field: "OrgSubscriptions"
            Key: "Id"
        }

        Table: {
            Name: "user-subs"
            Field: "UserSubscriptions"
            Key: "Id"
        }

        Table: {
            Name: "new-releases-subs"
            Field: "NewReleasesSubscription"
            Key: "Id"
        }

        Table: {
            Name: "communities-subs"
            Field: "CommunitiesSubscriptions"
            Key: "Id"
        }

        Table: {
            Name: "services-workers"
            Field: "ServicesWorkers"
            Key: "WorkerId"
        }

        Table: {
            Name: "image-search-feedbacks"
            Field: "ImageSearchFeedbacks"
            Key: "RequestId"
        }

        Table: {
            Name: "pushes"
            Field: "Pushes"
            Key: "Id"
        }

        Table: {
            Name: "alice-skill-reviews"
            Field: "AliceSkillReviews"
            Key: "SkillId"
        }

        Table: {
            Name: "communities"
            Field: "Communities"
            Key: "CommunityId"
        }

        Table: {
            Name: "education-feedback"
            Field: "EducationFeedback"
            Key: "Id"
        }

        Column: {
            Name: "org-settings"
            Field: "OrgSettings"
        }

        Column: {
            Name: "ban-data"
            Field: "UserBanData"
        }

        Table: {
            Name: "org-sbs-answers"
            Field: "OrgSbsAnswers"
            Key: "SbsId"
        }

        Table: {
            Name: "onto-sbs-answers"
            Field: "OntoSbsAnswers"
            Key: "SbsId"
        }

        Table: {
            Name: "site-sbs-answers"
            Field: "SiteSbsAnswers"
            Key: "SbsId"
        }
    };
}
