package NPQCat;

import "library/cpp/getoptpb/proto/confoption.proto";

message TCommand {

    message TReadCommand {
        optional int32 Count = 1 [default = 1,
            (NGetoptPb.Conf).Short = "r"
        ];

        optional bool NoCommit = 2 [default = false,
            (NGetoptPb.Conf).Short = "n"
        ];

        optional string Timeout = 3 [default = "2s",
            (NGetoptPb.Conf).Short = "t"
        ];
        optional string ReaderSection = 4 [default = "Reader",
            (NGetoptPb.Conf).Short = "s"
        ];
    }

    message TWriteCommand {
        optional string MessagesDir = 1 [
            (NGetoptPb.Conf).Short = "d",
            (NGetoptPb.Conf).Type = "<path>"
        ];

        optional string MessageFile = 2 [
            (NGetoptPb.Conf).Short = "f",
            (NGetoptPb.Conf).Type = "<path>"
        ];

        optional string Key = 3 [
            (NGetoptPb.Conf).Short = "k"
        ];

        repeated string Data = 4;
        optional string WriterSection = 5 [default = "Writer",
            (NGetoptPb.Conf).Short = "s"
        ];
    }

    optional TReadCommand Read = 1 [
        (NGetoptPb.Conf).SubCommand = true
    ];

    optional TWriteCommand Write = 2 [
        (NGetoptPb.Conf).SubCommand = true
    ];

    optional string Config = 3 [
        (NGetoptPb.Conf).Type = "<path>",
        (NGetoptPb.Conf).Short = "c"
    ];

}
