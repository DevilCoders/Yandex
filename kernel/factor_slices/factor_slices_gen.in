Slice {
    Name: "formula"; ## Упячка из фреша (нигде больше не используется). Есть подозрение что можно выпилить.

    Slice: {
        Name: "fresh";
    }

    Slice: {
        Name: "web";

        Slice: {
            Name: "web_production";
        }

        Slice: {
            Name: "web_meta";
        }

        ## Slice for factors that are used in rearrange formulas but can't be used in L3 formula
        ## Factors in this slice are initialized after L3 stage independently of each other.
        Slice: {
            Name: "web_meta_rearrange";
        }

        Slice {
            Name: "web_meta_l4";
        }

        Slice: {
            Name: "web_l1";
        }

        Slice {
            Name: "web_l2";
        }

        Slice: {
            Name: "web_itditp";
        }

        Slice: {
            Name: "web_itditp_recommender";
        }

        Slice: {
            Name: "web_itditp_static_features";
        }

        Slice: {
            Name: "web_meta_itditp";
        }

        Slice: {
            Name: "web_discovery";
        }

        Slice: {
            Name: "web_meta_pers";
        }

        Slice {
            Name: "web_new_l1"
        }

        ## Slice for formula factors that are calculated on basesearch
        Slice {
            Name: "web_production_formula_features"
        }

        ## L3 Slice for real_time_training models
        Slice {
            Name: "web_rtmodels"
        }
    }

    Slice: {
        Name: "rapid_clicks";
    }

    Slice: {
        Name: "rapid_pers_clicks";
    }

    Slice: {
        Name: "web_barmaglot";
    }

    Slice: {
        Name: "web_barmaglot_meta";
    }

    Slice: {
        Name: "personalization";
    }

    ## Слайс с результатами применения формул к L3 факторам
    Slice : {
        Name: "web_l3_mxnet";
    }

    Slice: {
        Name: "web_fresh_detector";
    }

    Slice: {
        Name: "begemot_query_factors";
    }

    Slice: {
        Name: "begemot_query_rt_factors";
    }

    Slice: {
        Name: "begemot_query_rt_l2_factors";
    }

    Slice: {
        Name: "neural_network_over_dssm_factors";
    }

    Slice: {
        Name: "rapid_clicks_l2";
    }

    Slice: {
        Name: "begemot_model_factors";
    }
}

Slice: {
    Name: "es_begemot_query_objects_external"
}

Slice: {
    Name: "es_anti_object_query"
}

Slice: {
    Name: "es_anti_object_light"
}

Slice: {
    Name: "es_query_to_ontoids"
}

Slice: {
    Name: "es_saas"
}

Slice: {
    Name: "es_anti_object_heavy"
}

Slice: {
    Name: "es_anti_object_dssm"
}

Slice: {
    Name: "es_anti_object_web"
}

Slice: {
    Name: "es_anti_object_snippet_dssm"
}

Slice: {
    Name: "joined_features";
}

Slice: {
    Name: "lingboost_beta";
}

Slice: {
    Name: "lingboost_onotole";
}

Slice: {
    Name: "mango";
}

Slice: {
    Name: "video_production"
}

Slice: {
    Name: "video_pers"
}

Slice: {
    Name: "video_related"
}

Slice: {
    Name: "video_experimental"
}

Slice: {
    Name: "video_rotor";
}

Slice: {
    Name: "video_text";
}

Slice: {
    Name: "video_robot";
}

Slice: {
    Name: "video_vitrina"
}

Slice: {
    Name: "video_new_l1"
}

Slice: {
    Name: "video_hub"
}

Slice: {
    Name: "video_hub_categs"
}

Slice: {
    Name: "vhs_dj_doc_recommender"
}

Slice: {
    Name: "dj_doc2doc_recommender"
}

Slice: {
    Name: "vhs_dj_doc_static"
}

Slice: {
    Name: "images_production"
}

Slice: {
    Name: "images_cbir"
}

Slice: {
    Name: "images_clothesbbox"
}

Slice: {
    Name: "images_clothesl3"
}

Slice: {
    Name: "images_alice_intents"
}

Slice: {
    Name: "images_l1"
}

Slice: {
    Name: "images_new_l1"
}

Slice: {
    Name: "images_recommendations"
}

Slice: {
    Name: "images_market"
}

Slice: {
    Name: "images_nn_over_dssm_doc_features"
}

Slice {
    Name: "images_new_runtime_doc_features"
}

Slice: {
    Name: "itditp_user_history";
}

Slice: {
    Name: "robot_content";
}

Slice: {
    Name: "robot_primary";
}

Slice: {
    Name: "robot_zonal";
}

Slice: {
    Name: "robot_experimental";
}

Slice {
    Name: "robot_selection_rank";
}

Slice {
    Name: "geo_production";
}

Slice {
    Name: "geo_production_score";
}

Slice {
    Name: "geo_personal";
}

Slice {
    Name: "geo_meta";
}

Slice {
    Name: "geo_experiment";
}

Slice {
    Name: "geo_recommendations";
}

Slice {
    Name: "geo_recommendations_social";
}

Slice {
    Name: "geo_recommendations_afisha";
}

Slice {
    Name: "geo_recommendations_search_application";
}

Slice {
    Name: "geo_recommendations_experiment";
}

Slice {
    Name: "geo_collections";
}

Slice {
    Name: "geo_recommendations_touch";
}

Slice {
    Name: "geo_hotels";
}

Slice {
    Name: "geo_meta_personal";
}

Slice {
    Name: "geo_recommendations_orgvisits";
}

Slice {
    Name: "geo_objects";
}

Slice {
    Name: "geo_persclick_recommender";
}

# Факторы Новостей
Slice {
    Name: "news_production";
}

Slice {
    Name: "news_entity_experiment";
}

Slice {
    Name: "news_recommender";
}

Slice {
    Name: "news_titles";
}

Slice {
    Name: "news_summarizer_units";
}

Slice {
    Name: "news_summarizer_points";
}

Slice {
    Name: "news_cluster";
}

# Факторы Района
Slice {
    Name: "district_orgs"
}

# Хостовые агрегации факторов в Самоваре
Slice {
    Name: "robot_aggrs_zoned";
}
Slice {
    Name: "robot_aggrs_non_zoned";
}
Slice {
    Name: "robot_lemur_aggrs_zoned";
}
Slice {
    Name: "robot_lemur_aggrs_non_zoned";
}

# samovar incoming links factors
Slice {
    Name: "robot_incoming_links";
}

Slice {
    Name: "robot_incoming_links_aggregations";
}

# samovar morda factors from lemur
Slice {
    Name: "robot_lemur_morda";
}

Slice {
    Name: "robot_inhost";
}

Slice {
    Name: "robot_rotor";
}

Slice {
    Name: "robot_inhost_outlinks";
}

Slice {
    Name: "robot_inhost_new_outlinks";
}

Slice: {
    Name: "blender_production"
}

Slice: {
    Name: "market_base"
}

Slice: {
    Name: "market_meta"
}

Slice: {
    Name: "market_meta_features"
}

Slice: {
    Name: "market_category"
}

Slice: {
    Name: "market_meta_catfactors"
}

Slice: {
    Name: "market_base_catfactors"
}

Slice: {
    Name: "market_blender"
}

Slice: {
    Name: "goods_production"
}

Slice: {
    Name: "ocr_blocks"
}

## doc similarity features for ITDITP project, see https://st.yandex-team.ru/ITDITP-4
Slice: {
    Name: "itditp";
}

Slice: {
    Name: "video_fresh"
}

Slice: {
    Name: "video_insights"
}

Slice: {
    Name: "collections_production"
}

Slice: {
    Name: "collections_card_recommender"
}

Slice: {
    Name: "collections_board_to_user_recommender"
}

Slice: {
    Name: "collections_title_goodness"
}

Slice: {
    Name: "entity_recommender_films"
}

Slice: {
    Name: "dj_onto_multitenant"
}

# Answers recommender slices.
Slice {
    Name: "answers_recommender"
}
Slice {
    Name: "answers_subs_feed"
}
Slice {
    Name: "answers_expert_feed"
}
Slice {
    Name: "answers_pagination"
}
Slice {
    Name: "answers_questions_explore"
}

Slice {
    Name: "dj_ecom_recommender"
}

Slice {
    Name: "dj_classified_recommender"
}

# snippets
Slice {
    Name: "snippets_main"
}

Slice {
    Name: "snippets_webranking_v1"
}

Slice {
    Name: "snippets_webranking"
}

Slice {
    Name: "snippets_webranking_noclick"
}

# dj
Slice {
    Name: "dj_dynamic"
}

Slice {
    Name: "dj_tutorial"
}

# market_dj
Slice {
    Name: "market_dj_ugc_feed"
}

Slice {
    Name: "market_dj_recommender"
}

Slice {
    Name: "market_dj_blender"
}

Slice {
    Name: "market_dj_candidate_generators"
}

Slice {
    Name: "market_dj_report_factors"
}

Slice {
    Name: "market_dj_ecom_profile"
}

# goods recommender dj

Slice {
    Name: "goods_dj_l1"
}

# alice
Slice {
    Name: "alice_begemot_nlu_factors"
}

Slice {
    Name: "alice_begemot_query_factors"
}

Slice {
    Name: "alice_search_scenario"
}

Slice {
    Name: "alice_direct_scenario"
}

Slice {
    Name: "alice_video_scenario"
}

Slice {
    Name: "alice_video_free_search_scenario"
}

Slice {
    Name: "alice_video_paid_search_scenario"
}

Slice {
    Name: "alice_music_scenario"
}

Slice {
    Name: "alice_device_state"
}

Slice {
    Name: "alice_query_tokens_factors"
}

Slice {
    Name: "alice_asr_factors"
}

Slice {
    Name: "alice_gc_scenario"
}

# games
Slice {
    Name: "games_zen"
}

Slice {
    Name: "games_zen_recommender"
}

# district
Slice {
    Name: "district_zen_recommender"
}

#ydo
Slice {
    Name: "ydo_production"
}

# searchlib
Slice {
    Name: "searchlib_slice"

    Slice: {
        Name: "searchlib_rtx_slice"

        Slice: {
            Name: "searchlib_rtx"
        }
    }

    Slice: {
        Name: "searchlib_blender_slice"

        Slice: {
            Name: "searchlib_blender_common"
        }

        Slice: {
            Name: "searchlib_blender_common_dj_hosts_item_features"
        }

        Slice: {
            Name: "searchlib_blender_item"
        }

        Slice: {
            Name: "searchlib_catboost"
        }

        Slice: {
            Name: "searchlib_expr_features"
        }
    }

    Slice: {
        Name: "searchlib_source_slice"

        Slice: {
            Name: "searchlib_ann"
        }
    }

    Slice: {
        Name: "searchlib_trends_slice"

        Slice: {
            Name: "searchlib_trends"
        }

        Slice: {
            Name: "searchlib_serp"
        }

        Slice: {
            Name: "searchlib_user_trend"
        }

        Slice: {
            Name: "searchlib_user_intererests"
        }

        Slice: {
            Name: "searchlib_trend_crypta_features"
        }
    }

    Slice: {
        Name: "searchlib_recs_slice"

        Slice: {
            Name: "searchlib_recs"
        }
    }

    Slice: {
        Name: "searchlib_news_slice"

        Slice: {
            Name: "searchlib_news"
        }
    }

    Slice: {
        Name: "searchlib_geo_slice"

        Slice: {
            Name: "searchlib_geo"
        }

        Slice: {
            Name: "searchlib_geo_company_name"
        }

        Slice: {
            Name: "searchlib_geo_org"
        }

        Slice: {
            Name: "searchlib_geo_vacation"
        }

        Slice: {
            Name: "searchlib_geo_visit"
        }

        Slice: {
            Name: "searchlib_geo_visit_requests"
        }
    }
}

# music
Slice {
    Name: "ymusic_text_machine"
}

# saas
Slice {
    Name: "saas_production"
}

# uslugi
Slice {
    Name: "begemot_uslugi_query_factors"
}

# kinopoisk
Slice {
    Name: "kp_text_machine"
}

# autoparser
Slice {
    Name: "autoparser_float_factors"
}
Slice {
    Name: "autoparser_cat_factors"
}

Slice: {
    Name: "images_market_l4"
}

# smelter
Slice {
    Name: "smelter_worker_processor"
}

# Roles
Role: {
    Name: "main"
}
Role: {
    Name: "meta"
}
Role: {
    Name: "experiment"
}
Role: {
    Name: "l1"
}
Role {
    Name: "l2"
}
Role: {
    Name: "recommendations"
}

Role {
    Name: "discovery"
}

Role: {
    Name: "recommendations_meta"
}

Role: {
    Name: "begemot_query_factors";
}

Role: {
    Name: "begemot_query_rt_factors";
}

Role: {
    Name: "begemot_query_rt_l2_factors";
}

Role: {
    Name: "neural_network_over_dssm_factors";
}

Role: {
    Name: "images_nn_over_dssm_doc_features";
}

Role: {
    Name: "formula_features"
}

Role: {
    Name: "rapid_clicks_l2";
}

Role: {
    Name: "web_rtmodels"
}

Role: {
    Name: "begemot_model_factors"
}

Universe {
    Name: "default"

    Assign {
        Role: "main"
        Slice: "web_production"
    }
    Assign {
        Role: "meta"
        Slice: "web_production"
    }
    Assign {
        Role: "experiment"
        Slice: "lingboost_beta"
    }
    Assign {
        Role: "l1"
        Slice: "web_l1"
    }
    Assign {
        Role: "l2"
        Slice: "web_l2"
    }
    Assign {
        Role: "recommendations"
        Slice: "web_itditp"
    }
    Assign {
        Role: "begemot_query_factors"
        Slice: "begemot_query_factors"
    }
    Assign {
        Role: "begemot_query_rt_factors"
        Slice: "begemot_query_rt_factors"
    }
    Assign {
        Role: "begemot_query_rt_l2_factors"
        Slice: "begemot_query_rt_l2_factors"
    }
    Assign {
        Role: "neural_network_over_dssm_factors"
        Slice: "neural_network_over_dssm_factors"
    }
    Assign {
        Role: "formula_features"
        Slice: "web_production_formula_features"
    }
    Assign {
        Role: "rapid_clicks_l2"
        Slice: "rapid_clicks_l2"
    }
    Assign {
        Role: "begemot_model_factors"
        Slice: "begemot_model_factors"
    }
}
Universe {
    Name: "web"

    Assign {
        Role: "main"
        Slice: "web_production"
    }
    Assign {
        Role: "meta"
        Slice: "web_meta"
    }
    Assign {
        Role: "experiment"
        Slice: "lingboost_beta"
    }
    Assign {
        Role: "l1"
        Slice: "web_l1"
    }
    Assign {
        Role: "l2"
        Slice: "web_l2"
    }
    Assign {
        Role: "recommendations"
        Slice: "web_itditp"
    }
    Assign {
        Role: "discovery"
        Slice: "web_discovery"
    }
    Assign {
        Role: "recommendations_meta"
        Slice: "web_meta_itditp"
    }
    Assign {
        Role: "begemot_query_factors"
        Slice: "begemot_query_factors"
    }
    Assign {
        Role: "begemot_query_rt_factors"
        Slice: "begemot_query_rt_factors"
    }
    Assign {
        Role: "begemot_query_rt_l2_factors"
        Slice: "begemot_query_rt_l2_factors"
    }
    Assign {
        Role: "neural_network_over_dssm_factors"
        Slice: "neural_network_over_dssm_factors"
    }
    Assign {
        Role: "formula_features"
        Slice: "web_production_formula_features"
    }
    Assign {
        Role: "rapid_clicks_l2"
        Slice: "rapid_clicks_l2"
    }
    Assign {
        Role: "web_rtmodels"
        Slice: "web_rtmodels"
    }
    Assign {
        Role: "begemot_model_factors"
        Slice: "begemot_model_factors"
    }
}
Universe {
    Name: "video"

    Assign {
        Role: "main"
        Slice: "video_production"
    }
    Assign {
        Role: "meta"
        Slice: "video_production"
    }
    Assign {
        Role: "experiment"
        Slice: "lingboost_beta"
    }
    Assign {
        Role: "l1"
        Slice: "video_production"
    }
    Assign {
        Role: "new_l1"
        Slice: "video_new_l1"
    }
}
Universe {
    Name: "images"

    Assign {
        Role: "main"
        Slice: "images_production"
    }
    Assign {
        Role: "meta"
        Slice: "images_production"
    }
    Assign {
        Role: "experiment"
        Slice: "lingboost_beta"
    }
    Assign {
        Role: "l1"
        Slice: "images_l1"
    }
    Assign {
        Role: "new_l1"
        Slice: "images_new_l1"
    }
    Assign {
        Role: "recommendations"
        Slice: "images_recommendations"
    }
    Assign {
        Role: "images_nn_over_dssm_doc_features"
        Slice: "images_nn_over_dssm_doc_features"
    }
}
Universe {
    Name: "geo"

    Assign {
        Role: "main"
        Slice: "geo_production"
    }
    Assign {
        Role: "meta"
        Slice: "geo_meta"
    }
    Assign {
        Role: "experiment"
        Slice: "geo_experiment"
    }
}
## separate video factor universe for video objects (film, series) recommendations
Universe {
    Name: "video_vitrina"

    Assign {
        Role: "main"
        Slice: "video_vitrina"
    }
    Assign {
        Role: "meta"
        Slice: "video_vitrina"
    }
}
Universe {
    Name: "collections"

    Assign {
        Role: "main"
        Slice: "collections_production"
    }
    Assign {
        Role: "recommendations"
        Slice: "collections_card_recommender"
    }
    Assign {
        Role: "recommendations"
        Slice: "collections_board_to_user_recommender"
    }
    Assign {
        Role: "recommendations"
        Slice: "collections_title_goodness"
    }
}
Universe {
    Name: "entity_recommender"

    Assign {
        Role: "main"
        Slice: "entity_recommender_films"
    }
    Assign {
        Role: "recommendations"
        Slice: "dj_onto_multitenant"
    }
}
Universe {
    Name: "news"

    Assign {
        Role: "main"
        Slice: "web_production"
    }
    Assign {
        Role: "meta"
        Slice: "web_meta"
    }
    Assign {
        Role: "rapid_clicks"
        Slice: "rapid_clicks"
    }
    Assign {
        Role: "rapid_pers_clicks"
        Slice: "rapid_pers_clicks"
    }
    Assign {
        Role: "web_fresh_detector"
        Slice: "web_fresh_detector"
    }
    Assign {
        Role: "news_production"
        Slice: "news_production"
    }
}
Universe {
    Name: "saas"

    Assign {
        Role: "main"
        Slice: "saas_production"
    }
}

Universe {
    Name: "goods"

    Assign {
        Role: "main"
        Slice: "goods_production"
    }
}
