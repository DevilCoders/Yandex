<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style type="text/css">
  body { font:.8em Arial,Helvetica,sans-serif; }
  .query { color: gray }
  .query a { color: gray }
  .title { font-size:20px; width:450px; font-family:arial}
  .results { max-width:58em; padding:0; margin:0 }
  .snippet { font-size:16px; width: 460px}
  .snippet_variants { padding:0; margin:0 }
  .generic_passages { line-height:1.3em }
  .forum_header { color: gray; line-height:1.3em; margin-top:0.2em }
  .forum_passage { padding-left:1em; margin-top:0.3em; margin-bottom:0.3em; line-height:1.3em }
  .forum_passage_stats { color:gray }
  .forum_longdescr {}
  .nodiff {background-color:#DDDDDD}
  .greenurl { color: #006600; line-height:1.2em; margin:0 }
  .greenurl a { color: #006600; text-decoration:none }
  #result { width:100%; table-layout:fixed }
  td { break-word: word-wrap; width:450px;}
</style>
</head><body>
<script language="JavaScript" type="text/javascript">
function dopara(x) {
	return x.split("Â¶").join("<br/>").split("\n").join("<br/>");
}
//function serp_url(req, url) {
//	var s = req + " url:'" + url + "'"
//	return "http://lostsoul-d-dev2.serp3.leon22.yandex.ru/yandsearch?lr=11504&test-id=1&wizhosts=wizardland%3A8888&wizhosts=wizardland%3A8888&exp_flags=content_preview&rwr=on%3AEntitySearch&rnd=14025&text=" + escape(s)
//}

function safe_tags(str) {
    return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace('\n', "<br/>") ;
}

function render1(rr) {
	var s = ""
	if ("name" in rr) {
		s += "<h2>" + safe_tags(rr["name"]) + "</h2><br>"
	}
	if ("description" in rr) {
		s += dopara(safe_tags(rr["description"])) + "<br>"
	}
	if ("url" in rr) {
		s += "<span class=greenurl>" + safe_tags(rr["url"]) + "</span>" + "<br>"
	}
	if ("image" in rr) {
		s += "<img src='" + rr["image"] + "'>" + "<br>"
	}
	if ("images" in rr) {
		for (var j in rr["images"]) {
			s += "<img src='" + rr["images"][j] + "'>" + "<br>"
		}
	}
	if ("imagessnip" in rr) {
		var i = JSON.parse(rr["imagessnip"]);
		if ("Images" in i) {
			var ii = i["Images"];
			for (var j in ii) {
				s += "<img src='http://" + ii[j]["u"] + "'>" + "<br>"
				
			}
		}
	}
	if ("main-properties" in rr) {
		var p = rr["main-properties"];
		for (var i in p) {
			var k = p[i][0];
			var v = p[i][1];
			s += "<b>" + safe_tags(k) + "</b>" + ": " + safe_tags(v) + "<br>";
		}
	}
	if ("properties" in rr) {
		var p = rr["properties"];
		for (var i in p) {
			var k = p[i][0];
			var v = p[i][1];
			s += "<i>" + safe_tags(k) + "</i>" + ": " + safe_tags(v) + "<br>";
		}
	}
	return s
}
function render(x) {
	if (x == "") {
		return "<h2>kiwi/sita error</h2>"
	}
	var t = x["template"];
	var s = "<h1>" + t + "</h1>";
	if ("results" in x) {
		var r = x["results"]
		var l = r.length
		if (l > 1) {
			s += "<ul>";
		}
		for (var i in r) {
			if (l > 1) {
				s += "<li>"
			}
			if (i > 10) {
				s += "............"
				break;
			}
			var rr = r[i]
			s += render1(rr)
		}
		if (l > 1) {
			s += "</ul>";
		}
	}
	s += render1(x)
	if (false && t != "empty") {
		s += "<pre style='background-color:#AAAAAA'>" + safe_tags(JSON.stringify(x, undefined, 2))+ "</pre>"
	}
	return s
}
function fixscheme(s) {
	if (s.substr(0, 7) == "http://" || s.substr(0, 8) == "https://") {
		return s;
	}
	return "http://" + s;
}
function hide_url(url) {
    return "http://h.yandex.net/?" + encodeURIComponent(url);
}
function addpair(x, i) {
	function cr(s) { return document.createElement(s); };
	document.getElementById('result').innerHTML += "<tr class=greenurl><td colspan=2><center>" + i + "<h2><a target='_new' href='" + hide_url(fixscheme(x.url)) + "'>" + x.url + "</a></h2></center></td></tr>";
	document.getElementById('result').innerHTML += "<tr><td>" + render(x.preview_jsons[0]) + "</td><td>" + render(x.preview_jsons[1]) + "</td></tr><tr><td><hr></td></tr><tr><td></td></tr>";
}
</script>

<table id=result>
</table>

<script language="JavaScript" type="text/javascript">
var a = 
