# Shared options
storage.shared.logbroker.main.topic=/ci/autocheck/stable/main/trunk/precommit,/ci/autocheck/stable/main/trunk/postcommit,/ci/autocheck/stable/main/branch/precommit,/ci/autocheck/stable/main/branch/postcommit
storage.shared.logbroker.events.topic=/ci/autocheck/stable/events
storage.shared.logbroker.events.number_of_partitions=6

storage.shared.cache.checks.size=10000
storage.shared.cache.iterations.size=10000
storage.shared.cache.check_tasks.size=10000
storage.shared.cache.large_tasks.size=10000


# Logbroker
# This is "Logbroker production TVM application" assigned to
# https://abc.yandex-team.ru/services/Logbroker
# https://nda.ya.ru/t/5Brlhf3r3h9KaE
storage.logbrokerTvmClientId.tvmId=${ci.logbrokerTvmClientId.tvmId}

storage.logbrokerProperties.hostName=lbkx.logbroker.yandex.net

storage.logbrokerProxyBalancerHolder.keepAlive=3600s
storage.logbrokerProxyBalancerHolder.keepAliveTimeout=1s
storage.mainStreamLogbrokerConfiguration.topics=${storage.shared.logbroker.main.topic}
storage.eventsLogbrokerConfiguration.topic=${storage.shared.logbroker.events.topic}
storage.stableStorageEventProducer.topic=${storage.shared.logbroker.events.topic}
storage.stableStorageEventProducer.numberOfPartitions=${storage.shared.logbroker.events.number_of_partitions}
storage.badgeEventsSender.topic=${storage.shared.logbroker.public.badge_events.topic}
storage.badgeEventsSender.numberOfPartitions=${storage.shared.logbroker.public.badge_events.number-of-partitions}


# YDB
storage.storageKikimrConfig.ydbToken=${ci.storage.ydb.oauth-token}
storage.storageKikimrConfig.maxPoolSize=1024


# ClickHouse
storage.spClickhouseProperties.user=stream_processor
storage.spClickhouseProperties.password=${storage.clickhouse.default.password}
storage.spRunsClickhouseProperties.user=stream_processor
storage.spRunsClickhouseProperties.password=${storage.clickhouse.runs.password}
storage.metricsClickhouseProperties.user=${ci.storage.public-clickhouse.user}
storage.metricsClickhouseProperties.password=${ci.storage.public-clickhouse.password}
storage.metricsClickhouse.actualization=10s
storage.testMetricTable.database=autocheck


# GRPC
storage.blackboxTvmClientId.tvmId=${ci.blackboxTvmClientId.tvmId}
storage.blackbox.blackboxHost=${ci.blackbox.host}

storage.tvmAuthInterceptor.debugAuth=false


# Exporter
storage.ytClientFactory.username=robot-ci
storage.ytClientFactory.token=${ci.yt.token}

storage.iterationToYtExporter.rootPath=//home/ci/storage/local/
storage.iterationToYtExporter.batchSize=32768


# Sharding
storage.shardingSettings.chunkSamplingPercent=-1
storage.shardingSettings.numberOfChecksToSkip=0
storage.chunkDistributor.numberOfPartitions=${storage.shared.logbroker.shard.in.number-of-partitions}
# If you change it, check `Chunks` table
storage.shardingSettings.configureChunks=1
storage.shardingSettings.buildChunks=64
storage.shardingSettings.styleChunks=16
storage.shardingSettings.smallTestChunks=32
storage.shardingSettings.mediumTestChunks=64
storage.shardingSettings.largeTestChunks=4
storage.shardingSettings.teTestChunks=4
storage.shardingSettings.nativeBuildChunks=1


# Monitoring
storage.monitoringServerInterceptor.histogramBuckets=0.1,0.5,1,2,4,16,32


# Temporal
storage.temporalService.endpoint=${ci.temporalService.endpoint}
storage.temporalService.namespace=ci-storage
storage.temporalService.uiBaseUrl=${ci.temporalService.uiBaseUrl}



# Arcanum
# Storage works with production pull requests and production arc commits.
# Just in case we use ArcanumApiReadOnly if environment is not stable (production)
storage.arcanum.address=https://a.yandex-team.ru


# AYamler
storage.aYamlerClientProperties.endpoint=ci-ayamler-api.testing.in.yandex-team.ru:9090
storage.aYamlerClientProperties.connectTimeout=1s
storage.aYamlerClientProperties.deadlineAfter=30s
storage.aYamlerClientProperties.maxRetryAttempts=2

storage.aYamlerTvmClientId.tvmId=2018960


# Arc
storage.arcService.endpoint=${ci.arcService.endpoint}
storage.arcService.connectTimeout=${ci.arcService.connectTimeout}
storage.arcService.token=${ci.arc.grpc-api.oauth-token}
storage.arcService.processChangesAndSkipNotFoundCommits=false


# CI
storage.ciTvmClientId.tvmId=2018960
storage.ciClient.endpoint=ci-api.testing.in.yandex-team.ru:4221
storage.ciClient.connectTimeout=2s
storage.ciClient.deadlineAfter=20s
storage.ciClient.userAgent=ci-storage-testing
# OLD CI
storage.oldCiClient.url=https://ci.yandex-team.ru/
storage.oldCiClient.token=${ci.old-ci.token:}
# Testenv
storage.testenvClient.url=${ci.testenv.url}
storage.testenvClient.oAuthToken=${ci.testenv.token}
