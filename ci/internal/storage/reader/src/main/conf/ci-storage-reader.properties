# Shared
storage.shared.cache.checks.size=10000
storage.shared.cache.check_tasks.size=10000


# Logbroker
storage.exportStreamWriter.topic=${storage.shared.logbroker.export.topic}
storage.exportStreamWriter.numberOfPartitions=${storage.shared.logbroker.export.number-of-partitions}

storage.taskResultDistributor.maxNumberOfResultsPerWrite=1000
storage.taskMessageProcessor.waitForRegistration=0s

# keep this number low to increase batch size, and make less small writes.
storage.mainStreamListener.readQueues=8
storage.mainStreamListener.readQueueCapacity=256
storage.mainStreamListener.readDrainLimit=16

storage.mainStreamConsumer.onlyNewData=false
storage.mainStreamConsumer.maxUncommittedReads=256

storage.notLocalShardInMessageWriter.topic=${storage.shared.logbroker.shard.in.topic}
storage.notLocalShardInMessageWriter.numberOfPartitions=${storage.shared.logbroker.shard.in.number-of-partitions}

storage.shardOutLogbrokerConfiguration.topic=${storage.shared.logbroker.shard.out.topic}

storage.shardOutStreamListener.readQueues=64
storage.shardOutStreamListener.readQueueCapacity=128
storage.shardOutStreamListener.readDrainLimit=8

storage.shardOutStreamConsumer.onlyNewData=false
storage.shardOutStreamConsumer.maxUncommittedReads=512

storage.notLocalShardOutMessageWriter.topic=${storage.shared.logbroker.shard.out.topic}
storage.notLocalShardOutMessageWriter.numberOfPartitions=${storage.shared.logbroker.shard.out.number-of-partitions}

storage.notStableRegistrationProcessor.numberOfPartitions=${storage.shared.logbroker.shard.out.number-of-partitions}


# Cache
storage.readerChecksCache.size=${storage.shared.cache.checks.size}
storage.readerSkippedChecksCache.size=${storage.shared.cache.checks.size}
storage.readerIterationsCache.size=${storage.shared.cache.iterations.size}
storage.readerCheckTasksCache.size=${storage.shared.cache.check_tasks.size}
storage.readerCheckTaskStatisticsCache.size=${storage.shared.cache.check_tasks.size}
storage.readerChunkAggregatesCache.size=${storage.shared.cache.iterations.size}
storage.storageReaderCache.maxNumberOfWrites=10000


# Process
storage.eventsPoolProcessor.queueCapacity=10000
storage.eventsPoolProcessor.queueDrainLimit=128
storage.eventsStreamListener.readQueues=1
storage.eventsStreamListener.readQueueCapacity=16
storage.eventsStreamListener.readDrainLimit=4
storage.eventsStreamConsumer.onlyNewData=false
storage.eventsStreamConsumer.maxUncommittedReads=16


# Suspicious analysis
storage.manyTestsDeletedRule.deletedPercent=300
storage.manyTestsDeletedRule.deletedMin=7
storage.rightTimeoutsRule.rightPercent=300
storage.rightTimeoutsRule.totalPercent=25
