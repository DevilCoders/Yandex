# Spring
management.endpoints.web.exposure.include=prometheus,health
management.metrics.web.server.auto-time-requests=true
management.metrics.distribution.sla[http.server.requests]=10ms,20ms,30ms,50ms,100ms,200ms,300ms,400ms,500ms,600ms,700ms,800ms,900ms,1000ms,\
  2000ms,3000ms,4000ms,5000ms,6000ms,7000ms,8000ms,9000ms,10000ms,11000ms,12000ms,13000ms,14000ms,15000ms,16000ms,17000ms,18000ms,\
  19000ms,20000ms,21000ms,22000ms,23000ms,24000ms,25000ms,26000ms,27000ms,28000ms,29000ms,30000ms

# Shared
ci.shared.sandbox.url=https://sandbox.yandex-team.ru
ci.shared.sandbox.apiv1=${ci.shared.sandbox.url}/api/v1.0/
ci.shared.sandbox.apiv2=${ci.shared.sandbox.url}/api/v2/

ci.shared.tms.http.port=8080

# TVM
ci.tvmClient.selfTvmSecret=${ci.tvm.secret}
ci.tvmClient.blackboxEnv=
ci.blackboxTvmClientId.tvmId=223


# Sandbox
# TODO: fix this token copy
ci.sandbox.oauth-token=${ci.tms.sandbox.oauth-token}

ci.sandboxClientProperties.apiUrl=${ci.shared.sandbox.apiv1}
ci.sandboxClientProperties.apiV2Url=${ci.shared.sandbox.apiv2}
ci.sandboxClientProperties.oauthToken=${ci.sandbox.oauth-token}
ci.sandboxClientProperties.maxLimitForGetTasksRequest=

ci.proxySandboxClient.endpoint=https://proxy.sandbox.yandex-team.ru
ci.proxySandboxClient.oauthToken=${ci.sandbox.oauth-token}

# Tasklet V2
ci.taskletV2ClientProperties.endpoint=grpc.tasklets.yandex-team.ru:443
ci.taskletV2ClientProperties.connectTimeout=10s
ci.taskletV2ClientProperties.deadlineAfter=30s
ci.taskletV2Client.oauthToken=${ci.taskletv2.grpc-api.oauth-token}

ci.blackbox.host=http://blackbox.yandex-team.ru

ci.arcService.endpoint=arcd.test.arc-vcs.in.yandex-team.ru:6734
ci.arcService.connectTimeout=10s
ci.arcService.deadlineAfter=60s
ci.arcService.oauthToken=${ci.arc.grpc-api.oauth-token}
ci.arcService.processChangesAndSkipNotFoundCommits=false

# Testing: https://abc-back.test.yandex-team.ru/api/v4/
ci.abcClient.apiUrl=https://abc-back.yandex-team.ru/
# Testing: 2012192
ci.abcTvmClientId.tvmId=2012190

#
ci.abcTableClient.ytUrl=http://hahn.yt.yandex.net
ci.abcTableClient.token=${ci.yt.token}


ci.aYamlService.configCacheExpireAfterAccess=24h
ci.aYamlService.configCacheMaximumSize=10000

#Temporal
ci.temporalService.namespace=ci

# Pci express
ci.pciExpressClientProperties.endpoint=pciexpress-test.in.yandex-team.ru:80
ci.pciExpressClientProperties.connectTimeout=10s
ci.pciExpressTvmClientId.tvmId=2031915

# Logs
ci.logsClient.endpoint=query.logs.yandex-team.ru:443
ci.logsClient.connectTimeout=10s
ci.logsClient.deadlineAfter=120s
ci.logsTvmClientId.tvmId=2033513

# YDB
# YDB
ydb.kikimrConfig.ydbEndpoint=ydb-ru-prestable.yandex.net:2135
ydb.kikimrConfig.ydbDatabase=/ru-prestable/ci/testing/ci
ydb.kikimrConfig.ydbToken=${ci.ydb.oauth-token}
ydb.kikimrConfig.maxPoolSize=1024

# Lobroker
ci.logbrokerProxyBalancerHolder.host=lbkx.logbroker.yandex.net
ci.logbrokerTvmClientId.tvmId=2001059


# CI/FLOW-ENGINE settings
ci.flowLaunchMutexManager.mutexMapCapacity=512
ci.flowLaunchMutexManager.concurrencyLevel=512
ci.flowLaunchMutexManager.acquireMutexTimeout=60s
ci.flowLaunchMutexManager.oldMutexesCleanupTimeout=1h

ci.jobResourcesValidator.limitsResource=ci-core/limits/resource-limits.json
ci.curatorFramework.zookeeperTimeout=120s

ci.flowStateRevisionService.maxCasAttempts=50
ci.flowStateRevisionService.sleepBetweenRetriesMillis=100

ci.sourceCodeEntityService.resolveBeansOnRefresh=true

ci.flowTask.timeout=6h
ci.publicFlowTask.timeout=6h
ci.stageRecalcTask.timeout=6h

ci.jobScheduleTask.maxRetryCount=5
ci.jobScheduleTask.retry=10m
ci.jobScheduleTask.timeout=6h

# CI/ENGINE settings
ci.discoveryService.autocheckPostcommitsEnabled=false
ci.onCommitLaunchService.whiteListProjects=ci,ci-junk
ci.autoReleaseQueue.whiteListOfProcessIds=\
  ci/demo-project/a.yaml:r:demo-sawmill-release,\
  ci/demo-project/a.yaml:r:demo-sawmill-release-auto-graph-discovery,\
  ci/demo-project/a.yaml:r:demo-sawmill-release-conditional,\
  ci/demo-project/a.yaml:r:demo-sawmill-release-branches


ci.graphDiscoveryService.enabled=false
ci.graphDiscoveryService.sandboxTaskType=CHANGES_DETECTOR
# https://sandbox.yandex-team.ru/admin/groups/CI_GRAPH_DISCOVERY
ci.graphDiscoveryService.sandboxTaskOwner=CI_GRAPH_DISCOVERY
ci.graphDiscoveryService.useDistbuildTestingCluster=true
ci.graphDiscoveryService.secretWithYaToolToken=
ci.graphDiscoveryService.distBuildPool=//sas_gg/autocheck/gg/postcommits/tier0_discovery
ci.graphDiscoveryService.delayBetweenSandboxTaskRestarts=30s

ci.graphDiscoveryResultProcessorTask.sandboxResultResourceType=AFFECTED_TARGETS
ci.graphDiscoveryResultProcessorTask.timeout=15m
ci.graphDiscoveryResultProcessorTask.fileExistsCacheSize=1000
ci.graphDiscoveryResultProcessorTask.configBundleCacheSize=20
ci.graphDiscoveryResultProcessorTask.batchSize=10000

ci.pullRequestDiffSetCompleteTask.rescheduleDelay=3m
ci.launchCleanup.rescheduleDelay=1m

ci.discoveryProgressChecker.lastProcessedCommitInitializationDelay=10m
ci.discoveryProgressChecker.failIfUninitialized=true
ci.discoveryProgressChecker.maxProcessedCommitsPerRun=1000

ci.largePostCommitService.delayBetweenLaunches=2h
ci.largePostCommitService.delayBetweenSlowLaunches=8h
ci.largePostCommitService.closeLaunchesOlderThan=14d
ci.largePostCommitService.maxActiveLaunches=2

ci.largePostCommitCronTask.runDelay=5m
ci.largePostCommitCronTask.timeout=15m

ci.actionPostCommitCronTask.runDelay=5m
ci.actionPostCommitCronTask.timeout=15m

ci.pcmService.endpoint=distbuild-pool-config-manager.in.yandex-team.ru:10050
ci.pcmService.deadLineAfter=10s
ci.pcmService.bootstrapOnStart=true

ci.fastCircuitTargetsAutoResolver.cacheTtl=2h

ci.stressTestLaunchExecutor.corePoolSize=1
ci.stressTestLaunchExecutor.maxPoolSize=10
ci.stressTestLaunchExecutor.awaitTermination=30s

ci.launchTaskletV2Executor.checksInterval=5s

#Sandbox polling
ci.sandboxPollerSettings.minPollingInterval=2s
ci.sandboxPollerSettings.maxPollingInterval=60s
ci.sandboxPollerSettings.maxWaitOnQuotaExceeded=1800s
ci.sandboxPollerSettings.notUseAuditEachNRequests=100
ci.sandboxPollerSettings.updateTaskOutputEachNRequests=25
ci.sandboxPollerSettings.maxUnexpectedErrorsInRow=10

ci.accessService.adminAbcGroup=ci
ci.accessService.adminAbcScope=administration

ci.pullRequestService.mergeRequirementSystem=CI

# Clients
ci.tvmClient.selfTvmClientId=2018960

ci.testenv.url=https://testenv.yandex-team.ru/

ci.testenvDegradationManager.host=${ci.testenv.url}
ci.testenvDegradationManager.oauthToken=${ci.testenv.token}

ci.testenvClient.url=${ci.testenv.url}
ci.testenvClient.oauthToken=${ci.testenv.token}

ci.testenvClientWithLongRetry.url=${ci.testenv.url}
ci.testenvClientWithLongRetry.oauthToken=${ci.testenv.token}

ci.arcanumHttpClientProperties.url=https://arcanum-test.yandex-team.ru/
ci.arcanumTvmClientId.tvmId=2009943

ci.calendarClient.calendarUrl=https://calendar-api.tools.yandex.net/internal/
ci.calendarClientId.tvmId=2011072

ci.observerClient.apiUrl=https://ci-observer-api.yandex.net

ci.taskletService.sandboxBaseUrl=${ci.shared.sandbox.url}

ci.sandboxClientFactory.url=${ci.shared.sandbox.apiv1}
ci.sandboxClientFactory.urlV2=${ci.shared.sandbox.apiv2}

ci.securitySandboxClient.url=${ci.shared.sandbox.apiv1}
ci.securitySandboxClient.urlV2=${ci.shared.sandbox.apiv2}

ci.sandboxClientId.tvmId=2002826
ci.yavClient.host=https://vault-api.passport.yandex.net/
ci.yavClient.tvmSelfClientId=${ci.tvmClient.selfTvmClientId}
ci.yavClientId.tvmId=2001357


# xiva
ci.xivaClient.service=ci-testing
ci.xivaClient.endpoint=https://push.yandex-team.ru
ci.xivaTvmClientId.tvmId=2008783

ci.trackerClient.url=https://st-api.yandex-team.ru
ci.trackerSessionSource.url=https://st.yandex-team.ru

ci.staffTvmClientId.tvmId=2001974
ci.staffClient.staffUrl=https://staff-api.yandex-team.ru/

ci.storageApiClient.endpoint=ci-storage-api.testing.in.yandex-team.ru:9090
ci.storageApiClient.connectTimeout=1s
ci.storageApiClient.deadlineAfter=50s
ci.storageTvmClientId.tvmId=${ci.tvmClient.selfTvmClientId}

ci.discoveryProgressCheckerCronTask.runDelay=10s
ci.discoveryProgressCheckerCronTask.timeout=120s

ci.pcmUpdateCronTask.runDelay=5m
ci.pcmUpdateCronTask.timeout=1m

ci.pciDssDiscoveryProgressCheckerCronTask.runDelay=10s
ci.pciDssDiscoveryProgressCheckerCronTask.timeout=120s

ci.trackerWatchCronTask.runDelay=60s
ci.trackerWatchCronTask.timeout=180s

ci.abcRefreshCronTask.runDelay=15m
ci.abcRefreshCronTask.timeout=5m

ci.favoriteProjectsCronTask.runDelay=15m
ci.favoriteProjectsCronTask.timeout=5m


ci.urlService.arcanumUrl=https://arcanum-test.yandex-team.ru
