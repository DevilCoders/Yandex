title: "Build new version of tasklet"
description: "Makes tasklet Build and Schema"
maintainers: tasklets
sources: /tasklet/tasklets/lifecycle/build_tasklet
auto-rollback-mode: EXECUTE

tasklet-v2:
  namespace: test-tasklets
  tasklet: build_tasklet

versions:
  stable: stable

parameters:
  src:
    commit_or_branch: "${context.target_revision.hash}"
    arc_token:
      id: "${context.secret_uid}"
      key: "ci.token"
  make_result:
    resource_type: "TASKLET_EXECUTABLE"
    attributes:
      ttl: "180"
  schema:
    target: "tasklet/registry/common"
    file_name: "tasklet-registry-common.protodesc"
  schema_result:
    resource_type: "TASKLET_SCHEMA"
  tasklet_token:
    id: "${context.secret_uid}"
    key: "ci.token"
