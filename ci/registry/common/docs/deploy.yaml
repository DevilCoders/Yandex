title: DEPLOY_ARCADIA_DOCS job
description: Build and publish documentation to docs.yandex-team.ru using docs API and user-provided OAuth token
maintainers: ci
auto-rollback-mode: EXECUTE

sandbox-task:
  name: DEPLOY_ARCADIA_DOCS
  required-parameters:
    - targets

parameters:
  deploy_to: cloud
  checkout_arcadia_from_url: "arcadia-arc:/#${context.target_revision.hash}"
  ignore_auto_release_settings: true
  notify: false
  is_precommit: false
  use_aapi_fuse: true
  use_arc_instead_of_aapi: true
  result_single_file: true
  direct_api_upload: true
  docs_token: "${context.secret_uid}#ci.token"
  arc_secret: "${context.secret_uid}#ci.token"
