title: WeatherBuildPortoLayer
description: Build weather frontend porto layer with WEATHER_BUILD_PORTO_LAYER
maintainers: weatherfront

sandbox-task:
  name: WEATHER_BUILD_PORTO_LAYER
  required-parameters:
      - script_env

parameters:
  # перечисляем параметры нашей таски https://a.yandex-team.ru/arc_vcs/sandbox/projects/weather/WeatherBuildPortoLayer/__init__.py?rev=r8524566#L19
  # и параметры основной https://a.yandex-team.ru/arc_vcs/sandbox/projects/porto/BuildPortoLayer/__init__.py?rev=r9094544#L95
  parent_layer: 2257340775  # Результат последнего успешнего запуска WeatherBuildBasePortoLayer
  layer_type: PORTO_LAYER_WEATHERFRONTEND
  layer_name: ubuntu-xenial
  compress: tar.gz
  script: arcadia:/arc/trunk/arcadia/weather/frontend/front/tools/build_layer_frontend.sh
  script_env:
    BRANCH: trunk
    ST_RELEASE_TASK: WEATHERFRONT-8094
    RELEASE_TYPE: minor
  vault_env:
    ARC_CLI_TOKEN: sergets:ARC_CLI_TOKEN 
    STARTREK_TOKEN: sergets:STARTREK_TOKEN
    SANDBOX_OAUTH_TOKEN: sergets:SANDBOX_OAUTH_TOKEN
    AWS_ACCESS_KEY_ID: sergets:AWS_ACCESS_KEY_ID
    AWS_SECRET_ACCESS_KEY: sergets:AWS_SECRET_ACCESS_KEY
  start_os: true
  space_limit: 16384
  memory_limit: 16384

requirements:
  sandbox:
    # SSD почему-то так и не удается выбрать
    client_tags: SSD
    priority:
      class: SERVICE
      subclass: HIGH
