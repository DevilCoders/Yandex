title: WCM job
description: Run tests & publish report
maintainers: workcopy-merger
sources: /ci/tasklet/registry/common/misc/run_command

tasklet:
  implementation: RunCommand

requirements:
  # Default value for multi-slots
  # @see https://wiki.yandex-team.ru/sandbox/clients/#client-tags-multislot
  cores: 1
  sandbox:
    client_tags: GENERIC & LINUX & LXC
    # LXC with nvm
    # @see https://sandbox.yandex-team.ru/resources?owner=TRENDBOX_CI_TEAM&type=TRENDBOX_CI_LXC_IMAGE_BETA&hidden=true&attrs=%7B%22components%22%3A%22base%2Cnode_js%22%7D&created=2021-04-14T16%3A04%3A00Z..2022-04-14T16%3A04%3A00Z
    container_resource: 2272789686
    dns: local # DNS настроен в LXC

parameters:
  config:
    arc_mount_config:
      enabled: true
    logs_config:
      redirect_stderr_to_stdout: true
    result_resources:
      - path: report
        description: ${context.job_instance_id.job_id} report
        type: OTHER_RESOURCE
        optional: false
        ci_badge: true
        ci_badge_path: report.html
        compression_type: none

# @see https://a.yandex-team.ru/arcadia/ci/registry/common/misc/run_command.yaml?rev=r9400494#L13-15
versions:
  stable: 2876764261
  testing: 2876764261
