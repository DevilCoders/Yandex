title: Сборка проекта
description: Собирает проект при помощи ya package
maintainers: ci

sandbox-task:
  name: YA_PACKAGE_2
  required-parameters:
    - build_system
    - build_type
    - checkout_arcadia_from_url
    - package_type
    - publish_package
    - resource_type
    - run_tests

parameters:
  # build type
  build_system: semi_distbuild
  build_type: relwithdebinfo
  package_type: tarball
  publish_package: true
  resource_type: YA_PACKAGE
  run_tests: false

  # arcadia
  checkout_arcadia_from_url: "arcadia-arc:/#${context.target_revision.hash}"
  arc_secret: "${context.secret_uid}#ci.token"
  ya_yt_token_yav_secret: "${context.secret_uid}#ci.token"

  # Запускаем как бинарную задачу по умолчанию
  binary_executor_release_type: stable

requirements:
  sandbox:
    priority:
      class: SERVICE
      subclass: LOW

runtime:
  sandbox:
    notifications:
      - transport: email
        recipients:
          - crypta-ci
        statuses:
          - FAILURE
          - EXCEPTION
          - TIMEOUT
