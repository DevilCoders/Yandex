# comment
service: cidemo
title: "Yandex CI Demo Projects [graph discovery]"

ci:
  secret: sec-01e8agdtdcs61v6emr05h5q1ek
  runtime:
    sandbox-owner: CI

  releases:
    demo-sawmill-release-graph-discovery:
      title: "Graph discovery demo (example1: RESOURCE_FILES in ya.make)"
      description: |
        Демонстрирует, как триггерить CI-процессы при изменении конфига, который находится в другой рутовой директории Аркадии
        - Файл [py1/a.yaml](/arcadia/ci/demo-project/graph-discovery/example1/py1/a.yaml)
        - Проект `py1` зависит от [common/common.properties](/arcadia/ci/demo-project/graph-discovery/example1/common/common.properties) через макрос `RESOURCE_FILES` в [py1/ya.make](/arcadia/ci/demo-project/graph-discovery/example1/py1/ya.make)
        - Изменение `common/common.properties` стриггерит `py1/a.yaml` и все a.yaml'ы выше при условии, что graph-discovery включен

        Код: [demo-project/graph-discovery/example1](/arcadia/ci/demo-project/graph-discovery/example1)
      flow: sawmill
      filters:
        - discovery: graph
      tags: [ demo, sawmill ]

  flows:
    sawmill:
      title: Flow with dummy job
      jobs:
        dummy:
          title: dummy
          task: dummy
