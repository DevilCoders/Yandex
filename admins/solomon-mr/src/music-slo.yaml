delay: 60
average_over_secs: 300

juggler:
  host: music.slo

zookeeper:
  url: https://c.yandex-team.ru/api/groups2hosts/music-qa-zk
  lock: /music-slo

bases:
  default: &default
    project: music
    cluster: prod

  balancer: &balancer
    <<: *default
    service: balancer
    host: balancers

  websocket: &websocket
    <<: *default
    host: music-prod-back
    service: java

output:
  <<: *default
  service: slo

in_data:
  api5xx:
    <<: *balancer
    sensor: apiprod.5xx

  api2xx:
    <<: *balancer
    sensor: apiprod.2xx

  apiprc:
    <<: *balancer
    sensor: apiprod.timings.95_prc

  music5xx:
    <<: *balancer
    sensor: music.5xx

  music2xx:
    <<: *balancer
    sensor: music.2xx

  musicprc:
    <<: *balancer
    sensor: music.timings.95_prc

  radio5xx:
    <<: *balancer
    sensor: radio.5xx

  radio2xx:
    <<: *balancer
    sensor: radio.2xx

  radioprc:
    <<: *balancer
    sensor: radio.timings.95_prc

  musicwebext5xx:
    <<: *balancer
    sensor: musicwebext.5xx

  musicwebext2xx:
    <<: *balancer
    sensor: musicwebext.2xx

  musicwebextprc:
    <<: *balancer
    sensor: musicwebext.timings.95_prc

  mts2xx:
    <<: *balancer
    sensor: mtststablertc.2xx

  mts5xx:
    <<: *balancer
    sensor: mtststablertc.5xx

  mtsprc:
    <<: *balancer
    sensor: mtststablertc.timings.95_prc

  websocket2xx:
    <<: *websocket
    sensor: websocket.actions.completed

  websocket5xx:
    <<: *websocket
    sensor: websocket.actions.failed

  websocketprc:
    <<: *websocket
    sensor: websocket_timings.95_prc


check:
  apixx:
    left: api5xx
    right: api2xx
    scale: 0.0005

  apiprc:
    left: apiprc
    right: 0.5

  musicxx:
    left: music5xx
    right: music2xx
    scale: 0.0005

  musicprc:
    left: musicprc
    right: 0.75

  radioxx:
    left: radio5xx
    right: radio2xx
    scale: 0.005

  radioprc:
    left: radioprc
    right: 1.0

  musicwebextxx:
    left: musicwebext5xx
    right: musicwebext2xx
    scale: 0.0005

  musicwebextprc:
    left: musicwebextprc
    right: 0.5

  mtsxx:
    left: mts5xx
    right: mts2xx
    scale: 0.1

  mtsprc:
    left: mtsprc
    right: 1000  # this one is in ms

  websocketxx:
    left: websocket5xx
    right: websocket2xx
    scale: 0.02

  websocketprc:
    left: websocketprc
    right: 500  # ms

totals:
  daily: 86400
  weekly: 604800
  monthly: 2592000
