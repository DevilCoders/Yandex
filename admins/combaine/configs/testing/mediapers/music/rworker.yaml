---
name: music_test_rworker_java
parsing:
  groups: [music-test-rworker]
  DataFetcher:
    logname : "ichwill/music-worker/ichwill.log"
    timetail_url: "/timetail?&pattern=java&type=java&log_ts="
aggregate:
  data:
    java:
      type: custom
      class: Multimetrics
      perHost: YES
  senders:
    graphite:
      type: graphite
      cluster: media.music
    java_err:
      type: juggler
      Host: "music-test-rworker"
      Method: Juggler
      Aggregator: timed_more_than_limit_is_problem
      checkname: java_err
      description: java_err
      aggregator_kwargs:
        nodata_mode: force_ok
        limits: [{day_start: 1, day_end: 7, time_start: 0, time_end: 23, crit: 146%, warn: 0}]
      CRIT: ["${java}['java_error']>1"]
