---
name: mediapers_prestable_kp_web_execution_rtc
parsing:
  groups: [mediapers_prestable_kp_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_kp_web
  DataFetcher:
    logname : "ichwill/kp-web/execution.log"
    timetail_url: "/timetail?pattern=execution&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    graphite:
      type: graphite
      cluster: media.mediapers.kp.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_kp_web_nginx_handlers_rtc
parsing:
  groups: [mediapers_prestable_kp_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_kp_web
  DataFetcher:
    timetail_url: "/timetail?pattern=handles&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    graphite:
      type: graphite
      cluster: media.mediapers.kp.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_kp_web_nginx_rtc
parsing:
  groups: [mediapers_prestable_kp_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_kp_web
  DataFetcher:
    timetail_url: "/timetail?pattern=web&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    graphite:
      type: graphite
      cluster: media.mediapers.kp.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_kp_web_no_log_stats_rtc
parsing:
  groups: [mediapers_prestable_kp_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_kp_web
  DataFetcher:
    timetail_url: "/exec_pattern?pattern=no_log_stats&log_ts="
aggregate:
  data:
    no_log_stats:
      type: custom
      class: Multimetrics
      rps: "no"
      perHost: YES
  senders:
    graphite:
      type: graphite
      cluster: media.mediapers.kp.prestable
---
name: mediapers_prestable_kp_web_java_non_request_rtc
parsing:
  groups: [mediapers_prestable_kp_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_kp_web
  DataFetcher:
    logname : "ichwill/kp-web/ichwill.log"
    timetail_url: "/timetail?&pattern=java_non_request&type=java&log_ts="
aggregate:
  data:
    java_non_request:
      type: custom
      class: Multimetrics
      rps: "no"
      perHost: NO
      logHostResult: true
      logGroupResult: true
  senders:
    graphite:
      type: graphite
      cluster: media.mediapers.kp.prestable
