# Just graphite. Juggler checks for prestable defined in production
---
name: mediapers_prestable_music_web_execution_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    logname : "ichwill/music-web/execution.log"
    timetail_url: "/timetail?pattern=execution&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
      service: nginx
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_music_web_nginx_handlers_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    timetail_url: "/timetail?pattern=handles&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
      service: nginx
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_music_web_nginx_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    timetail_url: "/timetail?pattern=web&type=tskv&log_ts="
aggregate:
  data:
    nginx:
      type: custom
      class: Multimetrics
      factor: 1000
      values: [50, 75, 90, 95, 99, 100]
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
      service: nginx
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
      Fields: [ "50_prc", "75_prc", "90_prc", "95_prc", "99_prc", "100_prc" ]
---
name: mediapers_prestable_music_web_java_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    logname : "ichwill/music-web/ichwill.log"
    timetail_url: "/timetail?&pattern=java&type=java&log_ts="
aggregate:
  data:
    java:
      type: custom
      class: Multimetrics
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      service: java
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
---
name: mediapers_prestable_music_no_log_stats_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    timetail_url: "/exec_pattern?pattern=no_log_stats&log_ts="
aggregate:
  data:
    no_log_stats:
      type: custom
      class: Multimetrics
      rps: "no"
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      service: no_log_stats
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
---
name: mediapers_prestable_music_web_java_non_request_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    logname : "ichwill/music-web/ichwill.log"
    timetail_url: "/timetail?&pattern=java_non_request&type=java&log_ts="
aggregate:
  data:
    java_non_request:
      type: custom
      class: Multimetrics
      rps: "no"
      perHost: NO
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      service: java_non_request
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
---
name: mediapers_prestable_music_web_sysmon_rtc
parsing:
  groups: [mediapers_prestable_music_web_man, mediapers_prestable_music_web_sas]
  HostFetcher:
    type: "rtc"
    geo: [""]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: mediapers_prestable_music_web
  DataFetcher:
    timetail_url: "/exec_pattern?pattern=sysmon&log_ts="
aggregate:
  data:
    sysmon:
      type: custom
      class: Multimetrics
      rps: "no"
      perHost: YES
  senders:
    solomon:
      type: solomon
      cluster: prestable
      project: mediapers
      service: sysmon
    graphite:
      type: graphite
      cluster: media.mediapers.music.prestable
