---
name: music_solomonMonitoringByCountry
parsing:
  groups: [music_stable_back, music_prestable_back]
  HostFetcher:
    type: "rtc"
    geo: ["sas", "man", "vla"]
    BasicUrl: "http://nanny.yandex-team.ru/v2/services/%s/current_state/instances/"
  metahost: api.music.yandex.net
  DataFetcher:
    uri: "/timetail?pattern=monitoring_by_country&type=tskv&log_ts="
    type: http
    port: 3131
aggregate:
  data:
    monitoringByCountry:
      type: custom
      class: Ip2Country
  senders:
    someUniqueNameOrNotUniqueMayBeYourAdsHere:
      type: solomon
      cluster: prod
      project: music
      service: monitoringByCountry
      schema: ["country"] # Схема имен labels которые можно достать из пути к метрике
                          # например, я уверен, что все метрики отдаваемые loggiver-ом
                          # по урлу в этом конфиге, начинаются с имени страны.
                          # По заданной схеме соломон преобразует метрику вида
                          # Russia.200 в сенсор с именем 200 и label {'country': 'Russia'}
                          # Если схему не добавить, то будет сенсор с именем Russia.200
                          # Который не получится аггрегировать например по кодам 2xx
