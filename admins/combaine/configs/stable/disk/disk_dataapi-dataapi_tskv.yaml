---
parsing:
  groups: [disk_deploy_dataapi_stable]
  metahost: dataapi.disk.yandex.net
  DataFetcher:
    logname: 'yandex/dataapi/dataapi-access-tskv.log'
    timetail_url: '/timetail?pattern=dataapi_5xx_by_handle&type=java&log_ts='
aggregate:
  data:
    dataapi_5xx_by_handle:
      type: "custom"
      class: Multimetrics
  senders:
    graphite:
      cluster: "media.disk"
      type: graphite
---
name: disk_dataapi_stable-requests_http
parsing:
  groups: [disk_deploy_dataapi_stable]
  metahost: dataapi.disk.yandex.net
  DataFetcher:
    logname: "yandex/dataapi/dataapi-tskv.log"
    timetail_url: "/timetail?pattern=dataapi_tskv&type=java&log_ts="
aggregate:
  data:
    dataapi-tskv:
      type: "custom"
      class: "Multimetrics"
      values: [75, 90, 93, 94, 95, 96, 97, 98, 99, 99.5, 99.8, 99.9]
    dataapi_tskv:
      type: "custom"
      class: "Multimetrics"
      values: [75, 90, 93, 94, 95, 96, 97, 98, 99, 99.5, 99.8, 99.9]

  senders:
    graphite:
      cluster: "media.disk"
      type: graphite
      Fields: ["75_prc", "90_prc", "93_prc", "94_prc", "95_prc", "96_prc", "97_prc", "98_prc", "99_prc", "99_5_prc", "99_8_prc", "99_9_prc"]


---
name: disk_dataapi_stable-requests_pg
parsing:
  groups: [disk_deploy_dataapi_stable]
  metahost: dataapi.disk.yandex.net
  DataFetcher:
    logname: "yandex/dataapi/dataapi-tskv.log"
    timetail_url: "/timetail?pattern=requests_pg&type=java&log_ts="
aggregate:
  data:
    requests_pg:
      type: "custom"
      class: "Multimetrics"
      values: [75, 90, 93, 94, 95, 96, 97, 98, 99, 99.5, 99.8, 99.9]
  senders:
    graphite:
      cluster: "media.disk"
      type: graphite
      Fields: ["75_prc", "90_prc", "93_prc", "94_prc", "95_prc", "96_prc", "97_prc", "98_prc", "99_prc", "99_5_prc", "99_8_prc", "99_9_prc"]
