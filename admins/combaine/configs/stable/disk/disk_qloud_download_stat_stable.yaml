---
name: disk_qloud_download_stat_stable-logbroker_lag_uploader
parsing:
  groups: [disk_qloud_download_stat_stable]
  metahost: disk_qloud_download_stat_stable
  DataFetcher:
    type: http
    port: 3132
    uri: "/exec_pattern?pattern=logbroker_lag_uploader&timeout=100"
  Combainer:
    MINIMUM_PERIOD: 55
aggregate:
  data:
    logbroker_lag_uploader:
      type: "custom"
      class: "Max"
      rps: no

  senders:
    graphite:
      cluster: "media.disk"
      type: graphite

---
name: disk_qloud_download_stat_stable-logbroker_lag_downloader
parsing:
  groups: [disk_qloud_download_stat_stable]
  metahost: disk_qloud_download_stat_stable
  DataFetcher:
    type: http
    port: 3132
    uri: "/exec_pattern?pattern=logbroker_lag_downloader&timeout=100"
  Combainer:
    MINIMUM_PERIOD: 55
aggregate:
  data:
    logbroker_lag_downloader:
      type: "custom"
      class: "Max"
      rps: no

  senders:
    graphite:
      cluster: "media.disk"
      type: graphite

---
name: disk_qloud_download_stat_stable-logbroker_stat
parsing:
  groups: [disk_qloud_download_stat_stable]
  metahost: disk_qloud_download_stat_stable
  DataFetcher:
    logname: 'yandex/disk/download-stat-tskv.log'
    timetail_url: '/timetail?pattern=logbroker_stat&timeout=60&type=java&log_ts='
  Combainer:
    MINIMUM_PERIOD: 60
aggregate:
  data:
    logbroker_stat:
      type: "custom"
      class: "Multimetrics"

  senders:
    graphite:
      cluster: "media.disk"
      type: graphite

