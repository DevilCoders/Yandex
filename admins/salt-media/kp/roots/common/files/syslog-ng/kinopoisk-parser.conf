filter f_kinopoisk_parser {
    message("^kinopoisk_parser");
};

rewrite r_kinopoisk_parser {
        subst('kinopoisk_parser: ', '', value("MESSAGE") flags("utf8" "global"));
};

template t_kinopoisk_parser {
        template("$MSGONLY\n");
        template_escape(no);
};

destination df_kinopoisk_parser {
    file("/var/log/php/kinopoisk-parser.log"
        template(t_kinopoisk_parser)
        create_dirs(yes)
        dir_owner(www-data)
        dir_group(www-data)
        dir_perm(0755)
        owner(www-data)
        group(www-data)
        perm(0644)
    );
};

log {
    source(s_all);
    filter(f_kinopoisk_parser);
    rewrite(r_kinopoisk_parser);
    destination(df_kinopoisk_parser);
    flags(final);
};

