filter f_kinopoisk_awaps_gyt {
        message("^kinopoisk_gyt:.*tskv_format=kinopoisk-awaps-log");
};

template t_kinopoisk_awaps_gyt {
        template("$MSGONLY\n");
        template_escape(no);
};

rewrite r_kinopoisk_awaps_gyt {
        subst('kinopoisk_gyt: ', '', value("MESSAGE") flags("utf8" "global"));
};

destination d_kinopoisk_awaps_gyt {
        file("/var/log/php/kinopoisk-awaps-gyt.log"
                template(t_kinopoisk_awaps_gyt)
                create_dirs(yes)
                dir_owner(www-data)
                dir_group(www-data)
                dir_perm(0755)
                owner(www-data)
                group(www-data)
                perm(0644)
        );
};

log {
        source(s_all);
        filter(f_kinopoisk_awaps_gyt);
        rewrite(r_kinopoisk_awaps_gyt);
        destination(d_kinopoisk_awaps_gyt);
        flags(final);
};
