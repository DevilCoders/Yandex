filter f_kinopoisk_search {
        message("^kinopoisk_search:.*tskv_format=kinopoisk-search-log");
};

template t_kinopoisk_search {
        template("$MSGONLY\n");
        template_escape(no);
};

rewrite r_kinopoisk_search {
        subst('kinopoisk_search: ', '', value("MESSAGE") flags("utf8" "global"));
};

destination d_kinopoisk_search {
        file("/var/log/php/kinopoisk-search.log"
                template(t_kinopoisk_search)
                create_dirs(yes)
                dir_owner(www-data)
                dir_group(www-data)
                dir_perm(0755)
                owner(www-data)
                group(www-data)
                perm(0644)
        );
};

log {
        source(s_all);
        filter(f_kinopoisk_search);
        rewrite(r_kinopoisk_search);
        destination(d_kinopoisk_search);
        flags(final);
};
