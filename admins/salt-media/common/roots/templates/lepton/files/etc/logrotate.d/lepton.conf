/var/log/lepton/lepton-*.log
{
    missingok
    maxsize 5G
    rotate 14
    compress
    compresscmd /usr/bin/ionice
    compressoptions -c3 /usr/bin/pzstd -1 -p2
    compressext .zst
    delaycompress
    daily
    notifempty
    create 644 root adm
    dateext
    dateformat .%Y%m%d-%s
    copytruncate
}

/var/log/lepton/proxy.log
{
    missingok
    maxsize 5G
    rotate 14
    compress
    compresscmd /usr/bin/ionice
    compressoptions -c3 /usr/bin/pzstd -1 -p2
    compressext .zst
    delaycompress
    daily
    notifempty
    create 644 root adm
    dateext
    dateformat .%Y%m%d-%s
    sharedscripts
    postrotate
        kill -HUP `pgrep lepton-proxy`
    endscript
}
