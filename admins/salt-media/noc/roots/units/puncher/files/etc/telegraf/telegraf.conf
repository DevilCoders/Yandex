# generated by annushka

[agent]
collection_jitter = "4s"
flush_interval = "10s"
interval = "30s"
metric_batch_size = 2000
metric_buffer_limit = 200000
round_interval = true


[[inputs.conntrack]]

[[inputs.cpu]]
fielddrop = ["time_*"]
interval = "10s"
percpu = true
totalcpu = true

[[inputs.disk]]
ignore_fs = ["tmpfs", "devtmpfs", "devfs", "overlay", "aufs", "squashfs", "cgroup", "debugfs", "mqueue"]

[[inputs.diskio]]

[[inputs.ipmi_sensor]]
metric_version = 2
use_sudo = true

[[inputs.kernel]]

[[inputs.kernel_vmstat]]

[[inputs.mem]]

[[inputs.net]]
interval = "10s"

[[inputs.nstat]]

[[inputs.procstat]]
exe = "telegraf"
fielddrop = ["memory_swap", "cpu_time_guest", "cpu_time_guest_nice", "cpu_time_steal", "cpu_time_stolen", "pid", "rlimit_file_locks_soft", "nice_priority", "rlimit_num_fds_hard", "rlimit_num_fds_soft", "rlimit_realtime_priority_hard", "rlimit_realtime_priority_soft"]
tagexclude = ["pattern", "exe"]

[[inputs.procstat]]
fielddrop = ["memory_swap", "cpu_time_guest", "cpu_time_guest_nice", "cpu_time_steal", "cpu_time_stolen", "pid", "rlimit_file_locks_soft", "nice_priority", "rlimit_num_fds_hard", "rlimit_num_fds_soft", "rlimit_realtime_priority_hard", "rlimit_realtime_priority_soft"]
pattern = ".*puncher-.*"
tagexclude = ["pattern", "exe"]
user = "puncher"

[[inputs.procstat]]
exe = "mongod"
fielddrop = ["memory_swap", "cpu_time_guest", "cpu_time_guest_nice", "cpu_time_steal", "cpu_time_stolen", "pid", "rlimit_file_locks_soft", "nice_priority", "rlimit_num_fds_hard", "rlimit_num_fds_soft", "rlimit_realtime_priority_hard", "rlimit_realtime_priority_soft"]
tagexclude = ["pattern", "exe"]

[[inputs.system]]
fielddrop = ["uptime_format"]


[[outputs.http]]
data_format = "json"
timeout = "15s"
url = "http://grad.yandex.net/send?project=noc"


[[processors.regex]]

[[processors.regex.tags]]
key = "host"
pattern = "^([\\w\\-]+)\\..+$"
replacement = "${1}"


[[processors.strings]]

[[processors.strings.replace]]
new = "_"
old = "#"
tag = "process_name"
