{
  "core_node": true,
  "tmpdir": "/var/tmp/",
  "rt_filter": "{конюшня NOC} and not (({Cloud} and not {свитч для IPMI}) or {CloudNetbox} or {$nameless})",
  "diff_rt_filter": "not (({в оффлайне} and not {ещё не работает}) or {infiniband} or {interconnect}) and ({route reflector} or {серверный свитч} or {spine1} or {spine2} or {юзерский свитч} or {свитч для IPMI} or {пиринговый свитч} or {свитч агрегации} or {магистральный свитч} or {border router} or {datacenter core} or {YANET} or ({Autonomous WiFi точка} and ({Cisco} or ({iap master} and {Aruba}))))",
  "rt_staging": "https://test.racktables.yandex-team.ru",
  "logger": {
    "level": "DEBUG",
    "path": "/var/log/checkist/checkist.log"
  },
  "http": {
    "host": "::",
    "port": 8080
  },
  "mongo": {
    "host": "mongodb://checkist:{{pillar['sec']['mongodb-4k-password']}}@sas-mongo02.net.yandex.net,vla-mongo01.net.yandex.net,sas-mongo01.net.yandex.net,myt-mongo01.net.yandex.net/{{pillar['config']['mongo']['db_name']}}?replicaSet=rs0",
    "user": "checkist",
    "password": "",
    "use_tls": false,
    "tls_ca_path": "",
    "db_name": "{{pillar['config']['mongo']['db_name']}}"
  },
  "redis": {
    "name": "redis-1",
    "password": "{{pillar['sec']['redis-password']}}",
    "sentinels": [["sas1-chk1.yndx.net", 26379], ["myt-chk1.yndx.net", 26379], ["red1-chk1.yndx.net", 26379]]
  },
  "robot": {
    "name": "robot-checkist",
    "token": "{{pillar['sec']['checkist-oauth']}}"
  },
  "comocutor": {
    "login": "robot-noc-ck",
    "password": "{{pillar['sec']['comocutor-password']}}"
  },
  "zookeeper": {
    "nodes": [
    {%- for host in salt.conductor.groups2hosts('nocdev-zk') %}
        "{{ host }}:2181"{{ "," if not loop.last else "" }}
    {%- endfor %}
    ],
    "chroot": "/checkist/{{grains['yandex-environment']}}"
  },
{%- if grains['yandex-environment'] == 'production' %}
  "tvm": {
    "client_id": "2023520",
    "secret": "{{pillar['sec']['tvm-secret']}}"
  },
   "ck": {
    "url": "https://ck.yandex-team.ru"
  },
  "yt": {
    "proxy": "hahn",
    "token": "{{pillar['sec']['yt']}}",
    "diff_stat": {
      "table": "//home/net/checkist-diff-stats",
      "locations": {
        "ММТС9": ["ММТС9"],
        "StoreData": ["StoreData"],
        "Техногород": ["Марьина Роща 40"],
        "Elisa": ["ТП Кивиаиданкату 2"],
        "Digita": ["ТП Радиокату 5"],
        "Амстердам": ["Амстердам"],
        "Франкфурт-на-Майне": ["Франкфурт-на-Майне"],
        "Сасово": ["Сасово"],
        "Владимир": [
          "Владимир-1",
          "Владимир КЦ",
          "Владимир-2",
          "Владимир-2 КЦ",
          "Владимир-3",
          "Владимир-3 КЦ",
          "офис Владимир"
        ],
        "лаборатория Владимир": ["лаборатория Владимир"],
        "Мытищи": ["Мытищи"],
        "Ивантеевка": ["Ивантеевка"],
        "Мянтсяля": ["Мянтсяля"]
      },
      "roles": {
        "spine": ["spine1", "spine2"],
        "border": ["border router"],
        "tor": ["серверный свитч"],
        "ipmi": ["свитч для IPMI"],
        "офисная инфраструктура": ["офисная инфраструктура"],
        "свитч агрегации": ["свитч агрегации"],
        "пиринговый свитч": ["пиринговый свитч"],
        "datacenter edge": ["datacenter edge"],
        "многодэшка": ["многодэшка"]
      }
    }
  }
{%- else %}
  "tvm": {
    "client_id": "2023524",
    "secret": "{{pillar['sec']['tvm-secret-test']}}"
  },
  "ck": {
    "url": "https://ck-test.yandex-team.ru"
  }
{%- endif %}
}
