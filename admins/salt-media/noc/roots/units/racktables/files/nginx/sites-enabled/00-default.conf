# vim: set ft=nginx:

server {
    listen 80 reuseport default_server;
    listen [::]:80 ipv6only=on reuseport default_server;
    access_log /var/log/nginx-default-access.log main;
    error_log /var/log/nginx-default-error.log  notice;

    log_by_lua_file /etc/nginx/lua/solomon-metrics.lua;

    location / {
        return 444;
    }
    location /tftpboot/ {
        root /www;
    }
}
server {
    listen 443 ssl reuseport default_server;
    listen  [::]:443 ssl reuseport ipv6only=on default_server;
    ssl_certificate /etc/nginx/certs/wildcard.pem;
    ssl_certificate_key	/etc/nginx/certs/wildcard.key;
    access_log  /var/log/nginx-default-access.log main;
    error_log   /var/log/nginx-default-error.log  notice;

    log_by_lua_file /etc/nginx/lua/solomon-metrics.lua;

    return 403;
}
