pollers:
  SNMP network vmware:
    poller: snmp
    poller version: 2
    poller params:
      counters:
        - ifmib.ifName
        - ifmib.ifAlias
        - oid: ifmib.ifHighSpeed
          options: ["use_snmpget"]
        - oid: ifmib.ifHCInOctets
          options: ["use_snmpget"]
        - oid: ifmib.ifHCOutOctets
          options: ["use_snmpget"]
        - oid: ifmib.ifHCInUcastPkts
          options: ["use_snmpget"]
        - oid: ifmib.ifHCOutUcastPkts
          options: ["use_snmpget"]
        - oid: ifmib.ifInNUcastPkts
          options: ["use_snmpget"]
        - oid: ifmib.ifOutNUcastPkts
          options: ["use_snmpget"]
        - oid: ifmib.ifInDiscards
          options: ["use_snmpget"]
        - oid: ifmib.ifOutDiscards
          options: ["use_snmpget"]
        - oid: ifmib.ifInErrors
          options: ["use_snmpget"]
        - oid: ifmib.ifOutErrors
          options: ["use_snmpget"]
        - oid: ifmib.ifOperStatus
          options: ["use_snmpget"]
        - oid: ifmib.ifAdminStatus
          options: ["use_snmpget"]
        - oid: ifmib.ifLastChange
          options: ["use_snmpget"]
      post_fn: [check_net_data_stage1, sum_counters]
      skip_key_expr: {'ifname': '(vmk\d+)'}  # заблокирован так как наблюдается глюк у уменьшением счетчика
    filter: "{телефонный сервер} and {VMware} and {гипервизор} and [опрос SNMP]"
    series: network
    interval: 120
