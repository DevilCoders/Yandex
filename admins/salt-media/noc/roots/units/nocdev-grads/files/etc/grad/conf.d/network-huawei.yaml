variables:
  huawei_ifname_filter: &huawei_ifname_filter {ifname: '(NULL|(In)?LoopBack|.+-mplste|Sip|Virtual-Template)'}
  # NOCDEV-4299
  huawei_network: &huawei_network
    - {oid: ifmib.ifDescr, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifAlias, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifHighSpeed, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifInNUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutNUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.hwIfEtherStatInJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatInPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.ifInDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifInErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOperStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifAdminStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifLastChange, options: ["use_snmpget"]}
    - {oid: ifmib.ifInMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifInBroadcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutBroadcastPkts, options: ["use_snmpget"]}
  huawei_network_new: &huawei_network_new
    - {oid: ifmib.ifDescr, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifAlias, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifHighSpeed, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.hwIfEtherStatInJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatInPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.ifInDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifInErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOperStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifAdminStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifLastChange, options: ["use_snmpget"]}
    - {oid: ifmib.ifInMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifInBroadcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutBroadcastPkts, options: ["use_snmpget"]}

  huawei_network_ne40: &huawei_network_ne40
    - {oid: ifmib.ifDescr, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifAlias, options: ["use_snmpbulkget"]}
    - {oid: ifmib.ifHighSpeed, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutOctets, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCInUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifHCOutUcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.hwIfEtherStatInJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutJumboPkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatInPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.hwIfEtherStatOutPausePkts, options: ["use_snmpget", "none_to_zero"]}
    - {oid: ifmib.ifInDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutDiscards, options: ["use_snmpget"]}
    - {oid: ifmib.ifInErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutErrors, options: ["use_snmpget"]}
    - {oid: ifmib.ifOperStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifAdminStatus, options: ["use_snmpget"]}
    - {oid: ifmib.ifLastChange, options: ["use_snmpget"]}
    - {oid: ifmib.ifInMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutMulticastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifInBroadcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.ifOutBroadcastPkts, options: ["use_snmpget"]}
    - {oid: ifmib.hwXQoSIfQueueDiscardedPackets, options: ["use_snmpget", "none_to_zero"]}

pollers:
  SNMP network huawei:
    poller: snmp
    poller version: 2
    poller params:
      timeout: 5
      max_bytes: 1200 # некоторые хосты на площадках куда не проходят 1500 NOCREQUESTS-28224
      counters: *huawei_network
      post_fn: [check_net_data_stage1, rearrange_partial_data, huawei_counters_workaround,
                sum_ifmib_counters_new, check_net_data_sanity]
      skip_key_expr: *huawei_ifname_filter
      consistency_check: true
    filter: "({Huawei} and not {Huawei NE40E}) and [опрос SNMP] and not ([huawei v6only mgmt] or [частый опрос SNMP])"
    series: network
    interval: 60
    instances: 7

  SNMP network fast huawei:
    poller: snmp
    poller version: 2
    poller params:
      timeout: 10
      counters: *huawei_network_new
      post_fn: [check_net_data_stage1, rearrange_partial_data, huawei_counters_workaround,
                sum_ifmib_counters_new, check_net_data_sanity]
      skip_key_expr: *huawei_ifname_filter
    filter: "({Huawei} and not {Huawei NE40E}) and [опрос SNMP] and [частый опрос SNMP]"
    series: network_fast
    interval: 30
    instances: 5

  SNMP network v6only huawei:  # отличается от SNMP Huawei фильтром и параметром mtu  NOCREQUESTS-6081
    poller: snmp
    poller version: 2
    poller params:
      max_bytes: 400
      timeout: 7
      counters: *huawei_network
      post_fn: [check_net_data_stage1, rearrange_partial_data, huawei_counters_workaround,
                sum_ifmib_counters_new, check_net_data_sanity]
      skip_key_expr: *huawei_ifname_filter
      consistency_check: true
    filter: "({Huawei} and not {Huawei NE40E}) and [опрос SNMP] and [huawei v6only mgmt] and not [частый опрос SNMP]"
    series: network
    interval: 120
    instances: 5

  SNMP network huawei ne40:  # NOCDEV-2042
    poller: snmp
    poller version: 2
    poller params:
      counters: *huawei_network_ne40
      post_fn: [check_net_data_stage1, rearrange_partial_data, huawei_counters_workaround, huawei_ne40_counters_workaround,
                sum_ifmib_counters_new, check_net_data_sanity]
      skip_key_expr: *huawei_ifname_filter
      consistency_check: true
    filter: "({Huawei} and {Huawei NE40E}) and [опрос SNMP]"
    series: network
    interval: 30
