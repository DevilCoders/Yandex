akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
  loglevel = "ERROR"
}

remote {
  host = "iss3sas.yandex-team.ru"
  port = 9090
  max_total_connections = 3
  max_idle_connections = 1
}

agent {
  root = /db/iss3

  spaceToLeaveOnDisk = 10g

  autoUpdatePeriod = 60s
  autoSyncPeriod = 60s
  autoInCaseOfUnfinishedSyncPeriod = 15s
  aliveMarkerAllowedAge = 600s
  transitionTimestampAllowedDivergence = 1m

  shardtracker {
    host = "shardtracker.search.yandex.net"
    port = 9100
    timeout = 3000ms
    cacheLifeTime = 5m
  }

  webapp {
    port = 25536
  }

  synchronizer {
    persist {
      path = ${agent.root}/state
    }
  }

  feedback {
    resendPeriod = 30m
    maxSizePerInstanceKb = 200
  }

  jmx {
    mp {
      port = 25098
    }

    jolokia {
      policyLocation = "classpath:/jolokia.policy"
    }
  }

  container = "porto"

  porto {
    metaProcessContainer = "ISS-AGENT"
    socketPath = "/run/portod.socket"
    socketTimeOut = 8000
    workers = 2
    waitTimeout = 1s
    gc {
      filterByPrivateFields = true
    }
  }

  fetcher {
    simultaneous_tasks = 5
  }
}

servlet-dispatcher {
  type = Dispatcher
  executor = "thread-pool-executor"
  thread-pool-executor {
    core-pool-size-min = 0
    core-pool-size-factor = 1.0
    core-pool-size-max = 2
  }
}

local {
  configurations {
    cache {
      expire_after = 2m
      max_entries = 1000
    }
    loading_timeout = 10s
  }

  filter {
    threads = 1
  }

  configuration_filter {
    cache {
      expire_after = 1m
      max_entries = 100
    }
  }

  instance_filter {
    cache {
      expire_after = 1m
      max_entries = 1000
    }
  }

  loader {
    threads = 1
  }

  template_service {
    cache {
      expire_after = 1m
      max_entries = 10
    }
  }

  validator {
    threads = 8
    max_errors_for_rule = 100
  }

  creator {
    threads = 1
  }
}

