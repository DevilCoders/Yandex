<global>
    root_dir = /srv/storage
    log_dir = /var/log/elliptics
    pidfile_dir = /var/lib/ubic
    MALLOC_CONF = stats_print:true,lg_dirty_mult:8,lg_chunk:18,narenas:24,lg_tcache_max:13

    user = root   #this is hardcode now
    #user = www-data
    oom_adj_value = 0

    base_port = 1024
    config_format = mds27
    log_level = error
    ulimits = ulimit -l unlimited; ulimit -n 40000; ulimit -c unlimited
    listen_family = 10
    start_timeout_step = 0.5
    start_timeout_try = 50
    stop_timeout = 20
    flags = 4
    auth_cookie = {{ grains['conductor']['root_datacenter'] }}_{{ grains['conductor']['group'] }}_uniq
</global>

<extend_check>
    enabled = 1
    wait_timeout = 40
</extend_check>

<backend>
    io_thread_num = 10
    net_thread_num = 20
    nonblocking_io_thread_num = 5
    wait_timeout = 30
    check_timeout = 50
    queue_timeout = 150ms
    type = blob
    <blob>
        size = 1G
        records_in_blob = 100000

        flags = 64
        sync = 300

        defrag_timeout = 86400
        defrag_percentage = 25
    </blob>
    <smack>
        compression_type = zlib
        sync = 300
        cache_size = 1000
        bloom_size = 1024
        blob_num = 50
        cache_thread_num = 1
    </smack>
</backend>
