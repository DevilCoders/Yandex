{%- set cached_buckets = [
    "home",
    "plcn",
    "plcn-dev",
    "plcn-dump",
    "mobile-configs",
    "video-preview",
    "web4static",
    "taxi-promotions"
   ] %}

{%- for bucket in cached_buckets %}
    ~^(GET):{{ bucket }}\.s3\.yandex\.net:/.+ 1;
{%- endfor %}

{%- set buckets = [
    "maps-mocks",
    "plcn",
    "plcn-dev",
    "plcn-dump",
    "teamcity-update"
    ] %}

{%- for bucket in buckets %}
    ~^(GET):{{ bucket }}\.s3\.mds\.yandex\.net:/[^?]+$ 1;
    ~^(GET):s3\.mds\.yandex\.net:/{{ bucket }}/[^?]+$ 1;
{%- endfor %}

    ~^(GET):mapsapi-v3\.s3\.yandex\.net:/vector/(.*)/out/.+ 1;

    ~^(GET):video-preview\.s3\.mds\.yandex\.net:/[^?]+\?no_cache=1$ 1;
    ~^(GET):s3\.mds\.yandex\.net:/video-preview/[^?]+\?no_cache=1$ 1;

    # adfox
    ~^(GET):adfox-content\.s3\.yandex.net:/.+ 1;
    ~^(GET):content\.adfox\.ru:/.+ 1;
    ~^(GET):banners\.adfox\.ru:/.+ 1;
    ~^(GET):pdamts-content\.adfox\.ru:/.+ 1;
    ~^(GET):pdamts\.adfox\.ru:/.+ 1;

    # MDSSUPPORT-1032 new year cache for yandex stations
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/10\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/1\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/2\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/3\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/5\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/6\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/7\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/8\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/winter/without_audio/9\.mp4 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexstation/ota/user/21058ae8-e725-4e86-8376-5500d7a70766/quasar-2\.47\.5\.47\.858018861\.20201228\.39\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexmini/ota/release/a2098ef5-1a2f-44a1-ad4c-1069e93a7f30/quasar-1\.47\.4\.39\.852993202\.20201222\.zip 1;

    # MDSSUPPORT-1951 new year cache for yandex stations
    ~^(GET):quasar\.s3\.yandex\.net:/yandexmodule_2/ota/user/ffd3825b-c1d8-4df0-a109-54d5b6b4ba85/quasar-1163561144\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexstation/ota/user/654a86e2-e376-4840-920d-0cf68a780349/quasar-2\.95\.5\.9\.1160751064\.20211220\.44\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexstation_2/ota/user/a510b98c-3e24-485b-b1c9-1934746a518d/quasar-1\.95\.1\.9\.1160750686\.20211220\.57\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexstation_2/ota/user/4a4a8522-bbde-409f-9a32-660f0d20e360/quasar-1\.95\.1\.9\.1160750571\.20211220\.57\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexmini/ota/release/7b465d69-f8b4-4f5c-bdcd-ae3fd68399f4/quasar-1\.93\.4\.4\.1125847730\.20211112\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexmini_2/ota/user/fb3a116a-a8c1-43de-80e0-e742bc7e8a44/quasar-0\.96\.1\.18\.1161034656\.20211220\.44\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/yandexmicro/ota/user/073b8d0e-5b03-44d9-99b5-5e6fabf3c7a7/quasar-0\.96\.1\.8\.1151620062\.20211210\.42\.zip 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/1\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/2\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/3\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/5\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/6\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/7\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_1/new_year_season/pack_1/8\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/1\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/2\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/3\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/5\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/6\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/7\.mov 1;
    ~^(GET):quasar\.s3\.yandex\.net:/screensaver/station_2/new_year_season/pack_1/8\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/01\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/02\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/03\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/04\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/05\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/06\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/07\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/4K/08\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/01\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/02\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/03\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/04\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/05\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/06\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/07\.mov 1;
    ~^(GET):androidtvprod\.s3\.yandex\.net:/screensaver/ny_2022/HD/08\.mov 1;   
