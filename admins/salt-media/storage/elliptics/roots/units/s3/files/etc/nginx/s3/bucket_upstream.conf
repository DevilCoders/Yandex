    # https://st.yandex-team.ru/MDSSUPPORT-68
    #~^(HEAD|GET):edadeal-private-files\.s3-private\.mds\.yandex\.net:/.+ s3;

    # Other buckets
    ~^(HEAD|GET):.+\.s3\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):.+\.s3\.mds\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/ s3-goose;
    ~^(HEAD|GET):.+\.s3\.mds\.yandex\.net:/ s3-goose;
    ~^(HEAD|GET):.+\.s3-private\.mds\.yandex\.net:/.+ s3-goose;

    {%- set s3_python_buckets = [
        "addappter-bonus",
        "avia-receipts-prod",
        "avia-receipts-test",
        "bonus-docs-imported",
        "callcenter-private",
        "calls",
        "corp-education",
        "crm",
        "disk-backup-mongo",
        "disk-backup-pg",
        "district-takeout",
        "edadeal-private-1c",
        "fml",
        "goldencity",
        "hotosho",
        "idxapi-blue-market",
        "inhouse",
        "mc-media-migration",
        "media-storage-public",
        "messenger-test",
        "mongo-export-operations-tmp",
        "paysys-archiver-stable",
        "quality-control",
        "s3-trbo-rkn-dump",
        "sda-photos",
        "sda-videos",
        "sq2-mailextract-prod",
        "sq2-mailextract-rc",
        "takeout",
        "taxi-companion-docs",
        "taxi-script-logs",
        "taxiexamext",
        "vendors",
        "vendors-public",
        "yc-secrets",
        "yc-secrets-testing",
        "yc-secrets-prestable",
        "ydo-phone-records",
        "yql-mongo-operation-results",
        "spirit-documents"
    ] %}
    {%- for bucket in s3_python_buckets %}
    ~^[^:]+:{{ bucket }}\.s3\.mds\.yandex\.net: s3-goose;
    ~^[^:]+:s3\.mds\.yandex\.net:/{{ bucket }}/ s3-goose;
    {%- endfor %}


    # s3-goose
    ~^(HEAD|GET):tv-app-test\.s3\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):video-preview\.s3\.yandex\.net:/.+ s3-goose;
    #~^(HEAD|GET):vh-ott-converted\.s3\.mds\.yandex\.net:/.+ s3-goose;
    #~^(HEAD|GET):s3\.mds\.yandex\.net:/vh-ott-converted/.+ s3-goose;

    ~^(HEAD|GET):video-preview\.s3\.mds\.yandex\.net:/[^?]+[?]?$ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/video-preview/[^?]+[?]?$ s3-goose;

    ~^(HEAD|GET):content\.adfox.ru:/[^?]+ s3-goose;
    ~^(HEAD|GET):banners\.adfox.ru:/[^?]+ s3-goose;
    ~^(HEAD|GET):pdamts-content\.adfox.ru:/[^?]+ s3-goose;
    ~^(HEAD|GET):pdamts\.adfox\.ru:/[^?]+ s3-goose;

    ~^(HEAD|GET):vh-ott-converted\.s3\.mds\.yandex\.net:/vod-content/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/vh-ott-converted/vod-content/.+ s3-goose;

    ~^(HEAD|GET):vh-kp-converted\.s3\.mds\.yandex\.net:/vod-content/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/vh-kp-converted/vod-content/.+ s3-goose;

    ~^(HEAD|GET):vh-ya-news-converted\.s3\.mds\.yandex\.net:/vod-content/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/vh-ya-news-converted/vod-content/.+ s3-goose;

    ~^(HEAD|GET):vh-ott-converted\.s3\.mds\.yandex\.net:/ott-content/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/vh-ott-converted/ott-content/.+ s3-goose;

    ~^(HEAD|GET):zen-vod\.s3\.mds\.yandex\.net:/vod-content/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/zen-vod/vod-content/.+ s3-goose;

    ~^(HEAD|GET):mtr-transport-regions\.s3\.mds\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/mtr-transport-regions/.+ s3-goose;

    ~^(HEAD|GET):pano\.s3\.mds\.yandex\.net:/.+ s3-goose;
    ~^(HEAD|GET):s3\.mds\.yandex\.net:/pano/.+ s3-goose;
    ~^(HEAD|GET):pano\.maps\.yandex\.net:/.+ s3-goose;
