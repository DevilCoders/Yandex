version: '3.3'

services:
  s3lib_nginx:
    build: ./
    image: lua_s3lib_nginx_test
    ports:
      - target: 8888
        published: 8080
        protocol: tcp
    volumes:
      - type: bind
        source: ../
        target: /etc/nginx/include/s3
        read_only: true
      - type: bind
        source: ../../../../../../../nginx-proxy/files/usr/share/lua/5.1/
        target: /usr/share/lua/5.1/
        read_only: true
      - type: bind
        source: ./conf.d
        target: /etc/nginx/conf.d
        read_only: true
      - type: bind
        source: ./logs
        target: /var/log/nginx
        read_only: false
      - type: bind
        source: ./data
        target: /data
        read_only: false
