{%- raw %}
{
    "version": 4,
    "logging": {
        "loggers" : {
            "core": [
                {
                    "formatter": {
                        "type": "json",
                        "newline": true,
                        "unique": true,
                        "mapping": {
                            "message": "@message",
                            "timestamp": "@timestamp"
                        },
                        "routing": {
                            "": ["message", "timestamp"],
                            "/fields": "*"
                        },
                        "mutate": {
                            "timestamp": "%Y-%m-%dT%H:%M:%S.%fZ",
                            "severity": ["D", "I", "W", "E"]
                        }
                    },
                    "sinks": [
                        {
                            "type": "udp",
                             "host": "localhost",
                             "port": 50030
                        }
                    ]
                }
            ],
        "other": [
                {
                    "formatter": {
                        "type": "json",
                        "newline": true,
                        "unique": true,
                        "mapping": {
                            "message": "@message",
                            "timestamp": "@timestamp"
                        },
                        "routing": {
                            "": ["message", "timestamp"],
                            "/fields": "*"
                        },
                        "mutate": {
                            "timestamp": "%Y-%m-%dT%H:%M:%S.%fZ",
                            "severity": ["D", "I", "W", "E"]
                        }
                    },
                    "sinks": [
                        {
                            "type": "udp",
                            "host": "localhost",
                            "port": 50030
                        }
                    ]
                }
            ],
            "filelogger" : [
                {
                    "formatter": {
                        "type": "string",
                        "pattern": "{timestamp:{%c}} [{severity}] {source}: {message}"
                    },
                    "sinks": [
                        {
                            "type": "file",
                            "path": "/var/log/rsyslog-cocaine-filelogger/appstat.log"
                        }
                    ]
                }
            ]
        },
        "severity": "debug"
    },

    "network": {
        "pool": 2,
        "pinned": {
            "locator": 10061,
            "node": 10062,
            "storage": 10063
        },
        "shared":[30000,31111]
    },

    "paths": {
        "plugins": [
        "/usr/lib/cocaine-notsrw"
        ],
        "runtime": "/var/run/cocaine"
    },
    "authorizations": {
        "core": {
            "type": "promiscuous"
        }
    },
    "controllers": {
        "collection": {
                "type": "null"
        }
    },
    "services": {
        "logging": {
            "type": "logging",
            "args": {
                "backend": "other"
            }
        },

        "localnode": {
            "type": "localnode",
            "args" : {}
        },

        "locator": {
            "type": "locator"
        },

        "storage": {
            "type": "storage"
        },

        "node": {
            "type": "node::v2",
            "args": {
                "runlist": ""
            }
        }
    },
    "storages": {
        "core": {
            "type": "files",
            "args": {
                "path": "/var/lib/cocaine/"
            }
        }
    }
}
{%- endraw %}
