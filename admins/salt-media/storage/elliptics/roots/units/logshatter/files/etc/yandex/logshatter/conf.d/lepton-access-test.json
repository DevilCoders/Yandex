{
    "clickhouseTable": "lepton_access_test_logs",
    "dataRotationDays": 30,
    "sources": [
        "logbroker://lepton@testing--nginx-tskv"
    ],
    "logHosts": "*",
    "logPath": "{/var/log/nginx/tskv.log}",
    "parser": {
        "separator": "\t",
        "dateFormat": "yyyy-MM-dd'T'HH:mm:ss",
        "tskvMatch": {
            "timestamp": "date"
        },
        "conditions": [
            {
                "condition": "%{content_length} = \"-\"",
                "thenValues": {
                    "content_length": "0"
                }
            }
        ],
        "columns": {
            "scheme": {
                "default": "",
                "type": "String"
            },
            "protocol": {
                "default": "",
                "type": "String"
            },
            "ip": {
                "default": "",
                "type": "String"
            },
            "x_forwarded_for": {
                "default": "",
                "type": "String"
            },
            "x_real_ip": {
                "default": "",
                "type": "String"
            },
            "upstream_addr": {
                "default": "",
                "type": "String"
            },
            "referer": {
                "default": "",
                "type": "String"
            },
            "cookies": {
                "default": "",
                "type": "String"
            },
            "user_agent": {
                "default": "",
                "type": "String"
            },
            "request_id": {
                "default": "",
                "type": "String"
            },
            "method": {
                "default": "",
                "type": "String"
            },
            "status": {
                "default": 0,
                "type": "UInt16"
            },
            "upstream_status": {
                "default": "",
                "type": "String"
            },
            "bytes_received": {
                "default": 0,
                "type": "UInt64"
            },
            "bytes_sent": {
                "default": 0,
                "type": "UInt64"
            },
            "request_time": {
                "default": -1,
                "type": "Float64"
            },
            "processing_time": {
                "default": -1,
                "type": "Float64"
            },
            "upstream_response_time": {
                "default": "",
                "type": "String"
            },
            "upstream_cache_status": {
                "default": "",
                "type": "String"
            },
            "http_y_service": {
                "default": "",
                "type": "String"
            },
            "content_length":  {
                "default": 0,
                "type": "UInt64"
            },
            "size":  {
                "default": 0,
                "type": "UInt64"
            },
            "range":  {
                "default": "",
                "type": "String"
            },
            "ssl_session_id":  {
                "default": "",
                "type": "String"
            },
            "vhost":  {
                "default": "",
                "type": "String"
            },
            "host": {
                "type": "String"
            },
            "request":  {
                "default": "",
                "type": "String"
            }
        }
    }
}
