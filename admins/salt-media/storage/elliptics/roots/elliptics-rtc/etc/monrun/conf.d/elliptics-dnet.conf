[elliptics-dnet]
execution_interval=300
command=/usr/bin/elliptics.sh

[elliptics-space]
execution_interval=600
command=/usr/bin/elliptics_space.sh 150 100

[elliptics-queue]
execution_interval=300
command=/bin/bash -c 'res=$(elliptics-node-info.py 2>/dev/null | fgrep backend_id |sed -E "s/.*backend_queue_size=([0-9]).*/\1/" | grep -Pvc "^0\$"); if [ -f /etc/monitoring/elliptics-queue.conf ]; then source /etc/monitoring/elliptics-queue.conf; else queue=0; fi; [[ $res -gt $queue ]] && echo "2;queue is full" || echo "0;OK"'

[elliptics-defrag]
execution_interval=600
command=/bin/bash -c 'res=$(/usr/bin/elliptics-node-info.py 2>/dev/null | /bin/fgrep backend_id |/bin/sed -E "s/.*defrag=([0-9]).*/\1/" | /bin/grep -Pvc "^(0|1)\$"); [[ $res -gt 2 ]] && /bin/echo "1;defrag needed" || /bin/echo "0;OK"'

