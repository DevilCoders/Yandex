#root_dir = "/srv/storage"
#log_dir = "/var/log/elliptics"
#pidfile_dir = "/var/lib/ubic"
#user = "root"
#base_port = 1024


<global>
    config_format = mds27
    root_dir = /srv/storage
    log_dir = /var/log/elliptics
    pidfile_dir = /var/lib/ubic
    user = root   #this is hardcode now
    #user = www-data

    base_port = 1024
    listen_family = 10
    log_level = error

    ulimits = ulimit -l unlimited; ulimit -n 200000; ulimit -c unlimited
    max_disks = 160
    max_backends = 100

    start_timeout_step = 0.5
    start_timeout_try = 50
    stop_timeout = 20
    flags = 4
    enable_noroute = 1
    cache_size = none
    max_cache_disks = 1

    auth_cookie = media_test_elliptics_storage
    static_pool = 1

</global>

<extend_check>
    enabled = 1
    wait_timeout = 40
    do_stack_trace=0
</extend_check>

<top>
    enable=1
    top_length=50
    events_size=1000000
    period_in_seconds=120
</top>

<tskv>
   enable=1
   tskv_format=elliptics-storage-server-log
   type=elliptics-storage
</tskv>

<handystats>
    enable=1
    handystats_config=/etc/elliptics/handystats.json
</handystats>

<backend>
    io_thread_num = 16
    net_thread_num = 10
    nonblocking_io_thread_num = 10
    wait_timeout = 3
    check_timeout = 100
    queue_timeout = 3
    send_limit = 100

    #Variable for server-side scripting
    #srw_binary = /usr/bin/srw_worker
    #param m.b. missing

    type = blob

    <blob>
            size = 50G
            records_in_blob = 1000000

            #l2hash (64) + autosort_index (2048)
            flags = 2112
            sync = 120
            cache_size = 0

            defrag_timeout = 3600
            defrag_percentage = 5
    </blob>
</backend>

