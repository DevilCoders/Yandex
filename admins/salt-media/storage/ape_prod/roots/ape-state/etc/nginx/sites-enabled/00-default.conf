proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=dark:10m inactive=1d max_size=100M;

server {
        server_name localhost;
        listen 8080 default;
        listen [::]:8080 default;
        location / {
                proxy_pass http://localhost:6666;
                proxy_set_header Host $host;
                proxy_http_version 1.1;
                proxy_set_header Connection "";
                proxy_set_header X-Real-IP $remote_addr;
                proxy_read_timeout 120s;
        }
	location ~ ^/v1/(status|unistat) {
		proxy_pass http://localhost:6666;
                proxy_set_header Host $host;
                proxy_http_version 1.1;
                proxy_set_header Connection "";
                proxy_set_header X-Real-IP $remote_addr;
                proxy_read_timeout 120s;
                proxy_cache     dark;
                proxy_cache_key "$request_uri";
                proxy_cache_use_stale error timeout invalid_header updating http_500 http_503;
		proxy_cache_valid       200 301 302 3s;
                proxy_cache_valid       404 3s;
	}
}
