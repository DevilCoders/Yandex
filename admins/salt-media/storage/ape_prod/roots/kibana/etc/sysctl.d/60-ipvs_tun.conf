# https://wiki.yandex-team.ru/NOC/slb-TUN-RSSetup/

# для работы туннельных балансеров
net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.all.rp_filter = 0

# не принимаем icmp redirect, чтоб не портить свою маршрутизацию
net.ipv4.conf.all.accept_redirects = 0
# и не отправляем их - мы не роутер, а так, притворяемся
net.ipv4.conf.all.send_redirects = 0

# подстраиваем GC route-cache'а, чтоб не работал бесконечно (через туннель прилетают мильены сорс-адресов извне, и каждому запись в кэш)
net.ipv4.route.gc_elasticity = 8
net.ipv4.route.gc_interval = 60
net.ipv4.route.gc_min_interval = 0
net.ipv4.route.gc_min_interval_ms = 500
net.ipv4.route.gc_thresh = 3145728
net.ipv4.route.gc_timeout = 60

# подстраиваем GC
net.ipv6.neigh.default.gc_thresh1 = 1024
net.ipv6.neigh.default.gc_thresh2 = 2048
net.ipv6.neigh.default.gc_thresh3 = 4096
# дефолт ну оооочень маленький и в него легко упираться, приподнимаем
net.ipv6.route.max_size = 32768
