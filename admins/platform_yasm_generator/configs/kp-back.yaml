default:
  editors:
    - vyacheslav
    - gibzer
    - coldmind
    - sergeyv
  dc:
    - iva
    - sas
    - man
  balancer:
    cpu: 60%
    mem: 90%
    network: 80%
    502+504: 10%
    499: 3%
    5xx-(502+504): 1%
    upstream_errors: 10%
    listen_overflows: 100
  app:
    cpu: 60%
    mem: 90%
    network: 80%
    unispace: 60%
  juggler_tag:
    - kinopoisk-admin-phone-escalation
    - sre
  modify_checks:
    default:
      value_modify:
        type: aver # aver, max, min, summ
        window: 120 # seconds

kinopoisk.auth.production.auth-backend:
  balancer:
    name: kp-auth

kinopoisk.bo-api.production.bo-api:
  balancer:
    name: kp-internal-router

kinopoisk.movie-api.production.movie-api:
  balancer:
    name: kp-internal-router

kinopoisk.event-log-api.production.event-log-api:
  balancer:
    name: kp-internal-router

kinopoisk.film-list-api.production.film-list-api:
  balancer:
    name: kp-internal-router

kinopoisk.film-rating-api.production.film-rating-api:
  balancer:
    name: kp-internal-router

kinopoisk.film-service.production.backend:
  balancer:
    name: kp-internal-router

kinopoisk.image-api.production.image-api:
  balancer:
    name: kp-internal-router

kinopoisk.kp-graphql-api.production.backend:
  balancer:
    name: kp-graphql-balancer

kinopoisk.kp-graphql-api.production.backend-canary:
  balancer:
    name: kp-graphql-balancer

kinopoisk.kp-selections.production.kp-selections:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-api.production.kp1-api-ott:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-api.production.kp1-api:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-api.production.kp1-api-canary:
  balancer:
    name: kp-internal-router

kinopoisk.recommendation-api.production.api:
  balancer:
    name: kp-internal-router

kinopoisk.person-api.production.api:
  balancer:
    name: kp-internal-router

kinopoisk.navigator.production.backend:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-media-api.production.backend:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-api-internal.production.backend:
  balancer:
    name: kp-api-internal

kinopoisk.kp1-api-graphql.production.kp1-api-graphql:
  balancer:
    name: kp-internal-router

kinopoisk.kp1-api-graphql.production.kp1-api-graphql-canary:
  balancer:
    name: kp-internal-router

kinopoisk.ui-configuartor-api.production.api:
  balancer:
    name: kp-internal-router

kinopoisk.user-emails-api.production.user-emails-api:
  balancer:
    name: kp-internal-router

kinopoisk.seo-info-api.production.seo-info-api:
  balancer:
    name: kp-internal-router

kinopoisk.jaeger-collector.production.jaeger-collector:
  balancer:
    name: kp-jaeger

kinopoisk.ugc-filmrate-api.production.ugc-filmrate-api:
  balancer:
    name: kp-internal-router

kinopoisk.user-binding-forwarder-worker.production.worker:
  balancer: False

kinopoisk.search.production.jobs:
  balancer: False

kinopoisk.jaeger-query.production.query:
  balancer:
    name: kp-jaeger
    499: 50%
    502+504: 60%
    5xx-(502+504): 30%
    upstream_errors: 50%


kinopoisk.kp1-antifraud-voting-receiver-worker.production.kp1-antifraud-voting-receiver-worker:
  balancer: False

kinopoisk.zen-feed-api.production.zen-feed-api:
  balancer:
    name: kp-zen-feed

kinopoisk.quiz-and-questionnaire.production.quiz-and-questionnaire-api:
  balancer:
    name: kp-internal-router
  modify_checks:
    5xx-(502+504):
      value_modify:
        type: aver # aver, max, min, summ
        window: 40 # seconds
    cpu:
      value_modify:
        type: max # aver, max, min, summ
        window: 100 # seconds

kinopoisk.voting-system.production.voting-system:
  balancer:
    name: kp-internal-router
