# ‚ú®–ê—Ä–∫–∞–¥–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π‚ú® Upstream Salt üîÆ

## –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è
–ß—Ç–æ–±—ã –º—ã –ø–æ–Ω–∏–º–∞–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Ä–º–∏–Ω–æ–≤
- `–º–æ–¥—É–ª—å python` - —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∏—Ç–æ–Ω –º–æ–¥—É–ª—å, –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π `python` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ `import`
- `–º–æ–¥—É–ª—å salt-–∞` - —ç—Ç–æ —Ç–æ–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π python –º–æ–¥—É–ª—å, –Ω–æ salt –≥—Ä—É–∑–∏—Ç –µ–≥–æ —Ö–∏—Ç—Ä–æ–π –º–∞–≥–∏–µ–π `importlib`
- `–≥–µ—Ä–º–µ—Ç–∏—á–Ω—ã–π` - –Ω–µ –∑–∞–≤–∏—Å—è—â–∏–π –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—á–µ—Å—Ç–Ω–æ! —Å–æ–≤—Å–µ–º –Ω–µ –∑–∞–≤–∏—Å—è—â–∏–π)
- `–≤–∫–æ–º–ø–∏–ª–µ–Ω` - —É–ø–∞–∫–æ–≤–∞–Ω –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–¥–∞
- `–∫–∞—Å—Ç–æ–º–Ω—ã–π –º–æ–¥—É–ª—å` - —ç—Ç–æ –º–æ–¥—É–ª—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è salt-–∞ ([module][saltmods], [grains][saltgrains], [state][saltstate] ... [–ª—é–±–æ–π –∏–∑][module_types]) –¥–æ–±–∞–≤–ª—è—é—â–∏–π –∫ –Ω–µ–º—É –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `upstream salt` - –∫–æ–¥ ghtub.com/saltstack/salt –≤–∑—è—Ç—ã–π –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤
- `patchset` - –∫–∞—Ç–∞–ª–æ–≥ —Å –ø–∞—Ç—á–∞–º–∏ –∫ —Ä–µ–ª–∏–∑–Ω–æ–º—É –∫–æ–¥—É upstream salt

–ï—Å–ª–∏ –µ—â—ë —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ salt-–∞][saltdoc]

## –ß—Ç–æ —ç—Ç–æ –∏ –∑–∞—á–µ–º

–ß–∞—Å—Ç–æ –ø—Ä–∏ –Ω–∞–ª–∏–≤–∫–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–µ–ø–ª–æ–µ–º –ø–∞–∫–µ—Ç–æ–≤ salt-–∞, –∫–∞–∑–∞–ª–æ—Å—å –±—ã –ø—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞
- –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ç—è–Ω–µ—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∫—É—á—É –ø—Ä–æ–±–ª–µ–º:
- –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–µ–ø –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã
- —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–µ—Ä—Å–∏—è python –Ω–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö
- –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª–µ–≥–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ upstream –≥–¥–µ –ø–æ—Ñ–∏–∫—Å–∏–ª–∏ –∫—É—á—É –±–∞–≥–æ–≤

–ò –±–æ–ª—å –æ—Ç –Ω–∏—Ö —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –Ω–æ–≤—ã–º upstream —Ä–µ–ª–∏–∑–æ–º –∏ —Å –∫–∞–∂–¥—ã–º –Ω–æ–≤—ã–º –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–º
–∫–ª–∞—Å—Ç–µ—Ä–æ–º.

–ú–Ω–æ–≥–∏–º –∏–∑–≤–µ—Å—Ç–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ —Ñ–æ—Ä–∫–Ω—É—Ç—å upstream salt –∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø–∞–∫–µ—Ç –ø–æ –º–µ—Ä–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π.<br/>
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ç—É—Ç [github.yandex-team.ru/Salt/salt][Salt/salt].<br/>
–ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–π –±—ã–ª–∏ –≤ —Ç–æ–º, —á—Ç–æ —ç—Ç–æ –≤–µ—Å—å –∫–æ–¥ salt-–∞, –µ–≥–æ –º–Ω–æ–≥–æ –∏ –Ω–∞–∫–ª–∞–¥—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ø–∞—Ç—á–∏ –ø—Ä—è–º–æ –Ω–∞ –Ω–µ–≥–æ —Ç—Ä—É–¥–Ω–æ.<br/>
–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ —Å —ç—Ç–∏–º —Ñ–æ—Ä–∫–æ–º:
- –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–π —Ä–µ–ª–∏–∑ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ñ–∏–∫—Å–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –æ—Ç —Å–≤–æ–∏—Ö –ø–∞—Ç—á–µ–π
- –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ä–µ–∑–æ–ª–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫—É—á–∏ —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤
- –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–æ–¥—É–ª–∏ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ø–æ "–ø—Ä–∞–≤–∏–ª–∞–º" salt-–∞

–í—Å—ë —ç—Ç–æ —Å–ø–æ–¥–≤–∏–≥–ª–æ –Ω–∞—Å —Å–¥–µ–ª–∞—Ç—å –ø–æ–¥–æ–±–∏–µ –∞—Ä–∫–∞–¥–∏–∑–∞—Ü–∏–∏ –¥–ª—è upstream salt-–∞.

## –ß—Ç–æ —É–º–µ–µ—Ç —ç—Ç–æ—Ç –ø–∞–∫–µ—Ç

–í —ç—Ç–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ –ª–µ–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–∏–ª–∏–π –ø–æ –∞—Ä–∫–∞–¥–∏–∑–∞—Ü–∏–∏ upstream —Å–∞–ª—Ç–∞.<br/>
–ò–∑ —Å–∞–º—ã—Ö –∑–∞–º–µ—Ç–Ω—ã—Ö —Ñ–∏—á:
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–∏–º –ø–∞–∫–µ—Ç–æ–º `yandex-salt-components`
- –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ—Å—Ç—å, –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ç–æ–ª—å–∫–æ –∏–∑ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞, –Ω–µ—Ç —Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π –ø–∏—Ç–æ–Ω, —Ç–æ—Ç —á—Ç–æ –≤ –∞—Ä–∫–∞–¥–∏–∏ (–Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ä–∏–¥–º–∏ 3.9.9)
- yandex-components —Ç–∞–∫ –∂–µ –≤–∫–æ–º–ø–∏–ª–µ–Ω—ã –≤ –±–∏–Ω–∞—Ä—å –∏ –º–æ–≥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—é –∞—Ä–∫–∞–¥–∏—é
- –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–æ–¥—É–ª–∏ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –Ω–µ –æ–≥–ª—è–¥—ã–≤–∞—è—Å—å –Ω–∞ salt (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—è–∫–∏–µ `six` –∏ `salt.utils.*`)
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∞–º–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∫—Ä–∏–ø—Ç—ã (–∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö —Å–∞–ª—Ç–æ–º) `M2Crypto`

–í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º –ª—ë–≥–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É, –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ —Ñ–∏—á–∏ (–∏ –±–∞–≥–∏ –∫–æ–Ω–µ—á–Ω–æ üòÇ)

–í–º–µ—Å—Ç–µ —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π –≤—Å–µ—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥—É–ª–µ–π salt –∏–∑ [–Ω–∞—à–µ–≥–æ —Ñ–æ—Ä–∫–∞][Salt/salt] –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –º–æ–¥—É–ª–∏ –¥–ª—è [dynamic-roots][dynamic_roots] ([–Ω–∞—à–∞ –¥–æ–∫–∞ –ø—Ä–æ –Ω–∏—Ö][dynrootsdoc])

–¢–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Ç–∞–∫–æ–π
```
fileserver/dynamic_roots.py
pillar/dynamic_roots.py

grains/cauth.py
grains/conductor.py
grains/yandex_common.py

modules/conductor.py
modules/ldmerge.py
modules/yav.py

states/monrun.py
states/yafile.py
states/yanetconfig.py
```

–°—Ç–µ–π—Ç `states/yanetconfig.py` –ø–æ–∫–∞ —á—Ç–æ –Ω–µ —Ä–∞–±–æ—á–∏–π –¥–æ –º–∏–≥—Ä–∞—Ü–∏–∏ python-netconfig –≤ –∞—Ä–∫–∞–¥–∏—é ARCADIA-2547

## –ö–∞–∫ –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω–∏–º –ø–∞–∫–µ—Ç–æ–º `yandex-salt-components` –º–∞—Å—Ç–µ—Ä–æ–≤, –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö.
- –ü–æ—Å—Ç–∞–≤–∏—Ç—å –≤–µ–∑–¥–µ —ç—Ç–∏–º –∂–µ –ø–∞–∫–µ—Ç–æ–º –º–∏–Ω—å–æ–Ω–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å.
- ü™Ñ ‚ú®**–í—Å—ë!**‚ú®
- –ú–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è!

–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏ —Å–∞–ª—Ç–∞, –Ω–æ —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ —Å—Ç–æ–ª–∫–Ω—ë—Ç–µ—Å—å.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
–ü—Ä–∏–≤–µ–¥—É –∏—Ö —Å–ø–∏—Å–∫–æ–º

* –ú–æ–¥—É–ª–∏ –≤–∫–æ–º–ø–∏–ª–µ–Ω–Ω—ã–µ –≤ –±–∏–Ω–∞—Ä—å (–Ω–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ) –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `_modules, _states, _grains` –≤ `file_roots`,
  –º—ã —Å—á–∏—Ç–∞–µ–º —ç—Ç–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º!
* –¢–∞–∫ –∫–∞–∫ –Ω–µ—Ç –ø–æ—Ö–æ–¥–æ–≤ –≤ –§—Å –Ω–∞ —ç—Ç–∞–ø–µ –ø–∏—Ç–æ–Ω—è—á–∏—Ö `import`-–æ–≤, —Å–∞–ª—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –ø–∏—Ç–æ–Ω –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–æ–º–ø–∏–ª–µ–Ω—ã –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫.<br/>
  –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å `pip`-–æ–º –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∫–∞–∫–æ–π-—Ç–æ –ø–∞–∫–µ—Ç –∏ –ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –∫–∞—Å—Ç–æ–º–Ω–æ–º –º–æ–¥—É–ª–µ –∏–ª–∏ –≤ —Å–∞–º–æ–º `salt`<br/>
  **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Å—ë –Ω—É–∂–Ω–æ–µ –≤ —Å–±–æ—Ä–∫—É –≤ —ç—Ç–æ–º –ø–∞–∫–µ—Ç–µ.**

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
–ò–¥–µ—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è!

- –¥–µ–ª–∞–µ–º `PY_PROGRAM` (–±–∏–Ω–∞—Ä–Ω–∏–∫), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∏—Ç–æ–Ω –º–æ–¥—É–ª–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã upstream salt-–∞, –≤–æ—Ç [ya.make][ya_make].
- –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –ø—Ä—è–º–æ –≤ —Å–±–æ—Ä–∫—É –±–∏–Ω–∞—Ä–Ω–∏–∫–∞.
- –ø—Ä–∏—Ç–∞—Å–∫–∏–≤–∞–µ–º –∫–æ–¥ upstream salt-–∞ –∏–∑ —Ä–µ–ª–∏–∑–∞ –∏ –ø–∞–∫—É–µ–º –≤ –ø–∞–∫–µ—Ç —Å –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º, –≤–æ—Ç [–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è ya packages][ya_packages_conf]
- –≤ –ø–∞–∫–µ—Ç–µ `python –º–æ–¥—É–ª—å salt` –ª–µ–∂–∏—Ç –≤ `/opt/yandex_salt_components/salt/`
- –∏–Ω—Ç–µ—Ä–ø—Ä–∏—Ç–∞—Ç–æ—Ä –ø–∏—Ç–æ–Ω–∞ –µ–¥–µ—Ç —Å –Ω–∞—à–∏–º –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º! (—ç—Ç–æ –∏ –µ—Å—Ç—å –Ω–∞—à –±–∏–Ω–∞—Ä–Ω–∏–∫)
- —Ä–∞–∑—Ä–µ—à–∞–µ–º –±–∏–Ω–∞—Ä–Ω–∏–∫—É –≥—Ä—É–∑–∏—Ç—å –≤—Å–µ–≥–æ –æ–¥–∏–Ω python –º–æ–¥—É–ª—å —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã - —ç—Ç–æ –º–æ–¥—É–ª—å `salt` –∏ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω–∫–µ –æ—Ç –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∏—Ç–æ–Ω–∞.
- –¥–µ–ª–∞–µ–º symlink-–∏ `salt-master,salt-minion,salt-ssh,salt-key` –Ω–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫ –∏–∑ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞,
  —Ç–∞–∫ –æ–Ω –±—É–¥–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫—É—é —á–∞—Å—Ç—å –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø—É—Å—Ç–∏—Ç—å (–ø–æ—á—Ç–∏ —Ç–∞–∫ –∂–µ –¥–µ–ª–∞—é—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã).
- **–ø–æ–ª—å–∑—É–µ–º—Å—è**!!!

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –º–æ–¥—É–ª—è –≤ —Å–±–æ—Ä–∫—É

–ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª salt-–∞ –∫–∞–∫–∏–º-—Ç–æ —Å–≤–æ–∏–º –º–æ–¥—É–ª–µ–º [–Ω–∞–ø—Ä–∏–º–µ—Ä grain-–æ–º][saltgrains],
–∏–ª–∏ –ª—é–±—ã–º [–∏–∑ —Å–ø–∏—Å–∫–∞][module_types], —Ç–æ...
### –ü–∏—à–µ–º –∫–æ–¥
–ù—É–∂–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–∏—Ç—å –µ–≥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞.
–î–∞–ª—å—à–µ –Ω–∞–ø–∏—Å–∞—Ç—å –º–æ–¥—É–ª—å –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è [state][saltstate]),
–Ω–æ —Ç—É—Ç –º–æ–∂–Ω–æ –∏–∑–±–µ–≥–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `salt.utils` –∏ `salt.six`, –≤—Å–µ–≥–æ —Ç–æ–≥–æ,
—á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –≤–µ—Ä—Å–∏–π –ø–∏—Ç–æ–Ω–∞ –∏ –Ω–µ –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞ (—Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Å–º. –≤—ã—à–µ)

### –ü–æ–º–Ω–∏–º –ø—Ä–æ –∏–º–ø–æ—Ä—Ç—ã `python` –º–æ–¥—É–ª—è `salt`-–∞
–í—Ç–æ—Ä–æ–π –≤–∞–∂–Ω—ã–π –ø—É–Ω–∫—Ç, –∏–º–ø–æ—Ä—Ç—ã –∏–∑ `python` –ø–∞–∫–µ—Ç–∞ `salt` –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ,
–≤—ã –ø–æ–π–º—ë—Ç–µ –ø–æ—á–µ–º—É, –∑–∞–ø—É—Å—Ç–∏–º `ya make -t`.<br/>
–ü–æ—Ç–æ–º—É —á—Ç–æ –≤ –∞—Ä–∫–∞–¥–∏–∏ –Ω–µ—Ç `salt-–∞` –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ (–∏–º–ø–æ—Ä—Ç) –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —É–∂–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã,
–≥–¥–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–∏–Ω–∞—Ä–Ω–∏–∫, –Ω–æ —ç—Ç–æ –≤—Å—ë –µ—â—ë –≥–µ—Ä–º–µ—Ç–∏—á–Ω–æ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é.

### –í—ã–ø—Ä—è–º–ª—è–µ–º `import`-—ã
–¢—Ä–µ—Ç–∏–π —à–∞–≥ —Å–ª–æ–∂–Ω—ã–π, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∏–∑–æ–±—Ä–µ—Å—Ç–∏ `TOP_LEVEL` –∏–∑ –∞—Ä–∫–∞–¥–∏–π–Ω–æ–π —Å–±–æ—Ä–∫–∏ –ø–∏—Ç–æ–Ω–∞, —Ç–∞–∫ –∫–∞–∫ `TOP_LEVEL` –∑–∞–ø—Ä–µ—Ç–∏–ª–∏,
–¥–µ–ª–∞–µ–º –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ, –ø—Ä–∏–º–µ—Ä –¥–ª—è [pillar-–æ–≤][reimport_pillar] (—Å–º–æ—Ç—Ä–µ—Ç—å –≤ [`monkey_patching.py`][monkey_patching])

```(python)
def reimport_pillar():
    from admins.yandex_salt_components import pillar
    from admins.yandex_salt_components.pillar import dynamic_roots

    sys.modules["pillar"] = pillar
    sys.modules["pillar.dynamic_roots"] = dynamic_roots


```

### –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ reimport-–æ–≤
–ò –µ—Å–ª–∏ –º—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –Ω–æ–≤—ã–π —Ç–∏–ø –º–æ–¥—É–ª–µ–π, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫
```(python)
def patch_upsteam_salt():
    # Adding the trace method to the logger as a side effect
    # Therefore, the logger must be imported strictly after this call
    assert "logging" not in sys.modules
    monkeypath_salt_lazy_loader()

    reimport_fileserver()
    reimport_pillar()   # <<<- —Å—é–¥–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä
    reimport_grains()
    reimport_modules()
    reimport_states()
```

### –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ–º salt's LazyLoader-—É –∫–∞–∫ –∏–º–ø–æ—Ä—Ç–Ω—É—Ç—å –Ω–∞—à –º–æ–¥—É–ª—å
–ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥, —Ç–æ–∂–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –æ–Ω —Å–≤—è–∑–∞–Ω —Å monkey –ø–∞—Ç—á–∏–Ω–≥–æ–º `LazyLoader`-–∞.<br/>
–ù—É–∂–Ω–æ –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å LazyLoader-—É –æ —Ç–æ–º, —á—Ç–æ –Ω–∞—à –º–æ–¥—É–ª—å –≤–∫–æ–º–ø–∏–ª–µ–Ω –≤ –±–∏–Ω–∞—Ä—å.<br/>
–î–µ–ª–∞–µ–º –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ [`monkeypath_salt_lazy_loader`][monkeypath_salt_lazy_loader]
```(python)
def monkeypath_salt_lazy_loader():
    # allow to load external salt modules
    sys.path.append(get_salt_module_path())  # <<< NOTE: —Ç—É—Ç –≤—Å—è –º–∞–≥–∏—è –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–¥–∞ –∏–∑ —Ä–µ–ª–∏–∑–∞ upstream salt-–∞
    from salt.loader import lazy

    old_refresh = lazy.LazyLoader._refresh_file_mapping

    def _refresh_file_mapping(self):
        old_refresh(self)
        ...
        elif self.tag == "pillar":
            self.file_mapping["dynamic_roots"] = ("pillar.dynamic_roots", ".o", 0)  # <<< –í–æ—Ç —Ç–∞–∫
        ...

    lazy.LazyLoader._refresh_file_mapping = _refresh_file_mapping
```

### –†–µ–ª–∏–∑–∏–º
–ö–æ–Ω–µ—á–Ω–æ –∂–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç—ã –Ω–∞ –Ω–∞—à –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å!<br/>
–ó–∞–ø—É—Å–∫–∞–µ–º `ya make -t` –µ—Å–ª–∏ –≤—Å—ë –æ–∫, —Ç–æ –±–∞–º–ø–∞–µ–º –≤–µ—Ä—Å–∏—é –≤ [pkg.json][ya_packages_conf]<br/>
–ö–æ–º–º–∏—Ç–∏–º –∏ –∏–¥—ë–º –≤ [CI][ci_yandex_salt_components]<br/>
–î–µ–ª–∞–µ–º —Ç–∞–º –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑, —Ç–µ—Å—Ç–∏—Ä—É–µ–º –µ–≥–æ –≥–¥–µ-–Ω–∏–±—É–¥—å –≤ —Ç–µ—Å—Ç–∏–Ω–≥–µ!<br/>
–ï—Å–ª–∏ –≤—Å—ë –æ–∫, `dmove`-–∞–µ–º –µ–≥–æ –Ω–∞ `dist`-e –≤ `stable` –≤–µ—Ç–∫—É<br/>

## –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚ú®–ë–µ–∑ –º–∞–≥–∏–∏‚ú® —Ç—É—Ç –Ω–µ –æ–±–æ—à–ª–æ—Å—å, –Ω–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä–∞–∑,
—Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö —ç—Ç–æ–≥–æ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∏—Ç—å—Å—è —è –Ω–µ —Ä–∞—Å—Å–∫–∞–∂—É.

Salt –Ω–µ –≥—Ä—É–∑–∏—Ç –≤—Å–µ –º–æ–¥—É–ª–∏ —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `salt-call` –∏–ª–∏ `salt-minion`,
—É –Ω–µ–≥–æ –µ—Å—Ç—å `LazyLoader` –∫–æ—Ç–æ—Ä—ã–π —Ö–æ–¥–∏—Ç –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –≤–Ω—É—Ç—Ä–∏
`python` –ø–∞–∫–µ—Ç–∞ `salt`, —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –∫–æ–¥ –æ–±—Ä–∞—Ç–∏–ª—Å—è –∫ –∫–∞–∫–æ–º—É-—Ç–æ salt –º–æ–¥—É–ª—é.

–ï—Å–ª–∏ salt –º–æ–¥—É–ª—å –Ω–∞–π–¥–µ–Ω LazyLoader-–æ–º, –æ–Ω –æ—Ç–¥–∞—ë—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞.<br/>
–í –∫–æ–¥–µ upstream salt-–∞ –µ—Å—Ç—å –∑–∞—á–∞—Ç–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∫–æ–º–ø–∏–ª–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π,
–Ω–æ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–∞–∫–æ–º-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–º –Ω–µ —é–∑–∞–±–µ–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏
–∞—Ä–∫–∞–¥–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏—à–ª–æ—Å—å –Ω–µ–º–Ω–æ–≥–æ –ø–æ–ø–∞—Ç—á–∏—Ç—å —ç—Ç–æ—Ç —Å–∞–º—ã–π `LazyLoader`.

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ–ø–∏—Ö–Ω—É—Ç—å –≤ upstream —Ç–∞–∫–æ–π –ø–∞—Ç—á, –∫–æ—Ç–æ—Ä—ã–π
–ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç [`monkey_patching.py`][monkey_patching].
–ù–æ —ç—Ç–æ –∫–∞–∂–µ—Ç—Å—è –Ω–µ —Å–∏–ª—å–Ω–æ –≤–∞–∂–Ω—ã–º –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ–º, –∫—É–¥–∞ –≤–∞–∂–Ω–µ–µ —Ñ–∏–∫—Å–∏—Ç—å –±–∞–≥–∏,
–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à–ª–∏—Å—å –≤ upstream salt, –æ–± —ç—Ç–æ–º —è —Ä–∞—Å—Å–∫–∞–∂—É –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ–∫—Ü–∏–∏.

## –ö–∞–∫ —Ñ–∏–∫—Å–∏—Ç—å –±–∞–≥–∏ –≤ upstream salt

–ö–æ–Ω–µ—á–Ω–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å Pull Request –≤ upstream salt!<br/>
–ù–æ –∂–¥–∞—Ç—å –∫–æ–≥–¥–∞ —ç—Ç–æ—Ç PR –ø—Ä–∏–º—É—Ç –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å —É —Å–µ–±—è –±—ã–ª–æ –±—ã —Å—Ç—Ä–∞–Ω–Ω—ã–º,
–ø–æ—ç—Ç–æ–º—É –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `patchset`.<br/>

### –ü–∏—à–µ–º –ø–∞—Ç—á
[patchset][patchset] - —ç—Ç–æ –∫–∞—Ç–∞–ª–æ–≥ –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∏—Ç –Ω–∞–±–æ—Ä –ø–∞—Ç—á–µ–π —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö `git diff --no-prefix` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Å `python` –º–æ–¥—É–ª–µ–º `salt`-–∞<br/>
–ü–∞—Ç—á –¥–µ–ª–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –Ω–∞ –∫–æ–¥ —Ä–µ–ª–∏–∑–∞, –µ—Å–ª–∏ –ø–∞—Ç—á –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –Ω–∞–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–ª–∏–∑, –Ω—É–∂–Ω–æ –µ–≥–æ –ª–∏–±–æ —É–¥–∞–ª—è—Ç—å –ª–∏–±–æ —Ñ–∏–∫—Å–∏—Ç—å!<br/>
–í—Å–µ –ø–∞—Ç—á–∏ –ø–æ–¥–∫—Ä–µ–ø–ª—è—é—Ç—Å—è PR-–∫–∞–º–∏ –≤ upstream salt!<br/>
–í–æ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–π workflow —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ç—á–∞
```(shell)
TEMPDIR="$(mktemp -d)"
cd $TEMPDIR

RELEASE="3004"
FILE="salt-${RELEASE}.tar.gz"
URL="https://github.com/saltstack/salt/releases/download/v$RELEASE/$FILE"
curl -LOL "$URL"
tar xzf $FILE
pushd "${FILE%%.tar.gz}"
git init
git add .
git commit -m "init"
#
# –î–µ–ª–∞–µ–º —Ñ–∏–∫—Å—ã –≤ –∫–æ–¥
# –î–µ–ª–∞–µ–º
# –î–µ–ª–∞–µ–º
# –î–µ–ª–∞–µ–º
#
git diff --no-prefix > /path/to/the/arcadia/admins/yandex_salt_components/patchset/000N-file_name.py.patch
cd /path/to/the/arcadia/admins/yandex_salt_components
arc add patchset
arc commit ....
...
```

### –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–∞—Ç—á, –¥–µ–ª–∞–µ–º sandbox —Ä–µ—Å—É—Ä—Å –¥–ª—è ya package
–î–∞, —ç—Ç–æ –µ—â—ë –Ω–µ –≤—Å—ë!

NOTE: –≤ —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç–∞ `patch`.

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å [./make-sandbox-resource.sh 'SALT RELEASE NUMBER'][resource_maker]
(–¥–∞ –¥–∞, —ç—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Å—è –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ New CI / Sandbox)<br/>
–ó–∞–ø—É—Å–∫ `./make-sandbox-resource.sh` —Å–¥–µ–ª–∞–µ—Ç –ø–æ—á—Ç–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ —á—Ç–æ –º—ã —Å–¥–µ–ª–∞–ª–∏ –≤—ã—à–µ, –Ω–æ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è–º–∏:
- —Å–∫–∞—á–∞–µ—Ç —Ä–µ–ª–∏–∑ 
- —Ä–∞—Å–ø–∞–∫—É–µ—Ç –µ–≥–æ
- –Ω–∞–ª–æ–∂–∏—Ç –Ω–∞ –Ω–µ–≥–æ –ø–∞—Ç—á–∏ –∏–∑ [patchset][patchset]
- –∑–∞–ø–∞–∫—É–µ—Ç –≤—Å—ë –æ–±—Ä–∞—Ç–Ω–æ
- –∑–∞–ª—å—ë—Ç –≤ sandbox

–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å `ttl: inf` —É –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞,
–Ω–µ –¥–µ–ª–∞–µ–º —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ.<br/>
–ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —ç—Ç–æ–π —Ä—É—Ç–∏–Ω—ã –≤ CI –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–æ–º.

### –û–±–Ω–æ–≤–ª—è–µ–º `pkg.json`

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –≤–∑—è—Ç—å `id` –ø–æ–ª—É—á–∏–≤—à–µ–≥–æ—Å—è —Ä–µ—Å—É—Ä—Å–∞ –≤ `sandbox` –∏ –æ–±–Ω–æ–≤–∏—Ç—å [pkg.json][ya_packages_conf], —Ç–∞–∫ –∂–µ –±–∞–º–ø–∞–µ–º –≤–µ—Ä—Å–∏—é –ø–∞–∫–µ—Ç–∞.

–î–∞–ª—å—à–µ —Ä–µ–ª–∏–∑–∏–º, –≤—Å—ë –∫–∞–∫ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –º–æ–¥—É–ª—è

–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–æ—á–∏—Ç–∞–ª–∏!


  [Salt/salt]: <https://github.yandex-team.ru/Salt/salt/>
  [dynamic_roots]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/fileserver/dynamic_roots.py>
  [dynrootsdoc]: <https://wiki.yandex-team.ru/noc/nocdev/ops/salt/>
  [ya_make]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/ya.make>
  [saltdoc]: <https://docs.saltproject.io/en/getstarted/>
  [saltmods]: <https://docs.saltproject.io/en/latest/ref/modules/index.html>
  [saltgrains]: <https://docs.saltproject.io/en/latest/topics/grains/index.html#writing-grains>
  [saltstate]: <https://docs.saltproject.io/en/latest/ref/states/writing.html#using-custom-state-modules>
  [module_types]: <https://docs.saltproject.io/en/latest/topics/development/modules/index.html#module-types>
  [ya_packages_conf]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/pkg.json>
  [monkey_patching]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/monkey_patching.py?rev=adcd3140b581b2ac99839016a4553ecf59f82974#L67>
  [patchset]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/patchset/>
  [resource_maker]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/make-sandbox-resource.sh>
  [reimport_pillar]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/monkey_patching.py?rev=adcd3140b581b2ac99839016a4553ecf59f82974#L58>
  [monkeypath_salt_lazy_loader]: <https://a.yandex-team.ru/arc_vcs/admins/yandex_salt_components/monkey_patching.py?rev=adcd3140b581b2ac99839016a4553ecf59f82974#L84>
  [ci_yandex_salt_components]: <https://a.yandex-team.ru/projects/nocdev/ci/releases/timeline?dir=admins%2Fyandex_salt_components&id=release>
