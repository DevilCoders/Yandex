- hosts: localhost
  gather_facts: False
  vars:
    host: sport-test-mongo
    type: testing
    host_tags:
      - test

  pre_tasks:
    - juggler_facts: jserver_api={{ jserver_search_api }}
    - include_vars: "vars"
  post_tasks:
    - juggler_cleanup: #jcheck_mark={{ host }} # commented for clean up all checks made with playbook

  tasks:
    - include: tasks/unreachable.yml
    - include: tasks/common-check.yml
    - include: tasks/specific-check.yml
      vars:
        checks:
          - iptables_reject
          - mongodb-alive
          - mongodb-connections-available
          - mongodb-connections-current
          - mongodb-flush-average-ms
          - mongodb-globalLock-activeClients-total
          - mongodb-globalLock-read-queue
          - mongodb-globalLock-write-queue
          - mongodb-indexes-miss-ratio
          - mongodb-indexes-to-memory-ratio
          - mongodb-master-changed
          - mongodb-master-present
          - mongodb-pool
          - mongodb-replica-lag
          - mongodb-resident-to-memory-ratio
          - mongodb-rs-indexes-consistency
          - mongodb-uptime
          - mongodb-asserts-user
          - mongodb-restore
