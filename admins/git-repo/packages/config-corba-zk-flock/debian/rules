#!/usr/bin/make -f
override_dh_install:
	mkdir -p debian/{config-corba-zk-flock,config-corba-zk-flock-production,config-corba-zk-flock-testing,config-corba-zk-flock-tools}/
	rm -fr debian/{config-corba-zk-flock,config-corba-zk-flock-production,config-corba-zk-flock-testing,config-corba-zk-flock-tools}/*

# dir for logs
	mkdir -p debian/config-corba-zk-flock/var/log/zk-flock/
	chmod 777 debian/config-corba-zk-flock/var/log/zk-flock/

# logrotate
	mkdir -p debian/config-corba-zk-flock/etc/logrotate.d/
	cp zk-flock-logrotate debian/config-corba-zk-flock/etc/logrotate.d/zk-flock

# configs (distributed-lock.json)
	mkdir -p debian/config-corba-zk-flock-production/etc/
	mkdir -p debian/config-corba-zk-flock-testing/etc/
	mkdir -p debian/config-corba-zk-flock-tools/etc/
	cp distributed-flock.json-vlan622 debian/config-corba-zk-flock-production/etc/distributed-flock.json
	cp distributed-flock.json-vlan639 debian/config-corba-zk-flock-testing/etc/distributed-flock.json
	cp distributed-flock.json-vlan629 debian/config-corba-zk-flock-tools/etc/distributed-flock.json

# symlinks
	mkdir -p debian/config-corba-zk-flock-production/usr/bin/
	mkdir -p debian/config-corba-zk-flock-testing/usr/bin/
	mkdir -p debian/config-corba-zk-flock-tools/usr/bin/
	ln -s /usr/bin/zk-flock debian/config-corba-zk-flock-production/usr/bin/corba-zk-flock
	ln -s /usr/bin/zk-flock debian/config-corba-zk-flock-testing/usr/bin/corba-zk-flock
	ln -s /usr/bin/zk-flock debian/config-corba-zk-flock-testing/usr/bin/tools-zk-flock
	ln -s /usr/bin/zk-flock debian/config-corba-zk-flock-tools/usr/bin/tools-zk-flock

%:
	dh $@

