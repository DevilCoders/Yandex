#!/bin/sh

case $1 in
    configure)
        sed -i 's/RSYNC_ENABLE=.*/RSYNC_ENABLE=true/' /etc/default/rsync || true
        mkdir -p /var/lib/corba/mobile-export/
        mkdir -p /usr/local/www5/favicon-export
        mkdir -p /usr/local/www/phonedetect
        mkdir -p /usr/local/www/static
        nameclt bind_new_context Yandex || true
        nameclt bind_new_context Yandex/DPS || true
        nameclt bind Yandex/DPS/NewEventChannel.id IOR:010000002500000049444c3a6f6d6e692f6f6d6e694576656e74732f4576656e744368616e6e656c3a312e300000000001000000000000007c00000001010200130000006470732e79616e6465782d7465616d2e72750000a12b00001d000000ff322e383332332e3462313738616466004576656e744368616e6e656c0000000200000000000000080000000100000000545441010000001c00000001000000010001000100000001000105090101000100000009010100 || true
        nameclt bind_new_context Yandex/Validator || true
        nameclt bind Yandex/Validator/Email.id IOR:010000001900000049444c3a59616e6465782f56616c696461746f723a312e3000000000010000000000000078000000000102000000001b76616c696461746f722e636f7262612e79616e6465782e6e6574000072f800000000001f004f4f00fe504f41fe56616c696461746f72504f41fe56616c696461746f72000000000100000001000000200000000005010001000000020001000100010020000101090000000100010100 || true
        nameclt bind_new_context Yandex/Blogs || true
        nameclt bind Yandex/Blogs/Blogger.id IOR:010000001c00000049444c3a59616e6465782f426c6f672f426c6f676765723a312e300001000000000000008c0000000101020017000000626c6f67732e636f7262612e79616e6465782e6e65740000527100000e000000ff626c6f677300426c6f6767657200000300000000000000080000000100000000545441010000001c000000010000000100010501000000010001050901010001000000090101000300000014000000010000000a0000006c6f63616c686f737400f388 || true
		nameclt bind Yandex/Blogs/BloggerAux.id IOR:010000001f00000049444c3a59616e6465782f426c6f672f426c6f676765724175783a312e300000010000000000000090000000010102001b000000626c6f67732d6175782e636f7262612e79616e6465782e6e65740000ea88000029000000ff426c6f6773417578696c69617279496d706c504f4100426c6f6773417578696c69617279496d706c0000000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100
        nameclt bind_new_context Yandex/WMConsole || true
        nameclt bind Yandex/WMConsole/WMCNotifier.id IOR:010000002000000049444c3a59616e6465782f5265717565737450726f636573736f723a312e300001000000000000007c000000000102000000001d776d636e6f7469666965722e636f7262612e79616e6465782e6e65740000831800000023004f4f00fe504f41fe574d434e6f746966696572504f41fe574d434e6f746966696572000000000100000001000000200000000005010001000000020001000100010020000101090000000100010100 || true
        nameclt bind_new_context Yandex/Maps || true
        nameclt bind Yandex/Maps/Keyserv.id IOR:010000001c00000049444c3a59616e6465782f4d6170732f4b6579736572763a312e300001000000000000007000000001010200190000006b6579736572762e636f7262612e79616e6465782e6e65740000b67110000000ff6b657973657276006b6579736572760200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
	nameclt bind Yandex/Maps/Mymaps.id IOR:010000001b00000049444c3a59616e6465782f4d6170732f4d794d6170733a312e30000001000000000000007000000001010200180000006d796d6170732e636f7262612e79616e6465782e6e657400b87100000e000000ff6d796d617073006d796d61707300000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind_new_context Yandex/Market || true
        nameclt bind Yandex/Market/PersGrade.id IOR:010000002000000049444c3a59616e6465782f5265717565737450726f636573736f723a312e3000010000000000000078000000010102001c000000706572732d67726164652e636f7262612e79616e6465782e6e6574007a9400001f000000004f4f00fe504f41fe506572734772616465504f41fe506572734772616465000100000001000000200000000000000005010001000000020001000100010020000101090000000100010100 || true
        nameclt bind Yandex/Market/PersBasket.id IOR:010000001d00000049444c3a59616e6465782f4d61726b65742f4261736b65743a312e300000000001000000000000007c000000000102000000001d706572732d6261736b65742e636f7262612e79616e6465782e6e6574000094b500000021004f4f00fe504f41fe506572734261736b6574504f41fe506572734261736b65740000000000000100000001000000200000000005010001000000020001000100010020000101090000000100010100 || true
        nameclt bind_new_context Yandex/Hyper || true
        nameclt bind Yandex/Hyper/Guru.id IOR:010000001400000049444c3a59616e6465782f677572753a312e3000010000000000000074000000010102001b0000006d61726b6574677572756461656d6f6e2e79616e6465782e727500007572000010000000ff4775727500477572754461656d6f6e0200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind_new_context Yandex/Questions || true
        nameclt bind Yandex/Questions/Python.id IOR:010000001b00000049444c3a59616e6465782f5175657374696f6e7350793a312e30000001000000000000007c000000010102001d0000007175657374696f6e7370792e636f7262612e79616e6465782e6e65740000d27817000000ff5175657374696f6e73504f41005175657374696f6e73000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind_new_context Yandex/Maps || true
        nameclt bind_new_context Yandex/Maps/Wiki || true
        nameclt bind Yandex/Maps/Wiki/Social.id IOR:010000002000000049444c3a59616e6465782f4d6170732f57696b692f536f6369616c3a312e300001000000000000007c000000010102002100000077696b696d6170732d736f6369616c2e636f7262612e79616e6465782e6e65740000ba7113000000ff57696b696d6170504f410057696b696d6170000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind Yandex/Maps/Wiki/Core.id IOR:010000002000000049444c3a59616e6465782f4d6170732f57696b694d6170436f72653a312e3000010000000000000084000000010102001f00000077696b696d6170732d636f72652e636f7262612e79616e6465782e6e65740000b97100001c000000ff77696b696d6170732d636f72650077696b696d6170732d636f72650200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
	
	nameclt -advanced bind_new_context Yandex/Maps/RadioJam || true
	nameclt bind Yandex/Maps/RadioJam/Web.id IOR:010000002400000049444c3a59616e6465782f526164696f4a616d2f526164696f4a616d5765623a312e3000010000000000000088000000010102001e000000726164696f6a616d2d7765622e636f7262612e79616e6465782e6e657400687e240000004a4f2e59616e6465782f776562526164696f4a616d504f412f776562526164696f4a616d020000000000000008000000000000004a414300010000001c00000000000000050100010000000105010001000101090000000105010001

        nameclt bind Yandex/WMConsole/WMCDispatcher.id IOR:010000002400000049444c3a59616e6465782f574d436f6e736f6c652f446973706174636865723a312e3000010000000000000080000000010102001a000000776d63646973702e7365617263682e79616e6465782e6e657400e6821f000000ff574d4344697370617463686572504f4100574d4344697370617463686572000200000000000000080000000100000000545441010000001c00000001000000010001000100000001000105090101000100000009010100 || true
	nameclt bind Yandex/PPBRatings.id IOR:010000001a00000049444c3a59616e6465782f505042526174696e67733a312e30000000010000000000000078000000010102001d0000007070622d726174696e67732e636f7262612e79616e6465782e6e65740000587f13000000ff53657276616e74504f410053657276616e74000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 ||true
        nameclt bind_new_context Yandex/PPB || true
        nameclt bind Yandex/PPB/Searcher.id IOR:010000001c00000049444c3a59616e6465782f5050422f53656172636865723a312e300001000000000000007c000000010102001e0000007070622d73656172636865722e636f7262612e79616e6465782e6e657400757415000000ff5365617263686572504f410053656172636865720000000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind_new_context Yandex/Maps/Wiki || true
        nameclt bind Yandex/Maps/Wiki/Social.id IOR:010000002000000049444c3a59616e6465782f4d6170732f57696b692f536f6369616c3a312e300001000000000000007c000000010102002100000077696b696d6170732d736f6369616c2e636f7262612e79616e6465782e6e65740000ba7113000000ff57696b696d6170504f410057696b696d6170000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
	nameclt bind Yandex/Maps/Wiki/Social-pro.id IOR:010000002000000049444c3a59616e6465782f4d6170732f57696b692f536f6369616c3a312e3000010000000000000080000000010102002500000077696b696d6170732d736f6369616c2d70726f2e636f7262612e79616e6465782e6e65740000bc7113000000ff57696b696d6170504f410057696b696d6170000200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind Yandex/Maps/Wiki/Core.id IOR:010000001e00000049444c3a59616e6465782f4d6170732f57696b692f436f72653a312e30000000010000000000000084000000010102001f00000077696b696d6170732d636f72652e636f7262612e79616e6465782e6e65740000b97100001c000000ff77696b696d6170732d636f72650077696b696d6170732d636f72650200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
        nameclt bind Yandex/Maps/Wiki/Core-pro.id IOR:010000001e00000049444c3a59616e6465782f4d6170732f57696b692f436f72653a312e30000000010000000000000090000000010102002300000077696b696d6170732d636f72652d70726f2e636f7262612e79616e6465782e6e65740000bb71000024000000ff77696b696d6170732d636f72652d70726f0077696b696d6170732d636f72652d70726f0200000000000000080000000100000000545441010000001c00000001000000010001050100000001000105090101000100000009010100 || true
	nameclt bind_new_context Yandex/Fotki || true
	nameclt bind Yandex/Fotki/Web.id IOR:010000001900000049444c3a59616e6465782f466f746b692f5765623a312e300000000001000000000000007c00000000010200000000103231332e3138302e3230352e313834007d0300000000001d4a432e466f746b692f666f746b69576562504f412f776562466f746b69000000000000020000000000000008000000004a41430000000001000000200000000005010001000000010001000105010001000000020001010900010100 || true
        nameclt bind_new_context Yandex/Maps || true
	update-rc.d smailik-preparer defaults
        chmod -R a+w /var/spool/smailik*

        rm -f /etc/network/if-up.d/ntpdate

        ;;
    abort-upgrade|abort-remove|abort-deconfigure)
        ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        ;;
esac

exit 0
